_id	projectname	assignee	summary	description	type_id	type_name	labels	priority_id	priority_name	status_id	status_name
12311770	AXIS	venkat	XPathAPI cannot find namespace nodes in Axis dom	"XPathAPI is unable to locate any namespace nodes in the DOM representing a SOAPEnvelope when used like this:

// message/connection stuff omitted
SOAPMessage reply = connection.call(msg, serviceEndpoint);

Element root = reply.getSOAPPart().getDocumentElement();

try {
	NodeList nodeList = XPathAPI.selectNodeList(root, ""//namespace::*"");
	System.out.println(""Found ""+nodeList.getLength()+"" namespace nodes."");
} catch (TransformerException e) {
	e.printStackTrace();
}


Serializing the SOAPPart using Xalan to do an identity transform results in:

<?xml version=""1.0"" encoding=""UTF-8""?>
<soap:Envelope xmlns:soap=""http://schemas.xmlsoap.org/soap/envelope/"">
<soapenv:Header xmlns:soapenv=""http://schemas.xmlsoap.org/soap/envelope/""/>
<soap:Body>
<SomeElement  xmlns=""http://my.namespace.uri/"">
.
.
.
</SomeElement>
</soap:Body>
</soap:Envelope>


"	1	Bug	dom-compatibility	3	Major	1	Open
12312352	AXIS	jayachandra	DOMException (NAMESPACE_ERR) if we run a XPath Query using Sun JDK1.5 on a SOAPPart DOM	"The following problems show up I use the XPath interpreter
shipped with Sun JDK 1.5 to locate nodes in a Axis created
SOAPPart DOM. 

1) After creating a message and adding a header, if I run a
   XPath query, one of two things happen depending on
   whether or not I call toString() on the envelope before
   the XPath query.

     a) If I call soapEnvelope.toString() before I run a
        XPath query on the DOM, I see a DOMException
        saying: ""NAMESPACE_ERR: An attempt is made to create
        or change an object in a way which is incorrect with
        regard to namespaces."" The stack trace is attached
        below.
     b) If I do not call soapEnvelope.toString() before I run a
        xapth query on the DOM, I see that the namespace
        prefixes have disappeared for actor and
        mustUnderstand attributes of the WS-Security header.

2) The method, getNamespaceURI, is not implemented in
   SOAPPart! Seems like too basic a method to not
   implement. See the stack trace below.

Thanks
prasad

Stack Trace for Bug 1a
======================
org.w3c.dom.DOMException: NAMESPACE_ERR: An attempt is made to create or change an object in a way which is incorrect with regard to namespaces.
	at org.apache.xerces.dom.CoreDocumentImpl.checkNamespaceWF(Unknown Source)
	at org.apache.xerces.dom.AttrNSImpl.setName(Unknown Source)
	at org.apache.xerces.dom.AttrNSImpl.<init>(Unknown Source)
	at org.apache.xerces.dom.CoreDocumentImpl.createAttributeNS(Unknown Source)
	at org.apache.axis.message.NodeImpl.convertAttrSAXtoDOM(NodeImpl.java:745)
	at org.apache.axis.message.NodeImpl.getAttributes(NodeImpl.java:323)
	at org.apache.axis.message.SOAPHeaderElement.getAttributes(SOAPHeaderElement.java:274)
	at com.sun.org.apache.xml.internal.dtm.ref.dom2dtm.DOM2DTM.nextNode(DOM2DTM.java:530)
	at com.sun.org.apache.xml.internal.dtm.ref.DTMDefaultBase._firstch(DTMDefaultBase.java:533)
	at com.sun.org.apache.xml.internal.dtm.ref.DTMDefaultBase.getFirstChild(DTMDefaultBase.java:973)
	at com.sun.org.apache.xml.internal.dtm.ref.DTMDefaultBaseTraversers$ChildTraverser.first(DTMDefaultBaseTraversers.java:411)
	at com.sun.org.apache.xpath.internal.axes.AxesWalker.getNextNode(AxesWalker.java:324)
	at com.sun.org.apache.xpath.internal.axes.AxesWalker.nextNode(AxesWalker.java:360)
	at com.sun.org.apache.xpath.internal.axes.WalkingIterator.nextNode(WalkingIterator.java:191)
	at com.sun.org.apache.xpath.internal.axes.NodeSequence.nextNode(NodeSequence.java:280)
	at com.sun.org.apache.xpath.internal.axes.NodeSequence.runTo(NodeSequence.java:434)
	at com.sun.org.apache.xml.internal.dtm.ref.DTMNodeList.<init>(DTMNodeList.java:79)
	at com.sun.org.apache.xpath.internal.objects.XNodeSet.nodelist(XNodeSet.java:338)
	at com.sun.org.apache.xpath.internal.jaxp.XPathExpressionImpl.getResultAsType(XPathExpressionImpl.java:351)
	at com.sun.org.apache.xpath.internal.jaxp.XPathExpressionImpl.eval(XPathExpressionImpl.java:98)
	at com.sun.org.apache.xpath.internal.jaxp.XPathExpressionImpl.evaluate(XPathExpressionImpl.java:178)
	at AxisDOMBug.bug1a(AxisDOMBug.java:81)
	at AxisDOMBug.main(AxisDOMBug.java:30)

Stack Trace for Bug 2
=====================
Exception in thread ""main"" org.w3c.dom.DOMException: 
	at org.apache.axis.message.SOAPDocumentImpl.getNamespaceURI(SOAPDocumentImpl.java:670)
	at org.apache.axis.SOAPPart.getNamespaceURI(SOAPPart.java:1255)
	at com.sun.org.apache.xml.internal.dtm.ref.dom2dtm.DOM2DTM.addNode(DOM2DTM.java:259)
	at com.sun.org.apache.xml.internal.dtm.ref.dom2dtm.DOM2DTM.<init>(DOM2DTM.java:128)
	at com.sun.org.apache.xml.internal.dtm.ref.DTMManagerDefault.getDTM(DTMManagerDefault.java:246)
	at com.sun.org.apache.xml.internal.dtm.ref.DTMManagerDefault.getDTMHandleFromNode(DTMManagerDefault.java:539)
	at com.sun.org.apache.xpath.internal.XPathContext.getDTMHandleFromNode(XPathContext.java:154)
	at com.sun.org.apache.xpath.internal.XPath.execute(XPath.java:234)
	at com.sun.org.apache.xpath.internal.jaxp.XPathExpressionImpl.eval(XPathExpressionImpl.java:123)
	at com.sun.org.apache.xpath.internal.jaxp.XPathExpressionImpl.eval(XPathExpressionImpl.java:97)
	at com.sun.org.apache.xpath.internal.jaxp.XPathExpressionImpl.evaluate(XPathExpressionImpl.java:178)
	at AxisDOMBug.bug2(AxisDOMBug.java:143)
	at AxisDOMBug.main(AxisDOMBug.java:32)
"	1	Bug	dom-compatibility	2	Critical	1	Open
12313704	DERBY	dagw	Support deferrable constraints	"In many situations it is desirable to have constraints checking taking place only at transaction commit time, and not before. If e.g. there is a chain of foreign key constraints between tables, insert statements have to be ordered to avoid constraint violations. If foreign key references are circular, the DML has to be split into insert statements and subsequent update statements by the user.

In other words, with deferred constraints checking, life is much easier for the user. Also it can create problems with softwares such as object-relational mapping tools that are not prepared for statement ordering and thus depend on deferred constraints checking.
"	4	Improvement	derby_triage10_11	3	Major	6	Closed
12313741	DERBY	knutanders	Support use of the WHEN clause in CREATE TRIGGER statements	"Support use of the WHEN clause in CREATE TRIGGER statements. The clause is described in the SQL standard (2003) in chapter ""11.39 <trigger definition>"" under ""<triggered action>"".

There are traces in the code that suggests some work has been done on this earlier. If anyone knows something about this, please add a comment to this issue."	4	Improvement	derby_triage10_11	4	Minor	6	Closed
12325258	DERBY	dagw	Get rid of the NodeFactory	"This piece of code once had a purpose in life. It was one of the double-joints which allowed cloudscape to ship with and without compiler support for the synchronization language. Synchronization has been removed. If we want to plug in optional language components, I think there are better ways to do this.

The NodeFactory turned into a big, sprawling piece of code. At some point this code was slimmed down by telescoping all of its factory methods into a couple unwieldly, weakly-typed overloads backed by cumbersome logic in the actual node constructors. I would like to reintroduce strongly typed node constructors which the parser can call directly. This will make node generation easier to read and less brittle and it will get rid of the now useless NodeFactory class."	4	Improvement	derby_triage10_11	3	Major	6	Closed
12325476	DERBY	bashitha	Incorrect line number in the error message when parser throws syntax error in some specific examples	"After connecting to a database through ij, parser returns correct line number for the sql ""select"" the first time around but it returns incorrect line number when the same sql is rexecuted, as shown below
$ java org.apache.derby.tools.ij
ij version 10.2
ij> connect 'jdbc:derby:c:/dellater/db1';
ij> select
;
ERROR 42X01: Syntax error: Encountered ""<EOF>"" at line 1, column 8.
ij> select
;
ERROR 42X01: Syntax error: Encountered ""<EOF>"" at line 2, column 8.
ij>

This is caused by UCode_CharStream's UpdateLineColumn method. When the sql ""select"" is executed the first time, the parser comes to UpdateLineColumn method for trailing \r and then for trailing \n for the first line ""select"". The trailing \n causes the prevCharIsLF to be set to true. Since this sql is incorrect by itself, parser will throw a syntax error. After the exception and before the processing of next sql ""select"", this prevCharIsLF flag does not get set to false(this is the problem). When the first character ""s"" is read, UpdateLineColumn checks if prevCharIsLF set to true and if yes, it increments(incorrectly) the line number to 2 and that is why the second time around, execution of ""select"" gives syntax error at line 2 rather than line 1.

This also causes problem with the optimizer hints when they are used in incorrect context as shown below. 
$ java org.apache.derby.tools.ij
ij version 10.2
ij> connect 'jdbc:derby:c:/dellater/db1';
ij> -- derby-properties
select * from t1;
ERROR 42X01: Syntax error: Encountered ""derby-properties"" at line 1, column 4.
ij> -- derby-properties
select * from t1;
ERROR 42X01: Syntax error: Encountered ""derby-properties"" at line 2, column 4."	1	Bug	derby_triage10_5_2	4	Minor	1	Open
12325675	XERCESJ	ishara	[GSoC]: Support for xml:id	"Hi,

The XInclude ID support should handle xml:id. This is useful for instance with DocBook or TEI that use Relax NG schemas for validation and also need XInclude support.
Here it is a patch that adds support for handling xml:id attributes as attributes of ID type.

Index: C:/george/workspace/xerces/src/org/apache/xerces/xpointer/ShortHandPointer.java
===================================================================
--- C:/george/workspace/xerces/src/org/apache/xerces/xpointer/ShortHandPointer.java	(revision 344362)
+++ C:/george/workspace/xerces/src/org/apache/xerces/xpointer/ShortHandPointer.java	(working copy)
@@ -162,6 +162,17 @@
             }
         }
         
+        if (normalizedValue == null && attributes != null) {
+        	// Try to see if we can get an xml:id
+        	for (int i = 0; i < attributes.getLength(); i++) {
+        		if (""xml"".equals(attributes.getPrefix(i)) && 
+        				""id"".equals(attributes.getLocalName(i))) {
+        			normalizedValue = attributes.getValue(i);
+        			break;
+        		}
+        	}        	
+        }
+        
         if (normalizedValue != null
                 && normalizedValue.equals(fShortHandPointer)) {
             return true;

Best Regards,
George
"	2	New Feature	gsoc2011	3	Major	1	Open
12326218	DERBY	lahiruwijewardana	Need implementation for `ON UPDATE CASCADE`	"Ifound no chance to implement such statement in derby

CREATE TABLE A (
    ax INTEGER NOT NULL,

    PRIMARY KEY(ax)
);

CREATE TABLE B (
    
    bx INTEGER NOT NULL,
    
    FOREIGN KEY (bx)     REFERENCES A (ax)
    ON UPDATE CASCADE -- can't make this work
    ON DELETE CASCADE
);

Seems `ON UPDATE CASCADE` does not implemented in derby yet.

P.S. I found this working in HSQL, M$SQL, PostgreSQL... but not in
debry :("	4	Improvement	derby_triage10_11	3	Major	1	Open
12326016	DERBY	espinha	Unable to create databases whose name containg Chinese characters through the client driver	"Trying to create a database with the following URL (note the Chinese character in the database name):

jdbc:derby://localhost:1527/\u4e10;create=true

throws the following exception:

-----%<-----
Exception in thread ""main"" org.apache.derby.client.am.SqlException: Unicode string can't convert to Ebcdic string
        at org.apache.derby.client.net.EbcdicCcsidManager.convertFromUCS2(Unknown Source)
        at org.apache.derby.client.net.Request.writeScalarPaddedString(Unknown Source)
        at org.apache.derby.client.net.NetConnectionRequest.buildRDBNAM(Unknown Source)
        at org.apache.derby.client.net.NetConnectionRequest.buildACCSEC(Unknown Source)
        at org.apache.derby.client.net.NetConnectionRequest.writeAccessSecurity(Unknown Source)
        at org.apache.derby.client.net.NetConnection.writeServerAttributesAndKeyExchange(Unknown Source)
        at org.apache.derby.client.net.NetConnection.flowServerAttributesAndKeyExchange(Unknown Source)
        at org.apache.derby.client.net.NetConnection.flowUSRIDONLconnect(Unknown Source)
        at org.apache.derby.client.net.NetConnection.flowConnect(Unknown Source)
        at org.apache.derby.client.net.NetConnection.<init>(Unknown Source)
        at org.apache.derby.jdbc.ClientDriver.connect(Unknown Source)
        at java.sql.DriverManager.getConnection(DriverManager.java:525)
        at java.sql.DriverManager.getConnection(DriverManager.java:193)
        at jdbctest.Main.main(Main.java:33)
-----%<-----

It's possible, however, to create databases using the embedded driver, using an URL like:

jdbc:derby:\u4e10;create=true

Tested with both 10.1.1.0 and 10.1.2.1 with the same result.

Complete code to reproduce the bug:

-----%<-----
public static void main(String[] args) throws Exception {
    Class.forName(""org.apache.derby.jdbc.ClientDriver"");
    Connection conn = DriverManager.getConnection(""jdbc:derby://localhost:1527/\u4e10;create=true"");
}
-----%<-----
"	1	Bug	gsoc, mentor	3	Major	6	Closed
12327171	DERBY	bryanpendleton	"Usability issue: ""Constraints have the  same  set of columns"""	"Legolas Woodland reported on derby-user that derby return errors like :
org.apache.derby.client.am.SqlException:                    Constraints
'SQL060103004635123'  and 'SQL060103004635121'  have the  same  set of
columns, which is not allowed.

He got this when creating a table like this:
create  table  WEBSITES (USERID  integer  not  null unique,  WEBSITEID
bigint  not  null unique,  DOMAINNAME  varchar(255)  not null  unique,
DESCRIPTION  varchar(255),  PPVIEW   double,  PPCLICK  double,  PPWEEK
double, totalClick bigint,  totalView bigint, active smallint, primary
key (WEBSITEID));

Omitting the unique specifier made things work. 

I think this is a usability issue.   At least, one should not present names to the user, that has been generated internally.  Instead, it would be helpful if the names of the columns involved was mentioned. I see two ways to solve this:

1. Return error that says that  duplicate contraints on the following columns are not allowed.
2. Allow this and use same index for both constraints.  (I guess dropping constraints will be more complicated in this case since one will have to check if other constraints are using the same index.)"	4	Improvement	derby_triage10_11	4	Minor	1	Open
12327925	DERBY	dnj	ResultSetMetaData.getScale returns inconsistent values for DOUBLE type.	"If a DOUBLE column is returned in the result set then getScale() returns 0.
If a DOUBLE expression is returned and the expression is the result of a DOUBLE combined with a DECIMAL then it seems the scale from the decimal sometimes affects the result set metadata.

E.g. DECIMAL(10,2) - DOUBLE returns a DOUBLE with getScale() returning 2.

See the test output for jdbcapi/metadata.java

double -- precision: 15 scale: 0 display size: 22 type name: DOUBLE
double precision - dec(10,2) -- precision: 15 scale: 0 display size: 22 type name: DOUBLE
dec(10,2) - double precision -- precision: 15 scale: 2 display size: 22 type name: DOUBLE

First line is a DOUBLE column, second is DOUBLE - DECIMAL, third is DECIMAL - DOUBLE

I assume the scale  should always be zero for a DOUBLE, as it holds no meaning, but I can't see any proof of that in JDBC spec, javadoc or tutorial book.

"	1	Bug	derby_triage10_5_2	5	Trivial	5	Resolved
12328331	DERBY	knutanders	"Cast date to timestamp results in ""ERROR 42846: Cannot convert types 'DATE' to 'TIMESTAMP'."""	"Cast date  to timestamp results in ""ERROR 42846: Cannot convert types 'DATE' to 'TIMESTAMP'."",
e.g. in ij:
select cast(cast ('2006-01-01' as date) as timestamp) from sys.sysschemas;
or
select cast (current_date as timestamp) from bradi_dat.lpaip01;

The similar issue exists for time (""ERROR 42846: Cannot convert types 'TIME' to 'TIMESTAMP'."",

Documentation clearly states that these conversions are allowed, see table 1 in a description of CAST function in the Derby Reference Manual and comment about ""Conversion of date/time values"" below that table (see below as well).

Conversions of date/time values
A date/time value can always be converted to and from a TIMESTAMP. If a DATE is
converted to a TIMESTAMP, the TIME component of the resulting TIMESTAMP is always
00:00:00. If a TIME data value is converted to a TIMESTAMP, the DATE component is
set to the value of CURRENT_DATE at the time the CAST is executed. If a TIMESTAMP
is converted to a DATE, the TIME component is silently truncated. If a TIMESTAMP is
converted to a TIME, the DATE component is silently truncated.

  
"	1	Bug	derby_triage10_5_2	3	Major	6	Closed
12327832	XERCESJ	shakya.wijerama	Cannot validate against multiple XML schemas within the same namespace	"The javax.xml.validation.SchemaFactory.newSchema method can take an array of schema sources and construct a composite schema. Unfortunately, this does not work if the schema are in the same namespace. When the schema are in the same namespace, only the first schema is used.

The bug is caused by the computation of the hashcode for a grammar in the grammar cache. The hashcode is computed based only on the namespace of a grammar (i.e. schema file). Thus if multiple schemas are specified from the same namespace, they will all hash to the same code and only the first will be cached and returned for all subsequent caching attempts.

If each schema is in a separate namespace, the newSchema method works properly. Effectively, the assumption that was made in the code was that there will only be a single schema per namespace. This is an incorrect assumption.

One of the more major implications of this bug is that the XML Schema ""include"" element can never work since by definition, included schemas must be in the same namespace. Because of this bug, inclusion can only be done using the ""import"" element since it supports different namespaces.

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
1. Create a sample XML file called test.xml
2. Create a schema for the test file but split it between two schema files: schema1.xsd and schema2.xsd
3. Create a java class that uses SAX (DOM shows the same problem) to parse the file and extends defaultHandler.
4. Call the SchemaFactory.newSchema method with a source array containing schema1.xsd and schema2.xsd.
5. Set the resulting schema on the parser
6. Implement an error method in the class
7. Run the program and observe that there is a validation failure. This is becuase the second schema in the array was never processed and so the validator does not accept the test XML file.

The source code, test XML file, and schemas are included in this bug report.

EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
The test XML file should have validated properly against the composite schema.
ACTUAL -
There was a validation failure. This is becuase the second schema in the array was never processed and so the validator does not accept the test XML file.

ERROR MESSAGES/STACK TRACES THAT OCCUR :
SAX Error: http://www.w3.org/TR/xml-schema-1#cvc-elt.1?root

REPRODUCIBILITY :
This bug can be reproduced always.

---------- BEGIN SOURCE ----------
------------- schemaTest.java ----------------------------

import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.SAXParseException;
import org.xml.sax.helpers.DefaultHandler;


public class SchemaTest extends DefaultHandler {

public static void main(String[] args)
{
    try {
        FileInputStream is = new FileInputStream(""test.xml"");
        
        StreamSource[] sources = new StreamSource[2];
        FileInputStream ss = new FileInputStream(""schema2.xsd"");
        sources[0] = new StreamSource(ss);
        ss = new FileInputStream(""schema1.xsd"");
        sources[1] = new StreamSource(ss);
        
        SchemaFactory schemaFactory =
            SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
        Schema schema = schemaFactory.newSchema(sources);
        
        SAXParserFactory saxFactory = SAXParserFactory.newInstance();
        saxFactory.setNamespaceAware(true);
        saxFactory.setValidating(false);
        saxFactory.setXIncludeAware(true);
        saxFactory.setSchema(schema);
        
        SAXParser parser = saxFactory.newSAXParser();
        parser.parse(is, new SchemaTest());
    }
    catch (FileNotFoundException e) {
        e.printStackTrace();
    }
    catch (SAXException e) {
        e.printStackTrace();
    }
    catch (ParserConfigurationException e) {
        e.printStackTrace();
    }
    catch (IOException e) {
        e.printStackTrace();
    }
}

/**
 * @see org.xml.sax.ErrorHandler#warning(org.xml.sax.SAXParseException)
 */
public void warning(SAXParseException e) throws SAXException
{
    System.err.println(""SAX Warning: "" + e.getLocalizedMessage());
}

/**
 * @see org.xml.sax.ErrorHandler#error(org.xml.sax.SAXParseException)
 */
public void error(SAXParseException e) throws SAXException
{
    System.err.println(""SAX Error: "" + e.getLocalizedMessage());
}

/**
 * @see org.xml.sax.ErrorHandler#fatalError(org.xml.sax.SAXParseException)
 */
public void fatalError(SAXParseException e) throws SAXException
{
    System.err.println(""SAX Fatal Error: "" + e.getLocalizedMessage());
}

/**
 * @see org.xml.sax.ContentHandler#startElement(java.lang.String, java.lang.String, java.lang.String, org.xml.sax.Attributes)
 */
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException
{
    System.out.println(""Start element: "" + localName);
}

/**
 * @see org.xml.sax.ContentHandler#endElement(java.lang.String, java.lang.String, java.lang.String)
 */
public void endElement(String uri, String localName, String qName)
        throws SAXException
{
    System.out.println(""End element: "" + localName);
}

} // End of class SchemaTest


-------------------- test.xml -------------------------

<?xml version=""1.0""?>
<root>
    <elem1 value=""abc""/>
</root>


---------------- schema1.xsd ------------------------

<?xml version=""1.0"" encoding=""UTF-8""?>
<xs:schema elementFormDefault=""qualified"" xml:lang=""EN"" xmlns:xs=""http://www.w3.org/2001/XMLSchema"">
    
    <xs:include schemaLocation=""schema2.xsd""/>
	
    <xs:element name=""root"">
        <xs:complexType>
            <xs:all>
                <xs:element ref=""elem1"" minOccurs=""0""/>
            </xs:all>
        </xs:complexType>
    </xs:element>
    <xs:element name=""elem1"">
        <xs:complexType>
            <xs:attribute name=""value"" type=""ValueType"" use=""required""/>
        </xs:complexType>
    </xs:element>
</xs:schema>


--------------------- schema2.xsd ------------------------------

<?xml version=""1.0"" encoding=""UTF-8""?>
<xs:schema elementFormDefault=""qualified"" xml:lang=""EN"" xmlns:xs=""http://www.w3.org/2001/XMLSchema"">
    <xs:simpleType name=""ValueType"">
      <xs:restriction base=""xs:string"">
        <xs:enumeration value=""abc""/>
        <xs:enumeration value=""def""/>
      </xs:restriction>
    </xs:simpleType>
</xs:schema>


---------- END SOURCE ----------"	1	Bug	gsoc, gsoc2012, mentor	3	Major	1	Open
12328721	NUTCH	lewismc	http: proxy exception list:	"I suggest that a parameter is added to nutch-default.xml which allows to generate a proxy exception list. 

<property>
  <name>http.proxy.exception.list</name>
  <value></value>
  <description>URL's and hosts that don't use the proxy (e.g. intranets)</description>
</property>


This is useful when scanning intranet/internet combinations from behind a firewall. A preliminary patch is added to this extend to this request, showing the changes. We will test it and update it if necessary. this also reflects the reality in web browsers, where there is in most cases an exception list.

"	2	New Feature	patch	5	Trivial	6	Closed
12329270	DERBY	rsjay1976	javax.transaction.xa.forget (Xid) raises XAER_NOTA exception instead of XA_PROTO on a prepared transaction	"javax.transaction.xa.forget (Xid) raises XAER_NOTA exception instead of XA_PROTO on a prepared transaction

I posted a question to derby-dev about this and heard no response so am assuming it is indeed a bug.

 in  the  XA+ 
specification, it seems like xa_forget should  only be valid for a
heuristically completed transaction, so should  be  XAER_PROTO
and not XAER_NOTA.


In xaStateTran.sql we have this case:

-- get back into prepared state
xa_start xa_noflags 50;
insert into xastate values(2);
xa_end xa_success 50;
xa_prepare 50;

select * from global_xactTable where gxid is not null order by gxid;

-- the following should error XAER_NOTA
xa_forget 50;



The user  code I am looking at handles forget like this. They expect 
XAER_PROTO in this case.
              
try {
             xaRes.forget(xidList[i]);
              System.out.print(""XA-Transaction ["" + (i+1) + ""]
Forgotten. \n"" );
} catch (XAException XAeForget) {
                        if ( XAeForget.errorCode ==
XAException.XAER_PROTO ) {
                            System.out.print(""XA-Transaction ["" + (i+1)
+ ""] not heuristically completed yet - Rolling Back instead. \n"" );
                            xaRes.rollback(xidList[i]);
                            System.out.print(""XA-Transaction ["" + (i+1)
+ ""] Rolled Back. \n"" );
                        }
                        if ( XAeForget.getMessage() != null ) {
                            System.out.println(""XAException "" +
XAeForget.getMessage() );
             "	1	Bug	derby_backport_reject_10_8, derby_triage10_5_2	3	Major	6	Closed
12329335	DERBY	knutanders	Change constructors in NetConnection classes to use LogWriter instead of NetLogWriter		4	Improvement	derby_triage10_11	3	Major	6	Closed
12343670	WODEN	dilshan	Component model API needs modifiers	"A Woden 'client' - eg a tool such as java2wsdl - might want to:

1 introspect a tree of java classes / interfaces
2 create an org.apache.woden.wsdl20.Interface for each - adding to the Description object along the way
3 serialize to disk.

Today it is only possible to modify the object form of the WSDL through the Element model API. This requires the client app to understand WSDL at the file level.

For step 2 addInterface() is required on Description. Of course Interface.addInterfaceOperation() is then required and so on...
For step 3 a 'strategy' is needed to map from the Component model to the Element model's representation of the WSDL in file form. e.g. do all the <interface> elements go in the same WSDL file or do all the <interface> elements in the same namespace go in one file etc. Also, do the <service> elements go in separately included/imported WSDL files as is typically the best practice with WSDL 1.1. All these options could be represented using a strategy pattern. 

"	2	New Feature	gsoc, gsoc2010	3	Major	5	Resolved
12345511	DERBY	mamtas	Update triggers on tables with blob columns stream blobs into memory even when the blobs are not referenced/accessed.	"Suppose I have 1) a table ""t1"" with blob data in it, and 2) an UPDATE trigger ""tr1"" defined on that table, where the triggered-SQL-action for ""tr1"" does NOT reference any of the blob columns in the table. [ Note that this is different from DERBY-438 because DERBY-438 deals with triggers that _do_ reference the blob column(s), whereas this issue deals with triggers that do _not_ reference the blob columns--but I think they're related, so I'm creating this as subtask to 438 ]. In such a case, if the trigger is fired, the blob data will be streamed into memory and thus consume JVM heap, even though it (the blob data) is never actually referenced/accessed by the trigger statement.

For example, suppose we have the following DDL:

    create table t1 (id int, status smallint, bl blob(2G));
    create table t2 (id int, updated int default 0);
    create trigger tr1 after update of status on t1 referencing new as n_row for each row mode db2sql update t2 set updated = updated + 1 where t2.id = n_row.id;

Then if t1 and t2 both have data and we make a call to:

    update t1 set status = 3;

the trigger tr1 will fire, which will cause the blob column in t1 to be streamed into memory for each row affected by the trigger. The result is that, if the blob data is large, we end up using a lot of JVM memory when we really shouldn't have to (at least, in _theory_ we shouldn't have to...).

Ideally, Derby could figure out whether or not the blob column is referenced, and avoid streaming the lob into memory whenever possible (hence this is probably more of an ""enhancement"" request than a bug)... "	1	Bug	LOB, derby_backport_reject_10_8	4	Minor	6	Closed
12346012	DERBY	knutanders	SELECT clause without a WHERE, causes an Exception when extracting a Blob from a database	"An exception occurs when extracting a Blob from a database. 

The following code, will ALWAYS fail with the Exception:

java.io.IOException: ERROR 40XD0: Container has been closed
        at org.apache.derby.impl.store.raw.data.OverflowInputStream.fillByteHold
er(Unknown Source)
        at org.apache.derby.impl.store.raw.data.BufferedByteHolderInputStream.re
ad(Unknown Source)
        at java.io.DataInputStream.read(Unknown Source)
        at java.io.FilterInputStream.read(Unknown Source)
        at java.io.ObjectInputStream$PeekInputStream.read(Unknown Source)
        at java.io.ObjectInputStream$PeekInputStream.readFully(Unknown Source)
        at java.io.ObjectInputStream$BlockDataInputStream.readDoubles(Unknown So
urce)
        at java.io.ObjectInputStream.readArray(Unknown Source)
        at java.io.ObjectInputStream.readObject0(Unknown Source)
        at java.io.ObjectInputStream.readObject(Unknown Source)
        at BlobTest.readRows(BlobTest.java:82)
        at BlobTest.main(BlobTest.java:24)

CODE:

import java.io.*;
import java.sql.*;
import java.util.*;

public class BlobTest
{
  private static final String TABLE1 = ""CREATE TABLE TABLE_1 ( ""
                                     + ""ID INTEGER NOT NULL, ""
                                     + ""COL_2 INTEGER NOT NULL, ""
                                     + ""PRIMARY KEY (ID) )"";

  private static final String TABLE2 = ""CREATE TABLE TABLE_2 ( ""
                                     + ""ID INTEGER NOT NULL, ""
                                     + ""COL_BLOB BLOB, ""
                                     + ""PRIMARY KEY (ID) )"";

  public static void main(String... args) {
    try {
      createDBandTables();
      Connection con = getConnection();

      addRows(con, 10000, 1);
      addRows(con, 10000, 2);
      readRows(con, 1);

      con.close();
    }
    catch(Exception exp) {
      exp.printStackTrace();
    }
  }

  private static void addRows(Connection con, int size, int id) 
                                                         throws Exception
  {
    String sql = ""INSERT INTO TABLE_1 VALUES(?, ?)"";

    PreparedStatement pstmt = con.prepareStatement(sql);
    pstmt.setInt(1, id);
    pstmt.setInt(2, 2);
    pstmt.executeUpdate();
    pstmt.close();

    double[] array = new double[size];
    array[size-1] = 1.23;

    sql = ""INSERT INTO TABLE_2 VALUES(?, ?)"";

    pstmt = con.prepareStatement(sql);
    pstmt.setInt(1, id);

    ByteArrayOutputStream byteStream = new ByteArrayOutputStream();
    ObjectOutputStream objStream = new ObjectOutputStream(byteStream);
    objStream.writeObject(array);         // Convert object to byte stream 
    objStream.flush();
    objStream.close();

    byte[] bytes = byteStream.toByteArray();

    ByteArrayInputStream inStream = new ByteArrayInputStream(bytes);

    pstmt.setBinaryStream(2, inStream, bytes.length);
    pstmt.executeUpdate();
    pstmt.close();
  }

  private static void readRows(Connection con, int id) throws Exception
  {
    String sql = ""SELECT * FROM TABLE_2"";
//    String sql = ""SELECT * FROM TABLE_2 WHERE ID > 0"";

    Statement stmt = con.createStatement();

    ResultSet rs = stmt.executeQuery(sql);

    while (rs.next()) {
      rs.getInt(1);

      InputStream stream = rs.getBinaryStream(2);

      ObjectInputStream objStream = new ObjectInputStream(stream);

      Object obj = objStream.readObject();

      double[] array = (double[]) obj;

      System.out.println(array.length);

      readTable1(con, id);
    }
    rs.close();
    stmt.close();
  }

  private static void readTable1(Connection con, int id) throws Exception {
    String sql = ""SELECT ID FROM TABLE_1 WHERE ID="" + id;    

    Statement stmt = con.createStatement();

    ResultSet rs = stmt.executeQuery(sql);

    if (rs.next()) {
    }
    rs.close();
    stmt.close();
  }
  
  private static Connection getConnection() throws Exception {
    String driver=""org.apache.derby.jdbc.EmbeddedDriver"";

    Properties p = System.getProperties();
    p.put(""derby.system.home"", ""C:\\databases\\sample"");
    
    Class.forName(driver);

    String url = ""jdbc:derby:derbyBlob"";
    Connection con = DriverManager.getConnection(url);

    return con;
  }

  private static void createDBandTables() throws Exception {
    String driver=""org.apache.derby.jdbc.EmbeddedDriver"";

    Properties p = System.getProperties();
    p.put(""derby.system.home"", ""C:\\databases\\sample"");
    
    Class.forName(driver);

    String url = ""jdbc:derby:derbyBlob;create=true"";
    Connection con = DriverManager.getConnection(url);

    Statement stmt = con.createStatement();

    stmt.execute(TABLE1);
    stmt.execute(TABLE2);

    stmt.close();
    con.close();
  }
}

However if the selection clause is changed from:

    String sql = ""SELECT * FROM TABLE_2"";
TO
    String sql = ""SELECT * FROM TABLE_2 WHERE ID > 0"";

The code works without Exception.


Output from: java org.apache.derby.tools.sysinfo 
------------------ Java Information ------------------ 
Java Version: 1.5.0_05 
Java Vendor: Sun Microsystems Inc. 
Java home: C:\Program Files\Java\jre1.5.0_05 
Java classpath: C:\tools\derby\db-derby-10.1.2.1-bin\lib\derby.jar;C:\tools\der 
by\db-derby-10.1.2.1-bin\lib\derbytools.jar; 
OS name: Windows XP 
OS architecture: x86 
OS version: 5.1 
Java user name: David 
Java user home: C:\Documents and Settings\David 
Java user dir: C:\david\novice\derby 
java.specification.name: Java Platform API Specification 
java.specification.version: 1.5 
--------- Derby Information -------- 
JRE - JDBC: J2SE 5.0 - JDBC 3.0 
[C:\tools\derby\db-derby-10.1.2.1-bin\lib\derby.jar] 10.1.2.1 - (330608) 
[C:\tools\derby\db-derby-10.1.2.1-bin\lib\derbytools.jar] 10.1.2.1 - (330608) 
------------------------------------------------------ 
----------------- Locale Information ----------------- 
------------------------------------------------------ 
"	1	Bug	LOB	4	Minor	6	Closed
12346695	DERBY	kristwaa	Network server fails with DRDAProtocolException if a BLOB with size 2147483647 is streamed from client	"When executing a program which inserts a BLOB of size 2GB-1, the Network server fails with DRDAProtocolException.  This happens before it starts handling the actual LOB data:

java org.apache.derby.drda.NetworkServerControl start
Apache Derby Network Server - 10.2.0.4 alpha started and ready to accept connections on port 1527 at 2006-07-26 14:15:21.284 GMT
Execution failed because of a Distributed Protocol Error:  DRDA_Proto_SYNTAXRM; CODPNT arg  = 0; Error Code Value = c
org.apache.derby.impl.drda.DRDAProtocolException
        at org.apache.derby.impl.drda.DRDAConnThread.throwSyntaxrm(DRDAConnThread.java:441)
        at org.apache.derby.impl.drda.DDMReader.readLengthAndCodePoint(DDMReader.java:554)
        at org.apache.derby.impl.drda.DDMReader.getCodePoint(DDMReader.java:617)
        at org.apache.derby.impl.drda.DRDAConnThread.parseSQLDTA_work(DRDAConnThread.java:4072)
        at org.apache.derby.impl.drda.DRDAConnThread.parseSQLDTA(DRDAConnThread.java:3928)
        at org.apache.derby.impl.drda.DRDAConnThread.parseEXCSQLSTTobjects(DRDAConnThread.java:3806)
        at org.apache.derby.impl.drda.DRDAConnThread.parseEXCSQLSTT(DRDAConnThread.java:3640)
        at org.apache.derby.impl.drda.DRDAConnThread.processCommands(DRDAConnThread.java:928)
        at org.apache.derby.impl.drda.DRDAConnThread.run(DRDAConnThread.java:254)
null
org.apache.derby.impl.drda.DRDAProtocolException
        at org.apache.derby.impl.drda.DRDAConnThread.throwSyntaxrm(DRDAConnThread.java:441)
        at org.apache.derby.impl.drda.DDMReader.readLengthAndCodePoint(DDMReader.java:554)
        at org.apache.derby.impl.drda.DDMReader.getCodePoint(DDMReader.java:617)
        at org.apache.derby.impl.drda.DRDAConnThread.parseSQLDTA_work(DRDAConnThread.java:4072)
        at org.apache.derby.impl.drda.DRDAConnThread.parseSQLDTA(DRDAConnThread.java:3928)
        at org.apache.derby.impl.drda.DRDAConnThread.parseEXCSQLSTTobjects(DRDAConnThread.java:3806)
        at org.apache.derby.impl.drda.DRDAConnThread.parseEXCSQLSTT(DRDAConnThread.java:3640)
        at org.apache.derby.impl.drda.DRDAConnThread.processCommands(DRDAConnThread.java:928)
        at org.apache.derby.impl.drda.DRDAConnThread.run(DRDAConnThread.java:254)


"	1	Bug	LOB, derby_backport_reject_10_5	4	Minor	6	Closed
12346504	DERBY	knutanders	"Extend the CASE expression syntax for ""simple case"""	"The ISO/IEC 9075-2:1999 SQL standard describes two kinds of CASE expressions: ""simple case"" and ""searched case"".
The current Derby version supports ""searched case"" but not ""simple case"".

The syntax for ""simple case"" is:

   CASE Expression
      WHEN Expression THEN Expression
    [ WHEN Expression THEN Expression ]
      ...
      ELSE ElseExpression
   END

Example:

   VALUES
      CASE 4
         WHEN 1 THEN 'one'
         WHEN 2 THEN 'two'
         WHEN 3 THEN 'three'
         ELSE 'many'
      END"	4	Improvement	derby_triage10_11	4	Minor	6	Closed
12347570	AXIS	veithen	Support for one way operations is incompletely implemented	"Several pieces are missing from the implementation to get one wau working correctly, and the invokeOneWay method in Call.java incorrectly runs in a background thread.  SOAP oneway does NOT imply async handling, it just means that the client cannot send a response ""object"" or throw and Exception.  This means that a oneway operation cannot define a fault or an output, not that it is performed asyncronously.  The invokeOneWayEngine needs the background thread removed so that the call will block until completion.
The next missing piece is that the AdminClient fails to add the ""mep=oneway"" to the operation when it exists in the deploy.wsdd to the server-config.wsdd.
The next missing piece is that when the skeletonDeploy switch is used, the setMep(OperationType.ONE_WAY) is not inserted into the generated code for iether a client or server side generation using wsdl2java.  I am attaching code changes for Call.java, JavaSkelWriter.java, and JavaStubWriter.java that has been tested to fix the noted problems.  The only fix not provided is for the AdminClient, as I just inserted the missing line into the server-config.wsdd manually to fix my problem."	1	Bug	oneway	3	Major	1	Open
12348361	DERBY	lahiruwijewardana	Change error message to indicate encryptionkey length to be atleast 16 characters instead of 8 characters	"While attempting to create a encrypted database with even key length of 14 characters, it fails with the error message indicating the key length should be atleast 8 characters.

--
-- Attempt to encrypt using key of lenght 14
--
ij> connect 'jdbc:derby:adb;create=true;dataEncryption=true;encryptionAlgorithm=DES/CBC/NoPadding;encryptionKey=11223344556677';
ERROR XJ041: Failed to create database 'adb', see the next exception for details.
ERROR XBM01: Startup failed due to an exception. See next exception for details.

ERROR XBCX2: Initializing cipher with a boot password that is too short. The password must be at least 8 characters long.
--
--Requires 16 characters for the encryptionKey
--
ij> connect 'jdbc:derby:adb;create=true;dataEncryption=true;encryptionAlgorithm=DES/CBC/NoPadding;encryptionKey=1122334455667788';
ij>"	1	Bug	derby_triage10_5_2, derby_triage10_9	4	Minor	1	Open
12348792	DERBY	bryanpendleton	insertRow() and updateRow() fail with syntax error when column has an alias	"When the select query used in an updatable result set has column aliases, a syntax error is thrown when executing ResultSet.insertRow() and ResultSet.updateRow(). The problem is seen on embedded and client. Repro is attached.

Exception in thread ""main"" ERROR 42X14: 'A1' is not a column in table or VTI 'APP.T'.
        at org.apache.derby.iapi.error.StandardException.newException(StandardException.java:316)
        at org.apache.derby.impl.sql.compile.ResultColumn.bindResultColumnByName(ResultColumn.java:677)
        at org.apache.derby.impl.sql.compile.ResultColumnList.bindResultColumnsByName(ResultColumnList.java:682)
        at org.apache.derby.impl.sql.compile.ResultSetNode.bindResultColumns(ResultSetNode.java:683)
        at org.apache.derby.impl.sql.compile.SelectNode.bindResultColumns(SelectNode.java:742)
        at org.apache.derby.impl.sql.compile.UpdateNode.bind(UpdateNode.java:349)
        at org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:345)
        at org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:111)
        at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConnectionContext.java:723)
        at org.apache.derby.impl.jdbc.EmbedResultSet.updateRow(EmbedResultSet.java:3734)
        at Alias.main(Alias.java:15)"	1	Bug	derby_triage10_5_2	4	Minor	5	Resolved
12352250	DERBY	kmarsden	i18n Tests fail on zOS	"With beta build 10.2.1.5 on z-series all i18n tests failed. The only output was the ij usage message.
I think this is related to the fact that the test harness does something special for i18n tests."	1	Bug	derby_triage10_8	3	Major	6	Closed
12352050	DERBY	kmarsden	Convert  largedata/LobLimits.java to junit		7	Sub-task	LOB	4	Minor	6	Closed
12352234	DERBY	mikem	storetests/st_reclaim_longcol.java fails intermittently	"I saw this diff when running derbyall:

********* Diff file derbyall/storeall/storetests/st_reclaim_longcol.diff
*** Start: st_reclaim_longcol jdk1.5.0_07 storeall:storetests 2006-10-02 18:11:13 ***
1a2,4
> Test failed, expected less than 32 pages - count is:
> free pages     : 25
> allocated pages: 20
Test Failed.
*** End:   st_reclaim_longcol jdk1.5.0_07 storeall:storetests 2006-10-02 18:13:35 ***

A similar diff has also been seen in the nightlies: http://www.multinet.no/~solberg/public/Apache/DerbyJvm1.4/testlog/SunOS-5.10_i86pc-i386/441833-derbyall_diff.txt"	1	Bug	derby_triage10_5_2	4	Minor	6	Closed
12352247	DERBY	kmarsden	test lang/wisconsin gives garbage output on zOS.	"When running the test lang/wisconsin.java on zOS the output in the .tmp file shows non-native characters.
However, this is most likely a test/test harness specific problem, for if one executes the simple statistics gathering commands through ij, there is no problem. Note that other tests do produce readable (native) output.

It's impossible to tell if there is any actual problem this way. 
"	1	Bug	derby_triage10_8	3	Major	6	Closed
12352714	OFBIZ	jonesde	Separate VAT from Sales Tax	"We need to separate VAT from Sales Tax.

The main reason is that VAT taxe is a very important type of tax in EU (and I guess on some other places) but not in US. An example of problems that arise if we not distinguish them is shown in OFBIZ-362. There we see that VAT in EU has specific mandatory constraints.

This is a huge work I guess. We will see from futur if it's really needed..."	4	Improvement	accounting, tax	3	Major	6	Closed
12353434	QPID	rgodfrey	Multiple-AMQP version support in the broker	Developing a code generator that will read in multiple AMQP specification files and generate the necessary (Java) MethodBody, PropertyContentHeader and Registry classes - C++ to follow. The generator will generate for Java and C++.	2	New Feature	old_code_generator_component	3	Major	6	Closed
12353884	DERBY	chaase3	Misleading text in WwdEmbedded demo source file for Working With Derby	"I'm making some minor fixes to the Working With Derby manual (DERBY-1948, DERBY-1972). The description of the WwdEmbedded.java program in the HTML generated from the file rwwdactivity3.dita (http://db.apache.org/derby/docs/dev/workingwithderby/) contains the following paragraph:

DERBY EXCEPTION REPORTING CLASSES: The two methods at the end of the file, errorPrint and SQLExceptionPrint, are generic exception reporting routines that can be used with any JDBC program. This type of exception handling is required because often multiple exceptions (SQLException) are chained together then thrown. A while loop is used to report on each error in the chain. These classes are used by calling the errorPrint method from the catch block of the code that accesses the database.

The introductory text ""DERBY EXCEPTION REPORTING CLASSES"" is keyed to a comment with the same text in the DERBY_HOME/demo/programs/workingwithderby/WwdEmbedded.java program:

     //   ## DERBY EXCEPTION REPORTING CLASSES  ## 

    /***     Exception reporting methods

    **      with special handling of SQLExceptions

    ***/


The problem is that there are no Derby exception reporting classes, only methods, as far as I can tell. The use of the term CLASSES is likely to confuse any users not well acquainted with Java (one of the target audiences of this manual). It would be great if someone could change CLASSES to METHODS in the WwdEmbedded.java file so that I can make the corresponding fix to the rwwdactivity3.dita file. I would also have to correct the confusing last sentence of the paragraph; I think it would make more sense to say, ""The program starts this process by calling the errorPrint method from the catch block of the code that accesses the database."" (I can't just change ""classes"" to ""methods"" because errorPrint *is* one of the methods."	1	Bug	derby_triage10_5_2	4	Minor	6	Closed
12353986	DERBY	knutanders	Case expression allows NULL in all parts of <result>	"According to the SQL:2003 spec, section 6.11 <case expression> Syntax Rule 3.  At least one <result> in a 
<case specification> shall specify a <result expression>.  Derby currently is violating this rule.  e.g.:

ij> values case when 1=2 then NULL when 1=3 then NULL else NULL end;
1
----
NULL

1 row selected

6.11 <case expression> Format section defines <result> as the following:

<result> ::= 
    <result expression>
    | NULL

The above statement should have thrown a SQLException instead of returning a result.

sysinfo:

------------------ Java Information ------------------
Java Version:    1.4.2_12
Java Vendor:     Sun Microsystems Inc.
Java home:       C:\jdk142\jre
Java classpath:  classes;.
OS name:         Windows XP
OS architecture: x86
OS version:      5.1
Java user name:  yip
Java user home:  C:\Documents and Settings\Administrator
Java user dir:   C:\derby\trunk
java.specification.name: Java Platform API Specification
java.specification.version: 1.4
--------- Derby Information --------
JRE - JDBC: J2SE 1.4.2 - JDBC 3.0
[C:\derby\trunk\classes] 10.3.0.0 alpha - (1)
------------------------------------------------------
----------------- Locale Information -----------------
Current Locale :  [English/United States [en_US]]
Found support for locale: [de_DE]
         version: 10.3.0.0 alpha - (1)
Found support for locale: [es]
         version: 10.3.0.0 alpha - (1)
Found support for locale: [fr]
         version: 10.3.0.0 alpha - (1)
Found support for locale: [it]
         version: 10.3.0.0 alpha - (1)
Found support for locale: [ja_JP]
         version: 10.3.0.0 alpha - (1)
Found support for locale: [ko_KR]
         version: 10.3.0.0 alpha - (1)
Found support for locale: [pt_BR]
         version: 10.3.0.0 alpha - (1)
Found support for locale: [zh_CN]
         version: 10.3.0.0 alpha - (1)
Found support for locale: [zh_TW]
         version: 10.3.0.0 alpha - (1)
------------------------------------------------------"	1	Bug	derby_backport_reject_10_10, derby_triage10_5_2	3	Major	6	Closed
12353987	MAPREDUCE	owen.omalley	Text class constructor and setCopacity method	"
A couple of problems.

1. setCapacity may cause loss of the existing data, if the new len is bigger than the old len of the byte array.

2. Text should provide a constructor like:

Text(byte[] data,  int len) {
}

Text(byte[] data, int start, int len) {
}

Text(byte[] data,  int len, boolean noCopying) {
}

The last one above allows to save the cost of data copy if the user wants the ownership of data to be transferred to Text object
"	1	Bug	newbie	3	Major	1	Open
12354729	DERBY	knutanders	Trigger should register a dependency on tables and columns used in its body	"A trigger registers a dependency in the Dependency Manager for those columns which cause the firing of the trigger, but does not register a dependency on tables and columns which are used in the body of the trigger. This means that the trigger may unexpectedly become invalid due to a change to one of those tables and columns in its body, and the user may be surprised that Derby did not warn them of this problem when the underlying table/column change was made.

An example of this problem is as follows:

create table t1 (c1 int);
create table t2 (c2 int);
create trigger tr1 after update of c1 on t1  for each row mode db2sql insert into t2 (c2) values (1);

With this set of definitions, Derby will warn/prevent the user about changes to table t1 and column c1, but will not warn the user about changes to table t2 and column c2. If the user drops or renames t2 or c2, the trigger will then give an error the next time it fires.

It seems like it would be an improvement for the trigger to record this dependency on table t2 and column c2.


"	1	Bug	derby_backport_reject_10_10, derby_triage10_11	4	Minor	6	Closed
12356099	QPID	vinoski	2 client test files always rebuild	Whenever you rebuild the client subdirectory, there are two test files that are always rebuilt no matter what.	3	Task	old_maven_build_system	4	Minor	6	Closed
12356394	QPID	cctrieloff	Connect AMQP version from ProtocolInitiation object to all version-aware objects	The AMQP-version-aware generated code has been hand-coded to version 8-0 where it impacts the framing, client and broker. The next phase of this project is to extract the AMQP version from the ProtocolInitiation object and pass it to all version-aware objects.	3	Task	old_code_generator_component	3	Major	6	Closed
12355834	DERBY	knutanders	Increase coverage for StatementEventsTest	"StatementEventsTest doesn't test removeStatementEventListener(). A test case should be added for that method. It would also be good to have test cases for
 - addStatementEventListener(null)
 - addStatementEventListener() twice with the same listener object
 - addStatementEventListener() on a closed {Pooled,XA}Connection
 - removeStatementEventListener(null)
 - removeStatementEventListener() with a listener object that has not been added
 - removeStatementEventListener() on a closed {Pooled,XA}Connection"	4	Improvement	derby_triage10_11	4	Minor	6	Closed
12356082	QPID	vinoski	convert tests to junit version 3	"Tests are currently using junit4, but the maven surefire plugin doesn't play well with junit4. Converting the tests to junit3 will allow the tests to run under surefire instead of under the antrun plugin. Surefire generates nice reports and cobertura code coverage comes along essentially for free.

I've done some investigation on this already and know that no broker or client unit tests are adversely affected by switching them to junit3, so I don't expect problems in other tests either."	3	Task	old_maven_build_system	3	Major	6	Closed
12356098	QPID	kpvdr	unconditional code generation from protocol spec	The build system unconditionally generates code into the common subdirectory from the protocol spec, which means that the build is never up to date and compilation occurs every time through whether any files are changed or not.	3	Task	old_code_generator_component	4	Minor	6	Closed
12355196	DERBY	rhillegas	DisconnectException: The DDM object 0x1232 is not supported following shutdown of embedded engine while network server is running	"Running all within the same JVM.
start network server using api
connect to database using client
close connection
shutdown engine (not network server) using jdbc:derby:;shutdown=true
connect to database using client - FAILS

Caused by: org.apache.derby.client.am.DisconnectException: The DDM object 0x1232 is not supported.  The connection has been terminated.
	at org.apache.derby.client.net.NetConnectionReply.doObjnsprmSemantics(Unknown Source)
	at org.apache.derby.client.net.NetConnectionReply.parseCommonError(Unknown Source)
	at org.apache.derby.client.net.NetConnectionReply.parseSecurityCheckError(Unknown Source)
	at org.apache.derby.client.net.NetConnectionReply.parseSECCHKreply(Unknown Source)
	at org.apache.derby.client.net.NetConnectionReply.readSecurityCheck(Unknown Source)
	at org.apache.derby.client.net.NetConnection.readSecurityCheckAndAccessRdb(Unknown Source)
	at org.apache.derby.client.net.NetConnection.flowSecurityCheckAndAccessRdb(Unknown Source)
	at org.apache.derby.client.net.NetConnection.flowUSRIDPWDconnect(Unknown Source)
	at org.apache.derby.client.net.NetConnection.flowConnect(Unknown Source)
	at org.apache.derby.client.net.NetConnection.<init>(Unknown Source)
	at org.apache.derby.client.net.ClientJDBCObjectFactoryImpl.newNetConnection(Unknown Source)
	... 33 more
"	1	Bug	derby_backport_reject_10_8	3	Major	6	Closed
12357299	DERBY	mikem	Optimizer performance slowdown from 10.1 to 10.2	"Attached is 'repro.sql', an IJ script which demonstrates what I
believe to be a serious performance issue in the Optimizer.

I have run this script in a number of configurations:

 - 10.1.2.1: the script runs successfully. The 'prepare' statement
   takes about 90 seconds, on a fairly powerful Windows machine

 - 10.1.3.1: the script produces a NPE. I believe this is DERBY-1777

 - 10.2.1.8/trunk: the script runs successfully. The 'prepare' statement
   often takes about 220 seconds, on the same Windows machine

   Intermittently, on 10.2 and on the trunk, the prepare statement takes
   15+ minutes. I cannot reliably reproduce this; I run the same script
   several times in a row and I cannot predict whether it will take 220
   seconds or whether it will take 15+ minutes.

I am quite motivated to work on this problem, as this is blocking me from
using Derby for a project that I'm quite keen on, but I need some
suggestions and ideas about how to attack it. From my perspective
there are 3 primary topics:

1) Why did optimizer performance for this query degrade so significantly
from 10.1.2.1 to 10.2? The optimizer seems to be at least 2.5 times slower,
for this particular query at least, in 10.2. Sometimes it is 10x slower.

2) What is the source of the non-determinism? Why does the optimizer
often take 4 minutes to optimize this query on the trunk, but sometimes
take 15+ minutes? I don't believe that I'm changing anything from
run to run.

3) Can we improve the optimizer performance even beyond what it was
for 10.1.2? I realize that this is an ugly query, but I was hoping to
see an optimization time of 5-10 seconds, not 90 seconds (and certainly
not 220 seconds).

I have attempted to start answering some of these questions, with
limited success. Here is some of what I think I've discovered so far:

 - the optimizer changes in 10.2 seem to have given the optimizer many
   more choices of possible query plans to consider. I think this means
   that, if the optimizer does not time out, it will spend substantially
   more time optimizing because there are more choices to evaluate. Does
   this by itself mean that the optimizer will take 2.5 times longer in
   10.2 than it did in 10.1?

 - something about this query seems to make the costing mechanism go
   haywire, and produce extreme costs. While stepping through the
   optimization of this query in the debugger I have seen it compute
   costs like 1e63 and 1e200. This might be very closely related to
   DERBY-1905, although I don't think I'm doing any subqueries here.
   But maybe I'm misunderstanding the term ""subquery"" in DERBY-1905.
   At any rate, due to the enormous estimated costs, timeout does not
   occur.

 - the WHERE clause in this query is converted during compilation to 
   an equivalent IN clause, I believe, which then causes me to run into
   a number of the problems described in DERBY-47 and DERBY-713.
   Specifically, rather than constructing a plan which involves 4
   index probes for the 4 WHERE clause values, the optimizer decides
   that an index scan must be performed and that it will have to process
   the entire index (because the query uses parameter markers, not
   literal values). So perhaps solving DERBY-47 would help me

 - the optimizer in fact comes up with a ""decent"" query plan quite quickly.
   I have experimented with placing a hard limit into the optimizer
   timeout code, so that I can force optimization to stop after an
   arbitrary fixed period of time. Then I have been able to set that
   value to as low as 1 second, and the optimizer has produced plans
   that then execute in a few milliseconds. Of course, I have only tried
   this with a trivial amount of data in my database, so it's possible
   that the plan produced by the optimizer after just a second of
   optimizing is in fact poor, and I'm just not noticing it because my
   data sizes are so small.

At this point, what would be really helpful to me would be some suggestions
about some general approaches or techniques to try to start breaking down
and analyzing this problem.
"	1	Bug	derby_triage10_11	3	Major	6	Closed
12356081	QPID	vinoski	clean out old Ant build system	Since maven is now in place, the old ant build files and supporting modules can be removed.	3	Task	old_maven_build_system	4	Minor	6	Closed
12356085	QPID	ritchiem	java distribution directory needs work	The distribution directory is where Qpid distributions are built with maven. It exists and contains assembly specifications for binary and source releases, but not all necessary documents, notices, license files, etc. have been moved from the ant build structure into their appropriate places under the distribution directory yet.	3	Task	old_maven_build_system	3	Major	6	Closed
12357027	QPID	rajith	ClassCastException in AMQSession (while trying to cast BasicMessageProducer to javax.jms.QueueSender)	o.a.q.client.BasicMessage doesn't implement the interface javax.jms.QueueSender, hence a class cast exception	1	Bug	jms_compliance	3	Major	6	Closed
12357136	QPID	rgreig	Update .NET client to use new code generation technique	"Java and C++ have a new code generation that is multi protocol version aware. This replaces the old XSLT code generators.

The .NET client still uses the XSLT approach; it would be good to align this with the Java approach one that has been completed."	4	Improvement	old_code_generator_component	3	Major	6	Closed
12357578	QPID	vinoski	maven setup.eclipse profile doesn't work yet	The top-level pom.xml includes a setup.eclipse profile for creating a Qpid Eclipse workspace, but it doesn't work yet. The first issue you run into is missing files, because it assumes code style checkers like checkstyle and pmd are already in use and expects to find their config files.	4	Improvement	old_maven_build_system	4	Minor	6	Closed
12357026	QPID	rajith	ClassCastException in AMQSession (while trying to cast BasicMessageProducer to javax.jms.TopicPublisher)	"Currently we don't have support for javax.jms.TopicPublisher.
The BasicMessageProducer doesn't implement this interface, hence the exception"	1	Bug	jms_compliance	3	Major	6	Closed
12357811	CXF	dkulp	Support Commons HTTP Client for HTTP conduit	"I think commons http client is a must in terms of HTTP support as it supports a lot of different authentication modes that I don't know that we currently support. It shouldn't be that hard to integrate either. XFire users tend to depend pretty heavily on it. The XFire code can be found here:

http://svn.xfire.codehaus.org/browse/xfire/trunk/xfire/xfire-core/src/main/org/codehaus/xfire/transport/http/CommonsHttpMessageSender.java"	2	New Feature	gsoc2011	3	Major	6	Closed
12357458	QPID	ritchiem	Create Client Only Distribution	"For users who wish to install the client only we need to provide a client only installation with minimal dependencies.

"	4	Improvement	old_maven_build_system	3	Major	6	Closed
12357490	QPID	vinoski	get qpid-run or equivalent working within an svn working copy	It would be nice to be able to run the broker within your svn working copy, using the qpid-run script or something equivalent to it.	4	Improvement	old_maven_build_system	4	Minor	6	Closed
12357910	QPID	rajith	The following Interface implementations do not throw Exceptions as required by the spec	"The following classes are not throwing the required exceptions as specified by the spec

BasicMessageConsumer.java  -- implements javax.jms.MessageConsumer
TopicSubscriberAdaptor.java -- implements javax.jms.TopicSubscriber
QueueReceiverAdaptor.java -- implements javax.jms.QueueReceiver
QueueSenderAdapter.java -- implements javax.jms.QueueSender
BasicMessageProducer.java  -- implements javax.jms.MessageProducer
TopicPublisherAdapter.java  -- implements javax.jms.TopicPublisher
"	1	Bug	jms_compliance	3	Major	6	Closed
12358047	DERBY	knutanders	Shutting down a database loaded from a jar file via the classpath and URLClassLoader  leaves an open file reference to the jar file containing the database.	"A bug in java.net.URLClassLoader causes the underlying jar file to be held open once a resource has been fetched and opened.
Loading a class or just accessing the URL for the resource does not keep the jar open. Reported the bug to Sun, it is similar to the existing bug Java bug 4950148 but in this case no amount of garbage collection will close the jar.

Derby exposes this as all containers/files are opened using as resources when loading the database from the classpath.

On windows this is seen as the inability to delete the jar file, seen by the fixture testDatabaseInClasspath in DatabaseClassLoadingTest.

Similar to DERBY-2083 but due to a different cause."	1	Bug	derby_triage10_5_2	4	Minor	6	Closed
12358285	QPID	ritchiem	MapMessage throws incorrect  exceptions	"Currently Map Message throws NullPointer and exceptions these should all be MessageFormatExceptions.

I had miss understood this bit of text from the API
""Attempting to read a null value as a primitive type must be treated as calling the primitive's corresponding valueOf(String) conversion method with a null value. Since char does not support a String conversion, attempting to read a null value as a char must throw a NullPointerException. ""

I had taken this to mean all null values even non-existent values. So if we end up with a null in the JMSMapMessage class we need to check if the key existed .. if so do the above valueOf(string) work.
"	1	Bug	jms_compliance	3	Major	6	Closed
12358191	QPID	rgreig	Client ID should not be resettable	"The JMS specification does not allow the resetting of the client id. Currently we do not throw any exception.

A closely related issue is that with AMQP it is not possible to create a connection without a client id - if one if not specified the system generates one that is unique. However it is not entirely clear from the documentation of Connection whether to be JMS compliant you need to be able to set the client id separately from connection creation (it does indicate that the client id if set separately must be done before any other operation on the connection)."	1	Bug	jms_compliance	4	Minor	6	Closed
12358394	QPID	bhupendrab	Management module causes mvn idea target to error	Currently the management module causes the mvn idea:idea target to error (run mvn -e for output). Resulting ipr file can be opened in Idea 6 but not 5. Workaround for Idea 5 users is to remove management module from top level pom (locally only !) until this is resolved.	1	Bug	old_maven_build_system	4	Minor	6	Closed
12358510	QPID	rgreig	TopicSession.createPublisher does not handle null argument correctly	Specifying a null argument to TopicSession.createPublisher should result in a publisher being created that is not bound to any particular topic. We do not check for null and as a result we attempt to validate that null is a real topic.	1	Bug	jms_compliance	3	Major	5	Resolved
12358520	QPID	rgreig	TextMessage needs to be able to distinguish between a null payload and an empty string	Currently we return an empty string even if the  payload of the text message was set to be an empty string.	1	Bug	jms_compliance	3	Major	6	Closed
12358527	QPID	ritchiem	Message properties do not support JMS type conversion rules	According to the JMS spec, message properties must support type conversion, e.g. if you have a byte property you should be able to call getIntegerProperty to read its value (as well as getShortProperty adn getByteProperty).	1	Bug	jms_compliance	3	Major	5	Resolved
12358541	QPID	rgreig	Session.unsubscribe does not handle invalid arguments correctly	Trying to unsubscribe from a durable subscription to which you are not already subscribed should result in an InvalidDestinationException being thrown. This is currently not happening.	1	Bug	jms_compliance	3	Major	6	Closed
12358612	QPID	ritchiem	Include all license files in distributions	"Looks like only license currently included in maven distribution is the Apache license. Need to include license files for all appropriate dependencies included in dist which has changed since M1 so there may be additional licenses required for jars now in dist.

For M1, the additional licenses were:

license.junit.txt
license.slf4.txt
license.backport-util-concurrent.html

"	1	Bug	old_maven_build_system	4	Minor	6	Closed
12358660	QPID	rgreig	producer.sendMessage must not assume the Message argument is a Qpid implementation class	"Currently BasicMessageProducer.send(Message) casts the supplied message to AbstractJMSMessage which is a Qpid-specific implementation class.

In order to be JMS compliant we must support other implementations of Message, i.e. not rely on the cast working."	1	Bug	jms_compliance	3	Major	6	Closed
12358683	QPID	rajith	NullPointerException should be thrown instead of javax.jms.MessageFormatException when attempting to read a null using readChar	NullPointerException should be thrown instead of javax.jms.MessageFormatException when attempting to read a null using readChar in Stream and Map Messages	1	Bug	jms_compliance	3	Major	6	Closed
12358702	QPID	rgreig	getObject Results in a java.io.StreamCorruptedException when called immediately after a setObject on unsent Object message	"getObject Results in a java.io.StreamCorruptedException when called immediately after a setObject on unsent Object message

java.io.StreamCorruptedException: invalid stream header
	at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:764)
	at java.io.ObjectInputStream.<init>(ObjectInputStream.java:277)
	at org.apache.qpid.client.message.JMSObjectMessage.getObject(JMSObjectMessage.java:123)
"	1	Bug	jms_compliance	3	Major	6	Closed
12358815	QPID	rajith	set/get Destination not implemented in JMSMessage impl	We need to implement this methods to pass the TCK.	1	Bug	jms_compliance	3	Major	6	Closed
12358821	QPID	rgodfrey	MapMessage: wrong exception thrown when getting null as char	MapMessage : if you set a value to be null, via setString, then an attempt to recieve the value through getChar you should receive a NullPointerException not a MessageFormatException	1	Bug	jms_compliance	4	Minor	6	Closed
12358835	QPID	rgodfrey	Do not allow subscription to temporary topic created on different session	The scope of a temporary topic is the session it was created on.  A JMSException should be thrown if an attempt to subscribe to a TemporaryTopic not created in the current session is made.	1	Bug	jms_compliance	4	Minor	6	Closed
12358837	QPID	rgodfrey	Sending same TextMessage more than once causes text to be lost on second send	"Doing

msg = session.createTextMessage(""msg"")
producer.send(msg);
producer.send(msg);

will leave the second sent message without any content.  This is due to an error in the way the positions in the ByteBuffer are changed in getData()"	1	Bug	jms_compliance	4	Minor	6	Closed
12358841	QPID	rgodfrey	Message.acknowledge() should acknowledge received	"Our current implementation of acknowledge() is such that it acknowledges to the broker all messages received up to the message on which acknowledge is called.

The JMS spec says that acknowledge() should actually acknowledge all messages received on this connection to date.

Since the current functionality is still useful, we should add a new org.apache.qpid.jms.Message interface which extends javax.jms.Message, and add a new method acknowledgeThis() to perform the current functionality."	1	Bug	jms_compliance	4	Minor	6	Closed
12358684	QPID	rajith	MapMessage clearBody impl doesn't clear the map properly	The clearBody method doesn't clear the map properly	1	Bug	jms_compliance	3	Major	6	Closed
12359026	QPID	ritchiem	Implement no_local	Currently the broker doesn't implement the no_local  request of the client.	1	Bug	jms_compliance	3	Major	6	Closed
12358822	QPID	rgodfrey	QueueSender: incorrectly throwing NullPointerException when queue supplied to send(	It is valid for a QueueSender to be created with a null queue.  In this case the send method must always be called with a valid queue, and not via one of the API methods which does not take a Queue argument.  Currently QueueSenderAdapter checks only the member variable _queue, and does not take into account the passed argument, when vaildating if the queue is non-null.	1	Bug	jms_compliance	4	Minor	6	Closed
12358826	QPID	rgodfrey	Implement delete() on TempraryQueue	delete() currently throws UnsupportedOperationException	1	Bug	jms_compliance	4	Minor	6	Closed
12358828	QPID	rgodfrey	Implement delete on TemporaryTopic	"Need to throw exception when there are still active consumers.
Since temporary topics are created as auto-delete on the broker, we do not need to issue a delete request.
Note this behavious is probably not quite right per the JMS spec, which would seem to allow you to temporarily unsubscribe from a temporary topic, and to subsequently re-subscribe.

To implement correctly we would need to have some sort of session level scoping for queues in the protocol."	1	Bug	jms_compliance	4	Minor	6	Closed
12358879	QPID	rgodfrey	Message.acknowledge() should only acknowledge messages consumed by the application	"If not using MessageListeners, but instead calling receive() on the consumers, it is possible for the application to consume messages ""out of order"", in this case it is not correct to acknowledge all messages up to and including the id of the last message consumed.  Instead only those messages which have actually been consumed should be acknowledged."	1	Bug	jms_compliance	4	Minor	6	Closed
12358937	QPID	rgodfrey	Calling recover in onMessage() should stop Auto-ACK being sent for current message	If using a MessageListener, calling Session.recover() while in the onMessage() processor, should stop the auto-acknowledgement of the current message.	1	Bug	jms_compliance	3	Major	5	Resolved
12358989	QPID	rgodfrey	IMplement Custom JMSX Properties	Implement custom JMSX properties, and use this to support setting JMSDestination	1	Bug	jms_compliance	4	Minor	5	Resolved
12359047	QPID	rhs	Request/Response Framing		7	Sub-task	amqp_compliance	3	Major	6	Closed
12359049	QPID	ritchiem	Ensure pre-fetched messages received when in a transaction are correctly requeued	Currently they are put in a new transaction.	1	Bug	jms_compliance	3	Major	6	Closed
12359695	QPID	kpvdr	Add ability to supress generation of XML specification elements without having to modify XML spec file itself	Since the code generator builds an internal model of all versions in an additive manner (through the processing of several XML specification files), it is possible to include additional generation control elements through the processing of additional control file(s) besides the spec files. Add the ability of the code generator to detect and represent in its internal model generation supression flags for any of class, method or field elements on a version-specific basis (i.e. supress an element for one version, but support it in another). Make the generator itself sensitive to the presence of generation control elements in the internal model during the code generation process.	2	New Feature	old_code_generator_component	3	Major	6	Closed
12359117	QPID	ritchiem	Sending the same message multiple times results in a MessageNotWriteable exception	"Sending the same message multiple times results in a MessageNotWriteable exception

This is due to the fact that this test resends the same TextMessage many times but the reset method on AbstractJMSMessage was performing a flip() on the buffer rather a rewind() between each message send. This was caused by the logic that decides whether to perform a flip or rewind being driven by the _isReadable flag when really the choice should be made depending on whether or not the buffer has 'just been written to' as opposed to 'just read'. A new flag to distinguish these two conditions, _changedData, has been introduced into AbstractJMSMessage and all methods in its derived child classes set this flag whenever they have just written to the buffer, so that the next reset and subsequent resets work correctly.

The _changedData flag is initially set to true if an AbstractJMSMessage is created with no data, so that reset works correctly on null messages. When AbstractJMSMessage is created with data, the buffer passed to it has already been flipped, so _changedData is set to false.

A patch to fix this is included."	1	Bug	jms_compliance	3	Major	6	Closed
12359230	QPID	bhupendrab	Would be nice if Maven created properties file with version info and build #.	"Would be nice if Maven created properties file with version info and build # in it. The client and broker could then log the version info at startup time as a sanity check when running tests. The version info could also be easily examined and added to bug reports to avoid confusion.

As subversion is so good at reporting the version, the results of running the 'svnversion' command during a build can be used as an accurate build # reference that everyone can standardize on.

Attached is a path to add this to the Maven build."	2	New Feature	old_maven_build_system	4	Minor	6	Closed
12360004	QPID	kpvdr	If the code generation fails then it will not be recompiled.	"The return code from the code generator is not used to control the 'touch' of the time stamp. 

If the build of the framing code fails then it will not be re executed on the next mvn call requiring the user to perform a mvn clean before the framing code will be regenerated."	1	Bug	old_code_generator_component	3	Major	6	Closed
12360012	QPID	kpvdr	Create .NET generator class in the generator, set up ability to run this class from Main. Create .NET template directory.		7	Sub-task	old_code_generator_component	3	Major	6	Closed
12359629	QPID	kpvdr	Fix the problem of compiling the generator prior to its first use when building a project.	The compiler itself must be compiled using a java (Sun 1.5.x or 1.6.x) compiler prior to code generation.	3	Task	old_code_generator_component	4	Minor	5	Resolved
12360860	QPID	marnie	Fix invalid filemode settings in assembly files bin-test.xml and bin.xml	"Invalid filemodes (493) in bin-test.xml and bin.xml assemblies causing distribution to fail. Problem became visible after upgrade to 2.2-SNAPSHOT of maven assmebly plugin in main file.

Filemode values should be a sum of 4/2/1 so 9 is invalid. Correct value is 473."	1	Bug	old_maven_build_system	4	Minor	6	Closed
12359283	QPID	rgodfrey	Re-implement MapMessage in terms of StreamMessage encoding	The current implementation of MapMessage uses the AMQP FieldTable type which has several implicit limitations of the values held as keys and as values.  Instead implement the MapMessage in the same way as a StreamMessage with first the number of entries, followed by, for each entry, the encoded string key, and then the encoded object value.	1	Bug	jms_compliance	3	Major	6	Closed
12360002	QPID	kpvdr	Existing windows classpath setting will cause code generation to fail.	"Currently if the environment has a CLASSPATH set then this will cause the code generation to fail.

In cygwin:
$echo $CLASSPATH
.;C:\PROGRAM FILES\XML SPY\XMLSPY\XMLSPYINTERFACE.JAR;C:\Program Files\Java\jre1.6.0\lib\ext\QTJava.
zip

after unset-ing CLASSPATH the code generation completes correctly.

We shouldn't require users to change their existing CLASSPATH value."	1	Bug	old_code_generator_component	3	Major	6	Closed
12360339	DERBY	knutanders	ant junitreport gives fatal error during transformation	"Seemed to create a report still though.

[junitreport] Transform time: 6499ms
     [xslt] Processing C:\_work\svn\trunk\junit_20070111_1541\overview-frame
.html to C:\_work\svn\trunk\junit_20070111_1541\overview-frame2.html
     [xslt] Loading stylesheet C:\_work\svn\trunk\tools\ant\xsl\sysinfo_juni
treport.xsl
     [xslt] C:/_work/svntrunk/junit_20070111_1541/overview-frame.html:14:11
: Fatal Error! Attribute name ""nowrap"" associated with an element type ""td"" must
 be followed by the ' = ' character.
     [xslt] Failed to process C:\_work\svntrunk\junit_20070111_1541\overvie
w-frame.html

BUILD FAILED
C:\_work\svntrunk\build.xml:1756: Fatal error during transformation"	1	Bug	derby_triage10_8	3	Major	6	Closed
12360444	DERBY	myrna	Example of ScalarSubquery in Derby Reference Manual is not ScalarSubquery 	"In the page, I found next example.

-- Introduce a way of ""generating"" new data values,
-- using a query which selects from a VALUES clause (which is an
-- alternate form of a fullselect).
-- This query shows how a table can be derived called ""X"" having
-- 2 columns ""R1"" and ""R2"" and 1 row of data.
SELECT R1,R2
FROM (VALUES('GROUP 1','GROUP 2')) AS X(R1,R2)

I think this is not ScalarSubquery because the result have two columns."	1	Bug	derby_triage10_11	3	Major	6	Closed
12360537	QPID	kpvdr	C++ Header guards may not be compliant with C++ standard	"According to the C++ standard symbols that have a single ""_"" followed by an uppercase
letter and symbols starting with ""__"" (double underscore are reserved for the implementer (That is usually the
compiler/library writer). 

There are numerous header files with guards that violate this standard in the C++ source base."	1	Bug	old_code_generator_component	4	Minor	6	Closed
12360809	DERBY	rhillegas	Assert during log file switch: log file position exceeded max log file size	"When running simple tpc-b like transactions against a embedded Derby based on a SANE build of trunk the following assertion occurs for the background thread and all user threads:

   org.apache.derby.shared.common.sanity.AssertFailure: ASSERT FAILED log file position exceeded max log file size

This seems to occur during a switch to a new log file.

derby.log contains the following call stack for the background thread:

Exception trace: 
org.apache.derby.shared.common.sanity.AssertFailure: ASSERT FAILED log file position exceeded max log file size
	at org.apache.derby.shared.common.sanity.SanityManager.ASSERT(SanityManager.java:120)
	at org.apache.derby.impl.store.raw.log.LogCounter.makeLogInstantAsLong(LogCounter.java:120)
	at org.apache.derby.impl.store.raw.log.LogToFile.switchLogFile(LogToFile.java:1900)
	at org.apache.derby.impl.store.raw.log.LogToFile.appendLogRecord(LogToFile.java:3530)
	at org.apache.derby.impl.store.raw.log.FileLogger.logAndDo(FileLogger.java:345)
	at org.apache.derby.impl.store.raw.xact.Xact.logAndDo(Xact.java:1185)
	at org.apache.derby.impl.store.raw.log.LogToFile.checkpointWithTran(LogToFile.java:1540)
	at org.apache.derby.impl.store.raw.log.LogToFile.checkpoint(LogToFile.java:1357)
	at org.apache.derby.impl.store.raw.RawStore.checkpoint(RawStore.java:439)
	at org.apache.derby.impl.store.raw.log.LogToFile.performWork(LogToFile.java:3416)
	at org.apache.derby.impl.services.daemon.BasicDaemon.serviceClient(BasicDaemon.java:331)
	at org.apache.derby.impl.services.daemon.BasicDaemon.work(BasicDaemon.java:668)
	at org.apache.derby.impl.services.daemon.BasicDaemon.run(BasicDaemon.java:394)
	at java.lang.Thread.run(Thread.java:619)
2007-01-17 23:09:48.638 GMT Thread[derby.rawStoreDaemon,5,derby.daemons] Cleanup action starting
org.apache.derby.shared.common.sanity.AssertFailure: ASSERT FAILED log file position exceeded max log file size
	at org.apache.derby.shared.common.sanity.SanityManager.ASSERT(SanityManager.java:120)
	at org.apache.derby.impl.store.raw.log.LogCounter.makeLogInstantAsLong(LogCounter.java:120)
	at org.apache.derby.impl.store.raw.log.LogToFile.switchLogFile(LogToFile.java:1900)
	at org.apache.derby.impl.store.raw.log.LogToFile.appendLogRecord(LogToFile.java:3530)
	at org.apache.derby.impl.store.raw.log.FileLogger.logAndDo(FileLogger.java:345)
	at org.apache.derby.impl.store.raw.xact.Xact.logAndDo(Xact.java:1185)
	at org.apache.derby.impl.store.raw.log.LogToFile.checkpointWithTran(LogToFile.java:1540)
	at org.apache.derby.impl.store.raw.log.LogToFile.checkpoint(LogToFile.java:1357)
	at org.apache.derby.impl.store.raw.RawStore.checkpoint(RawStore.java:439)
	at org.apache.derby.impl.store.raw.log.LogToFile.performWork(LogToFile.java:3416)
	at org.apache.derby.impl.services.daemon.BasicDaemon.serviceClient(BasicDaemon.java:331)
	at org.apache.derby.impl.services.daemon.BasicDaemon.work(BasicDaemon.java:668)
	at org.apache.derby.impl.services.daemon.BasicDaemon.run(BasicDaemon.java:394)
	at java.lang.Thread.run(Thread.java:619)
Cleanup action completed

For my user threads the call stack is similar:

Database Class Loader started - derby.database.classpath=''
2007-01-17 23:09:36.401 GMT Thread[Thread-51,5,main] (XID = 12632406), (SESSIONID = 51), (DATABASE = /export/home/tmp/derby-db), (DRDAID = null), Cleanup action starting
2007-01-17 23:09:36.401 GMT Thread[Thread-51,5,main] (XID = 12632406), (SESSIONID = 51), (DATABASE = /export/home/tmp/derby-db), (DRDAID = null), Failed Statement is: UPDATE accounts SET abal = abal + ? WHERE aid = ? AND bid = ?
org.apache.derby.shared.common.sanity.AssertFailure: ASSERT FAILED log file position exceeded max log file size
	at org.apache.derby.shared.common.sanity.SanityManager.ASSERT(SanityManager.java:120)
	at org.apache.derby.impl.store.raw.log.LogCounter.makeLogInstantAsLong(LogCounter.java:120)
	at org.apache.derby.impl.store.raw.log.LogToFile.switchLogFile(LogToFile.java:1900)
	at org.apache.derby.impl.store.raw.log.LogToFile.appendLogRecord(LogToFile.java:3530)
	at org.apache.derby.impl.store.raw.log.FileLogger.logAndDo(FileLogger.java:345)
	at org.apache.derby.impl.store.raw.xact.Xact.logAndDo(Xact.java:1185)
	at org.apache.derby.impl.store.raw.data.LoggableActions.doAction(LoggableActions.java:221)
	at org.apache.derby.impl.store.raw.data.LoggableActions.actionUpdate(LoggableActions.java:85)
	at org.apache.derby.impl.store.raw.data.StoredPage.doUpdateAtSlot(StoredPage.java:8521)
	at org.apache.derby.impl.store.raw.data.BasePage.updateAtSlot(BasePage.java:1108)
	at org.apache.derby.impl.store.access.conglomerate.GenericConglomerateController.replace(GenericConglomerateController.java:479)
	at org.apache.derby.impl.sql.execute.RowChangerImpl.updateRow(RowChangerImpl.java:523)
	at org.apache.derby.impl.sql.execute.UpdateResultSet.collectAffectedRows(UpdateResultSet.java:566)
	at org.apache.derby.impl.sql.execute.UpdateResultSet.open(UpdateResultSet.java:260)
	at org.apache.derby.impl.sql.GenericPreparedStatement.execute(GenericPreparedStatement.java:358)
	at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1182)
	at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeStatement(EmbedPreparedStatement.java:1652)
	at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeUpdate(EmbedPreparedStatement.java:299)
	at com.sun.derby.perf.clients.tpcb.DBConnection.performTransaction(DBConnection.java:595)
	at com.sun.derby.perf.clients.tpcb.Client.run(Client.java:218)

After this it seems like no user threads are able to connect to the database (not surpricing).

This happend using a SANE build and I am unsure by just looking at the assertion in the code whether this situation would have been fatal also if I had been using an INSANE build."	1	Bug	derby_triage10_5_2	3	Major	6	Closed
12361772	AXIS2	amilachinthaka	WSDL2Java generated stub with XMLBeans loads wrong *ResponseDocumentImpl for the expected interface *ResponseDocument	"See the title and the stack trace:

2007-02-01 11:50:16,426 DEBUG [org.apache.axiom.om.impl.builder.StAXOMBuilder] - <START_ELEMENT: {XMPieWSAPI}GetPropertyResult:GetPropertyResult>
2007-02-01 11:50:16,426 DEBUG [org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder] - <Build the OMElelment GetPropertyResultBy the StaxSOAPModelBuilder>
2007-02-01 11:50:16,457 ERROR [com.capitalC.Kenna.xTalker.services.XMPie.axis.DocumentFactory] - <java.lang.ClassCastException: com.capitalc.kenna.xtalker.xmpie.account.model.impl.GetPropertyResponseDocumentImpl incompatible with com.capitalc.kenna.xtalker.xmpie.document.model.GetPropertyResponseDocument
	at com.capitalc.kenna.xtalker.xmpie.document.model.GetPropertyResponseDocument$Factory.parse(GetPropertyResponseDocument.java:128)
	at com.capitalc.kenna.xtalker.xmpie.document.stubs.Document_SSPStub.fromOM(Document_SSPStub.java:5472)
	at com.capitalc.kenna.xtalker.xmpie.document.stubs.Document_SSPStub.GetProperty(Document_SSPStub.java:4013)
	at com.capitalC.Kenna.xTalker.services.XMPie.axis.DocumentFactory.getProperty(DocumentFactory.java:199)
	at com.capitalC.Kenna.xTalker.services.XMPie.axis.DocumentFactory.getPlanID(DocumentFactory.java:219)
	at com.capitalC.Kenna.xTalker.services.XMPie.SuiteRunner.document(SuiteRunner.java:55)
	at com.capitalC.Kenna.xTalker.services.XMPie.SuiteRunner.main(SuiteRunner.java:102)
>
2007-02-01 11:50:16,457 ERROR [com.capitalC.Kenna.xTalker.services.XMPie.SuiteRunner] - <java.lang.NullPointerException
	at com.capitalC.Kenna.xTalker.services.XMPie.axis.DocumentFactory.getProperty(DocumentFactory.java:206)
	at com.capitalC.Kenna.xTalker.services.XMPie.axis.DocumentFactory.getPlanID(DocumentFactory.java:219)
	at com.capitalC.Kenna.xTalker.services.XMPie.SuiteRunner.document(SuiteRunner.java:55)
	at com.capitalC.Kenna.xTalker.services.XMPie.SuiteRunner.main(SuiteRunner.java:102)
>

"	1	Bug	xmlbean	3	Major	1	Open
12362329	QPID	marnie	File permissions for /etc incorrect in distribution	Files in /etc only give w to owner, need r added.	1	Bug	old_maven_build_system	4	Minor	6	Closed
12362808	QPID	bhupendrab	Add test-classes for Qpid Java Management Console	"There should be test-classes for the eclipse-plugin Qpid Management Console, which cover the following-
- Any Constants used in the management console, which are dependent on the constants or values on the Java Broker, should be checked. These constants are used to creates a customized GUI.
 "	3	Task	legacy-jmx-console	4	Minor	6	Closed
12362987	DERBY	ahsancse	sysinfo API only returns correct information for the first jar file on the classpath	"While updating the sysinfo_api test to our current JUnit usage, I rediscovered the problem which has kept this test from running on a regular basis: when running the test from jar files, only the first jar file on the classpath properly reports its information through the sysinfo API.

It is not a security manager issue, as disabling the security manager did not solve the problem. There may be jar-sealing issues involved, but I haven't looked into the issue very deeply. Just noting the issue here for later investigation.

I will commit a patch which updates the current sysinfo_api test to be called SysinfoAPITest, and also add a note to tools._Suite about the problem."	4	Improvement	derby_triage10_5_2, gsoc2013	5	Trivial	1	Open
12362942	QPID	bhupendrab	Java Management console currently doesn't display the temporary queues on Java broker	"It is better if there is an option to view temp queues (queues with names having prefix as ""_tmp"")"	2	New Feature	legacy-jmx-console	4	Minor	6	Closed
12363136	DERBY	knutanders	Unable to perform select query using DISTINCT on a read-only database	"It is not possible to perform queries using DISTINCT on a read-only database packaged in a zip file. This generates the following error:

ERROR 40XD1: Container was opened in read-only mode.   
	at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
	at org.apache.derby.impl.store.raw.data.BaseContainer.use(Unknown Source)
	at org.apache.derby.impl.store.raw.data.BaseContainerHandle.useContainer(Unknown Source)
	at org.apache.derby.impl.store.raw.data.BaseDataFileFactory.openContainer(Unknown Source)
	at org.apache.derby.impl.store.raw.data.BaseDataFileFactory.openContainer(Unknown Source)
	at org.apache.derby.impl.store.raw.xact.Xact.openContainer(Unknown Source)
	at org.apache.derby.impl.store.raw.data.BaseDataFileFactory.addContainer(Unknown Source)
	at org.apache.derby.impl.store.raw.xact.Xact.addContainer(Unknown Source)
	at org.apache.derby.impl.store.access.heap.Heap.create(Unknown Source)
	at org.apache.derby.impl.store.access.heap.HeapConglomerateFactory.createConglomerate(Unknown Source)
	at org.apache.derby.impl.store.access.RAMTransaction.createConglomerate(Unknown Source)
	at org.apache.derby.iapi.store.access.DiskHashtable.<init>(Unknown Source)
	at org.apache.derby.iapi.store.access.BackingStoreHashtable.spillToDisk(Unknown Source)
	at org.apache.derby.iapi.store.access.BackingStoreHashtable.add_row_to_hash_table(Unknown Source)
	at org.apache.derby.iapi.store.access.BackingStoreHashtable.put(Unknown Source)
	at org.apache.derby.impl.store.access.btree.BTreeForwardScan.fetchRows(Unknown Source)
	at org.apache.derby.impl.store.access.btree.BTreeScan.fetchSet(Unknown Source)
	at org.apache.derby.impl.store.access.BackingStoreHashTableFromScan.<init>(Unknown Source)
	at org.apache.derby.impl.store.access.RAMTransaction.createBackingStoreHashtableFromScan(Unknown Source)
	at org.apache.derby.impl.sql.execute.HashScanResultSet.openCore(Unknown Source)
	at org.apache.derby.impl.sql.execute.BasicNoPutResultSetImpl.open(Unknown Source)
	at org.apache.derby.impl.sql.GenericPreparedStatement.execute(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedStatement.executeQuery(Unknown Source)
	at DerbyTest.main(DerbyTest.java:29)

The problem can be reproduced using the attached java program and the following database file:
http://ftp2.bigcat.unimaas.nl/~thomas.kelder/derbytest/testdb.zip.
Both the 'derby.storage.tempDirectory' and 'derby.stream.error.file' properties are set to writable locations, as advised in the help file.

Also see derby-user mailing list thread: http://article.gmane.org/gmane.comp.apache.db.derby.user/6123

""This appears to be a bug, possibly a regression.  When I converted your
DB to10.0 everything worked fine even when I did NOT set the properties
for tempDirectory and error.file (hmmm..).  When I switched to using the
10.1  or 10.2 jars and accessed the very same database the 40XD1 ERROR
happened."" (Stanley Bradbury)



"	1	Bug	derby_triage10_5_2	3	Major	6	Closed
12363872	QPID	gemmellr	Add alerting for Total Queue depth (across all queues)	"Currently have alerting on queue depth, on a per queue basis, using a maximum threshold. User has suggested that having alerting across all queue i.e. total queue depth might be usual for max heap alerting. 

Can see that total queue alerting is useful (though would apply caution to the notion that this would enable client applications to avoid hitting max heap size as this is near impossible !)
"	2	New Feature	alerting	4	Minor	5	Resolved
12365032	QPID	bhupendrab	"Messages are not listed in the correct order on the management console ""view Messages"" tab"	"The Messages are not listed in the order they are on the Queue. 
The TabularData doesn't return the records in the order those are added to it. That results in the order being random on the console."	4	Improvement	legacy-jmx-console	4	Minor	6	Closed
12365088	QPID	bhupendrab	Add ability to save user preferences to Java Management Console	"When user add e.g. queues to their console view this preference change should be saved so that when they next log in the queue is automatically added to their view.

This should apply to all similar user preferences to make it easier for users to simply log in to the console and see the queues etc that they are interested in without the overhead of re-config each time.  

* Please extend this description to add in the set of features that apply for this change. *"	2	New Feature	legacy-jmx-console	4	Minor	6	Closed
12365091	QPID	bhupendrab	Add client id to information displayed about connections on management console	Add client id to the information displayed about a connection i.e. add username for connection to display, to make informatiom more meaningful than simply ip etc.	4	Improvement	legacy-jmx-console	4	Minor	6	Closed
12364214	QPID	ritchiem	Integrate Python tests with mvn	To ensure everyone runs the python tests. Integrate them with mvn.	4	Improvement	old_maven_build_system	3	Major	6	Closed
12364474	DERBY	dyret	Embedded and client differ on ResultSetMetaData.isCurrency() value for DECIMAL and  NUMERIC columns	"Embedded returns true for ResultSetMetaData.isCurrency() for DECIMAL and NUMERIC columns. Client returns false.   I tend to think client is right here but am not sure.

"	7	Sub-task	derby_triage10_11	4	Minor	6	Closed
12364715	DERBY	myrna	Remove notion of the old test harness from TestConfiguration	"TestConfiguration has a notion of the old test harness. It is used when the old harness is running JUnit tests, and differs mostly by reading the system properties set by the harness and propagating these to the test configuration.

I found only one JUnit test being run from the harness; LobStreamsTest.junit. However, this is also run by the JUnit suite jdbcapi.
My suggestion is to remove the code related to the old harness in TestConfiguration and disable LobStreamsTest in derbynetclientmats.

A quick test showed that only LobStreamsTest failed when removing all the relevant code in TestConfiguration (ran both derbyall and suites.All)."	3	Task	derby_triage10_11	4	Minor	6	Closed
12365092	QPID	bhupendrab	Provide enumerated description for static constants including delivery mode	"Currently when displaying such information as delivery mode on the management console, the integer value for the static constant used is displayed. We need to display the description in case like this i.e. instead of showing delivery mode as 1 or 2 we should display 'PERSISTENT' or 'NON_PERSISTENT'.

This change should be applied to all such constants.

Please add details of all other such values which need to be enumerated to this description."	4	Improvement	legacy-jmx-console	4	Minor	6	Closed
12365093	QPID	bhupendrab	Consolidate notification view to display all user configured notifications on one view	"Currently notifications are displayed on a queue by queue view, making it difficult for users to monitor all the notifying objects (e.g. queues etc) that they are interested in.

Need to provide a consolidated view to users, displaying all notifications on one view. Need to be able to add new notifications for objects to this view easily too."	4	Improvement	legacy-jmx-console	4	Minor	6	Closed
12365455	QPID	bhupendrab	Add login functionality for a qpid server from the management console	"Currently user can connect to any qpid broker without any username/password.
Add a login functionality for user to enter username and password for connecting to a qpid broker."	2	New Feature	legacy-jmx-console	4	Minor	6	Closed
12365577	QPID	ritchiem	Main startup of virtualhosts doesn't correctly resolve any config file variables such as ${conf}	"Main.setupVirtualHosts/startup

Doesn't correctly resolve the path from the virtualhosts section of the XML. Currently it resolved ${conf} manually to be the location of the config.xml file and not the value specified in the xml file.

This should be resolved by the Configuration classes."	1	Bug	starter	3	Major	6	Closed
12365789	QPID	gemmellr	Queue depth to be shown in bytes or KBytes as appropriate in mangement console.	"Currently the Queue depth is shown as KB and if the value is less than 1024bytes, it is shown as 0.
The feature of showing the queue depth in bytes, KB, MB should be in the management console and broker should send the actual value in bytes.
"	4	Improvement	legacy-jmx-console	3	Major	6	Closed
12366428	DERBY	rhillegas	Network client does not retain the INOUT parameter value change for subsequent execution	" If I set a INOUT parameter to a value (say 12.3) and it gets 
modified by the procedure to another value (say 45.6) then on 
the next execution
     of the same CallableStatement, embedded maintains the 
current value (45.6), while network server reverts to the 
former value (12.3).  

This issue was found while converting the test lang/procedure.java.  See references to this issue in the converted LangProcedureTest.java

"	1	Bug	derby_triage10_8	4	Minor	6	Closed
12366429	DERBY	knutanders	Network Client allows execution of callable statement when one of the parameters is not set	"If the second input parameter is set and the first is not.  Client allows execution of the stored procedure.  See the following code in LangProcedureTest.java with a reference to this bug.

            op.clearParameters();
            op.setString(2, ""2"");
            try {
                // a not set
                    op.execute();                
                    fail(""FAIL - a  not set"");
            } catch (SQLException sqle) {
                assertSQLState(""07000"", sqle);
            }
        
"	1	Bug	derby_backport_reject_10_8, derby_triage10_8	4	Minor	6	Closed
12366901	QPID	ritchiem	Allow Qpid JMX Management console to manage access file.	"Currently the qpid access file contains a single test entry of guest with password guest.

Augment the management console to provide access to edit this file.

Naturally this means the management console will have to have access controls placed on it.

"	2	New Feature	legacy-jmx-console	3	Major	6	Closed
12367660	QPID	rupertlssmith	Complete Interop Testing	"Inteorp test coordinator 90% complete, Java test client 90%.

Get this working, and do a quick port of test clients to all languages.
"	1	Bug	amqp_compliance	3	Major	6	Closed
12367671	QPID	bhupendrab	UserManagement panel lists all users but only after a View Users has been executed and is not updated on Create/Delete User	"The initial view of the management console is 'View Users' which is populated with the User Data however it is only when the 'Execute' button is pressed on this screen do the other panels 'Set [Rights|Password]' | 'Delete user' update to show a list.

"	1	Bug	legacy-jmx-console	3	Major	6	Closed
12366906	QPID	bhupendrab	Provided GUI to display and edit user details.	"The AMQUserManagementMBean will provide the following methods:

viewUsers() -> TabularData -> Username(String), read(boolean), write(boolean), admin(boolean))
AccessResult setPassword(username(String), password(String))
AccessResult setRights(String username , boolean read, boolean write, boolean admin)
AccessResult createUser(String username, String password, boolean read, boolean write, boolean admin)
AccessResult deleteUser(String username)

This should be used to provide an interface on the management console.

Of course sending a plain text password is not very secure so the jmx connection should encrypte the password or use other means."	7	Sub-task	legacy-jmx-console	3	Major	6	Closed
12368060	ODE	vanto	<validate> activity is not implemented	"WS-BPEL 2.0 compliance issue. 
We do not implement the <validate> activity. "	1	Bug	patch	4	Minor	1	Open
12367653	QPID	rupertlssmith	Incorrect Exception thrown from send() method.	Sending a message to a null destination should throw an UnsupportedOperationExceptionnot an InvalidDestinationException	1	Bug	jms_compliance	3	Major	6	Closed
12367669	QPID	bhupendrab	Attempting to connect with valid credentials but no access rights doesn't deny access.	"The user is denied access but the console shows connection but logs out.

The connection has no operations.

Error in connecting to Qpid broker
java.lang.SecurityException: Access denied
        at org.apache.qpid.server.management.MBeanInvocationHandlerImpl.invoke(M
BeanInvocationHandlerImpl.java:138)
        at $Proxy8.queryMBeans(Unknown Source)
        at javax.management.remote.generic.ServerIntermediary.handleRequest(Serv
erIntermediary.java:313)
        at javax.management.remote.generic.ServerIntermediary$PrivilegedRequestJ
ob.run(ServerIntermediary.java:951)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.management.remote.generic.ServerIntermediary$RequestHandler.han
dleMBSReqMessage(ServerIntermediary.java:727)
        at javax.management.remote.generic.ServerIntermediary$RequestHandler.exe
cute(ServerIntermediary.java:629)
        at com.sun.jmx.remote.generic.ServerSynchroMessageConnectionImpl$RemoteJ
ob.run(ServerSynchroMessageConnectionImpl.java:266)
        at com.sun.jmx.remote.opt.util.ThreadService$ThreadServiceJob.run(Thread
Service.java:208)
        at com.sun.jmx.remote.opt.util.JobExecutor.run(JobExecutor.java:59)
"	1	Bug	legacy-jmx-console	3	Major	6	Closed
12367688	DERBY	rhillegas	Create master ant target for generating all release artifacts, including code and doc artifacts	This is one of the tasks tracked by master JIRA DERBY-2571.	4	Improvement	releasegeneration	3	Major	6	Closed
12368859	DERBY	chaase3	SEVERE error involving column-width property	"A SEVERE error like the following appears during the PDF generation of two of the manuals:

      [fop] May 8, 2007 9:48:40 AM org.apache.fop.fo.PropertyList convertAttributeToProperty
      [fop] SEVERE: Ignoring property: column-width="""" (file:///C:/javadb/trunk/out/adminguide/derbyadmin.fo:779:247: No conversion defined ; property:'column-width')

It appears the following number of times for each manual.

adminguide: 2
ref: 80

The messages appear to have something to do with the processing of tables, although they do not seem to have anything to do with how the colwidth attribute is specified. 

The errors don't seem to affect the correctness of the generated output. For the Reference Manual in particular, however, they are a major nuisance. It would be desirable to know how to get rid of them, either by correcting the DITA source or by fixing the toolkit in some way.
"	1	Bug	derby_backport_reject_10_5	3	Major	6	Closed
12368107	IVY	maartenc	Tool support for checking code	You should use tools like Checkstyle, PMD and Findbugs for checking the code for possible errors.	4	Improvement	patch	4	Minor	1	Open
12368475	DERBY	knutanders	Server SQLException error codes are not returned to client	"ErrorCodes from returned SQLExceptions are not retained in client.  e.g. in the example below, client reports an errorcode of -1 instead of 30000.    If DRDA allows it would be good for the errorCode to be retained

[C:/test] java -Dij.showErrorCode=true org.apache.derby.tools.ij
ij version 10.3
ij> connect 'jdbc:derby:wombat';
ij> create table t(i nt, s smallint);
ERROR 42X01: Syntax error: Encountered """" at line 1, column 18. (errorCode = 30000)
ij> exit;
[C:/test] ns start -noSecurityManager &
[2]     5712
[C:/test] Apache Derby Network Server - 10.3.0.0 alpha - (1) started and ready to accept connections on port 1527 at 200
7-04-20 17:36:27.188 GMT

[C:/test] java -Dij.showErrorCode=true org.apache.derby.tools.ij
ij version 10.3
ij> connect 'jdbc:derby://localhost:1527/wombat';
ij> create table t(i nt, s smallint);
ERROR 42X01: Syntax error: Encountered """" at line 1, column 18. (errorCode = -1)
ij>

Once this has been fixed ErrorCodeTest can be enabled for client.

"	1	Bug	derby_backport_reject_10_9, derby_triage10_9	4	Minor	6	Closed
12368857	DERBY	chaase3	SEVERE error involving column-number property	"A SEVERE error like the following appears during the PDF generation of most of the manuals:

      [fop] May 8, 2007 9:48:40 AM org.apache.fop.fo.PropertyList convertAttributeToProperty
      [fop] SEVERE: Ignoring property: column-number="""" (file:///C:/javadb/trunk/out/adminguide/derbyadmin.fo:523:788: No conversion defined ; property:'column-number')

It appears the following number of times for each manual.

adminguide: 288
devguide: 16
getstart: 0
ref: 7392
tools: 56
tuning: 0

The messages appear to have something to do with the processing of tables, but the number of messages has nothing to do with the number of actual tables in the manual, or with the number of colname, colnum, colwidth or other attributes, as far as I can tell.

The errors don't seem to affect the correctness of the generated output. For the Reference Manual in particular, however, they are a major nuisance. It would be desirable to know how to get rid of them, either by correcting the DITA source or by fixing the toolkit in some way.
"	1	Bug	derby_backport_reject_10_5	3	Major	6	Closed
12369382	HDFS	arshad.mohammad	Add the current time to all the pages in the user interface	"Adding current time to all of the pages, so that current time of the machine serving the page is displayed in the UI

As discussed in the hadoop-dev mailing list by Arkady Borkovsky :

""it would be so nice to add the CURRENT TIME to all the pages.
For naive users like myself, understanding universal time is very difficult.  So knowing what the cluster thinks about current time makes it so much easier to understand when a job has actually started or ended.... ""

"	4	Improvement	newbie	4	Minor	5	Resolved
12370313	DERBY	mamtas	performance of like in territory based collation databases may be improved by changing way collation elements are calculated.	"WorkHorseForCollatorDatatypes.java has a method getCollationElementsForString() which currently gets
called when processing like clauses in databases that have been created with territory based collation, this is
not an issue in pre-10.3 databases or post 10.3 default databases.
getCollationElementsForString gets the collation elements for the entire  value of the String held by
the datatype using the class.

If you take the case of pattern 'A%' and the value of datatype is 'BXXXXXXXXXXXXXXXXXXXXXXX', 
then it would have been better to  better to get collation elements one character of the String value at a time
to avoid the  process of getting collation elements for the entire string when we don't really need it 
One could imagine this might have a huge performance impact on running like against a long clob where
the like pattern has leading fixed-length pattern to match.

Comments on this from Dan and Dag can be found in DERBY-2416."	4	Improvement	derby_triage10_10	3	Major	6	Closed
12370124	DERBY	dagw	store/encryptDatabase.sql fails intermittently with ClassNotFoundException, Log Corrupted	"Failure seen in derbyall/encryptionAll run on WinXP (10.2.2.1). So far unable to reproduce (standalone or as part of derbyall, encryptionAll or encryptionBlowfish).

<method>
store/encryptDatabase.sql
</method>

<signature>
Failure details:
********* Diff file derbyall/encryptionAll/encryptionBlowfish/encryptDatabase.diff
*** Start: encryptDatabase jdk1.4.2_08 encryptionAll:encryptionBlowfish 2007-05-21 05:07:55 ***
95 del
< ERROR XBM06: Startup failed. An encrypted database cannot be accessed without the correct boot password.
95a95
> ERROR XJ001: Java exception: 'ERROR XBM0U: No class was registered for identifier 15009.: java.lang.ClassNotFoundException'.
Test Failed.
*** End:   encryptDatabase jdk1.4.2_08 encryptionAll:encryptionBlowfish 2007-05-21 05:08:12 ***
</signature>

derby.log also reports ""ERROR XSLA3: Log Corrupted, has invalid data in the log stream."""	1	Bug	derby_backport_reject_10_5	3	Major	6	Closed
12370745	ODE	vanto	Restful Interface to Process Manager	Develop a restful interface to the process manager	2	New Feature	patch	3	Major	1	Open
12370840	AXIS2	dsosnoski	org.apache.axis2.jibx.CodeGenerationUtility doesn't support <wsdl:message> with zero parts (empty message)	"Wsdl abstract:

.....
<wsdl:message name=""initiateRequestInputMessage"">
  <wsdl:part name=""payload"" element=""tns:....""/>
</wsdl:message>
<wsdl:message name=""emptyMessage""/>
<wsdl:portType name=""myPortType"">
  <wsdl:operation name=""initiateRequest"">
    <wsdl:input message=""tns:initiateRequestInputMessage""/>
    <wsdl:output message=""tns:emptyMessage""/>
  </wsdl:operation>
</wsdl:portType>
.....

Given this kind of wsdl, WSDL2Java throws the following exception:

Exception in thread ""main"" org.apache.axis2.wsdl.codegen.CodeGenerationException: java.lang.RuntimeException: No element reference in message emptyMessage
        at org.apache.axis2.wsdl.codegen.CodeGenerationEngine.generate(CodeGenerationEngine.java:256)
        at org.apache.axis2.wsdl.WSDL2Code.main(WSDL2Code.java:32)
        at org.apache.axis2.wsdl.WSDL2Java.main(WSDL2Java.java:21)
Caused by: java.lang.RuntimeException: No element reference in message emptyMessage
        at org.apache.axis2.jibx.CodeGenerationUtility.mapMessage(CodeGenerationUtility.java:1007)
        at org.apache.axis2.jibx.CodeGenerationUtility.engage(CodeGenerationUtility.java:415)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.axis2.wsdl.codegen.extension.JiBXExtension.engage(JiBXExtension.java:74)
        at org.apache.axis2.wsdl.codegen.CodeGenerationEngine.generate(CodeGenerationEngine.java:209)
        ... 2 more

Empty messages like the one above are valid according to WS-I Basic Profile 1.1:
-------------------------------------------------
4.4.1 Bindings and Parts
.....
Use of wsdl:message elements with zero parts is permitted in Document styles to permit operations that can send or receive envelopes with empty soap:Bodys.
-------------------------------------------------

Such messages are also supproted by ADB."	1	Bug	jibx	3	Major	1	Open
12371265	DERBY	mamtas	Ensure LIKE predicate follows correct rules for determing collation	"The current code in LikeEscapeOperatorNode seems to only check that the collations are identical. That is not the correct mechanism for determing collation which is based upon SQL spec Section 9.13 ""Collation determination"" or item 12 in the DERBY-1478 wiki page.

http://wiki.apache.org/db-derby/BuiltInLanguageBasedOrderingDERBY-1478

I think it's also essential that the (somewhat complex) logic to implement collation determination is in a single method, not repeated multiple times for each collation.

There is a TODO in LikeEscapeOperatorNode  that might be related to this."	7	Sub-task	derby_triage10_10	3	Major	4	Reopened
12371857	QPID	ritchiem	Use RAT to check for license problems.	"http://mojo.codehaus.org/rat-maven-plugin

Use RAT as a plugin or jar to check licencing of package. Could also be used for other language releases (C++, Ruby/Python)."	3	Task	legacy-jmx-console	3	Major	6	Closed
12372918	AXIS2	amilachinthaka	Allow for setting typesystemname when using XmlBeans	"Allow for setting the typesystemname when using XmlBeans with:

- the axis2-wsdl2code-maven-plugin
- the Ant task
- the Eclipse codegen plugin

similar to the fix for AXIS2-926.

Anyone who uses e.g. the axis2-wsdl2code-maven-plugin, has a
couple of WSDL files in his/her project, and has run mvn site several
times knows that you would really want this option.  Otherwise you end
up with hundreds and hundreds of megabytes of useless
.../resources/schemaorg_apache_xmlbeans/system/s0... directories, all
slightly different.  (A similar situation would arise for those using Ant.)
"	4	Improvement	xmlbean	3	Major	1	Open
12373481	DERBY	knutanders	Share code between readExternal() and readExternalFromArray()	Most of the implementations of DataValueDescriptor.readExternalFromArray(ArrayInputStream) are identical to their corresponding Externalizable.readExternal(ObjectInput) methods. Since ArrayInputStream implements ObjectInput, readExternalFromArray() could in those cases just have forwarded calls to readExternal() instead of duplicating the code. A default forwarding implementation of readExternalFromArray() could be placed in org.apache.derby.iapi.types.DataType, and all the existing implementations, except those with optimizations for ArrayInputStream, could be removed.	4	Improvement	derby_triage10_10	4	Minor	6	Closed
12373965	AXIS2	amilachinthaka	UBL-2.0 Schemes throw Exception when using jaxbri databinding 	"I'm trying to generate the server code from a wsdl using jaxb-2.0+jdk1.5 but i 'm always getting the same error. The syntax i'm using is this:
 
%AXIS2_HOME%\bin\wsdl2java.bat -uri http://localhost/mywsdl.wsdl -p mynamespace -o target_directory_name -d jaxbri -s -wv 1.2 -ss -sd
 
and get the error:
 


Exception in thread ""main"" org.apache.axis2.wsdl.codegen.CodeGenerationException
: java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
        at org.apache.axis2.wsdl.codegen.CodeGenerationEngine.generate (CodeGener
ationEngine.java:256)
        at org.apache.axis2.wsdl.WSDL2Code.main(WSDL2Code.java:32)
        at org.apache.axis2.wsdl.WSDL2Java.main(WSDL2Java.java:21)
Caused by: java.lang.RuntimeException: java.lang.reflect.InvocationTargetExcepti 
on
        at org.apache.axis2.wsdl.codegen.extension.JAXBRIExtension.engage(JAXBRI
Extension.java:109)
        at org.apache.axis2.wsdl.codegen.CodeGenerationEngine.generate(CodeGener
ationEngine.java:209)   
"	1	Bug	jaxb	3	Major	1	Open
12374623	AXIS2	dsosnoski	JiBXDataSource looses problem details when wrapping an exception	Exceptions thrown during marshalling are wrapped, first in a JiBXException and then in an XMLStreamException. When stack trace details are output, such as on server errors sent back to the client, the original exception information is then missing. It appears the main problem is the XMLStreamException not chaining to the wrapped exception, but this can be partially addressed by adding the original exception message to the JiBXException message, which *is* printed in the stack trace.	1	Bug	jibx	3	Major	1	Open
12374078	UIMA	schor	"CDE: user reports that messages ""Revert to Last Valid..."" and ""Edit Existing..."" are confusing alternatives, and they don't know what they mean"	"For many kinds of errors, the CDE will offer this choice.  But users don't understand what the choice means, or what happens to the file.  

"	4	Improvement	Stale	4	Minor	5	Resolved
12375533	AXIS2	amilachinthaka	AntCodegenTask doesn't allow to specify external binding customization when using JAXB-RI	"Ant task for generating Java code from WSDL (org.apache.axis2.tool.ant.AntCodegenTask) doesn't allow to specify external binding customization files for JAXB-RI data binding.

When generating Java classes from XSD documents using XJC (com.sun.tools.xjc.XJCTask) separately, such feature is available.
"	4	Improvement	ant, jaxb	4	Minor	1	Open
12376030	DERBY	knutanders	Out of memory error when creating a very large table	"When creating an extremely large table (c.50 indexes, c.50 FK constraints), IJ crashes with an out of memory error. The table can be created successfully if it is done in stages, each one in a different IJ session.

From Kristian Waagan:

""With default settings on my machine, I also get the OOME.
A brief investigation revealed a few things:

  1) The OOME occurs during constraint additions (with ALTER TABLE ... 
ADD CONSTRAINT). I could observe this by monitoring the heap usage.

  2) The complete script can be run by increasing the heap size. I tried with 256 MB, but the monitoring showed usage peaked at around 150 MB.

  3) The stack traces produced when the OOME occurs varies (as could be expected).

  4) It is the Derby engine that ""produce"" the OOME, not ij (i.e. when I ran with the network server, the server failed).

I have not had time to examine the heap content, but I do believe there is a bug in Derby. It seems some resource is not freed after use.""
"	1	Bug	derby_triage10_5_2	3	Major	6	Closed
12376121	HADOOP	amar_kamat	Improve the utilization of shuffle copier threads	"In the current design, the scheduling of copies is done and the scheduler (the main loop in fetchOutputs) won't schedule anything until it hears back from at least one of the copier threads. Due to this, the main loop won't query the TaskTracker asking for new map locations and may not be using all the copiers effectively. This may not be an issue for small-sized map outputs, where at steady state, the frequency of such notifications is frequent.
Ideally, we should schedule all what we can, and, depending on how busy we currently are, query the tasktracker for more map locations.
"	4	Improvement	pull-request-available	3	Major	6	Closed
12376397	QPID	ritchiem	Allow Hex view of object data messages	"Currently only text data is shown. Showing the first n bytes of the object msgs in hex would be helpful. Perhaps with the option to view the next n.

Similar code currently exists in the MessageStoreTool. "	2	New Feature	legacy-jmx-console	4	Minor	6	Closed
12376700	DERBY	knutanders	Validation of shared plans hurts scalability	"To investigate whether there was anything in the SQL execution layer that prevented scaling on a multi-CPU machine, I wrote a multi-threaded test which continuously executed ""VALUES 1"" using a PreparedStatement. I ran the test on a machine with 8 CPUs and expected the throughput to be proportional to the number of concurrent clients up to 8 clients (the same as the number of CPUs). However, the throughput only had a small increase from 1 to 2 clients, and adding more clients did not increase the throughput. Looking at the test in a profiler, it seems like the threads are spending a lot of time waiting to enter synchronization blocks in GenericPreparedStatement.upToDate() and BaseActivation.checkStatementValidity() (both of which are synchronized on the a GenericPreparedStatement object).

I then changed the test slightly, appending a comment with a unique thread id to the ""VALUES 1"" statement. That means the threads still did the same work, but each thread got its own plan (GenericPreparedStatement object) since the statement cache didn't regard the SQL text strings as identical. When I made that change, the test scaled more or less perfectly up to 8 concurrent threads.

We should try to find a way to make the scalability the same regardless of whether or not the threads share the same plan."	4	Improvement	derby_triage10_10	4	Minor	6	Closed
12377445	UIMA	joern	Cas Editor: Add a drag source to the FSView		4	Improvement	Stale	4	Minor	5	Resolved
12377463	QPID	justi9	[Document] How to use Qpid with 3rd party tools	"Document how to use qpid with 3rd party tools:
Some potential tools where describing the configuration steps may help.
 - JBoss
 - Spring
 - Mule 

"	3	Task	starter	3	Major	1	Open
12378019	DERBY	rhillegas	Derby does not resolve functions bound to methods with varargs.	Varargs were added in Java 5. It would be nice if Derby let you invoke a function bound to a method with a variable length argument list. The Reference Guide states a small number of restrictions for methods which can be invoked as Derby functions: They must be public, static, and not have arguments which are long datatypes. I see no reason that Derby shouldn't be able to resolve and invoke functions which are bound to methods which don't suffer these limitations but which have variable argument lists.	4	Improvement	derby_triage10_10	3	Major	6	Closed
12379240	IVY	jaikiran	Cache Resolver isn't documented	"The Cache Resolver isn't listed/documented in the available resolvers here:
http://incubator.apache.org/ivy/history/trunk/configuration/resolvers.html"	4	Improvement	patch	3	Major	5	Resolved
12381347	DERBY	rhillegas	Support for SQL:2003 MERGE statement	"A relatively common piece of logic in a database application is to check for a row's existence and then either update or insert depending on its existence.

SQL:2003 added a MERGE statement to perform this operation.  It looks like this:

    MERGE INTO table_name USING table_name ON (condition)
    WHEN MATCHED THEN UPDATE SET column1 = value1 [, column2 = value2 ...]
    WHEN NOT MATCHED THEN INSERT column1 [, column2 ...] VALUES (value1 [, value2 ...]) 

At the moment, the only workaround for this would be to write a stored procedure to do the same operation, or to implement the logic client-side.
"	4	Improvement	derby_triage10_10	3	Major	6	Closed
12381968	DERBY	dnj	isNullable on ResultSetMetaData from DatabaseMetaData.getBestRowIdentifier values are opposite when there is no rows in ResultSet vs. when there is a row.	"With code like the following: 

           DatabaseMetaData dmd = conn.getMetaData(); 
            ResultSet rs = dmd.getBestRowIdentifier(null,""APP"",""a"",3,true);
            ResultSetMetaData rsmd = rs.getMetaData(); 
            int actualCols = rsmd.getColumnCount(); 
            for (int i = 0; i < actualCols; i++) 
            { 
                 System.out.print(""getColumnName: "" + rsmd.getColumnName(i+1) + "", isNullable: ""); 
                 System.out.println(rsmd.isNullable(i+1)); 
            } 
The printed values for isNullable returned are opposite of what they are when the getBestRowIdentifier call looks like this:
            ResultSet rs = dmd.getBestRowIdentifier(null,""APP"",""a"",1,true);

In the latter case, the values are:
getColumnName: SCOPE, isNullable: 0
getColumnName: COLUMN_NAME, isNullable: 1
getColumnName: DATA_TYPE, isNullable: 0
getColumnName: TYPE_NAME, isNullable: 1
getColumnName: COLUMN_SIZE, isNullable: 0
getColumnName: BUFFER_LENGTH, isNullable: 0
getColumnName: DECIMAL_DIGITS, isNullable: 0
getColumnName: PSEUDO_COLUMN, isNullable: 0

In the first case, the values are:
getColumnName: SCOPE, isNullable: 1
getColumnName: COLUMN_NAME, isNullable: 0
getColumnName: DATA_TYPE, isNullable: 1
getColumnName: TYPE_NAME, isNullable: 1
getColumnName: COLUMN_SIZE, isNullable: 1
getColumnName: BUFFER_LENGTH, isNullable: 1
getColumnName: DECIMAL_DIGITS, isNullable: 1
getColumnName: PSEUDO_COLUMN, isNullable: 1

The isNullable value should be stable. 
It's probably worthwhile verifying what the value *should* be in the first place.
"	1	Bug	derby_triage10_5_2	5	Trivial	5	Resolved
12382261	OFBIZ	jacques.le.roux	Adding Lamba Probe for monitoring Tomcat (especially when using clusters)	"This is not intended to be added to OFBiz repository since Lamba Probe is GPL licensed.

It all comes from an earlier works by 
Jack Hung http://lists.ofbiz.org/pipermail/dev/2005-May/008571.html 
and 
Sterling Okura http://www.bizlift.com/ofbiz/lambda_probe_for_ofbiz.html

For history you may be interested by http://www.lambdaprobe.org/forum2/message.jspa?messageID=739
And for reference by http://www.lambdaprobe.org/d/installation.shtml

The idea is to provide an easier mean to integrate Lamba Probe. There are 2 parts a patch and a zip file. the zip file is intended to be deployed in hot-deploy. Then after a build (just run ""ant') you should be able to use Lamba Probe : 
http://localhost:8080/probe/                   
login : manager
password : manager

Enjoy"	2	New Feature	Lambda, Probe, Psi	5	Trivial	6	Closed
12382308	TIKA	chrismattmann	OCR support	I don't know of any decent open source pure Java OCR libraries, but there are command line OCR tools like Tesseract (http://code.google.com/p/tesseract-ocr/) that could be invoked by Tika to extract text content (where available) from image files.	2	New Feature	memex	4	Minor	5	Resolved
12382309	TIKA	lewismc	Speech-to-text transcription	"Like OCR for image files (TIKA-93), we could try using speech recognition to extract text content (where available) from audio (and video!) files.

The CMU Sphinx engine (http://cmusphinx.sourceforge.net/) looks promising and comes with a friendly license."	2	New Feature	new-parser, tika-transcription	4	Minor	5	Resolved
12382533	QPID	ritchiem	Restrict imports and update NOTICE file.	"As part of the release process Kevan pointed out we were including servlet-api which is a sun library and voted -1 for our release.

This problem was due to the commons-configuration pom having servlet-api as a dependency. We need to block all the items we don't need from this package and prepare a new release artifact."	3	Task	legacy-jmx-console	3	Major	6	Closed
12382653	MAPREDUCE	acmurthy	Inconsistency in config parameter for RandomWriter	All configuration parameters for RandomWriter start with the suffix {{test.randomwrite}}, except for {{test.randomwriter.maps_per_host}}. Minor inconsistency to fix.	1	Bug	newbie	4	Minor	1	Open
12384636	DERBY	knutanders	Mismatch between comments and actual use of initialSize parameter in CacheFactory and Clock	"The javadoc for org.apache.derby.iapi.services.cache.CacheFactory.newCacheManager() describes the initialSize parameter like this:

		@param initialSize	The number of initial holder objects that will be created

And org.apache.derby.impl.services.cache.Clock's constructor says the following:

		@param initialSize the initial number of cachable object this cache
		holds.
		@param maximumSize the maximum size of the cache.  The cache may grow
		from initialSize to maximumSize if the cache policy notices that there
		is not enough free buffers availiable.  Once the cache hits maximumSize
		it will not grow.  If the cache is full, an exception will be thrown

However, when Clock is created, it does not populate the cache with ""holder objects"" or ""cacheable [objects]"". It only uses the initialSize to specify the initial capacity of the HashMap and the ArrayList that are created.

Either the code should be changed so that it's in line with the comments, or the comments should be changed to match the code. I don't see any compelling reason for changing the code, so I think I would prefer changing the comments."	4	Improvement	derby_triage10_5_2	4	Minor	6	Closed
12384791	HBASE	dhruba	[hbase] Provide a HBase checker and repair tool similar to fsck	We need a tool to verify (and repair) HBase much like fsck	2	New Feature	gsoc	3	Major	6	Closed
12385270	HBASE	lichongxin	Snapshot of table	"Havening an option to take a snapshot of a table would be vary useful in production.

What I would like to see this option do is do a merge of all the data into one or more files stored in the same folder on the dfs. This way we could save data in case of a software bug in hadoop or user code. 

The other advantage would be to be able to export a table to multi locations. Say I had a read_only table that must be online. I could take a snapshot of it when needed and export it to a separate data center and have it loaded there and then i would have it online at multi data centers for load balancing and failover.

I understand that hadoop takes the need out of havening backup to protect from failed servers, but this does not protect use from software bugs that might delete or alter data in ways we did not plan. We should have a way we can roll back a dataset."	2	New Feature	gsoc	4	Minor	6	Closed
12385302	HDFS	mahadev	HDFS shell commands not as expected	">Y! 1667824
>shell commands

(a) -help
    * the usage line is wrong as it suggests that multiple commands  
(options) can be put into one command line. it is not clear which  
options can be comb ine with which.
    * it does not explain what a <path> is -- it is supposed to be a  
URI -- what is the syntax?
    * it does not explain how to specify the ""file system URI""  -- it  
should suggest where to look to get this info.

(b) -du, -ls -- other commands
    * breaks a file name contains a "":""  -- even if this not a file  
in the command, but on in a directory the command reached

(c) -get -getmerge does not work -- the arguments are taken, but the  
output file is not created

(d) -setrep -- lies about having set the replication factor  (for  
local it should say it can do nothing)"	1	Bug	newbie	3	Major	1	Open
12386016	HADOOP	chansler	Shell command ls should support option -d	"Shell command ""ls"" currently does not support option -d. Meanwhile the shell supports command ""stat"", but needs to supply the print format specifying which attributes to print on the screen. It's hard to use and in addition it does not support printing the file permissions. So I would like to propose that  the shell supports ""ls -d"" and deprecates the command ""stat""."	2	New Feature	newbie	3	Major	5	Resolved
12385469	BUILDR	toulmean	AspectJ compiler with compile.using(:aspectj)		2	New Feature	patch	3	Major	6	Closed
12385793	VELTOOLS	claude	GoogleChartTool	"The Google Chart API seems like one of those things that is just begging to have a Tool to simplify its use.

http://code.google.com/apis/chart/"	2	New Feature	gsoc2012	4	Minor	6	Closed
12386458	VFS	kinow	Possible NPE in DefaultFileSystemManager	resolveName(FileName base, String, NameScope) does not protect from a null base variable and will lead to an exception on realBase.getPath() later on in the code.	1	Bug	patch-available	3	Major	5	Resolved
12387183	HDFS	shwetayakkali	Show last Trash expunge time in dfsadmin -report	"We recently had our firewall setup mis-configured such that namenode's trash expunge thread wasn't able to connect to itself for cleaning Trash.

Asking Trash Expunged time to be shown in dfsadmin -report.

(Asked for similar options on secondary namenode checkpoint time in HADOOP-1697)"	2	New Feature	newbie	4	Minor	1	Open
12388036	HDFS	pooja.gupta	A tool to plot the locations of the blocks of a directory	It would be very useful to have a command that we could give a hdfs directory to, that would use fsck to find the block locations of the data files in that directory and group them by host and display the distribution graphically. We did this by hand and it was very for finding a skewed distribution that was causing performance problems. The tool should also be able to group by rack id and generate a similar plot.	2	New Feature	newbie	3	Major	1	Open
12388178	DERBY	dagw	Support min/max values for Java types float/double in real/double columns	"Derby doesn't support the entire range of valid (finite) values of the Java primitive types double/float in columns with SQL type DOUBLE or REAL. This appears to be a limitation that was introduced for compatibility with DB2. There have been some requests on derby-user that we lift this restriction.

The restriction is enforced by the methods normalizeREAL() and normalizeDOUBLE() in org.apache.derby.iapi.types.NumberDataType."	4	Improvement	derby_triage10_10	4	Minor	6	Closed
12388487	UIMA	joern	The Annotation Editor is not a reliable drag source for annotations	Its possible to drag annotations from the annotation editor. Tough this does not work very well.	1	Bug	Stale	4	Minor	5	Resolved
12388527	UIMA	joern	AnnotationEditor should support undo and redo	"Modifications in the Annotation Editor should be undone and redone.

To support undo and redo the Annotation Editor needs to track all modifications done to the CAS. That is only possible if the changed event is not triggered, which does not specify what changed. When this event is triggered the history (and redo list) can just be cleaned.

A user might add an annotation accidentally and quickly wants to remove it again. In many tools undo is a commonly used command for this."	4	Improvement	Stale	4	Minor	5	Resolved
12389039	QPID	aidan	Management Console can't connect using authentication	"It is not possible to connect the management console to the broker using jmx authentication, it makes the broker throw the following exception:
GenericConnectorServer ClientCreation.run
WARNING: Failed to open connection: java.io.StreamCorruptedException: invalid stream header
java.io.StreamCorruptedException: invalid stream header
        at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:764)
at java.io.ObjectInputStream.<init>(ObjectInputStream.java:277)
at com.sun.jmx.remote.socket.SocketConnection$ObjectInputStreamWithLoader.<init>(SocketConnection.java:354)
        at com.sun.jmx.remote.socket.SocketConnection.readMessage(SocketConnection.java:204)
        at com.sun.jmx.remote.opt.security.AdminServer.connectionOpen(AdminServer.java:76)
        at com.sun.jmx.remote.generic.ServerSynchroMessageConnectionImpl.connect(ServerSynchroMessageConnectionImpl.java:58)
        at javax.management.remote.generic.GenericConnectorServer$ClientCreation.run(GenericConnectorServer.java:405)
        at com.sun.jmx.remote.opt.util.ThreadService$ThreadServiceJob.run(ThreadService.java:208)
        at com.sun.jmx.remote.opt.util.JobExecutor.run(JobExecutor.java:59)"	1	Bug	legacy-jmx-console	3	Major	6	Closed
12389178	TAP5	frafac	Support Java Portlet Specification V2 - JSR-286	Specification will be finished early 2008. We need a framework that allows us to write JSR-286 portlets, would be nice if we could stick with T5 for this.	2	New Feature	bulk-close-candidate	3	Major	6	Closed
12390249	UIMA	tong.fin	DDE should not use local replyQueue with http broker	"In DDE when a broker URL starts with ""http"" the replyQueue value must be ""remote"" or omitted.  Perhaps hide or gray-out the ""Service client is inside firewall"" field."	1	Bug	Stale	4	Minor	5	Resolved
12390540	QPID	aidan	Management Console packaging doesn't work for unix	The management console packaging in distribution doesn't work, you're left with a 748K tarfile as opposed to a  11M zip for windows, which then doesn't run as it's missing things like startup.jar	1	Bug	legacy-jmx-console	3	Major	6	Closed
12390676	DERBY	knutanders	junit regression test failure in testInertTime(org.apache.derbyTesting.functionTests.tests.lang.TimeHandlingTest)junit.framework.AssertionFailedError: expected:<2> but was:<3>	"see ibm15 trunk testing:
http://people.apache.org/~myrnavl/derby_test_results/main/windows/testlog/ibm15/635136-suites.All_diff.txt
There were 2 failures:
1) testInertTime(org.apache.derbyTesting.functionTests.tests.lang.TimeHandlingTest)junit.framework.AssertionFailedError: expected:<2> but was:<3>
	at org.apache.derbyTesting.functionTests.tests.lang.TimeHandlingTest.assertTimeEqual(TimeHandlingTest.java:927)
	at org.apache.derbyTesting.functionTests.tests.lang.TimeHandlingTest.checkTimeValue(TimeHandlingTest.java:647)
	at org.apache.derbyTesting.functionTests.tests.lang.TimeHandlingTest.testInertTime(TimeHandlingTest.java:208)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at <unknown class>.<unknown method>(Unknown Source)
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:101)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)
	at junit.extensions.TestSetup.run(TestSetup.java:23)
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)
2) testInertTime(org.apache.derbyTesting.functionTests.tests.lang.TimeHandlingTest)junit.framework.AssertionFailedError: expected:<2> but was:<3>
	at org.apache.derbyTesting.functionTests.tests.lang.TimeHandlingTest.assertTimeEqual(TimeHandlingTest.java:927)
	at org.apache.derbyTesting.functionTests.tests.lang.TimeHandlingTest.checkTimeValue(TimeHandlingTest.java:647)
	at org.apache.derbyTesting.functionTests.tests.lang.TimeHandlingTest.testInertTime(TimeHandlingTest.java:208)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at <unknown class>.<unknown method>(Unknown Source)
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:101)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)
	at junit.extensions.TestSetup.run(TestSetup.java:23)
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)
	at junit.extensions.TestSetup.run(TestSetup.java:23)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)
	at junit.extensions.TestSetup.run(TestSetup.java:23)
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)

FAILURES!!!
Tests run: 8740,  Failures: 2,  Errors: 6

Also failed on j2me testing:
http://people.apache.org/~myrnavl/derby_test_results/main/windows/testlog/weme6.1/635136-suites.All_diff.txt

There were 2 failures:
1) testInertTime(org.apache.derbyTesting.functionTests.tests.lang.TimeHandlingTest)junit.framework.AssertionFailedError: expected:<2> but was:<3>
	at org.apache.derbyTesting.functionTests.tests.lang.TimeHandlingTest.assertTimeEqual(TimeHandlingTest.java:927)
	at org.apache.derbyTesting.functionTests.tests.lang.TimeHandlingTest.checkTimeValue(TimeHandlingTest.java:647)
	at org.apache.derbyTesting.functionTests.tests.lang.TimeHandlingTest.testInertTime(TimeHandlingTest.java:208)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at <unknown class>.<unknown method>(Unknown Source)
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:101)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)
	at junit.extensions.TestSetup.run(TestSetup.java:23)
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)
2) testInertTime(org.apache.derbyTesting.functionTests.tests.lang.TimeHandlingTest)junit.framework.AssertionFailedError: expected:<2> but was:<3>
	at org.apache.derbyTesting.functionTests.tests.lang.TimeHandlingTest.assertTimeEqual(TimeHandlingTest.java:927)
	at org.apache.derbyTesting.functionTests.tests.lang.TimeHandlingTest.checkTimeValue(TimeHandlingTest.java:647)
	at org.apache.derbyTesting.functionTests.tests.lang.TimeHandlingTest.testInertTime(TimeHandlingTest.java:208)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at <unknown class>.<unknown method>(Unknown Source)
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:101)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)
	at junit.extensions.TestSetup.run(TestSetup.java:23)
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)
	at junit.extensions.TestSetup.run(TestSetup.java:23)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)
	at junit.extensions.TestSetup.run(TestSetup.java:23)
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)

FAILURES!!!
Tests run: 8740,  Failures: 2,  Errors: 6
"	1	Bug	derby_triage10_8	5	Trivial	6	Closed
12390868	AXIS2	amilachinthaka	"minOccurs=""0"" is ignored for xs:any when using XMLBeans"	"I have a strange behavior, i'm using XMLBeans as databinding. The codegeneration seems to ignore minOccurs=""0"" when using xs:any.
following part of my xsd:

<xs:element name=""CAdata"" minOccurs=""0"" maxOccurs=""1"" >
  <xs:complexType mixed=""true"">
    <xs:sequence>
      <xs:any namespace=""##any"" processContents=""lax"" minOccurs=""0"" maxOccurs=""unbounded""/>
    </xs:sequence>
    <xs:attribute name=""CAname"" type=""xs:string"" use=""required""/>
  </xs:complexType> 
</xs:element>

and xml:

<X>
...
  <CAdata CAname=""testCA""/>
</X>

If i call .validate() to validate against the schema i get 

error: cvc-complex-type.2.4d: Expected element(s) in element CAdata@http://www

This bug seems only in combination of axis2 and xmlbeans

when using plain xmlbeans the verification is OK.

Any ideas?
"	1	Bug	xmlbean	2	Critical	1	Open
12391115	PDFBOX	lehmi	Excetion while extracting images	"[imported from SourceForge]
http://sourceforge.net/tracker/index.php?group_id=78314&atid=552832&aid=1259747
Originally submitted by guzzil on 2005-08-15 02:40.

when trying to extract images from I pdf, i get exceptions  
like  
Exception in thread ""main"" java.io.IOException: Unknown  
stream filter:COSName{JBIG2Decode}  
        at  
org.pdfbox.filter.FilterManager.getFilter(FilterManager.java:116)  
        at  
org.pdfbox.cos.COSStream.doDecode(COSStream.java:276)  
        at  
org.pdfbox.cos.COSStream.doDecode(COSStream.java:240)  
        at  
org.pdfbox.cos.COSStream.getUnfilteredStream(COSStream.java:173)  
        at  
org.pdfbox.pdmodel.common.PDStream.createInputStream(PDStream.java:205)  
        at  
org.pdfbox.pdmodel.common.PDStream.getByteArray(PDStream.java:458)  
        at  
org.pdfbox.pdmodel.graphics.xobject.PDPixelMap.getRGBImage(PDPixelMap.java:131)  
        at  
org.pdfbox.pdmodel.graphics.xobject.PDPixelMap.write2OutputStream(PDPixelMap.java:153)  
        at  
org.pdfbox.pdmodel.graphics.xobject.PDXObjectImage.write2file(PDXObjectImage.java:117)  
        at  
org.pdfbox.ExtractImages.extractImages(ExtractImages.java:169)  
        at  
org.pdfbox.ExtractImages.main(ExtractImages.java:73)  
  
The pdfs are scanned images, which are afterwards  
optimized with Adobe Acrobats ""optimize"" function.  
  
pdfimages from xpdf can extract the images.  
 
I can send you a pdf with this error (it is to big for an 
upload). 

[comment on SourceForge]
Originally sent by benlitchfield.
Logged In: YES 
user_id=601708

yes please upload the pdf to ftp.pdfbox.org and I will take a 
look at it.

Ben Litchfield"	2	New Feature	JBIG2	4	Minor	6	Closed
12391135	PDFBOX	msahyoun	ImportXFDF results in PDF with larger text fields	"[imported from SourceForge]
http://sourceforge.net/tracker/index.php?group_id=78314&atid=552832&aid=1327309
Originally submitted by roso on 2005-10-14 22:02.

Using PDFBox-0.7.2

ImportXFDF (and ImportFDF) results in PDF with larger text
If focus on field text size is back to normal
Exit the field and the font becomes large again, some
fields display same string overlayed"	1	Bug	Appearance	3	Major	6	Closed
12391163	PDFBOX	msahyoun	"Error when setting the value of a combo box to "" """	"[imported from SourceForge]
http://sourceforge.net/tracker/index.php?group_id=78314&atid=552832&aid=1422082
Originally submitted by catalino on 2006-02-01 17:59.

 Hi all. 

When I try to set the value of a combo box to "" "", it
gives the following error: 
 
Exception in thread ""main""
java.lang.ArrayIndexOutOfBoundsException: -2 
at java.util.ArrayList.set(Unknown Source) 
at
org.pdfbox.pdmodel.interactive.form.PDAppearance.setAppearanceValue(PDAppearance.java:323)

at
org.pdfbox.pdmodel.interactive.form.PDVariableText.setValue(PDVariableText.java:145)

at
org.pdfbox.pdmodel.interactive.form.PDChoiceField.setValue(PDChoiceField.java:91)

at pdfForms.PDFForms.setvalorCampo(PDFForms.java:235) 
at pdfForms.SetValores.main(SetValores.java:

 I found out the following. I think it may help you to
understand the problem. 
When the default value, set by Acrobat Professional
7.0, is set to "" "", the error occurs; when is set to
another value, lets say ""A"", the value "" "" is setted
correctly. If i run the program again, trying to set
the value "" "", the error does not ocurr.
 
Thanks,  
 
Luis Catalino 

[attachment on SourceForge]
http://sourceforge.net/tracker/download.php?group_id=78314&atid=552832&aid=1422082&file_id=165878
Doc1.pdf (application/pdf), 198269 bytes
Form with a combo box"	1	Bug	Appearance	3	Major	6	Closed
12391240	PDFBOX	msahyoun	Setfield is not working in Acrobat 7.0	"[imported from SourceForge]
http://sourceforge.net/tracker/index.php?group_id=78314&atid=552832&aid=1572315
Originally submitted by nobody on 2006-10-06 11:30.

Hello,

I created a acrobat form in version 7.0 and used 
setfield to bind the variables but I am unable to see 
the values when I view online. I am using 
PDFBox_7.0.2.
Here is code that I am using in peoplesoft:
______________________________________
&pdf_file = CreateJavaObject
(""org.pdfbox.pdmodel.PDDocument"");
&source_file = &pdf_file.load
(""Service_Terms_mstr.pdf"");

&jo = CreateJavaObject
(""org.pdfbox.examples.fdf.SetField"");

If &target_field = ""company"" Then
   &field_value = &name;
End-If;

&jo.setField(&source_file, &target_field, 
&field_value);

&source_file.save(&PATH | %UserId | "".pdf"");

ViewURL(""http://"" | &servername | ""/"" | &DBNAME | ""/"" 
| %UserId | "".pdf"", True);

_________________________________________________

I am able to view the whole page except the form 
fields that need to updated using setfield ,they are 
blank. I read somewhere that using version 6.0 would 
help. Please guide me.

Thanks a lot."	1	Bug	Appearance, FDF	4	Minor	6	Closed
12391671	QPID	rhs	add test exclude list to the ant build	Some of the tests on trunk are currently known to fail for understood reasons. An explicit way to exclude these tests results from being reported will help developers detect regressions.	4	Improvement	ant_build_system	3	Major	6	Closed
12391863	AXIS2	amilachinthaka	WSDL2Java with -xsdconfig option -- xb:extension or xb:suffix are ignored	"I'm using WSDL2Java with the -xsdconfig option to control my xmlbean 
generation. The namespace -> package mapping works fine, proving that the 
xsdconfig file is being picked up, but suffix and extension (interface with 
handler) are both ignored (see below).

When I use the xmlbean's scomp, that comes with Axis2, to generate beans all 
is OK - but not integrated with axis.

<xb:config xmlns:xb=""http://xml.apache.org/xmlbeans/2004/02/xbean/config"">

 <xb:namespace uri=""##any"">
  <xb:suffix>XmlBean</xb:suffix>
 </xb:namespace>

  <xb:namespace uri=""http://www.bedsearcher.co.uk/Bs/2007/01"">
  <xb:package>org.bs.service.hello</xb:package>
 </xb:namespace>

 <xb:extension for=""*"">
  <xb:interface name=""org.bs.other.BsExtension"">
   <xb:staticHandler>org.bs.other.BsHandler</xb:staticHandler>
  </xb:interface>
 </xb:extension>

</xb:config>"	1	Bug	XMLBeans,	2	Critical	5	Resolved
12392463	DERBY	nirmal	Argument checking for ResultSet.setFetchSize(int) is incorrect	"The requirement that the argument to ResultSet.setFetchSize(int) be less than Statement.getMaxRows() was dropped in Java 6/JDBC 4, (it is not present in the Java 6 javadoc, but can still be seen in the Java 5 javadoc).

The reason why the client driver doesn't throw an exception in this case is because am.ResultSet incorrectly checks against ResultSet.maxRows_ and NOT am.Statement.getMaxRows(). So when am.Statement.setMaxRows(int) is called after a result set has already been created, am.ResultSet.setFechSize(int) will check against a stale value.

The question is what to do about this. The client driver clearly has a bug, but should we fix it by duplicating the old behavior found in the embedded driver, or change both drivers to comply with latest spec which allows any non-negative value as argument to ResultSet.setFetchSize(int)?"	1	Bug	derby_backport_reject_10_10, derby_triage10_8	4	Minor	6	Closed
12393654	RAT	claudenw	RAT should distinguish the different AL header versions	"RAT currently does not seem to care which version of the AL header is present.

This is a bit misleading; IMO it should distinguish between current AL and obsolete AL headers."	1	Bug	low-hanging-fruit	3	Major	1	Open
12394043	DERBY	knutanders	testfailure in storetests/st_derby715 with ibm 1.5 on iseries machine; one deadlock message missing	"I saw this fail once; a couple of reruns didn't duplicate the problem.

The only difference appears to be that one of the deadlock messages is missing from the output.

4 del
< Got a Deadlock.

"	1	Bug	derby_triage10_8	3	Major	6	Closed
12394078	AXIS2	kishanthan	XXXMessageRecieverInOut.fromOM() does contain duplicated code for XmlBeans Binding 	"The fromOM Method of the generated MessageReciever does contain duplicated code. 

For every operation there is an if-statement equals(type) for the in and out message and for the ExceptionDocument. If the same Exception is shared between different Operations, the if-code is duplicated in this method.

Should be no Problem :-)"	4	Improvement	XMLBeans,	5	Trivial	5	Resolved
12394702	QPID	aidan	ant build system does not completely replace maven	"The ant build system is very fine, and is acknowledged by one and all as being superior to maven. however, it has a couple of bugettes:

* systests don't build and run from the test target
* perftest scripts aren't generated
"	1	Bug	ant_build_system	3	Major	6	Closed
12394797	QPID	gemmellr	Wrong url in README file of Eclipse-plugin	"In README file of there's a link of a wiki page for more informations about  the management console but it's not working.
This has to be change like this this.

Wrong one : http://cwiki.apache.org/confluence/display/qpid/Qpid+Management+Console
Correct one: http://cwiki.apache.org/confluence/display/qpid/JMX+Management+Console

lahiru"	1	Bug	legacy-jmx-console	5	Trivial	6	Closed
12394964	DERBY	kristwaa	internal multiple references from different rows to a single BLOB/CLOB stream leads to various errors when second reference used.	"Derby + Hibernate JPA 3.2.1 problem on entity with Blob/Clob

Hi,

I'm using Derby in Client - Server mode with Hibernate JPA EJB 3.0.
When a query on an entity containing a Clob and some joins on other entites is executed, an exception with the following message is thrown:
  XJ073: The data in this BLOB or CLOB is no longer available.  The BLOB/CLOB's transaction may be committed, or its connection is closed.

This problem occurs when the property ""hibernate.max_fetch_depth"" is greater than 0.
When hibernate.max_fetch_depth=0, the query works.

If Derby is configured in embedded mode, the query works independently of the value of hibernate.max_fetch_depth.

On the Hibernate's documentation, the advised value of hibernate.max_fetch_depth is 3.
Could you explain me if I made something wrong ?

Thank you.
Stephane"	1	Bug	derby_backport_reject_10_5	3	Major	6	Closed
12395129	QPID	ritchiem	Prevent warnings about missing bin / etc directories	"Summary:

Would be good to have a clean build with ant where no warnings were shown.

Currently we have a few modules that show a warning as they have no bin or etc directory to copy to the build tree.

This is due to the generic nature of our build system but using a condition check to see if the directories exist we can prevent the error."	4	Improvement	ant_build_system	3	Major	6	Closed
12395158	QPID	ritchiem	Junit treats Classes ending with Test as testcases	Junit treats Classes in test framework ending with Test as testcases	1	Bug	ant_build_system	4	Minor	6	Closed
12395255	QPID	ritchiem	Update JMX Management Console FAQ on using scrips on Unix systems	"It was noticed that 'uname -p' returns 'unknown' on Ubuntu 7.10, thus failing the purpose of qpidmc_gtk.sh (or qpidmc_motif.sh) and leaving the user clueless. Thus, this must be added to the ""JMX Management Console FAQ"".

Regards,
Senaka"	3	Task	legacy-jmx-console	3	Major	6	Closed
12395257	QPID	aidan	Buttons are not visible in New Connection Dialog Box	Buttons are not visible in New Connection Dialog Box	1	Bug	legacy-jmx-console	3	Major	6	Closed
12395258	QPID	ritchiem	Qpid Management Console Plugin has undefined behaviour in different Eclipse Perspectives	"Qpid Management Console Plugin has undefined behaviour in different Eclipse Perspectives. For example in the Java perspective, I can't create a connection and get a error ""Server Connection Failed"". I believe that the error message must either be informative enough for the user to change the perspective, or, the toolbar and the menu item must rather be disabled in unsupported perspectives.

Regards,
Senaka

N.B. this might not be an Ubuntu specific issue, and I'm not aware of the behaviour on other platforms."	1	Bug	legacy-jmx-console	3	Major	6	Closed
12395260	QPID	gemmellr	Documentation on running Qpid Management Console within Eclipse is Required	Documentation on running Qpid Management Console within Eclipse is Required	4	Improvement	legacy-jmx-console	4	Minor	6	Closed
12395261	QPID	aidan	qpid.management.perspective should be replaced by a better phrase	"qpid.management.perspective should be replaced by a better phrase. It looks a bit odd when compared to other Perspective names.

Regards,
Senaka"	4	Improvement	legacy-jmx-console	4	Minor	6	Closed
12395289	QPID	aidan	NPE Reported Incorrectly by Qpid Management Console	NPE Reported Incorrectly by Qpid Management Console	1	Bug	legacy-jmx-console	4	Minor	6	Closed
12395307	QPID	ritchiem	Test classes should be built by default ant run.	"Summary:
Currently the default ant build doesn't build the tests.

Adding the jar-tests target to the default run would be preferable to help prevent any build breaking commits.

"	4	Improvement	ant_build_system	3	Major	6	Closed
12395308	QPID	ritchiem	Module test results should be listed by module and removed by clean	"Summary:

Currently the test results are all in one directory. If we happen to have two classes with the same name and package in different modules then they would overwrite each other.

They should be stored per module and removed when clean is run. "	3	Task	ant_build_system	3	Major	6	Closed
12395354	QPID	nsantos	managementgen C++ symbol validation	trunk/qpid/cpp/managementgen generates C++ code from a management schema. Some values in the schema are translated into C++ symbols without validation resulting in invalid C++ files.	4	Improvement	old_code_generator_component	4	Minor	6	Closed
12395399	QPID	rhs	Test report is not generated 	"The test report is not generated as module specific result dirs are now used. 
Solution: change report ""fileset"" for including results from all modules. "	1	Bug	ant_build_system	3	Major	6	Closed
12395462	QPID	nsantos	managementgen only exists in qpid C++ source	The Python managementgen program only exists in the qpid C++ source, and is therefore only available to qpid C++ though it is of general use. managementgen should be packaged so others who want to write managed objects can take advantage of it.	4	Improvement	old_code_generator_component	3	Major	6	Closed
12396022	QPID	aidan	mllib passes absoloute windows path as URL	mllib/__init__.py xml_parse uses os.path.absname which produces a windows path (C:\foo\bar) on cygwin, which causes a MalformedURLException to thrown when the codegenerator is run, stopping the build. 	1	Bug	old_code_generator_component	3	Major	6	Closed
12396375	QPID	ritchiem	Permissions incorrect on bin directory on trunk release	Need to re-instate permissions for rx on all scripts in bin dir of built release (currently rwx for owner only)	1	Bug	ant_build_system	3	Major	6	Closed
12396384	QPID	rhs	Ant generated qpid-incubating.jar has the wrong paths	"The MANIFEST.MF that ant generates in qpid-incubating.jar has the wrong path to the libraries, it's referencing them as ""lib//build/lib/"" which should be just ''

- Aidan"	1	Bug	ant_build_system	3	Major	6	Closed
12396566	HDFS	stevel@apache.org	NetUtils.createSocketAddr NPEs if dfs.datanode.ipc.address is not set for a data node	"DataNode.startDatanode assumes that a configuration always returns a non-null dfs.datanode.ipc.address value, as the result is passed straight down to NetUtils.createSocketAddr

InetSocketAddress ipcAddr = NetUtils.createSocketAddr(
        conf.get(""dfs.datanode.ipc.address""));

which triggers an NPE

Caused by: java.lang.NullPointerException
at org.apache.hadoop.net.NetUtils.createSocketAddr(NetUtils.java:130)
at org.apache.hadoop.net.NetUtils.createSocketAddr(NetUtils.java:119)
at org.apache.hadoop.dfs.DataNode.startDataNode(DataNode.java:353)
at org.apache.hadoop.dfs.DataNode.(DataNode.java:185)"	1	Bug	newbie	4	Minor	5	Resolved
12396696	DERBY	knutanders	'PrivilegedActionException: javax.management.InstanceNotFoundException' in '*(VersionMBeanTest / NetworkServerMBeanTest)'	"

suitesAll fail *************************************************************
1) testDerbynetJarAttributeAlpha(org.apache.derbyTesting.functionTests.tests.management.VersionMBeanTest)java.security.PrivilegedActionException: javax.management.InstanceNotFoundException: org.apache.derby:type=Version,system=c013800d-011a-02c6-d312-0000600c993a,jar=derbynet.jar
suitesAll fail *************************************************************
.........................................
.
.
.........................................
.............................
Time: 8,078.973
There was 1 error:
1) testDerbynetJarAttributeAlpha(org.apache.derbyTesting.functionTests.tests.management.VersionMBeanTest)java.security.PrivilegedActionException: javax.management.InstanceNotFoundException: org.apache.derby:type=Version,system=c013800d-011a-02c6-d312-0000600c993a,jar=derbynet.jar
	at java.security.AccessController.doPrivileged(Native Method)
	at org.apache.derbyTesting.functionTests.tests.management.MBeanTest.getAttribute(MBeanTest.java:379)
	at org.apache.derbyTesting.functionTests.tests.management.MBeanTest.checkBooleanAttributeValue(MBeanTest.java:431)
	at org.apache.derbyTesting.functionTests.tests.management.VersionMBeanTest.testDerbynetJarAttributeAlpha(VersionMBeanTest.java:124)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:101)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)
	at junit.extensions.TestSetup.run(TestSetup.java:25)
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)
	at junit.extensions.TestSetup.run(TestSetup.java:25)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)
	at junit.extensions.TestSetup.run(TestSetup.java:25)
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)
Caused by: javax.management.InstanceNotFoundException: org.apache.derby:type=Version,system=c013800d-011a-02c6-d312-0000600c993a,jar=derbynet.jar
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getMBean(DefaultMBeanServerInterceptor.java:1094)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getAttribute(DefaultMBeanServerInterceptor.java:662)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.getAttribute(JmxMBeanServer.java:638)
	at org.apache.derbyTesting.functionTests.tests.management.MBeanTest$4.run(MBeanTest.java:382)
	... 42 more

FAILURES!!!
Tests run: 10443,  Failures: 0,  Errors: 1



http://dbtg.thresher.com/derby/test/trunk15/jvm1.5/testing/testlog/SunOS-5.10_i86pc-i386/660248-org.apache.derbyTesting.functionTests.suites.All_diff.txt :
org.apache.derbyTesting.functionTests.suites.All fail *************************************************************
1) testAttributeAccumulatedConnectionCount(org.apache.derbyTesting.functionTests.tests.management.NetworkServerMBeanTest)java.security.PrivilegedActionException: javax.management.InstanceNotFoundException: org.apache.derby:type=NetworkServer,system=c013800d-011a-2687-5555-ffffe3512519
2) testAttributeActiveConnectionCount(org.apache.derbyTesting.functionTests.tests.management.NetworkServerMBeanTest)java.security.PrivilegedActionException: javax.management.InstanceNotFoundException: org.apache.derby:type=NetworkServer,system=c013800d-011a-2687-5555-ffffe3512519
3) testAttributeBytesReceived(org.apache.derbyTesting.functionTests.tests.management.NetworkServerMBeanTest)java.security.PrivilegedActionException: javax.management.InstanceNotFoundException: org.apache.derby:type=NetworkServer,system=c013800d-011a-2687-5555-ffffe3512519
4) testAttributeBytesReceivedPerSecond(org.apache.derbyTesting.functionTests.tests.management.NetworkServerMBeanTest)java.security.PrivilegedActionException: javax.management.InstanceNotFoundException: org.apache.derby:type=NetworkServer,system=c013800d-011a-2687-5555-ffffe3512519
5) testAttributeBytesSent(org.apache.derbyTesting.functionTests.tests.management.NetworkServerMBeanTest)java.security.PrivilegedActionException: javax.management.InstanceNotFoundException: org.apache.derby:type=NetworkServer,system=c013800d-011a-2687-5555-ffffe3512519
6) testAttributeBytesSentPerSecond(org.apache.derbyTesting.functionTests.tests.management.NetworkServerMBeanTest)java.security.PrivilegedActionException: javax.management.InstanceNotFoundException: org.apache.derby:type=NetworkServer,system=c013800d-011a-2687-5555-ffffe3512519
7) testAttributeConnectionCount(org.apache.derbyTesting.functionTests.tests.management.NetworkServerMBeanTest)java.security.PrivilegedActionException: javax.management.InstanceNotFoundException: org.apache.derby:type=NetworkServer,system=c013800d-011a-2687-5555-ffffe3512519
8) testAttributeConnectionThreadPoolSize(org.apache.derbyTesting.functionTests.tests.management.NetworkServerMBeanTest)java.security.PrivilegedActionException: javax.management.InstanceNotFoundException: org.apache.derby:type=NetworkServer,system=c013800d-011a-2687-5555-ffffe3512519
9) testAttributeDrdaHost(org.apache.derbyTesting.functionTests.tests.management.NetworkServerMBeanTest)java.security.PrivilegedActionException: javax.management.InstanceNotFoundException: org.apache.derby:type=NetworkServer,system=c013800d-011a-2687-5555-ffffe3512519
.
.
Time: 4,047.235
There were 9 errors:
1) testAttributeAccumulatedConnectionCount(org.apache.derbyTesting.functionTests.tests.management.NetworkServerMBeanTest)java.security.PrivilegedActionException: javax.management.InstanceNotFoundException: org.apache.derby:type=NetworkServer,system=c013800d-011a-2687-5555-ffffe3512519
	at java.security.AccessController.doPrivileged(Native Method)
	at org.apache.derbyTesting.functionTests.tests.management.MBeanTest.getAttribute(MBeanTest.java:379)
	at org.apache.derbyTesting.functionTests.tests.management.NetworkServerMBeanTest.testAttributeAccumulatedConnectionCount(NetworkServerMBeanTest.java:93)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:103)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)
	at junit.extensions.TestSetup.run(TestSetup.java:25)
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)
	at junit.extensions.TestSetup.run(TestSetup.java:25)
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)
	at junit.extensions.TestSetup.run(TestSetup.java:25)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)
	at junit.extensions.TestSetup.run(TestSetup.java:25)
Caused by: javax.management.InstanceNotFoundException: org.apache.derby:type=NetworkServer,system=c013800d-011a-2687-5555-ffffe3512519
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getMBean(DefaultMBeanServerInterceptor.java:1010)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getAttribute(DefaultMBeanServerInterceptor.java:627)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.getAttribute(JmxMBeanServer.java:659)
	at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1387)
	at javax.management.remote.rmi.RMIConnectionImpl.access$100(RMIConnectionImpl.java:81)
	at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1247)
	at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1343)
	at javax.management.remote.rmi.RMIConnectionImpl.getAttribute(RMIConnectionImpl.java:599)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:294)
	at sun.rmi.transport.Transport$1.run(Transport.java:153)
	at java.security.AccessController.doPrivileged(Native Method)
	at sun.rmi.transport.Transport.serviceCall(Transport.java:149)
	at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:466)
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:707)
	at java.lang.Thread.run(Thread.java:595)
	at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:247)
	at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:223)
	at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:126)
	at com.sun.jmx.remote.internal.PRef.invoke(Unknown Source)
	at javax.management.remote.rmi.RMIConnectionImpl_Stub.getAttribute(Unknown Source)
	at javax.management.remote.rmi.RMIConnector$RemoteMBeanServerConnection.getAttribute(RMIConnector.java:857)
	at org.apache.derbyTesting.functionTests.tests.management.MBeanTest$4.run(MBeanTest.java:382)
	... 45 more
.
.
FAILURES!!!
Tests run: 8262,  Failures: 0,  Errors: 9

"	1	Bug	derby_triage10_5_2	4	Minor	6	Closed
12396915	HADOOP	sho.shimauchi	Add tests to Local Directory Allocator for asserting their URI-returning capability	"Original comment:

{quote}Local directory allocator returns a bare path, without a URI specifier.  This means that calling Path.getFileSystem will do the wrong thing with the returned path.   Should really stick a ""file://"" in front.

Also it's test cases need to be improved to make sure this class works fine.
{quote}

Only the latter needed to be done (see below for discussion)."	4	Improvement	newbie	4	Minor	6	Closed
12397884	QPID	ritchiem	NPE displayed when adding queue to navigation	"Summary:
If you sort the queues on a Virtualhost by 'Consumer count' and then proceed to '<- Add to Navigation' then it will fail and a box stating 'Manged Object is null : NPE' will be displayed.


Workaround:

Ensure that 'Consumer count' is not the chosen 'Sort by' value."	1	Bug	legacy-jmx-console	3	Major	6	Closed
12397940	HDFS	lohit	Improve NameNode metrics to distinguish between InodeDirectory and InodeFiles	On trunk we have NameNode which records FilesCreated and FSDirectory records files_deleted. While NameNode records actual number of files created, FSDirectory records deletion of files and directories. These are not consistent. It would be good to re-factor these metrics so that we collect only Inode counts in FSDirectory and file creation/deletion in NameNode.	4	Improvement	newbie	3	Major	5	Resolved
12398110	HDFS	gabor.bota	Support for head in FSShell	For Pig project, we would like to integrate head and tail commands into our shell (Grunt). I could find tail but not head command	2	New Feature	newbie	4	Minor	5	Resolved
12398348	ODE	vanto	Use embedded TransactionManager if database mode is EMBEDDED or INTERNAL	Ode should not use the TransactionManager provided by the JBI container in EMBEDDED and INTERNAL database modes since it creates its own DataSource which are not under the responsibility of the container's TransactionManager.    This happened to work with ServiceMix since it uses the same TransactionManager (Geronimo's), but it's not something we can assume in other JBI environments.	1	Bug	patch	3	Major	5	Resolved
12398839	HADOOP	woopi	DNS.getHosts triggers an ArrayIndexOutOfBoundsException in reverseDNS if one of the interfaces is IPv6	"reverseDNS tries to split a host address string by ""."", and so fails if "":"" is the separator, as it is in IPv6. When it tries to access the parts of the address, a stack trace is seen.
"	7	Sub-task	BB2015-05-TBR, ipv6, patch	3	Major	5	Resolved
12398891	HADOOP	owen.omalley	Create network topology plugin that uses a configured rack ip mask	"We should have a plugin that implements DNSToSwitchMapping with a configurable netmask that defines the rack. Therefore, if you use the high 26 bits to determine your switch, you could configure it with ""ff.ff.ff.c0"""	4	Improvement	newbie	3	Major	1	Open
12399117	QPID	tedross	managementgen/schema.py initializes unsigned value with -1	"The cpp/managementgen/schema.py script generates gen/qpid/management/Queue.cpp that causes compile warnings which are promoted to errors by the build settings. The warnings are:

gen/qpid/management/Queue.cpp: In constructor `qpid::management::Queue::Queue(qpid::management::Manageable*, qpid::management::Manageable*, std::string, uint8_t, uint8_t, uint8_t)':
gen/qpid/management/Queue.cpp:80: warning: converting of negative value `-0x000000001' to `uint64_t'
gen/qpid/management/Queue.cpp: In member function `virtual void qpid::management::Queue::writeStatistics(qpid::framing::Buffer&, bool)':
gen/qpid/management/Queue.cpp:527: warning: converting of negative value `-0x000000001' to `uint64_t'

The attached patch resolves the warnings by initializing using the value set in the spec. At this time, that turns out to be 0.
"	1	Bug	old_code_generator_component	4	Minor	6	Closed
12399188	DERBY	mikem	BlobClob4BlobTest.testLockingWithLongRowBlob fails with .AssertionFailedError: FAIL - statement should timeout	"The test failure looks as follows
testLockingWithLongRowBlob(org.apache.derbyTesting.functionTests.tests.jdbcapi.BlobClob4BlobTest)junit.framework.AssertionFailedError: FAIL - statement should timeout
	at org.apache.derbyTesting.functionTests.tests.jdbcapi.BlobClob4BlobTest.testLockingWithLongRowBlob(BlobClob4BlobTest.java:2383)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)
	at <unknown class>.<unknown method>(Unknown Source)
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:88)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)
	at junit.extensions.TestSetup.run(TestSetup.java:23)
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)
	at junit.extensions.TestSetup.run(TestSetup.java:23)
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)
"	1	Bug	derby_triage10_8	3	Major	6	Closed
12399320	ZOOKEEPER	fpj	Generally improve logging to enable debuggability in the field.	"We need to improve our logging to enable debugging of field issues.

Flavio, assigning to you as you are currently looking at some client/server issues that could benefit from better logging. Please attach patches if you see potential areas for improvement."	4	Improvement	logging	3	Major	6	Closed
12399342	TAP5	mlusetti	Localization: Messages should be overwiteable by Container (.i.e. users) of the component 	"Currently messages are *only* searched in the component and its subclasses catalogs.
This means only the component provider suppies messages.

Often a *User* of a componet ( ie. the container ) wants to override the messages.
In a special case the container is the page which should have means to change *all* messages.

I propose a path-like syntax to specify thew hierarchy.(means all messages are reachable if the container hierarchy is documented)
I.e:
page.properties
-------------------
firstContainerId.innerContainerId.name= overwriten message


In the Message search  for a component it the following search would appear:
   look in immediate container
   ...
   look in the moust outer container (page)
   the look upo in the componet and its subclasses.

If a message is found stop the search and take the message.

  
"	2	New Feature	tapestry5-review-for-closing	3	Major	6	Closed
12399723	MAPREDUCE	azurezk	TestCommandLineJobSubmission assumes there is a /tmp dir that can be used for temp data	"the test case in TestCommandLineJobSubmission assumes that it can create stuff in /tmp:

File buildDir = new File(System.getProperty(""test.build.data"", ""/tmp""));

as well as being unix only, the result is a test case that doesnt work if >1 person is running the test on the same cluster. it should really be driven off the java.io.tmpDir property"	1	Bug	newbie	4	Minor	1	Open
12399959	HDFS	bolshakov.denis@gmail.com	dfsadmin -metasave should also log corrupt replicas info	_hadoop dfsadmin -metasave <filename>_ should also dump information about corrupt replicas map. This could help in telling if pending replication was due to corrupt replicas. 	4	Improvement	newbie	4	Minor	5	Resolved
12399963	HDFS	bharatviswa	dfsadmin -report should report number of blocks from datanode	_hadoop dfsadmin -report_ seems to miss number of blocks from a datanode. Number of blocks hosted by a datanode is a good info which should be included in the report. 	4	Improvement	newbie	4	Minor	5	Resolved
12400211	QPID	ritchiem	Build system unable to target Java 1.5	"Summary:

Currently the build system doesn't fully target the set java.target platform.

The additional Ant tasks and gentools don't use java.source and java.target when building.
"	1	Bug	ant_build_system	3	Major	6	Closed
12400617	QPID	rhs	-Dlog=foo is ignored	All the testprofiles set the various logging config properties to $log rather than ${log} this causes -Dlog=foo to be ignored.	1	Bug	ant_build_system	3	Major	6	Closed
12400554	SHIRO	lhazlewood	Add OpenId as an authentication mechanism	"From the forums:

Are there any plans to incorporate OpenId as an authentication mechanism in JSecurity?

Mike

Tue, 02/19/2008 - 2:58pm ? lhazlewood
Hi Mike, If you would please

Hi Mike,

If you would please open an issue for us (http://issues.jsecurity.org), you can bet that we'll try to get it incorporated as soon as possible. Also, if you have any code that you might be able to kickstart us, please include it.

Thanks!

Les "	2	New Feature	patch	3	Major	1	Open
12400817	QPID	aidan	Enable Exchange level filters.	"Currently Filtering is only done at the queue level. This poses a problem for JMS Topics and selectors. (See linked JIRA for further details).

Exchange level filtering will resolve this problem.

The broker needs to extract the filter arguments that may compose a Bind request and create the required filters.

These filters should then behave exactly like the Queue level filters preventing messages entering a queue. This will prevent any memory leak due to messages sitting on a queue.

The trunk java broker should have the processing capabilities in place it to provide Topic Exchange level processing of filters."	4	Improvement	jms_compliance	3	Major	6	Closed
12400818	QPID	aidan	Client needs to send selector string as part of Binding request when using topics	"When using topics the queue that is created is exclusive and may only have a single consumer. As a result consuming from a topic with a selector poses a memory leak if messages not matching the selector are passed to that queue.

The solution is Exchange level filtering.

The Bind Method allows for an arguments field table to be provide as part of the call so the Selector should be sent to the broker here as part of the bind call for a queue being bound as a JMS Topic with selector.

The broker will have to process this new method arguements,  see QPID-1191"	4	Improvement	jms_compliance	3	Major	6	Closed
12400820	QPID	ritchiem	Bind arguments must be stored with binding in DerbyStore	"Summary:

To ensure that the binding can be correctly created on recovery the arguments provided in the Bind method must be recorded in the Store.

This is part of QPID-1191 to fully implement JMS Topics with Selectors."	4	Improvement	derbystore	3	Major	6	Closed
12400828	QPID	gemmellr	Queue Entries should be in terms of id's not queue -names	"Summary:

By using IDs rather than names we can improve the lookup speed of finding the queue.

This change should be populated down in to the various MessageStores"	4	Improvement	bdbstore, derbystore	4	Minor	6	Closed
12400857	ZOOKEEPER	abranzyck	Follower does not shut itself down if its too far behind the leader.	Currently, the follower if lagging behind keeps sending pings to the leader it will stay alive and will keep getting further and further behind the leader. The follower should shut itself down if it is not able to keep up to the leader within some limit so that gurantee of updates can be made to the clients connected to different servers.	1	Bug	patch	2	Critical	6	Closed
12401052	ZOOKEEPER	randgalt	Need to replace Jute with supported code	"ZooKeeper currently uses Jute to serialize objects to put on the wire and on disk. We pulled Jute out of Hadoop and added a C binding. Both versions of Jute have evolved (although Hadoop still doesn't have a C binding). It would be nice to use a more standard serialization library. Some options include Thrift or Google's protocol buffers.

Our main requirements would be Java and C bindings and good performance. (For example, serializing to XML would give us incredibly bad performance and would not be acceptible!)"	4	Improvement	1	3	Major	10002	Patch Available
12402381	QPID	gemmellr	NullPointerException when setting access level in UserManagement Panel	"Summary:

When using the Management Console to give a user (I used 'client') rights ('admin' in this case) to the console on executing the action a NullPointerException window is shown rather than 'Operation Successful'

This is disconcerting for end users, howvever, the operation does indeed complete successfully "	1	Bug	legacy-jmx-console	3	Major	6	Closed
12402382	QPID	ritchiem	"qpidmc.bat script does not cope with spaces ("" "") in the path."	"Summary:

The management console cannot be installed in to ""Program Files"" as qpidmc.bat script does not correctly operate due to the space in the path."	1	Bug	legacy-jmx-console	3	Major	6	Closed
12402383	QPID	ritchiem	Ability to view Binary Messages was lost in the merge	"Summary:

The ability to view binary messages (ascii and hex views) were lost when the M2.x code base was merged to trunk.

It was checked in at r571491 "	1	Bug	legacy-jmx-console	3	Major	6	Closed
12402390	QPID	aidan	Provide mechanism to build management console	"Summary:

Currently, there is no way to build the management console using ant, whilst the maven system may still work we should complete the move to ant by also updating the packaging required for the console."	1	Bug	legacy-jmx-console	3	Major	6	Closed
12401356	DERBY	myrna	Convert subquery.sql to junit	place holder for converting subquery.sql to junit , which gives intermittent failures with derbyall	1	Bug	derby_backport_reject_10_5	3	Major	6	Closed
12401407	ODE	vanto	Type attribute replaces xsi-type attribute value	"This is related to ODE-343, see for context. 

The xsi:type attribute goes missing when you define a type attribute.

Example:

<soapenv:Envelope xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns:soapenv=""http://schemas.xmlsoap.org/soap/envelope/"" xmlns:myns=""myns""> 
   <soapenv:Header/> 
   <soapenv:Body> 
      <myns:hello> 
         <myns:in xsi:type=""myns:DustyMagicPixie"" type=""Why""> 
            <myns:value>Test message</myns:value> 
            <myns:dust>fooo</myns:dust> 
         </myns:in> 
      </myns:hello> 
   </soapenv:Body> 
</soapenv:Envelope> 
"	1	Bug	patch	3	Major	5	Resolved
12401519	HDFS	templedf	Improve fs -setrep error message for invalid replication factors	"When the replication # is larger than dfs.replication.max (defined in conf), ""fs -setrep"" shows a meaningless error message.  For example,
{noformat}
//dfs.replication.max is 512

$ hadoop fs -setrep 1000 r.txt
setrep: java.io.IOException: file /user/tsz/r.txt.
{noformat}"	4	Improvement	newbie	3	Major	5	Resolved
12401609	HDFS	stevel@apache.org	MiniDFSCluster.stopDataNode will always shut down a node in the cluster if a matching name is not found	"The stopDataNode method will shut down the last node in the list of nodes, if one matching a specific name is not found

This is possibly not what was intended. Better to return false or fail in some other manner if the named node was not located

 synchronized boolean stopDataNode(String name) {
    int i;
    for (i = 0; i < dataNodes.size(); i++) {
      DataNode dn = dataNodes.get(i).datanode;
      if (dn.dnRegistration.getName().equals(name)) {
        break;
      }
    }
    return stopDataNode(i);
  }"	1	Bug	codereview, newbie	4	Minor	6	Closed
12401743	DERBY	dagw	NullPointerException in stress.multi test	"I saw the following NPE in stress.multi running on 10.3 with derbyclient.
java.lang.NullPointerException
        at org.apache.derby.impl.jdbc.EmbedPreparedStatement.getMetaData(Unknown
 Source)
        at org.apache.derby.impl.drda.DRDAConnThread.writeSQLDARD(Unknown Source
)
        at org.apache.derby.impl.drda.DRDAConnThread.processCommands(Unknown Sou
rce)
        at org.apache.derby.impl.drda.DRDAConnThread.run(Unknown Source)
Cleanup action completed
"	1	Bug	derby_triage10_5_2	3	Major	6	Closed
12401862	PIG	rwg	PigPen - Eclipse plugin for a graphical PigLatin editor	This is an Eclipse plugin that provides a GUI that can help users create PigLatin scripts and see the example generator outputs on the fly and submit the jobs to hadoop clusters.	2	New Feature	gsoc, mentor	4	Minor	1	Open
12402795	QPID	gemmellr	Allow individual broker and client binary packages to be built	"Currently our binary release includes classes, src and the jars for the whole project.

It would be much cleaner if we had a broker and client jar package.

"	4	Improvement	ant_build_system	3	Major	6	Closed
12402862	QPID	aidan	Releases missing license files etc. 	"Summary:
Our new ant build system doesn't copy resources/META-INF in to the generated JARs as maven did.

If we can simply this such that:
DISCLAIMER
LICENSE
NOTICE

were the only files in resources and these were simply inserted in to the META-INF dir of the release jar then that would be fine.

Incidentally, the *.txt files are crufty and should be removed. 

If this is done then we can copy the contents of resources to the root of our artefacts as these too need to have the three files present."	1	Bug	legacy-jmx-console	1	Blocker	6	Closed
12403361	DERBY	mikem	'testAutoNetworkServerBoot' fails with 'Network Server state incorrect expected:<false> but was:<true>'	"Seen once (vista, jvm1.6)

1) testAutoNetworkServerBoot(org.apache.derbyTesting.functionTests.tests.jdbcapi.AutoloadTest)junit.framework.AssertionFailedError: Network Server state incorrect expected:<false> but was:<true>
	at org.apache.derbyTesting.functionTests.tests.jdbcapi.AutoloadTest.testAutoNetworkServerBoot(AutoloadTest.java:353)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:104)


See http://dbtg.thresher.com/derby/test/Daily/jvm1.6/testing/testlog/vista/689865-JDBCDriversClient_diff.txt
"	1	Bug	derby_triage10_9	4	Minor	6	Closed
12403756	HDFS	umamaheswararao	name node should warn if only one dir is listed in dfs.name.dir	The name node should warn that corruption may occur if only one directory is listed in the dfs.name.dir setting.	4	Improvement	newbie	4	Minor	5	Resolved
12404018	DERBY	knutanders	Concurrent Inserts of rows with XML data results in an exception	"
We insert rows into a table using the following prepared statement (through JDBC):

INSERT INTO USER1.PSTORE values(?,?, XMLPARSE(document CAST (? AS CLOB) preserve whitespace))

where each of the ?'s are replaced with a string.

One thread runs fine. Two or more result in the following exception: 

org.apache.derby.client.am.SqlException: Java exception: 'FWK005 parse may not be called while parsing.: org.xml.sax.SAXException'.
	at org.apache.derby.client.am.SqlException.<init>(Unknown Source)
	at org.apache.derby.client.am.SqlException.<init>(Unknown Source)

We believe that this comes from the dBuilder.parse(InputSource) method.

"	1	Bug	derby_backport_reject_10_7	3	Major	6	Closed
12404105	AXIS2	dsosnoski	"	
wsdl2java with JiBX binding cannot unwrap integer param"	"1. Use Axis2 1.4

2. Download Axis2 jibx example http://www.sosnoski.com/jibx-wiki/space/axis2-jibx/example/jibx-library.zip

3. Unzip it and configure axis_home and jibx-home

4. In library.wsdl (see attached) change line 18 from

                <element name=""isbn"" type=""string""/>

        to
               
                <element name=""isbn"" type=""integer""/>

5. Run ant generate-server

     [java] Retrieving document at './library.wsdl'.
     [java] log4j:WARN No appenders could be found for logger (org.apache.axis2.description.WSDL11ToAxisServiceBuilder).
     [java] log4j:WARN Please initialize the log4j system properly.
     [java] Exception in thread ""main"" org.apache.axis2.wsdl.codegen.CodeGenerationException: java.lang.RuntimeException: Cannot unwrap element {http://ws.sosnoski.com/library/wsdl}getBook: no format definition found for type {http://www.w3.org/2001/XMLSchema}integer (used by element {http://ws.sosnoski.com/library/wsdl}isbn)
     [java]     at org.apache.axis2.wsdl.codegen.CodeGenerationEngine.generate(CodeGenerationEngine.java:271)
     [java]     at org.apache.axis2.wsdl.WSDL2Code.main(WSDL2Code.java:35)
     [java]     at org.apache.axis2.wsdl.WSDL2Java.main(WSDL2Java.java:24)
     [java] Caused by: java.lang.RuntimeException: Cannot unwrap element {http://ws.sosnoski.com/library/wsdl}getBook: no format definition found for type {http://www.w3.org/2001/XMLSchema}integer (used by element {http://ws.sosnoski.com/library/wsdl}isbn)
     [java]     at org.apache.axis2.jibx.CodeGenerationUtility.unwrapMessage(CodeGenerationUtility.java:801)
     [java]     at org.apache.axis2.jibx.CodeGenerationUtility.engage(CodeGenerationUtility.java:387)
     [java]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
     [java]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
     [java]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
     [java]     at java.lang.reflect.Method.invoke(Method.java:597)
     [java]     at org.apache.axis2.wsdl.codegen.extension.JiBXExtension.engage(JiBXExtension.java:77)
     [java]     at org.apache.axis2.wsdl.codegen.CodeGenerationEngine.generate(CodeGenerationEngine.java:224)
     [java]     ... 2 more "	1	Bug	jibx	3	Major	1	Open
12404236	QPID	aidan	Add test coverage reports	It is hard to know how much test coverage we have. Cobertura can help us here!	1	Bug	ant_build_system	3	Major	6	Closed
12405045	YETUS	aw	the test patch script should check for filenames that differ only in case	It would be nice if the test patch script warned about filenames that differ only in case. We recently had a patch committed that had a pair of colliding filenames and subversion broke badly on my Mac.	2	New Feature	test-patch	3	Major	5	Resolved
12405130	TAP5	thiagohp	Let Grid show column headings when no data	"I would like my Grid to show its column headings even when it is empty (and display the ""empty"" message below them). I can't see how to do this now.  I've tried null lists and empty lists but the result is the same.

Can this feature be added and made optional?"	4	Improvement	month-of-tapestry	4	Minor	5	Resolved
12405641	DERBY	yunlee	Blob.setBytes differs between embedded and client driver when the specified length is invalid	"Blob.setBytes behaves differently with the embedded driver and the client driver.
Assume a 1 byte array and a specified length of 2: Blob.setBytes(1, new byte[] {0x69}, 0, 2)
Embedded: IndexOutOfBoundsException (from java.io.RandomAccessFile.writeBytes or System.arraycopy)
Client: succeeds, returns insertion count 1

The behavior should be made consistent, but what is the correct behavior?

From the Blob.setBytes JavaDoc:
""Writes all or part of the given byte array to the BLOB value that this Blob object represents and returns the number of bytes written. Writing starts at position pos in the BLOB  value; len bytes from the given byte array are written. The array of bytes will overwrite the existing bytes in the Blob object starting at the position pos. If the end of the Blob value is reached while writing the array of bytes, then the length of the Blob value will be increased to accomodate the extra bytes."""	1	Bug	BLOB	4	Minor	6	Closed
12405445	DERBY	knutanders	ALTER TABLE ... ADD COLUMN cannot add identity columns	"ALTER TABLE .. ADD COLUMN cannot be used to add an identity column. There is code to handle identity columns, but it is disabled in the parser. See this thread on derby-user:
http://mail-archives.apache.org/mod_mbox/db-derby-user/200708.mbox/%3C46C5DAA9.8080507@sbcglobal.net%3E

The code was disabled for DB2 compatibility. Since DB2 compatibility is not a goal for Derby, we should see if we could re-enable it."	4	Improvement	derby_triage10_10	4	Minor	6	Closed
12405682	QPID	rhs	ant test target fails for broker-plugins package 	"Summary:
Running ant test fails due to junit.jar not being on the classpath for broker.plugins test target.

The only recent change to build.deps that appears related was to remove junit.jar from client.libs. However client.lib is not referenced by broker-plugins so I am a little stumped.  

There is however no broker-plugins.test.libs defined so adding this will certainly fix the issue for now.

BUILD FAILED
/.../qpid-dev/qpid/java/module.xml:226: The <classpath> for <junit> must include junit.jar if not in Ant's own classpath
"	1	Bug	ant_build_system	3	Major	6	Closed
12406081	QPID	arnaudsimon	Move Qman code under java/management 	"Move Qman code under java/management 

Ultimately we should end up with the following folder tree:

java
  |
  +management
       |
       + broker
       |
       + client
       |
       + common
       |
       + tools

Qman current code would be split between java/management/client and java/management/common 
"	4	Improvement	legacy-jmx-console	3	Major	6	Closed
12405426	ODE	vanto	Message#setHeaderPart should overwrite any previous value	"org.apache.ode.bpel.iapi.Message#setHeaderPart should overwrite any previous value if called twice.

As of today, a new element with the same name is appended to the document. So you can get something like:

<?xml version=""1.0"" encoding=""UTF-8""?>
<header>
   <header_ABC>foo</header_ABC>
   <header_ABC>bar</header_ABC>
</header>

Then when Message.getHeaderPart is invoked, the first element is returned.

The fix must make sure that Message#setHeaderPart overwrite any existing value of the given header."	1	Bug	patch	3	Major	5	Resolved
12406442	DERBY	mamtas	mismatch between error XCL30 and 22003.S.4 and parameters in usage	"I found a script, trunk/tools/testing/i18nTestGenerator/generateClientMessageTest.sh, intended to create a test to verify correctness of client error messages(trunk/java/testing/org/apache/derbyTesting/functionTests/tests/i18n/TestClientMessages.java ). 
The script is broken (see DERBY-1567) but after fixing up the resulting test and running it, it did show two messages which look a little odd in their usage (plus some messages for which the usage looked fine):
                                                            
XCL30 - LANG_STREAMING_COLUMN_I_O_EXCEPTION: 
messages.xml: 
            <msg>
                <name>XCL30.S</name>
                <text>An IOException was thrown when reading a '{0}' from an InputStream.</text>
                <arg>value</arg>
            </msg>
apparently correct number of parameters, but odd...doesn't look like ioe fits the usage in the message text.
EmbedBlob:
            } catch (IOException ioe) {
                throw StandardException.newException(
                        SQLState.LANG_STREAMING_COLUMN_I_O_EXCEPTION, ioe);
            }
has a second parameter:
client.am.Lob:
            throw new SqlException(null,
                        new ClientMessageId(
                            SQLState.LANG_STREAMING_COLUMN_I_O_EXCEPTION),
                        typeDesc,
                        ioe
                    );
looks like second parameter fits the {0}:
SQLBinary: 
		throw StandardException.
			newException(SQLState.LANG_STREAMING_COLUMN_I_O_EXCEPTION,
						 ioe, getTypeName());
SQLChar:
		throw StandardException.
			newException(SQLState.LANG_STREAMING_COLUMN_I_O_EXCEPTION,
						 ioe, getTypeName());

                   throw StandardException.newException(
                            SQLState.LANG_STREAMING_COLUMN_I_O_EXCEPTION, 
                            ioe, 
                            ""java.sql.String"");
--------------------------------------------------------------
22003.S.4 - CLIENT_LENGTH_OUTSIDE_RANGE_FOR_DATATYPE
            <msg>
                <name>22003.S.4</name>
                <text>The length ({0}) exceeds the maximum length for the data type ({1}).</text>
                <arg>number</arg>
                <arg>datatypeName</arg>
            </msg>

correct number of parameters, but new Integer(Integer.MAX_VALUE) returns a number, not a datatype name:             
client.am.PreparedStatement:
		throw new SqlException(
                        agent_.logWriter_,
                        new ClientMessageId(
                            SQLState.CLIENT_LENGTH_OUTSIDE_RANGE_FOR_DATATYPE),
                        new Long(length),
                        new Integer(Integer.MAX_VALUE)
                    ).getSQLException();
client.am.ResultSet:
                throw new SqlException(agent_.logWriter_,
                    new ClientMessageId(SQLState.CLIENT_LENGTH_OUTSIDE_RANGE_FOR_DATATYPE),
                    new Long(length), new Integer(Integer.MAX_VALUE)).getSQLException();
                throw new SqlException(agent_.logWriter_,
                    new ClientMessageId(SQLState.CLIENT_LENGTH_OUTSIDE_RANGE_FOR_DATATYPE),
                    new Long(length), new Integer(Integer.MAX_VALUE)).getSQLException();                
		throw new SqlException(agent_.logWriter_,
                    new ClientMessageId(SQLState.CLIENT_LENGTH_OUTSIDE_RANGE_FOR_DATATYPE),
                    new Long(length), new Integer(Integer.MAX_VALUE)).getSQLException();

-------------------------------------------"	1	Bug	derby_backport_reject_10_8, derby_triage10_5_2	5	Trivial	6	Closed
12406170	QPID	gemmellr	Broker doesn't clearly report missing configuration files such as password file.	"If the password file is missing on startup  the the following exception is shown:

Error configuring message broker: org.apache.commons.configuration.ConfigurationException: java.lang.reflect.InvocationTargetException
2008-09-26 15:14:56,529 ERROR [main] server.Main (Main.java:206) - Error configuring message broker: org.apache.commons.configuration.ConfigurationException: java.lang.reflect.InvocationTargetException
org.apache.commons.configuration.ConfigurationException: java.lang.reflect.InvocationTargetException
	at org.apache.qpid.server.security.auth.database.ConfigurationFilePrincipalDatabaseManager.initialisePrincipalDatabase(ConfigurationFilePrincipalDatabaseManager.java:158)
	at org.apache.qpid.server.security.auth.database.ConfigurationFilePrincipalDatabaseManager.initialisePrincipalDatabases(ConfigurationFilePrincipalDatabaseManager.java:87)
	at org.apache.qpid.server.security.auth.database.ConfigurationFilePrincipalDatabaseManager.<init>(ConfigurationFilePrincipalDatabaseManager.java:56)
	at org.apache.qpid.server.registry.ConfigurationFileApplicationRegistry.initialise(ConfigurationFileApplicationRegistry.java:117)
	at org.apache.qpid.server.registry.ApplicationRegistry.initialise(ApplicationRegistry.java:79)
	at org.apache.qpid.server.registry.ApplicationRegistry.initialise(ApplicationRegistry.java:67)
	at org.apache.qpid.server.Main.startup(Main.java:260)
	at org.apache.qpid.server.Main.execute(Main.java:196)
	at org.apache.qpid.server.Main.<init>(Main.java:96)
	at org.apache.qpid.server.Main.main(Main.java:454)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:90)
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.qpid.server.security.auth.database.ConfigurationFilePrincipalDatabaseManager.initialisePrincipalDatabase(ConfigurationFilePrincipalDatabaseManager.java:148)
	... 14 more
Caused by: java.io.FileNotFoundException: Cannot find password file /home/ritchiem/support/Stars/707/work/cfg/qpid.passwd
	at org.apache.qpid.server.security.auth.database.Base64MD5PasswordFilePrincipalDatabase.setPasswordFile(Base64MD5PasswordFilePrincipalDatabase.java:109)
	... 19 morere

The user must read all the way though to the Caused by section to find the real problem.
This error could be processed on the broker and more appropriate text shown."	1	Bug	starter	4	Minor	6	Closed
12406112	PIG	jay23jack	PERFORMANCE: different strategies for large and small order bys	"Currently pig always does a multi-pass order by where it first determines a distribution for the keys and then orders in a second pass.  This avoids the necessity of having a single reducer.  However, in cases where the data is small enough to fit into a single reducer, this is inefficient.  For small data sets it would be good to realize the small size of the set and do the order by in a single pass with a single reducer.

This is a candidate project for Google summer of code 2011. More information about the program can be found at http://wiki.apache.org/pig/GSoc2011"	4	Improvement	gsoc2011, performance	3	Major	1	Open
12407164	QPID	ritchiem	OSGi client jars would be handy	OSGi is the new hotness, everybody's doing it, so should we!	2	New Feature	ant_build_system	3	Major	6	Closed
12407171	HADOOP	sho.shimauchi	conf.getBoolean must be case insensitive	"Currently, if xx is set to ""TRUE"", conf.getBoolean(""xx"", false) would return false. 

conf.getBoolean should do an equalsIgnoreCase() instead of equals()

I am marking the change as incompatible because it does change semantics as pointed by Steve in HADOOP-4416"	4	Improvement	newbie	4	Minor	6	Closed
12406961	PIG	aniket486	Does pig need a NATIVE keyword?	"Assume a user had a job that broke easily into three pieces.  Further assume that pieces one and three were easily expressible in pig, but that piece two needed to be written in map reduce for whatever reason (performance, something that pig could not easily express, legacy job that was too important to change, etc.).  Today the user would either have to use map reduce for the entire job or manually handle the stitching together of pig and map reduce jobs.  What if instead pig provided a NATIVE keyword that would allow the script to pass off the data stream to the underlying system (in this case map reduce).  The semantics of NATIVE would vary by underlying system.  In the map reduce case, we would assume that this indicated a collection of one or more fully contained map reduce jobs, so that pig would store the data, invoke the map reduce jobs, and then read the resulting data to continue.  It might look something like this:

{code}
A = load 'myfile';
X = load 'myotherfile';
B = group A by $0;
C = foreach B generate group, myudf(B);
D = native (jar=mymr.jar, infile=frompig outfile=topig);
E = join D by $0, X by $0;
...
{code}

This differs from streaming in that it allows the user to insert an arbitrary amount of native processing, whereas streaming allows the insertion of one binary.  It also differs in that, for streaming, data is piped directly into and out of the binary as part of the pig pipeline.  Here the pipeline would be broken, data written to disk, and the native block invoked, then data read back from disk.

Another alternative is to say this is unnecessary because the user can do the coordination from java, using the PIgServer interface to run pig and calling the map reduce job explicitly.  The advantages of the native keyword are that the user need not be worried about coordination between the jobs, pig will take care of it.  Also the user can make use of existing java applications without being a java programmer."	2	New Feature	gsoc, mentor	4	Minor	6	Closed
12407379	QPID	shuston	QMF generator doesn't build the directory tree on Windows	"The qpid/cpp/managementgen/qmf/generate.py code doesn't create the needed subdirectory tree for generated code the first time it's run on Windows. The reason is that the os.stat() function returns a different error for Windows than for Linux if the dir doesn't exist.

This patch fixes it:

Index: qmf/generate.py
===================================================================
--- qmf/generate.py     (revision 708607)
+++ qmf/generate.py     (working copy)
@@ -166,7 +166,7 @@
     try:
       mode = os.stat (path)[ST_MODE]
     except OSError, (err,text):
-      if err == ENOENT:
+      if err == ENOENT or err == ESRCH:
         exists = False
       else:
         raise


Ok to commit this?"	1	Bug	old_code_generator_component	3	Major	6	Closed
12407380	QPID	shuston	Managementgen C++ code gets compile errors on Windows	"The managementgen-generated schema code gets compile errors on Windows because part of the Windows system header files defines OPTIONAL and that token is also used as a string name in generated code. The attached patch changes the generated OPTIONAL to IS_OPTIONAL to resolve this. It also changes INDEX to IS_INDEX just to keep it consistent with OPTIONAL.

Please review and let me know if it's ok to commit this.
Thanks."	1	Bug	old_code_generator_component	3	Major	6	Closed
12407418	QPID	ritchiem	MessageTokenizerTest.testOK_WithRandomNUmberOfMessages failing on build system	"This test has failed a number of times on our continuous build system.

testOK_WithRandomNUmberOfMessages
org.apache.qpid.management.domain.services.MessageTokenizerTest


junit.framework.AssertionFailedError: expected:<3705> but was:<3706>  

at org.apache.qpid.management.domain.services.MessageTokenizerTest.testOK_WithRandomNUmberOfMessages(MessageTokenizerTest.java:95)


Will attach logs."	1	Bug	qman	2	Critical	6	Closed
12407725	MAPREDUCE	ahadr	"Add Jar ""lib"" directory to TaskRunner's library.path setting to allow JNI libraries to be deployed via JAR file  "	"It is extremely convenient to be able to deploy JNI libraries utilized in a custom map-reduce job via the job's JAR file. The TaskRunner already establishes a precedent by automatically adding any jar files contained in the ""lib"" directory of the job jar to the child map/reduce process's classpath. Following this convention, it should also be possible to deploy custom JNI libraries in the same lib directory. This involves adding the path to the job jar's lib directory to the VM's library.path setting (after the jar has been expanded in the job cache directory). This does not elimintate the need add dependent shared libraries that may be referenced by the JNI libraries to the system's LD_LIBRARY_PATH variable. In our deployment configuration, we usually pre-install third party shared libraries across the cluster and only deploy our custom JNI libraries via the job jar.

"	4	Improvement	newbie	3	Major	1	Open
12407869	QPID	shuston	rubygen generates TypeCode.h that is missing IntegerTypes.h	"A recent change to the rubygen code generator for C++ generates a gen/qpid/framing/TypeCode.h with methods that take a uint8_t, but that type requires qpid/sys/IntegerTypes.h to compile on Windows.
This change fixes it:

Index: rubygen/framing.0-10/constants.rb
===================================================================
--- rubygen/framing.0-10/constants.rb   (revision 711592)
+++ rubygen/framing.0-10/constants.rb   (working copy)
@@ -52,6 +52,7 @@
     path=""#{@dir}/TypeCode""
     h_file(path) {
       include(""<iosfwd>"")
+      include(""\""qpid/sys/IntegerTypes.h\"""")
       namespace(@namespace) {
         scope(""enum TypeCode {"", ""};"") {
           genl @amqp.types.map { |t| ""#{typecode_enum t} = #{t.code}"" if t.code}.compact.join("",\n"")
"	1	Bug	old_code_generator_component	3	Major	6	Closed
12407885	HDFS	umamaheswararao	The namespace quota of root directory should not be Integer.MAX_VALUE	The default namespace quota of root directory is set to Integer.MAX_VALUE but the data type of INodeDirectoryWithQuota.nsQuota is long.  So default quota  probably should be Long.MAX_VALUE or some other value like 1,000,000,000.	1	Bug	newbie	3	Major	5	Resolved
12408739	QPID	aidan	Argument Type Mismatch reported from Management Console	"Summary:

When executing 'Set Password' from the JMX Management Console an error 'argument type mismatch' is reported.
The same error occurs when calling 'Create User' , 'Set Password'

Stack trace file attached."	1	Bug	legacy-jmx-console	3	Major	6	Closed
12408742	QPID	ritchiem	Management Console Delete User corrupts password file and jmxremote.access	"Summary:

If a user is deleted using the JMX Management Console 'Delete User' then the password file is rewritten without line endings so the content is all comments.

Also due to QPID-1769 (the inability to lookup the JMX Session username) the jmxremote.access file is left as jmxremote.access.old and the new jmxremote.access.tmp is left empty, preventing the broker from starting up."	1	Bug	legacy-jmx-console	3	Major	6	Closed
12408737	QPID	ritchiem	AMQUserManagementMBean.getCurrentJMXUser no longer returns a valid user	"Summary:
Currently when the password and jmxremote.access files are updated the current username is written in to the file as an audit trail.

This used to work fine however we are now seeing a NullPointerException when performing any updates such as:
Set Rights
Delete User

"	1	Bug	legacy-jmx-console	3	Major	6	Closed
12409051	QPID	aidan	jmxremote.sasl plugin doesnt export packages for other plugins to use	The jmxremote.sasl plugin was created in order to allow the org.apache.qpid.management.ui plugin to import the jmxremote_optional.jar file for use in providing authenticated management console connections to the broke. As such is listed as a dependancy of the org.apache.qpid.management.ui plugin on which the management console is based. However, it does not export the packages for other plugins to use, and additionally is only required when there is a desire to use the authentication security.	1	Bug	legacy-jmx-console	3	Major	6	Closed
12409037	HIVE	he yongqiang	Authorization infrastructure for Hive	Allow hive to integrate with existing user repositories for authentication and authorization infromation.	2	New Feature	authorization	3	Major	6	Closed
12409052	QPID	aidan	Management Console cant complete PLAIN user authentication process	"When the patches I supplied for QPID-1481 and QPID-794 are used, the management console is able to communicate with the broker across the JMXMPConnector link but is still unable to successfully complete the connection, however the failure now occurs during the PLAIN authentication process as opposed to before it like previously. Despite this, the management console reports that ""Qpid server is not running."" 

Enabling debug console output for the management console yields the following exception listing:

java.io.IOException: java.lang.NullPointerException
	at com.sun.jmx.remote.opt.security.AdminClient.throwExceptionOnError(AdminClient.java:379)
	at com.sun.jmx.remote.opt.security.AdminClient.connectionOpen(AdminClient.java:184)
	at com.sun.jmx.remote.generic.ClientSynchroMessageConnectionImpl.connect(ClientSynchroMessageConnectionImpl.java:112)
	at javax.management.remote.generic.GenericConnector.connect(GenericConnector.java:217)
	at javax.management.remote.jmxmp.JMXMPConnector.connect(JMXMPConnector.java:159)
	at javax.management.remote.JMXConnectorFactory.connect(JMXConnectorFactory.java:248)
	at org.apache.qpid.management.ui.jmx.JMXServerRegistry$ConnectorThread.run(JMXServerRegistry.java:204)
	at java.lang.Thread.run(Thread.java:619)
java.io.IOException: java.lang.NullPointerException
	at com.sun.jmx.remote.opt.security.AdminClient.throwExceptionOnError(AdminClient.java:379)
	at com.sun.jmx.remote.opt.security.AdminClient.connectionOpen(AdminClient.java:184)
	at com.sun.jmx.remote.generic.ClientSynchroMessageConnectionImpl.connect(ClientSynchroMessageConnectionImpl.java:112)
	at javax.management.remote.generic.GenericConnector.connect(GenericConnector.java:217)
	at javax.management.remote.jmxmp.JMXMPConnector.connect(JMXMPConnector.java:159)
	at javax.management.remote.JMXConnectorFactory.connect(JMXConnectorFactory.java:248)
	at org.apache.qpid.management.ui.jmx.JMXServerRegistry$ConnectorThread.run(JMXServerRegistry.java:204)
	at java.lang.Thread.run(Thread.java:619)


The broker was slightly more informative however, giving:

GenericConnectorServer ClientCreation.run
WARNING: Failed to open connection: java.lang.NullPointerException
java.lang.NullPointerException
	at org.apache.qpid.server.security.auth.database.PlainPasswordFilePrincipalDatabase.compareCharArray(PlainPasswordFilePrincipalDatabase.java:182)
	at org.apache.qpid.server.security.auth.database.PlainPasswordFilePrincipalDatabase.verifyPassword(PlainPasswordFilePrincipalDatabase.java:130)
	at org.apache.qpid.server.management.JMXManagedObjectRegistry$UserCallbackHandler.handle(JMXManagedObjectRegistry.java:267)
	at org.apache.qpid.server.security.auth.sasl.plain.PlainSaslServer.evaluateResponse(PlainSaslServer.java:81)
	at com.sun.jmx.remote.opt.security.SASLServerHandler.consumeMessage(SASLServerHandler.java:164)
	at com.sun.jmx.remote.opt.security.AdminServer.connectionOpen(AdminServer.java:216)
	at com.sun.jmx.remote.generic.ServerSynchroMessageConnectionImpl.connect(ServerSynchroMessageConnectionImpl.java:98)
	at javax.management.remote.generic.GenericConnectorServer$ClientCreation.run(GenericConnectorServer.java:443)
	at com.sun.jmx.remote.opt.util.ThreadService$ThreadServiceJob.run(ThreadS"	1	Bug	legacy-jmx-console	3	Major	6	Closed
12409097	HBASE	stack	Reconstruction log playback has no bounds on memory used	Makes a TreeMap and just keeps adding edits without regard for size of edits applied; could cause OOME (I've not seen a definitive case though have seen an OOME around time of a reconstructionlog replay -- perhaps this the straw that broke the fleas antlers?)	1	Bug	moved_from_0_20_5	3	Major	6	Closed
12408735	HDFS	xyao	Balancer should run for a configurable # of iterations	"The balancer currently exits if nothing has changed after 5 iterations.

Our site would like to constantly balance a stream of incoming data; we would like to be able to set the number of iterations it ""does nothing"" for before exiting; even better would be if we set it to a negative number and could continuously run this as a daemon."	4	Improvement	newbie	4	Minor	6	Closed
12408738	QPID	ritchiem	Reloading user data does not work	"Summary:

If the file is changed on disk and a reload requested then it reports Success however the data does not appear to have changed.

Also if the file is corrupt (as by the defect in delete) then only an unsuccessful is reported. Where as in the case for delete where the file does not contain any user data this should be reported."	1	Bug	legacy-jmx-console	3	Major	6	Closed
12409741	QPID	ritchiem	PlainPasswordFile PrincipalDataBase does not use the UserManagement Tab	"Summary:

The UserManagement Tab has no effect on a Plain password file but is shown and shows ArgumentTypeMismatch Errrors when used, may be same cause as (QPID-1471) "	4	Improvement	legacy-jmx-console	4	Minor	6	Closed
12409745	QPID	gemmellr	PlainSaslServer throws and immediately catches and wraps Sasl Exception	"Summary:

in evaluateResponse Line 94 throws a SaslException saying Authentication Failed but this is then immediately caught on line 97 as SaslException extends IOException. Where by the SaslException is Wrapped in a new SaslException and thrown.

We probably don't want to do this, something simple like moving the if....else... out of the try...catch would suffice."	4	Improvement	starter	4	Minor	6	Closed
12409694	QPID	ritchiem	Create Mac OS X Build of the JMX Management Console	"Summary:
Provide a Mac OS X Build of the JMX management console"	2	New Feature	legacy-jmx-console	4	Minor	6	Closed
12409742	QPID	aidan	Base64MD5PasswordFile does not write end of line in header section	"Summary

B64MD5 PasswordFile  L: 400 is write() but is missing a println afterwards which causes the comment rows to merge with the next row.

This will cause the first user to be disabled.

"	1	Bug	legacy-jmx-console	3	Major	6	Closed
12409746	QPID	aidan	Auto Negotiate connections for JMX Management Console	"Summary:
Currently there are number of options that must be configured for the JMX Console to correctly connect, if these values are not set or correct then the connection will fail.

However, the broker will provide the console with sufficient detail to auto-negotiate the connection.

QPID-1504 highlights that if we connect using the RMI connector but the server is configured for JMXMP then we can tell.
If we connect using JMXMP using SASL/CRAM-MD5 but the server wants SASL/PLAIN  then we can tell as the exception is:
    java.io.IOException: The server supported profiles [SASL/PLAIN] do not match the client required profiles [SASL/CRAM-MD5].
We can use this information to swap Sasl mechanism in the console and try again.

This would mean that the end user would not have to reconfigure or have multiple start scripts lying about so they could connect to a number of difference brokers using different mechanisms.

Looking at the private class ConnectorThread in JMXServerRegistry along with the createSASLConnector  and the constructor show that the security mechanism is hard coded but could using the above method be derived from the broker's response and handled appropriately if the ConnectorThread and createSASLConnector where better architected to take advantaged of the exceptions returned from the JMXConnectorFactory.connect method
"	4	Improvement	legacy-jmx-console	3	Major	6	Closed
12409750	QPID	gemmellr	Buttons are often missing their text on Linux build.	"Summary:

When running under RHEL4 the JMX Management console often loses the text on the buttons. This will make it difficult for new users to know which button is 'Connect' and which 'Cancel'.

This is a transient issue and restarting will often bring the text back. But I see no pattern to what might cause the text to disappear.

I see this as I have a local settings file.
Start the JMX Console
Select a connection from my list
Click Reconnect
Buttons often don't show 'Connect' / 'Cancel' but as they are ~ 12px high I can still click and tab to them. Unlike Mac OS X build that doesn't show the buttons at all (QPID-1507)
"	1	Bug	legacy-jmx-console	3	Major	6	Closed
12409148	ZOOKEEPER	andorm	SSL Support for Atomic Broadcast protocol	We should have the ability to use SSL to authenticate and encrypt the traffic between ZooKeeper servers. For the most part this is a very easy change. We would probably only want to support this for TCP based leader elections.	7	Sub-task	pull-request-available, ssl, ssl-tls	3	Major	6	Closed
12409406	HIVE	jsensarma	separate compression options for different output types	"currently hive uses mapred.output.compress to determine compression for all output files. however not all files are final output. at least three different kinds of output files are generated:
1. intermediate output files for next map-reduce job
2. files targeted for result hdfs directories or hive tables/partitions (which are just hdfs dirs)
3. files written to user local directories (downloading results)

the plan is to provide three separate options for controlling 1,2,3 separately. we may want to split (2) in case compression is determined by table metadata (and not session options)."	1	Bug	compression	3	Major	6	Closed
12409439	QPID	ritchiem	Secure Management Console connections do not work	"Summary: 

The current build of the management console is unable to connect to the broker using the CRAM-MD5 JMX SASL. 

It is potentially a classpath problem with a newer JDK version than was originally tested as the console reports it cannot load a class from the JMXRemote jar. 

Current work around is to use the default PLAIN authentication

Have to edit qpidmc.bat and remove -Dsecurity=CRAM-MD5 "	1	Bug	legacy-jmx-console	3	Major	6	Closed
12410481	QPID	ritchiem	JMX Console fails to show popup msgs under linux	"Summary:

Under linux getActiveShell() returns null resulting in the following stack trace and no message for the user about the result of the requested operation.

!ENTRY org.eclipse.ui 4 0 2008-12-11 11:55:06.541
!MESSAGE Argument cannot be null
!STACK 0
java.lang.IllegalArgumentException: Argument cannot be null
        at org.eclipse.swt.SWT.error(SWT.java:3761)
        at org.eclipse.swt.SWT.error(SWT.java:3695)
        at org.eclipse.swt.SWT.error(SWT.java:3666)
        at org.eclipse.swt.widgets.Dialog.error(Dialog.java:191)
        at org.eclipse.swt.widgets.Dialog.checkParent(Dialog.java:164)
        at org.eclipse.swt.widgets.Dialog.<init>(Dialog.java:127)
        at org.eclipse.swt.widgets.MessageBox.<init>(MessageBox.java:86)
        at org.apache.qpid.management.ui.views.ViewUtility.popupInfoMessage(ViewUtility.java:417)
        at org.apache.qpid.management.ui.views.OperationTabControl.executeAndShowResults(OperationTabControl.java:724)
        at org.apache.qpid.management.ui.views.OperationTabControl.access$1000(OperationTabControl.java:73)
        at org.apache.qpid.management.ui.views.OperationTabControl$OperationExecutionListener.widgetSelected(OperationTabControl.java:630)
        at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:228)
        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1158)
        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3401)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3033)
        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1914)
        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1878)
        at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:419)
        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
        at org.apache.qpid.management.ui.Application.run(Application.java:46)
        at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)
        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:386)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)
        at org.eclipse.core.launcher.Main.basicRun(Main.java:280)
        at org.eclipse.core.launcher.Main.run(Main.java:977)
        at org.eclipse.core.launcher.Main.main(Main.java:952)
"	1	Bug	legacy-jmx-console	3	Major	6	Closed
12410593	QPID	ritchiem	[JMX Console] MBeanUtility handleException prints exception stacktrace when users are denied due to access rights	"handleException (MBeanUtility:L:144) always prints the stackTrace as well as displaying an error dialog to the user when denied access to the UserManagement Mbean based on access rights in the jmxremote.access file.

This behaviour is undesirable for a known SecurityException and the dialog box to the user is sufficient in this case."	1	Bug	legacy-jmx-console	3	Major	6	Closed
12410596	QPID	ritchiem	PrincipalDatabase interface has no reload()	"Summary:

The management console has a reload function which is described as 'Reloading all user data'
Currently it only reloads the JMX Rights file 'jmxremote.access'. 
This reload method should be updated to reload the user credentials stored in the PrincipalDatabase if they are loaded and cached at startup."	1	Bug	legacy-jmx-console	3	Major	6	Closed
12410806	QPID	aidan	Move common JMX code into shared library	Shared code such as the SASL negotiation, JMX login etc should be moved into a common library. 	4	Improvement	legacy-jmx-console	3	Major	6	Closed
12409743	QPID	gemmellr	Poor user feed back with protocol negotication mismatch on JMX Console	"Summary:
If the broker has the jmxremote_optional.jar and <security>true configured. When a JMX Console client connects using the standard RMI connector it tells the user that:
'User authentication has failed'

Which is poor as the stack trace gives the reason as 'non-JRMP server at remote endpoint'. We should use this ConnectIOException and provide better feedback."	4	Improvement	legacy-jmx-console	4	Minor	6	Closed
12409747	QPID	gemmellr	Connect and Cancel Buttons don't display on Mac OS X builds	"Summary:

As the 'Connect' and 'Cancel' buttons are not displayed on the Mac OS X Build of the JMX Management Console it is not possible to connect to a broker."	1	Bug	legacy-jmx-console	2	Critical	6	Closed
12409751	QPID	gemmellr	Splash Screen does not go away on Windows build	"Summary:

The new builds of the Windows console display the splash screen but do not remove it when the console has started. 

Perhaps the units of -splashScreen 600 have changed.

The window is not set to be the front most window so other apps can be moved in front of it but if you had a small window right at the centre of your screen you would have to quite the console to find it again.

"	1	Bug	legacy-jmx-console	4	Minor	6	Closed
12411064	HDFS	rchiang	libhdfs.html needs to be updated to point to the new location 	"libhds.so is now moved to a different location , but the libhdfs.html is still pointing to the old location , hence the document has to be updated to point to the new location ""c++/<os_osarch_jvmdatamodel>/lib'

see bug for details
https://issues.apache.org/jira/browse/HADOOP-3344

Thanks,
-Giri"	1	Bug	newbie	3	Major	5	Resolved
12410566	ODE	vanto	Axis generates incorrect SOAP faults with some ODE exceptions	"I don't know for whom to blame with this bug, but since it can be easilly fixed on ODE side, I report it here. In some cases, when internal error occur within ODE, it returns incorrect SOAP fault as following:

<soapenv:Envelope xmlns:soapenv=""http://schemas.xmlsoap.org/soap/envelope/"">
  <soapenv:Body>
    <soapenv:Fault xmlns:soapenv=""http://incubator.apache.org/ode"">
      <faultcode>soapenv:Fault</faultcode>
      <faultstring>Timeout or execution error when waiting for response to MEX {MyRoleMex#4611686018427387903 [Client hqejbhcnphr3tgmhuqms9i] calling {http://www.comped.it/STD_QDS_RSR68}STD_QDS_RSR68.STD_QDS_RSR68(...)} java.util.concurrent.TimeoutException: Message exchange org.apache.ode.bpel.engine.MyRoleMessageExchangeImpl$ResponseFuture@71edc0 timed out when waiting for a response!</faultstring>
      <detail/>
    </soapenv:Fault>
  </soapenv:Body>
</soapenv:Envelope>

You can notice, that this element <soapenv:Fault xmlns:soapenv=""http://incubator.apache.org/ode""> and all its children have incorrect namespace, so automatic processing routines don't recognise fault here. This happens due to some code deeply in Axis2. This can be fixed with following patch, so fault envelope will look like this:

<soapenv:Envelope xmlns:soapenv=""http://schemas.xmlsoap.org/soap/envelope/"">
  <soapenv:Body>
    <soapenv:Fault xmlns:ode=""http://incubator.apache.org/ode"">
      <faultcode>ode:Fault</faultcode>
      <faultstring>Timeout or execution error when waiting for response to MEX {MyRoleMex#4611686018427387903 [Client hqejbhcnphr3tl71dm4x8g] calling {http://www.comped.it/STD_QDS_RSR}STD_QDS_RSR.STD_QDS_RSR(...)} java.util.concurrent.TimeoutException: Message exchange org.apache.ode.bpel.engine.MyRoleMessageExchangeImpl$ResponseFuture@1a63a1c timed out when waiting for a response!</faultstring>
      <detail/>
    </soapenv:Fault>
  </soapenv:Body>
</soapenv:Envelope>"	1	Bug	patch	3	Major	5	Resolved
12411129	MAPREDUCE	pvs013	JavaDoc does not generate correctly for MultithreadedMapRunner	"The following code in MultithreadedMapRunner.java does not get published to the HTML docs correctly.

This is what actually appears in the HTML docs:
""It can be used instead of the default implementation, ""

This is what *should* appear:
/**
 * Multithreaded implementation for @link org.apache.hadoop.mapred.MapRunnable.
 * <p>
 * It can be used instead of the default implementation,
 * @link org.apache.hadoop.mapred.MapRunner, when the Map operation is not CPU
 * bound in order to improve throughput.
 * <p>
 * Map implementations using this MapRunnable must be thread-safe.
 * <p>
 * The Map-Reduce job has to be configured to use this MapRunnable class (using
 * the JobConf.setMapRunnerClass method) and
 * the number of thread the thread-pool can use with the
 * <code>mapred.map.multithreadedrunner.threads</code> property, its default
 * value is 10 threads.
 * <p>
 */"	1	Bug	newbie	4	Minor	6	Closed
12409748	QPID	ritchiem	Splash Screen is not displayed on Mac OS X/Linux Builds	"Summary:

There must be a configuration mistake somewhere as the splash screen is not shown in the Mac OS X or Linux Builds of the JMX Console"	1	Bug	legacy-jmx-console	3	Major	6	Closed
12409752	QPID	ritchiem	JMX Interface does not require authentication	"Summary:

JMX Interface uses the default RMI connector which has no authentication mechanism. We should not be shipping a JMX interface that doesn't have authentication. The interface has been disabled by default for M4 but this should be modified based on the outcome of the discussion on qpid-dev to authenticate all connections."	4	Improvement	legacy-jmx-console	3	Major	6	Closed
12411659	UIMA	tong.fin	[SimpleUimaAsService] Document in Wiki on how to use SimpleServer for UIMA-AS by using some examples	"Document in Wiki on how to use SimpleServer for UIMA-AS by using some examples.
Will include the same example as SimpleServer which is already documented in Wiki by Thilo, but will extend it to UIMA-AS."	4	Improvement	Stale	4	Minor	5	Resolved
12411177	HIVE	ssarkar	DUPLICATE: Add TIMESTAMP column type for thrift dynamic_type	"create table something2 (test timestamp);
ERROR: DDL specifying type timestamp which has not been defined
java.lang.RuntimeException: specifying type timestamp which has not been defined
	at org.apache.hadoop.hive.serde2.dynamic_type.thrift_grammar.FieldType(thrift_grammar.java:1879)
	at org.apache.hadoop.hive.serde2.dynamic_type.thrift_grammar.Field(thrift_grammar.java:1545)
	at org.apache.hadoop.hive.serde2.dynamic_type.thrift_grammar.FieldList(thrift_grammar.java:1501)
	at org.apache.hadoop.hive.serde2.dynamic_type.thrift_grammar.Struct(thrift_grammar.java:1171)
	at org.apache.hadoop.hive.serde2.dynamic_type.thrift_grammar.TypeDefinition(thrift_grammar.java:497)
	at org.apache.hadoop.hive.serde2.dynamic_type.thrift_grammar.Definition(thrift_grammar.java:439)
	at org.apache.hadoop.hive.serde2.dynamic_type.thrift_grammar.Start(thrift_grammar.java:101)
	at org.apache.hadoop.hive.serde2.dynamic_type.DynamicSerDe.initialize(DynamicSerDe.java:97)
	at org.apache.hadoop.hive.metastore.MetaStoreUtils.getDeserializer(MetaStoreUtils.java:180)
	at org.apache.hadoop.hive.ql.metadata.Table.initSerDe(Table.java:141)
	at org.apache.hadoop.hive.ql.metadata.Hive.createTable(Hive.java:202)
	at org.apache.hadoop.hive.ql.exec.DDLTask.createTable(DDLTask.java:641)
	at org.apache.hadoop.hive.ql.exec.DDLTask.execute(DDLTask.java:98)
	at org.apache.hadoop.hive.ql.Driver.run(Driver.java:215)
	at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:174)
	at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:207)
	at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:305)
"	2	New Feature	SQL	3	Major	6	Closed
12410236	DERBY	knutanders	Conflicting select then update with REPEATABLE_READ gives lock timeout instead of deadlock	"The attached program TryTimeout.java should detect a deadlock but instead throws a lock timeout exception.  The program has two threads that attempt:

	    
	    threadConnection.setAutoCommit(false);
	    /* set isolation level to repeatable read */
	    threadConnection.setTransactionIsolation(Connection.TRANSACTION_REPEATABLE_READ);
	    
	    ResultSet rs = stmt.executeQuery(""select * from t where i = 456"");
	    while (rs.next());
	    stmt.executeUpdate(""update t set i = 456 where i = 456"");
	    threadConnection.commit();


This gives SQLState 40001 (deadlock) with DB2 but a lock timeout with Derby.
"	1	Bug	derby_triage10_5_2	3	Major	6	Closed
12410444	CXF	dkulp	WS-Trust support in CXF		3	Task	gsoc	3	Major	6	Closed
12410576	QPID	aidan	[JMX Console] AbstractAction handleException always prints throwable stacktrace	"Summary:

handleException (AbstractAction:L:77) always prints the stackTrace of the Throwable that it receives as well as displaying an error dialog to the user.

This behaviour is undesirable for exceptions such as connection failures. 

The only stackTraces that should be printed are due to programming failures such as incorrect handingling of data from the broker. 

The IOException thrown from JMXServerRegistry due to a incorrect username/password, for example, does not need to printed out. The dialog box to the user is sufficient.
"	1	Bug	legacy-jmx-console	3	Major	6	Closed
12410579	QPID	aidan	JMX Console dialog boxes buttons do not accept default keyboard input	"Summary:

The JMX console boxes do not respond to what I would say are common keyboard inputs.

Tab between fields is ok 
There is no default button for return to work on
The cancel button does not respond to escape.

This must just be a minor configuration issue on our part but would certainly improve usability."	1	Bug	legacy-jmx-console	4	Minor	6	Closed
12410914	DERBY	mikem	With IBM 1.6 T_RawStoreFactory fails with There should be 0 observers, but we still have 1 observers on Win 2K	"On Win2K T_RawStoreFactory fails consistently with 
java version ""1.6.0""
Java(TM) SE Runtime Environment (build pwi3260sr3-20081106_07(SR3))
IBM J9 VM (build 2.4, J2RE 1.6.0 IBM J9 2.4 Windows XP x86-32 jvmwi3260-20081105_25433 (JIT enabled, AOT enabled)
J9VM - 20081105_025433_lHdSMr
JIT  - r9_20081031_1330
GC   - 20081027_AB)
JCL  - 20081106_01

 *** Start: T_RawStoreFactory jdk1.6.0 2008-12-17 09:37:49 ***
2 del
< -- Unit Test T_RawStoreFactory finished
2 add
> There should be 0 observers, but we still have 1 observers.
> Shutting down due to unit test failure.
Test Failed.

I have seen the same failure on Linux and Windows XP intermittently with IBM 1.6.


"	1	Bug	derby_triage10_8	4	Minor	6	Closed
12411333	HIVE	avivey	Parse errors report incorrectly.	"The following two queries fail:
CREATE TABLE output_table(userid, bigint);
CREATE TABLE output_table(userid bigint, age int, sex string, location string);
each giving the error message ""FAILED: Parse Error: line 1:16 mismatched input 'TABLE' expecting KW_TEMPORARY""

Although one might not catch it from the error message, the problem with the first is that there is a comma between ""userid"" and ""bigint"", and the problem with the second is that ""location"" is a reserved keyword.  Reported errors should more accurately describe the nature of the error, such as ""no type given for column 'userid'"" or ""'location' is not a valid column name""."	1	Bug	parse	3	Major	1	Open
12412462	QPID	a.gazzarini	Use JAXB in order to dynamically create / populate wsdl:types/xsd:schema section for complex types.	"When a new object instance is created on Qpid side, QMan receives content indication message about that.
On its side this is what happens:

- JMX core creates and register a new MBean for that instance; 
- WSDM Adapter creates a WS resource including WSDL and the corresponding capability.

If the incoming object instance has some complex property (i.e. Map or UUID) the WSDLBuilder, which is the component responsible to build wsdl for the resource, uses hard-coded statements in order to define schema section of wsdl.

Improvement should made in order to do that using automatic schema generation feature of JAXB API."	7	Sub-task	qman	4	Minor	6	Closed
12412465	QPID	a.gazzarini	Set termination time (and therefore destroy them) on WS-resources when the corresponding Qpid object instance is removed.	"When an obejct instance is removed on Qpid side (expired session, deleted queue, etc), QMan receives a content indication message which contains the expiration date for that object.

After that, the JMX core detects the corresponding MBean and unregister that from the MBeanServer. What needs to be done is, as conseguence of that event, to inform the WS-DM Adapter in order to let it set the termination time (and destroy) the corresponding WS-Resource."	7	Sub-task	qman	3	Major	6	Closed
12412471	QPID	a.gazzarini	WS-Notifications	"JMX Notifications are already enabled on the JMX core.
Moreless the same thing must be implemented on the WS-DM adapter in order to enable management clients to subscribe and watch WS-Resources."	7	Sub-task	qman	2	Critical	6	Closed
12412715	QPID	ritchiem	[JMX Console] Add Server & Reconnect dialogs do not centre correctly on multi monitor systems	The management consoles Add Server & Reconnect dialogs do not centre correctly on multi monitor systems, using the whole width of the desktop to determine where they should be located.	1	Bug	legacy-jmx-console	3	Major	6	Closed
12412265	QPID	rhs	Add an SSL test profile for the java build	We need to add  a test profile to run the java client and c++ broker using SSL connections.	4	Improvement	ant_build_system	3	Major	6	Closed
12412915	QPID	a.gazzarini	Create a set of examples about WS-DM interface	"Although test case are a fully working demonstration of how the system behaves, they are not very user friendly.
So on top of that a suite of example is needed in order to demonstrate WS-DM interface capabilities.
"	7	Sub-task	qman	3	Major	6	Closed
12412372	QPID	a.gazzarini	QMan WS-DM Adapter	"This is a tracking issue for the progress in development of the WS-DM Adapter feature within the QMan Management Bridge module.

Regards,
Andrea
"	2	New Feature	qman	3	Major	6	Closed
12412467	QPID	a.gazzarini	System Test Suite for WS-DM Adapter	That artifact will be part of qpid-systest-M5.jar library and it will contain system / integration test cases for WS-DM layer.	7	Sub-task	qman	3	Major	6	Closed
12412470	QPID	a.gazzarini	QMan admin console	"The console will we web-based and therefore will be part of the preexisting qman.war module.

Features:

- System Overview : Riepilogue of all relevant module properties (version, version name, JVM enviroment, boot classpath, system properties, etc)
- System health & statistics : Analysis of module performance  & statistics for each WS-Resource;
- Resource management : Lets the user browse managed WS-resources. Each resources will be available under two different perspective : JMX (as an MBean) and WS-DM (as a WS-Resource). It will be possibile to interact with WS-Resources too (properties set & get, method invocation, etc..) 
- Hot logging reconfiguration
"	7	Sub-task	qman	3	Major	6	Closed
12412466	QPID	a.gazzarini	Unit Test Suite for WS-DM Adapter	That artifact will be part of management-client-test-M5.jar library and it will contain off-line test cases for WS-DM layer.	7	Sub-task	qman	3	Major	6	Closed
12412581	QPID	a.gazzarini	Method Invocation Capability for WS-DM Adapter	At the moment WS-DM Adapter is supporting only properties (QUERY, GET & SET) but management resources also have methods / operations so the management clients should be able to invoke them using the WS adapter interface.	7	Sub-task	qman	3	Major	6	Closed
12413837	HDFS	umamaheswararao	Display the server version in dfsadmin -report	"As part of HADOOP-5094, it was requested to include the server version in the dfsadmin -report, to avoid the need to screen scrape to get this information:
bq. Please do provide the server version, so there is a quick and non-taxing way of determine what is the current running version on the namenode.

Currently there is nothing in the dfs client protocol to query this information."	4	Improvement	newbie	4	Minor	4	Reopened
12412716	QPID	ritchiem	[JMX Console] server navigation view tree contains redundant 'Qpid Connections' root node	The server navigation tree in the management console has a 'Qpid Connections' root node. The navigation area is headed Qpid Connections so this node conveys no new information and its presence forces users to expand it before they can connect to a previously used server, which is usually the first task any recurring user will perform, every single time they start the console: this is clearly nuts.	1	Bug	legacy-jmx-console	3	Major	6	Closed
12412719	QPID	ritchiem	[JMX Console] Update the management console to use recent rcp plugins and standardise launcher types	The console is currently using a mixture of newer and older rcp plugins, and a mixture of different launchers depending on platform. It should be updated to uniformly use recent plugins, and the launchers for all platforms standardised on the new equinox launchers.	4	Improvement	legacy-jmx-console	3	Major	6	Closed
12412759	QPID	justi9	Improvements to the failover_soak test program (cpp/src/tests/failover_soak.cpp	"patch 0001
    Made failover_soak able to work outside source tree

patch 0002
    failover_soak: Added and reworked patch from Frantisek for enabling rhm storage module
    
    Reworked a lot of the code to use better cmdline argument processing as well as
    rewrote startNewBroker(...) function to clean it up and make it safer in the
    string handling.

patch 0003
    failover_soak: Replaced getopt_long() with the default qpid arg parser
"	4	Improvement	patch	3	Major	1	Open
12413473	QPID	rajith	Make QMan package friendly	"Certain changes done before to make QMan package friendly has been removed accidently.
This JIRA attempts to do the following

1 Modify the variables in qman-jmx.sh (formaly qman-jmx-start.sh)  to work of a standlone qman-jmx installation or from an rpm.
(Currently Qpid is does not have component based release artifacts, but in the future we plan to do that. When that happens, users should be able download a standalone qman-jmx installation.

2. Add a man page for qman-jmx (this was deleted, so adding back a modified version)

3. Add a simple log4j file for qman-jmx."	4	Improvement	qman	3	Major	6	Closed
12413568	HIVE	jboulon	Add PERCENTILE aggregate function	Compute atleast 25, 50, 75th percentiles	2	New Feature	analyticsql, median, olap, percentile	3	Major	6	Closed
12413577	DERBY	mikem	On Z/OS storetests/st_reclaim_longcol.java  fails with a large number of pages	"On Z/OS 64 bit (haven't checked 32bit) st_reclaim_loncol fails with a large number of pages.
********* Diff file derbyall/storeall/storetests/st_reclaim_longcol.diff
*** Start: st_reclaim_longcol jdk1.6.0 storeall:storetests 2009-01-23 14:20:49 ***
3a4,6
> Test failed, expected less than 150 pages - count is:
> free pages     : 258
> allocated pages: 2047
Test Failed.
*** End:   st_reclaim_longcol jdk1.6.0 storeall:storetests 2009-01-23 14:25:07 ***

"	1	Bug	derby_triage10_8	3	Major	6	Closed
12412848	QPID	tedross	Parameterize the amqp url used in qmf tests	"Right now there's a hard coded url of amqp://localhost:5672.  This prevents us from running automated tests on systems that already have a broker running at the default port, for other purposes.
"	4	Improvement	old_ruby_test_suite_component	3	Major	6	Closed
12413670	DERBY	dimuthuw	NullPointerException on query with misplaced DERBY-PROPERTIES clause	"The following sql  throws  a NullPointerException
ij> CREATE TABLE ""APP"".""T1"" (""I"" INTEGER, ""J"" INTEGER);
0 rows inserted/updated/deleted
ij> insert into t1 values (1, 2), (2, 4), (3, 6), (4, 8), (5, 10);
5 rows inserted/updated/deleted
ij> CREATE TABLE ""APP"".""T2"" (""I"" INTEGER, ""J"" INTEGER);
0 rows inserted/updated/deleted
ij> insert into t2 values (1, 2), (2, -4), (3, 6), (4, -8), (5, 10);
5 rows inserted/updated/deleted
ij> CREATE TABLE ""APP"".""T3"" (""A"" INTEGER, ""B"" INTEGER);
0 rows inserted/updated/deleted
ij> insert into T3 values (1,1), (2,2), (3,3), (4,4), (6, 24),
  (7, 28), (8, 32), (9, 36), (10, 40);
9 rows inserted/updated/deleted
ij> insert into t3 (a) values 11, 12, 13, 14, 15, 16, 17, 18, 19, 20;
10 rows inserted/updated/deleted
ij> update t3 set b = 2 * a where a > 10;
10 rows inserted/updated/deleted
ij> CREATE TABLE ""APP"".""T4"" (""A"" INTEGER, ""B"" INTEGER);
0 rows inserted/updated/deleted
ij> insert into t4 values (3, 12), (4, 16);
2 rows inserted/updated/deleted
ij> insert into t4 (a) values 11, 12, 13, 14, 15, 16, 17, 18, 19, 20;
10 rows inserted/updated/deleted
ij> update t4 set b = 2 * a where a > 10;
10 rows inserted/updated/deleted
ij> select count(*) from (select * from t1 union select * from t3 --DERBY-PROPERTIES joinStrategy=HASH
) x1 (c, d), (select * from t2 union select * from t4) x2 (e, f) where x1.c = x2.e ;
ERROR XJ001: Java exception: ': java.lang.NullPointerException'.
java.sql.SQLException: Java exception: ': java.lang.NullPointerException'.
        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:95)
        at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:87)
        at org.apache.derby.impl.jdbc.Util.javaException(Util.java:244)
        at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(TransactionResourceImpl.java:403)
        at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(TransactionResourceImpl.java:346)
        at org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConnection.java:2201)
        at org.apache.derby.impl.jdbc.ConnectionChild.handleException(ConnectionChild.java:81)
        at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:614)
        at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:555)
        at org.apache.derby.impl.tools.ij.ij.executeImmediate(ij.java:329)
        at org.apache.derby.impl.tools.ij.utilMain.doCatch(utilMain.java:505)
        at org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:347)
        at org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:245)
        at org.apache.derby.impl.tools.ij.Main.go(Main.java:210)
        at org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:177)
        at org.apache.derby.impl.tools.ij.Main.main(Main.java:73)
        at org.apache.derby.tools.ij.main(ij.java:59)
Caused by: java.sql.SQLException: Java exception: ': java.lang.NullPointerException'.
        at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)
        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:11
9)
        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:70)
        ... 16 more
Caused by: java.lang.NullPointerException
        at org.apache.derby.impl.sql.compile.OptimizerImpl.getFinalCost(OptimizerImpl.java:2498)
        at org.apache.derby.impl.sql.compile.SelectNode.getFinalCostEstimate(SelectNode.java:1987)
        at org.apache.derby.impl.sql.compile.UnionNode.getFinalCostEstimate(UnionNode.java:653)
        at org.apache.derby.impl.sql.compile.SetOperatorNode.modifyAccessPath(SetOperatorNode.java:169)
        at org.apache.derby.impl.sql.compile.ProjectRestrictNode.modifyAccessPath(ProjectRestrictNode.java:718)
        at org.apache.derby.impl.sql.compile.OptimizerImpl.modifyAccessPaths(OptimizerImpl.java:2456)
        at org.apache.derby.impl.sql.compile.SelectNode.modifyAccessPaths(SelectNode.java:1865)
        at org.apache.derby.impl.sql.compile.DMLStatementNode.optimizeStatement(DMLStatementNode.java:307)
        at org.apache.derby.impl.sql.compile.CursorNode.optimizeStatement(CursorNode.java:515)
        at org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:367)
        at org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:88)
        at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConne
ctionContext.java:802)
        at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:606)
        ... 9 more

I think the directive is misplaced and should come after the x1 (c, d) but it shouldn't throw an NPE
"	1	Bug	derby_triage10_8	4	Minor	1	Open
12414147	ZOOKEEPER	doliveira	centralize version numbering in the source/build	"There are now three locations in the source repository that store the version number of the code:

1) build.xml
2) configure.ac
3) zookeeper_version.h

these all have to be managed when releasing/branching/etc... would be better if there were just one place - at the very least the configure.ac should be used to generate the version for zookeeper_version.h. 

Can we do a better job (ie less) at this?"	4	Improvement	patch	4	Minor	4	Reopened
12412904	QPID	a.gazzarini	Implementation of wsrf-rp:PutResourcePropertyDocument	"Apache Muse, which is the underlying WSRF framework, doesn't have an implementation of the mentioned capability. 
I think that it should be very useful because it allows to set multiple properties at one time...so on top of that QMan must have an its own implementation of that feature.
"	7	Sub-task	qman	4	Minor	6	Closed
12414434	TAP5	hlship	Exception reports can over-zealously squash exceptions 	"Unchecked exceptions are reported differently on Exception reporting page.

This should be changed, because many applications have convention to use an unchecked exception hierachy."	1	Bug	tapestry5-review-for-closing	5	Trivial	6	Closed
12414085	ODE	seanahn	OutstandingRequestManager(ExecutionQueueImpl serialization) failed when ODE loaded in db mode	"We loaded ODE process in db mode and got INTERNAL ERROR from ODE sometime, see the following adapted from error log for detail infomation.


15:05:51,774 FATAL [OutstandingRequestManager] INTERNAL ERROR: No ENTRY for RESPONSE CHANNEL 53
15:05:51,776 ERROR [BpelEngineImpl] Scheduled job failed; jobDetail={mexid=4611686018427390107, pid={http://example.com/bpmdemo3/service}service-17, type=INVOKE_INTERNAL}
java.lang.IllegalArgumentException: INTERNAL ERROR: No ENTRY for RESPONSE CHANNEL 53
	at org.apache.ode.bpel.engine.OutstandingRequestManager.associate(OutstandingRequestManager.java:145)
	at org.apache.ode.bpel.engine.BpelRuntimeContextImpl.inputMsgMatch(BpelRuntimeContextImpl.java:894)
	at org.apache.ode.bpel.engine.PartnerLinkMyRoleImpl.invokeInstance(PartnerLinkMyRoleImpl.java:211)
	at org.apache.ode.bpel.engine.BpelProcess.invokeProcess(BpelProcess.java:208)
	at org.apache.ode.bpel.engine.BpelProcess.handleWorkEvent(BpelProcess.java:372)
	at org.apache.ode.bpel.engine.BpelEngineImpl.onScheduledJob(BpelEngineImpl.java:326)
	at org.apache.ode.bpel.engine.BpelServerImpl.onScheduledJob(BpelServerImpl.java:373)
	at org.apache.ode.scheduler.simple.SimpleScheduler$4$1.call(SimpleScheduler.java:337)
	at org.apache.ode.scheduler.simple.SimpleScheduler$4$1.call(SimpleScheduler.java:336)
	at org.apache.ode.scheduler.simple.SimpleScheduler.execTransaction(SimpleScheduler.java:174)
	at org.apache.ode.scheduler.simple.SimpleScheduler$4.call(SimpleScheduler.java:335)
	at org.apache.ode.scheduler.simple.SimpleScheduler$4.call(SimpleScheduler.java:332)
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
	at java.util.concurrent.FutureTask.run(FutureTask.java:138)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:619)
15:05:52,798 ERROR [SimpleScheduler] Error while processing transaction, retrying.
org.apache.ode.bpel.iapi.Scheduler$JobProcessorException: java.lang.IllegalArgumentException: INTERNAL ERROR: No ENTRY for RESPONSE CHANNEL 53
	at org.apache.ode.bpel.engine.BpelEngineImpl.onScheduledJob(BpelEngineImpl.java:336)
	at org.apache.ode.bpel.engine.BpelServerImpl.onScheduledJob(BpelServerImpl.java:373)
	at org.apache.ode.scheduler.simple.SimpleScheduler$4$1.call(SimpleScheduler.java:337)
	at org.apache.ode.scheduler.simple.SimpleScheduler$4$1.call(SimpleScheduler.java:336)
	at org.apache.ode.scheduler.simple.SimpleScheduler.execTransaction(SimpleScheduler.java:174)
	at org.apache.ode.scheduler.simple.SimpleScheduler$4.call(SimpleScheduler.java:335)
	at org.apache.ode.scheduler.simple.SimpleScheduler$4.call(SimpleScheduler.java:332)
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
	at java.util.concurrent.FutureTask.run(FutureTask.java:138)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.IllegalArgumentException: INTERNAL ERROR: No ENTRY for RESPONSE CHANNEL 53
	at org.apache.ode.bpel.engine.OutstandingRequestManager.associate(OutstandingRequestManager.java:145)
	at org.apache.ode.bpel.engine.BpelRuntimeContextImpl.inputMsgMatch(BpelRuntimeContextImpl.java:894)
	at org.apache.ode.bpel.engine.PartnerLinkMyRoleImpl.invokeInstance(PartnerLinkMyRoleImpl.java:211)
	at org.apache.ode.bpel.engine.BpelProcess.invokeProcess(BpelProcess.java:208)
	at org.apache.ode.bpel.engine.BpelProcess.handleWorkEvent(BpelProcess.java:372)
	at org.apache.ode.bpel.engine.BpelEngineImpl.onScheduledJob(BpelEngineImpl.java:326)
	... 11 more


I doubted whether it was caused by ExecutionQueueImpl's serialization(not concurrently),  but when I tested this,  the answer was NO. Maybe it's caused by concurrency."	1	Bug	test	3	Major	1	Open
12413360	QPID	ritchiem	[JMX Console] server navigation tree generates a runtime exception on first use	"The navigation tree generates the following runtime exception upon the first expansion made by a user after the first connection is made. In previous versions this would not have been noticed because the Eclipse RCP console log was disabled. The tree functions without noticable issue, and as noted the exception is raised once only.

!ENTRY org.eclipse.jface 2 0 2009-01-26 17:20:50.884 !MESSAGE Ignored reentrant call while viewer is busy. This is only logged once per viewer instance, but similar calls will still be ignored.
!STACK 0
java.lang.RuntimeException
        at org.eclipse.jface.viewers.ColumnViewer.checkBusy(ColumnViewer.java:763)
        at org.eclipse.jface.viewers.AbstractTreeViewer.setExpandedState(AbstractTreeViewer.java:2421)
        at org.apache.qpid.management.ui.views.NavigationView$2.treeExpanded(NavigationView.java:133)
        at org.eclipse.jface.viewers.AbstractTreeViewer$3.run(AbstractTreeViewer.java:1101)
        at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)
        at org.eclipse.core.runtime.Platform.run(Platform.java:880)
        at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:48)
        at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
        at org.eclipse.jface.viewers.AbstractTreeViewer.fireTreeExpanded(AbstractTreeViewer.java:1099)
        at org.eclipse.jface.viewers.AbstractTreeViewer.handleTreeExpand(AbstractTreeViewer.java:1444)
        at org.eclipse.jface.viewers.TreeViewer.handleTreeExpand(TreeViewer.java:927)
        at org.eclipse.jface.viewers.AbstractTreeViewer$4.treeExpanded(AbstractTreeViewer.java:1453)
        at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:126)
        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1158)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1182)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1167)
        at org.eclipse.swt.widgets.Tree.gtk_test_expand_row(Tree.java:2026)
        at org.eclipse.swt.widgets.Widget.windowProc(Widget.java:1572)
        at org.eclipse.swt.widgets.Display.windowProc(Display.java:4105)
        at org.eclipse.swt.internal.gtk.OS._gtk_main_do_event(Native Method)
        at org.eclipse.swt.internal.gtk.OS.gtk_main_do_event(OS.java:5792)
        at org.eclipse.swt.widgets.Display.eventProc(Display.java:1177)
        at org.eclipse.swt.internal.gtk.OS._g_main_context_iteration(Native Method)
        at org.eclipse.swt.internal.gtk.OS.g_main_context_iteration(OS.java:1550)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3031)
        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2382)
        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2346)
        at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2198)
        at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:493)
        at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:288)
        at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:488)
        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
        at org.apache.qpid.management.ui.Application.run(Application.java:46)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.eclipse.equinox.internal.app.EclipseAppContainer.callMethodWithException(EclipseAppContainer.java:574)
        at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:195)
        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:386)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:549)
        at org.eclipse.equinox.launcher.Main.basicRun(Main.java:504)
        at org.eclipse.equinox.launcher.Main.run(Main.java:1236)
"	1	Bug	legacy-jmx-console	3	Major	6	Closed
12414759	DERBY	mikem	Space is not reclaimed if transaction is rolled back	"If I repeatedly insert into a clob table and rollback the the transaction the space is not reclaimed and the number of allocated pages continues to grow.   I will add a test case to ClobReclamationTest and reference this bug.

DERBY-4056 may be a special case of this bug, but I thought I would file a bug for the general issue.



"	4	Improvement	derby_backport_reject_10_11, derby_triage10_5_2, derby_triage10_9	3	Major	6	Closed
12414872	HDFS	stayhf	DFSClient does not always throw a FileNotFound exception when a file could not be opened	"DfsClient.openInit() throws an IOE when a file can't be found, that is, it has no blocks

[sf-startdaemon-debug] 09/02/16 12:38:47 [IPC Server handler 0 on 8012] INFO mapred.TaskInProgress : Error from attempt_200902161238_0001_m_000000_2: java.io.IOException: Cannot open filename /tests/mrtestsequence/in/in.txt
[sf-startdaemon-debug] 	at org.apache.hadoop.hdfs.DFSClient$DFSInputStream.openInfo(DFSClient.java:1352)
[sf-startdaemon-debug] 	at org.apache.hadoop.hdfs.DFSClient$DFSInputStream.<init>(DFSClient.java:1343)
[sf-startdaemon-debug] 	at org.apache.hadoop.hdfs.DFSClient.open(DFSClient.java:312)
[sf-startdaemon-debug] 	at org.apache.hadoop.hdfs.DistributedFileSystem.open(DistributedFileSystem.java:177)
[sf-startdaemon-debug] 	at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:347)

I propose turning this into a FileNotFoundException, which is more specific about the underlying problem. Including the full dfs URL would be useful too."	4	Improvement	newbie	4	Minor	1	Open
12414564	MAHOUT	gsingers	PLSI/EM in pig based on hofmann's ACM 04 paper. 	"Based on the following paper by hofmann : T. Hofmann Latent Semantic Models for Collaborative Filtering In ACM Transactions on Information Systems, 2004,  vol 22(1), pp. 89-115.

"	2	New Feature	pig, plsi	4	Minor	6	Closed
12413546	DERBY	kmarsden	i18n tests fail with Lexical error on z/os 	"On z/os  the following tests fail with a Lexical error e.g.
 ERROR 42X02: Lexical error at line 1, column 1.  Encountered: ""`"" (96), after : """".  There also seems to be some garbage in the output.  The tests that fail with these errors are:
derbyall/derbyall.fail:i18n/JapanCodeConversion.sql
derbyall/derbyall.fail:i18n/UnicodeEscape_JP.sql
derbyall/derbyall.fail:i18n/I18NImportExport.sql
derbyall/derbyall.fail:i18n/urlLocale.sql
derbyall/derbyall.fail:i18n/messageLocale.sql
derbyall/derbyall.fail:i18n/caseI_tr_TR.sql
derbyall/derbyall.fail:i18n/iepnegativetests_ES.sql


The error I think is coming from ij, it is not in the derby.log and there is not a stack trace anywhere.


"	1	Bug	derby_triage10_5_2	3	Major	6	Closed
12413811	HADOOP	jonallen	dfs -count -q should label output column	"These commands should label the output columns:
{code}
hadoop dfs -count <dir>...<dir>
hadoop dfs -count -q <dir>...<dir>
{code}

Current output of the 2nd command above:
{code}
% hadoop dfs -count -q /user/foo /tmp
        none             inf         9569         9493         6372553322 hdfs://nn1.bar.com/user/foo
        none             inf          101         2689       209349812906 hdfs://nn1.bar.com/tmp
{code}

It is not obvious what these columns mean."	4	Improvement	newbie	5	Trivial	5	Resolved
12414119	QPID	ritchiem	Enable live reconfiguration of Log4J settings for the Java broker via JMX	"It would be useful to be able to update the Log4J settings for a running Java broker via JMX, incase it was desirable to adjust logging to investigate an issue which became apparent after startup. 

Whilst Log4J supports monitoring its own configuration file for updates, the broker must be started with this enabled for it to be of any use, and updating the settings by manually modifying the xml file runs the risk of accidentally rendering the file invalid, which could lead to serious issues when the update is detected and applied by Log4j.

In order to address these issues, adding the ability to to update the settings via JMX would allow users to be able to adjust the Log4J settings in 2 ways: by modifying the xml file programatically rather than by hand, or by modifying the Log4J runtime settings directly, allowing (temporary) updates even where Log4J has not been instructed to monitor its configuration file for change."	2	New Feature	legacy-jmx-console	3	Major	6	Closed
12415237	DERBY	rhillegas	Allow functions/procedures to take Blob/Clob arguments	"Derby objects if you try to declare a function or procedure with an argument whose type is BLOB or CLOB. These kinds of arguments are allowed in the SQL standard and the matching Java types are java.sql.Blob and java.sql.Clob. See the SignatureMatching.html summary attached to DERBY-3652.

We should lift this restriction and allow functions and procedures to take large object arguments."	4	Improvement	LOB	3	Major	6	Closed
12415285	BUILDR	toulmean	Support for the Clojure AOT Compiler	"Clojure is a JVM-hosted Lisp which strongly emphasizes interop with Java.  As with most Lisps, Clojure is designed to run primarily as an interpreter.  However, it is possible to use the Clojure ahead-of-time compiler to produce .class files which can then be separated from the original source.

I think it would be very nice if Buildr had some support for Clojure as a buildable language.  At the moment, any Clojure-using projects have to resort to things like storing the .clj scripts in the src/main/resources directory, etc.  This works, but it's ugly and it doesn't mesh well with AOT compilation.  A better solution is to allow the storage of scripts in the src/main/clojure directory.  These scripts would then be compiled by default to target/classes.  It should also be possible to specify a finite set of libraries to compile, in which case the remaining (uncompiled) scripts should be copied to the appropriate sub-directory of target/classes.

An essentially-functional implementation of this feature is available at git://github.com/djspiewak/buildr.git / clojure.  The / master branch also contains support for the clojure shell in context with this new language support.  Specs and documentation are presently absent, but could easily be added."	2	New Feature	patch	4	Minor	5	Resolved
12415378	QPID	shuston	add Windows build and test notes to wiki	"1) Introduction

The following are notes for building and testing QPID M4 on Windows.

This document is split into 4 sections:

	- setup for building QPID M4 on Windows. This includes
	obtaining sources, supporting technologies, installation
	and configuration of the build environment.

	- building QPID M4 on Windows.

	- running the Linux test suites against the Windows QPID
	broker.

	- building the tests on a Windows system.

These notes are intended to highlight issues discovered during the build and
testing of QPID on Windows. It's a work in progress.

Comments welcome.

2) Setup of QPID M4 on Windows

2.1) Obtaining the sources

M4 C++ broker and client source archive is available on the QPID web site.

  http://www.apache.org/dist/qpid/M4/qpid-cpp-M4.tar.gz

The sources contained here will build a Static_Debug version of the broker
and client libraries. To be able to build a Static_Release version, replace
the file cpp/src/qpid/InlineAllocator.h with the M5 version of the file:

  https://svn.apache.org/repos/asf/qpid/trunk/qpid/cpp/src/qpid/InlineAllocator.h

2.2) Setting up for the build

Builds have been taking place using a variety of platforms and versions
of Visual Studio. Platforms include:

Windows:

	Windows Vista (64 bit)
	Windows Server 2008 (64 bit).
	Windows XP (32 bit)

Visual Studio:

	Visual Studio 2008 Express (32 bit C++ package)
	Visual Studio Team Suite 2008 (32 bit and 64 bit C++ packages)
	Visual Studio 2008 Professional (32 bit and 64 bit C++ packages)

2.3) Technologies Dependencies

2.3.1) boost

	The stated requirement is boost 1.35.0. 1.36.0 is also being tested in
	our labs. There are only a few version compatibility issues detected. 

	You can find install images for boost at:

	  http://www.boostpro.com/boost_1_35_0_setup.exe
	  http://www.boostpro.com/boost_1_36_0_setup.exe

	Once you've installed one of these, set your environment variables:

	for 1.35.0:
	  BOOST_ROOT = C:\Program Files (x86)\boost\boost_1_35_0
	  BOOST_VERSION = 103500

        for 1.36.0:
          BOOST_ROOT = C:\Program Files (x86)\boost\boost_1_36_0
          BOOST_VERSION = 103600
	
	Note: ""Program Files (x86)"" is ""Program Files"" on the 32 bit system.
	The boost libs are 32 bit. When building on a 64 bit system the 32
	bit boost libs are installed in ""Program Files (x86)"". 64 bit boost
	build is being looked into.

2.3.2) python

	Use Python 2.6, which is the stated requirement for the QPID build.
	Pick up a copy at:

	  http://www.python.org/ftp/python/2.6/python-2.6.msi

	You must include the python directory in the environment variable PATH.
	Typically, python is installed in:

	  C:\python26

	test to see that python is installed correctly and that you have the 
	correct version:

	  C:\>python --version
	  Python 2.6.1

2.3.3) ruby

	Use Ruby 1.8.6, which is the required version. Pick up a copy at:

	  http://rubyforge.org/frs/?group_id=167

	You must include the ruby directory in the environment variable PATH.
	Typically, ruby is installed in:

	  C:\ruby\bin

	test to see that ruby is installed correctly and that you have the
	correct version:

	  C:\>ruby -v
	  ruby 1.8.6 (2007-09-24 patchlevel 111) [i386-mswin32]

2.4) Build tools

The QPID build environment on Windows are centered around Visual Studio C++ 
Development tools. There is an effort to reduce the overhead of the QPID 
build so developers who are unfamiliar with the Visual Studio IDE can build 
and test on Windows with as minimal an effort as possible.

2.4.1) Visual Studio

Microsoft makes Visual Studio Express available at no charge. You can find
it online at the following location:

  http://www.microsoft.com/downloads/details.aspx?FamilyID=3254c868-bcb9-412c-95c6-d100c872ec60&DisplayLang=en

2.5) M4 preparation

2.5.1) Initial environment configuration

Most of the prep is in the installation of the helper apps, Visual Studio, 
source extraction and patching. When that's all done, there is one more step 
you still need to do before you can build anything.

Using the Visual Studio's Command Prompt, change directory to qpid/cpp/src and run:

  nmake protocol_gen.mak

2.5.2) source changes

The described source fix needed to be able to get a clean Static_Release build
from M4 is listed above. This fix wasn't available before M4 was finalized, so
it was added in M5.

Other fixes may be available in M5 to address other issues, but haven't been
tried in this environment.

Any changes made to source files during this investigation haven't been submitted.
They are presented here for what they're worth. Diffs of source changes are appended
at the end of this document.

2.5.3) Debug vs Release

When building QPID, you may want to change from building static debug to 
static release. There are several ways to do this. Look in the tool bar
at the top of the Visual Studio window. Locate the pulldown selection box
that contains the value ""Debug"" or ""Release"". Change the value to whichever
active solution configuration you would like to produce. All built
objects/executables will be found in the subdirectories Static_Debug or
Static_Release, depending on your active solution configuration.

3) Building QPID M4 on Windows

3.1) QPID Project Files

Visual Studio uses special configuration files to identify the ""solution"" and 
""project"" parameters. These are made available in .sln and .vcproj files. 
There are a smattering of these files in the M4 source tree, and more are being 
added to the M5 tree as time goes on. 

For QPID, look for the following:

	qpid/cpp/src/qpid.sln
		qpid/cpp/src/broker.vcproj
		qpid/cpp/src/client.vcproj
		qpid/cpp/src/common.vcproj
		qpid/cpp/src/MaxMethodBodySize.vcproj

When you open the solution, you can choose to build the entire solution, or 
just a project within. The executables and objects will be in Static_Release 
or Static_Debug, depending on your build settings.

Select the solution in the solution explorer pane. Right mouse click and
choose ""Build Solution"". When complete, you should have built the libraries
and qpidbroker.exe.

3.2) Libraries

The Windows QPID M4 build will produce 2 libraries:

	qpidclients.lib
	qpidcommons.lib

The Linux build will also produce a broker library. The Windows build
links the broker source objects directly into the broker, but doesn't
add them to a library. A broker library will be needed for the building
of some tests.

The build of the broker will have compiled all the source objects which
are to live in the broker library. By creating a library by hand we will
be able to link the tests that require the broker library. See libs.mk
later in this document (section 5.4.1).

Libraries are placed in cpp/src.

Our efforts don't include building the qmfconsole library yet, so no
status on that.

4) Testing AMQP from a Linux system

There isn't a ""push button"" build and test for Windows. In fact, in M4
there are relatively few tests that build for Windows. However, the
tests do run on Linux. The Windows broker can be tested by running the
test suites from a Linux platform.

4.1) localhost vs distributed

The test suites as they are built and run on Linux assume brokers and
tests are running on the localhost. There are a few that try to use ssh
to start and stop processes on a remote host. But, the majority of the
tests start brokers locally, look for PID files and run the tests against
the local brokers. 

In order to use these tests against a remote Windows broker, some
modifications will be necessary. These changes are outlined later
in this document.

4.2) test harnesses

QPID makes use of the boost test framework for some of it's tests,
but there are a number of different tools and programming methods
used. These are:

	make - Building and running the tests from the makefile.
	Provides a convenient way to produce a push button QPID.
	The makefiles allow selection of subsets of tests and
	provide some command parameters to the test framework.

	boost - Boost provides libraries and header files for
	putting together test cases, test suites and overall
	test execution control.

	/bin/sh shell - the ""bridge"" between make and the test
	cases is handled through shell scripts and other tools,
	like valgrind and libtool. There are makefile variables
	that can control how some of these tools are utilized.

	python - There is a separate python directory with test
	cases and test suites. These tests are initiated from
	the makefile by calling a wrapper boost test case called
	python_tests.

	C++ - The .cpp source files in the tests directory are
	the main consumers of the boost framework. They typically
	provide a common command line interface that every test
	shares, as well as additional options specific to the
	test itself. Many of these tests have multiple test cases
	within and are controlled, to some fashion, by the command
	line options.

At the top level is the make file. To initiate the tests, type the
following:

	make check

This will build all the QPID sources and tests. After all has been
built, the test suites are run. There are several options you can
use when using make to narrow down the running of the tests.

You can select a specific list of test suites by setting the variable
TESTS:

	make check TESTS=perftest

These command line options have been helpful in isolating the various
test suites.

The makefile uses the script run_test to initiate the indicated
test. In most cases, the test being requested is front-ended by a
shell script generated during the make process.

The run_test script can pass command line options through to the
called program, but the makefile isn't set up to send much in the
way of options. Many of the lower level test programs have an option
that accepts a broker address on the command line. In some cases,
the intermediate scripts have a broker option, too.

In order to use the Linux tests against the Windows broker, the
tests have to be redirected to the remote broker address. Rather
than modify the structure of the Makefile.am file used to generate
the final makefile, the broker address can be passed to the tests
in the execution environment. The modified command line invocation
then looks like this:

	BROKER=""IP_Address"" make check TESTS=""fanout_perftest""

The run_test script can be modified to look for a broker address
environment variable. Because run_test is used to start many of
the test programs, sometimes the broker address should not to be
passed through. In particular, the broker address is not necessary
when starting and stopping localhost brokers. The run_test script
determines when to pass the broker address by looking at the program
name.

Alternatively, tests can be run directly. The fanout perftest
example can be run like this:

  ./perftest --summary --count 30000 --broker IP_Address \
	--mode fanout --npubs 16 --nsubs 16 --size 64

The python tests can be run by changing directory to the python
test dir and using one of the following command lines:

  ./run-tests --skip-self-test -v -s 0-10-errata \
      -I cpp_failing_0-10.txt \
      -b 10.197.62.244:5672
  ./run-tests -v -s 0-10-errata -I cpp_failing_0-10.txt \
      -b 10.197.62.244:5672
  ./run-tests -v -s 0-10-errata -b 10.197.62.244:5672

4.3) Changes to Linux tests

Some of the tests, or scripts that initiate the tests, have the
localhost address hardcoded, or look for a broker PID in a local
file. A majority of the changes made to allow the tests to be run
from a Linux system to a Wondows broker deal with this limitation.

The tests that were run successfully against the Windows broker 
from a Linux system are:

	client_test
	quick_perftest
	quick_topictest
	python_tests
	run_federation_tests
	fanout_perftest
	shared_perftest
	multiq_perftest
	topic_perftest
	txtest
	latencytest
	echotest
	benchmark

5) Building tests on Windows

The Linux test environment makes use of tools, scripts and methods
that don't work on a Windows platform. These issues will have to be
addressed before a ""push button"" test can be accomplished similar
to that on the Linux system.

In the mean time, the test programs can be built on a Windows platform
and run by hand. The following sections talk about this.

5.1) quick and dirty modifications

The modifications described here do not represent ""best practice""
coding methodologies. They are presented for information sake.

The following files required some sort of modification to build on
Windows. A diff listing will be added to the end of this document.

  cpp/src/tests/ClientSessionTest.cpp
  cpp/src/tests/FieldTable.cpp
  cpp/src/tests/MessageBuilderTest.cpp
  cpp/src/tests/MessageTest.cpp
  cpp/src/tests/QueueOptionsTest.cpp
  cpp/src/tests/TimerTest.cpp
  cpp/src/tests/Uuid.cpp
  cpp/src/tests/logging.cpp
  cpp/src/tests/perftest.cpp
  cpp/src/tests/topic_listener.cpp
  cpp/src/tests/topic_publisher.cpp
  cpp/src/tests/unit_test.h

While the following needed modification, the have been excluded
from the build due to larger porting issues.

  cpp/src/tests/ForkedBroker.h
  cpp/src/tests/failover_soak.cpp
  cpp/src/tests/ConsoleTest.cpp

5.2) nmake environment

A small handful of make files have been created to use on a Windows
platform to build the various test programs. The nmake utility is used
with these files to perform the compilation. 

	tests/libs.mk
	tests/tests.mk

5.3) diff listings

	==========================================

	cpp/src/tests/ClientSessionTest.cpp
	38a39,44
	> #if defined(_WIN32)
	> #    include <windows.h>
	> #    include <winbase.h>
	> #endif
	> 
	> 
	225a232,234
	> #if defined(_WIN32)
	>         Sleep(1000);
	> #else
	226a236
	> #endif
	277a288,290
	> #if defined(_WIN32)
	>     Sleep(2000);
	> #else
	278a292
	> #endif
	291a306,308
	> #if defined(_WIN32)
	>     ::Sleep(300* 1);
	> #else
	292a310
	> #endif

	==========================================

	cpp/src/tests/FieldTable.cpp
	25c25,27
	< #include <alloca.h>
	---
	> #if !defined (_WIN32)
	> #    include <alloca.h>
	> #endif

	==========================================

	cpp/src/tests/MessageBuilderTest.cpp
	39c39
	<     uint64_t id;
	---
	>     boost::uint64_t id;
	215c215
	<     BOOST_CHECK_EQUAL((uint64_t) 1, builder.getMessage()->getPersistenceId());
	---
	>     BOOST_CHECK_EQUAL((boost::uint64_t) 1, builder.getMessage()->getPersistenceId());

	==========================================

	cpp/src/tests/MessageTest.cpp
	31c31,33
	< #include <alloca.h>
	---
	> #if !defined (_WIN32)
	> #    include <alloca.h>
	> #endif
	81,82c83,84
	<     BOOST_CHECK_EQUAL((uint64_t) data1.size() + data2.size(), msg->contentSize());
	<     BOOST_CHECK_EQUAL((uint64_t) data1.size() + data2.size(), msg->getProperties<MessageProperties>()->getContentLength());
	---
	>     BOOST_CHECK_EQUAL((boost::uint64_t) data1.size() + data2.size(), msg->contentSize());
	>     BOOST_CHECK_EQUAL((boost::uint64_t) data1.size() + data2.size(), msg->getProperties<MessageProperties>()->getContentLength());
	85c87
	<     BOOST_CHECK_EQUAL((uint8_t) PERSISTENT, msg->getProperties<DeliveryProperties>()->getDeliveryMode());
	---
	>     BOOST_CHECK_EQUAL((boost::uint8_t) PERSISTENT, msg->getProperties<DeliveryProperties>()->getDeliveryMode());

	==========================================

	cpp/src/tests/QueueOptionsTest.cpp
	24c24,26
	< #include <alloca.h>
	---
	> #if !defined(_WIN32)
	> #  include <alloca.h>
	> #endif

	==========================================

	cpp/src/tests/TimerTest.cpp
	78c78
	<         uint64_t difference = abs(expected - actual);
	---
	>         uint64_t difference = abs((long)(expected - actual));

	==========================================

	cpp/src/tests/Uuid.cpp
	25c25,27
	< #include <alloca.h>
	---
	> #if !defined(_WIN32)
	> #  include <alloca.h>
	> #endif

	==========================================

	cpp/src/tests/logging.cpp
	25a26
	> #  include ""qpid/log/windows/SinkOptions.h""
	272a274,276
	> #if defined(_WIN32)
	>     qpid::log::windows::SinkOptions sinks(""test"");
	> #else
	273a278
	> #endif
	288a294,296
	> #if defined(_WIN32)
	>     qpid::log::windows::SinkOptions sinks(""test"");
	> #else
	289a298
	> #endif
	347a357,360
	> #if defined(_WIN32)
	>     qpid::log::windows::SinkOptions *sinks =
	>       dynamic_cast<qpid::log::windows::SinkOptions *>(opts.sinkOptions.get());
	> #else
	349a363
	> #endif

	==========================================

	cpp/src/tests/perftest.cpp
	41c41,43
	< #include <unistd.h>
	---
	> #if !defined(_WIN32)
	> #  include <unistd.h>
	> #endif

	==========================================

	cpp/src/tests/topic_listener.cpp
	43a44,46
	> #if defined(_WIN32)
	> #  include <process.h>
	> #endif

	==========================================

	cpp/src/tests/topic_publisher.cpp
	43c43,45
	< #include <unistd.h>
	---
	> #if !defined(_WIN32)
	> #  include <unistd.h>
	> #endif

	==========================================

	cpp/src/tests/unit_test.h
	56c56
	< #if (BOOST_VERSION < 103600)
	---
	> #if (BOOST_VERSION <= 103600)

5.4) make files

Once the Visual Studio build has been run, the objects for the
broker are available and can be combined into a broker library.
This nmake file can be used in the tests directory to create the
library. This will be necessary to build the unit_test test suite.

From the tests directory you can run nmake with the tests.mk file
listed below to build the tests. This build file does not build
the files:

	ConsoleTest.cpp
	failover_soak.cpp

5.4.1) lib.mk

C89_COMPILER=C:/Program Files (x86)/Microsoft Visual Studio 9.0/VC/bin/cl.exe
C89_LINKER=C:/Program Files (x86)/Microsoft Visual Studio 9.0/VC/bin/link.exe
LINK=""link.exe""

OBJEXT=.obj

INCLUDES=/I ""C:/Program Files (x86)/boost/boost_1_36_0/include/103600"" /I ""C:/Program Files (x86)/boost/boost_1_36_0/."" /I ""."" /I "".."" /I ""../gen""
FLAGS=/D ""NDEBUG"" /D ""WIN32"" /D ""_CONSOLE"" /D ""_CRT_NONSTDC_NO_WARNINGS"" /D ""NOMINMAX"" /D ""WIN32_LEAN_AND_MEAN"" /D ""_SCL_SECURE_NO_WARNINGS"" /D ""_CRT_SECURE_NO_WARNINGS"" /FD /EHsc /MT /W3 /c /TP /wd4244 /wd4800 /wd4290 /wd4355

LIBS=ws2_32.lib secur32.lib rpcrt4.lib kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib advapi32.lib shell32.lib ole32.lib oleaut32.lib uuid.lib odbc32.lib odbccp32.lib
LDFLAGS=/INCREMENTAL:NO /LIBPATH:""."" /LIBPATH:""C:\Program Files (x86)\boost\boost_1_36_0\lib"" /DEBUG /SUBSYSTEM:CONSOLE /OPT:REF /OPT:ICF /DYNAMICBASE /NXCOMPAT /MACHINE:X86 /nologo /errorReport:prompt

RELDIR=Static_Release
ROOTDIR=C:\Users\v-vinsea\Dev\AMQP\qpid-M4\cpp\src\tests

check_PROGRAMS=
check_LTLIBRARIES=
TESTS=
EXTRA_DIST=
CLEANFILES=

.cpp$(OBJEXT):
	echo $(CC) /O2 $(INCLUDES) $(FLAGS) /Fo""..\Static_Release\qmfconsole/I386//"" /Fd""..\Static_Release\qmfconsole/I386/vc90.pdb"" $<

broker_OBJECTS=../Static_Release/broker/I386/Acl.obj \
	../Static_Release/broker/I386/Agent.obj \
	../Static_Release/broker/I386/Binding.obj \
	../Static_Release/broker/I386/Bridge.obj \
	../Static_Release/broker/I386/Bridge2.obj \
	../Static_Release/broker/I386/Broker.obj \
	../Static_Release/broker/I386/Broker2.obj \
	../Static_Release/broker/I386/BrokerDefaults.obj \
	../Static_Release/broker/I386/BrokerSingleton.obj \
	../Static_Release/broker/I386/Connection.obj \
	../Static_Release/broker/I386/Connection2.obj \
	../Static_Release/broker/I386/Connection3.obj \
	../Static_Release/broker/I386/ConnectionFactory.obj \
	../Static_Release/broker/I386/ConnectionHandler.obj \
	../Static_Release/broker/I386/DeliverableMessage.obj \
	../Static_Release/broker/I386/DeliveryRecord.obj \
	../Static_Release/broker/I386/DirectExchange.obj \
	../Static_Release/broker/I386/DtxAck.obj \
	../Static_Release/broker/I386/DtxBuffer.obj \
	../Static_Release/broker/I386/DtxManager.obj \
	../Static_Release/broker/I386/DtxTimeout.obj \
	../Static_Release/broker/I386/DtxWorkRecord.obj \
	../Static_Release/broker/I386/EventAllow.obj \
	../Static_Release/broker/I386/EventBind.obj \
	../Static_Release/broker/I386/EventBrokerLinkDown.obj \
	../Static_Release/broker/I386/EventBrokerLinkUp.obj \
	../Static_Release/broker/I386/EventClientConnect.obj \
	../Static_Release/broker/I386/EventClientConnectFail.obj \
	../Static_Release/broker/I386/EventClientDisconnect.obj \
	../Static_Release/broker/I386/EventDeny.obj \
	../Static_Release/broker/I386/EventExchangeDeclare.obj \
	../Static_Release/broker/I386/EventExchangeDelete.obj \
	../Static_Release/broker/I386/EventFileLoadFailed.obj \
	../Static_Release/broker/I386/EventFileLoaded.obj \
	../Static_Release/broker/I386/EventQueueDeclare.obj \
	../Static_Release/broker/I386/EventQueueDelete.obj \
	../Static_Release/broker/I386/EventSubscribe.obj \
	../Static_Release/broker/I386/EventUnbind.obj \
	../Static_Release/broker/I386/EventUnsubscribe.obj \
	../Static_Release/broker/I386/Exchange.obj \
	../Static_Release/broker/I386/Exchange2.obj \
	../Static_Release/broker/I386/ExchangeRegistry.obj \
	../Static_Release/broker/I386/FanOutExchange.obj \
	../Static_Release/broker/I386/HeadersExchange.obj \
	../Static_Release/broker/I386/IncompleteMessageList.obj \
	../Static_Release/broker/I386/Link.obj \
	../Static_Release/broker/I386/Link2.obj \
	../Static_Release/broker/I386/LinkRegistry.obj \
	../Static_Release/broker/I386/ManagementBroker.obj \
	../Static_Release/broker/I386/ManagementExchange.obj \
	../Static_Release/broker/I386/Message.obj \
	../Static_Release/broker/I386/MessageAdapter.obj \
	../Static_Release/broker/I386/MessageBuilder.obj \
	../Static_Release/broker/I386/MessageStoreModule.obj \
	../Static_Release/broker/I386/NameGenerator.obj \
	../Static_Release/broker/I386/NullMessageStore.obj \
	../Static_Release/broker/I386/Package.obj \
	../Static_Release/broker/I386/Package2.obj \
	../Static_Release/broker/I386/PersistableMessage.obj \
	../Static_Release/broker/I386/QpiddBroker.obj \
	../Static_Release/broker/I386/Queue.obj \
	../Static_Release/broker/I386/Queue2.obj \
	../Static_Release/broker/I386/QueueBindings.obj \
	../Static_Release/broker/I386/QueueCleaner.obj \
	../Static_Release/broker/I386/QueueListeners.obj \
	../Static_Release/broker/I386/QueuePolicy.obj \
	../Static_Release/broker/I386/QueueRegistry.obj \
	../Static_Release/broker/I386/RateTracker.obj \
	../Static_Release/broker/I386/RecoveredDequeue.obj \
	../Static_Release/broker/I386/RecoveredEnqueue.obj \
	../Static_Release/broker/I386/RecoveryManagerImpl.obj \
	../Static_Release/broker/I386/SaslAuthenticator.obj \
	../Static_Release/broker/I386/SemanticState.obj \
	../Static_Release/broker/I386/Session.obj \
	../Static_Release/broker/I386/SessionAdapter.obj \
	../Static_Release/broker/I386/SessionHandler.obj \
	../Static_Release/broker/I386/SessionManager.obj \
	../Static_Release/broker/I386/SessionState.obj \
	../Static_Release/broker/I386/System.obj \
	../Static_Release/broker/I386/System2.obj \
	../Static_Release/broker/I386/TCPIOPlugin.obj \
	../Static_Release/broker/I386/Timer.obj \
	../Static_Release/broker/I386/TopicExchange.obj \
	../Static_Release/broker/I386/TxAccept.obj \
	../Static_Release/broker/I386/TxBuffer.obj \
	../Static_Release/broker/I386/TxPublish.obj \
	../Static_Release/broker/I386/Vhost.obj \
	../Static_Release/broker/I386/Vhost2.obj \
	../Static_Release/broker/I386/qpidd.obj

qmfconsole_OBJECTS=../Static_Release/qmfconsole/I386/ClassKey.obj

lib: 
	lib.exe /OUT:""../qpidbrokers.lib"" $(broker_OBJECTS)

5.4.2) tests.mk
C89_COMPILER=C:/Program Files (x86)/Microsoft Visual Studio 9.0/VC/bin/cl.exe
C89_LINKER=C:/Program Files (x86)/Microsoft Visual Studio 9.0/VC/bin/link.exe
LINK=""link.exe""

OBJEXT=.obj
EXEEXT=.exe

INCLUDES=/I ""C:/Program Files (x86)/boost/boost_1_36_0/include/103600"" /I ""C:/Program Files (x86)/boost/boost_1_36_0/."" /I ""."" /I "".."" /I ""../gen""
FLAGS=/D ""NDEBUG"" /D ""WIN32"" /D ""_CONSOLE"" /D ""_CRT_NONSTDC_NO_WARNINGS"" /D ""NOMINMAX"" /D ""WIN32_LEAN_AND_MEAN"" /D ""_SCL_SECURE_NO_WARNINGS"" /D ""_CRT_SECURE_NO_WARNINGS"" /FD /EHsc /MT /W3 /c /TP /wd4244 /wd4800 /wd4290 /wd4355

lib_client=..\qpidclients.lib
lib_common=..\qpidcommons.lib
lib_broker=..\qpidbrokers.lib
#lib_console=..\qmfconsoles.lib
LDLIBS=..\qpidclients.lib ..\qpidcommons.lib ..\qpidbrokers.lib
LIBS=ws2_32.lib secur32.lib rpcrt4.lib kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib advapi32.lib shell32.lib ole32.lib oleaut32.lib uuid.lib odbc32.lib odbccp32.lib
LDFLAGS=/INCREMENTAL:NO /LIBPATH:""."" /LIBPATH:""C:\Program Files (x86)\boost\boost_1_36_0\lib"" /DEBUG /SUBSYSTEM:CONSOLE /OPT:REF /OPT:ICF /DYNAMICBASE /NXCOMPAT /MACHINE:X86 /nologo /errorReport:prompt

RELDIR=Static_Release
OBJDIR=$(RELDIR)/tests/I386
#UNIT_TEST_OBJDIR=$(RELDIR)/unit_test/I386
ROOTDIR=C:\Users\v-vinsea\Dev\AMQP\qpid-M4\cpp\src\tests

check_PROGRAMS=
check_LTLIBRARIES=
TESTS=
EXTRA_DIST=
CLEANFILES=

SOURCES=
UNIT_TEST_OBJECTS=

unit_test_SOURCES= \
	ConsoleTest.cpp \
	unit_test.cpp \
	exception_test.cpp \
	RefCounted.cpp \
	SessionState.cpp Blob.cpp logging.cpp \
	AsyncCompletion.cpp \
	Url.cpp Uuid.cpp \
	Shlib.cpp FieldValue.cpp FieldTable.cpp Array.cpp \
	QueueOptionsTest.cpp \
	InlineAllocator.cpp \
	InlineVector.cpp \
	ClientSessionTest.cpp \
	SequenceSet.cpp \
	StringUtils.cpp \
	IncompleteMessageList.cpp \
	RangeSet.cpp \
	AtomicValue.cpp \
	QueueTest.cpp \
	AccumulatedAckTest.cpp \
	DtxWorkRecordTest.cpp \
	DeliveryRecordTest.cpp \
	ExchangeTest.cpp \
	HeadersExchangeTest.cpp \
	MessageTest.cpp \
	QueueRegistryTest.cpp \
	QueuePolicyTest.cpp \
	FramingTest.cpp \
	HeaderTest.cpp \
	SequenceNumberTest.cpp \
	TimerTest.cpp \
	TopicExchangeTest.cpp \
	TxBufferTest.cpp \
	TxPublishTest.cpp \
	MessageBuilderTest.cpp \
	ManagementTest.cpp \
	MessageReplayTracker.cpp

perftest_SOURCES=perftest.cpp
txtest_SOURCES=txtest.cpp
latencytest_SOURCES=latencytest.cpp
echotest_SOURCES=echotest.cpp
client_test_SOURCES=client_test.cpp
topic_listener_SOURCES=topic_listener.cpp
topic_publisher_SOURCES=topic_publisher.cpp
publish_SOURCES=publish.cpp
consume_SOURCES=consume.cpp
header_test_SOURCES=header_test.cpp
failover_soak_SOURCES=failover_soak.cpp
declare_queues_SOURCES=declare_queues.cpp
replaying_sender_SOURCES=replaying_sender.cpp
resuming_receiver_SOURCES=resuming_receiver.cpp
txshift_SOURCES=txshift.cpp
txjob_SOURCES=txjob.cpp
receiver_SOURCES=receiver.cpp
sender_SOURCES=sender.cpp

SOURCES=$(SOURCES) $(unit_test_SOURCES)
SOURCES=$(SOURCES) $(perftest_SOURCES)
SOURCES=$(SOURCES) $(txtest_SOURCES)
SOURCES=$(SOURCES) $(latencytest_SOURCES)
SOURCES=$(SOURCES) $(echotest_SOURCES)
SOURCES=$(SOURCES) $(client_test_SOURCES)
SOURCES=$(SOURCES) $(topic_listener_SOURCES)
SOURCES=$(SOURCES) $(topic_publisher_SOURCES)
SOURCES=$(SOURCES) $(publish_SOURCES)
SOURCES=$(SOURCES) $(consume_SOURCES)
SOURCES=$(SOURCES) $(header_test_SOURCES)
#SOURCES=$(SOURCES) $(failover_soak_SOURCES)
SOURCES=$(SOURCES) $(declare_queues_SOURCES)
SOURCES=$(SOURCES) $(replaying_sender_SOURCES)
SOURCES=$(SOURCES) $(resuming_receiver_SOURCES)
SOURCES=$(SOURCES) $(txshift_SOURCES)
SOURCES=$(SOURCES) $(txjob_SOURCES)
SOURCES=$(SOURCES) $(receiver_SOURCES)
SOURCES=$(SOURCES) $(sender_SOURCES)

UNIT_TEST_OBJECTS= \
	$(OBJDIR)/unit_test$(OBJEXT) \
	$(OBJDIR)/exception_test$(OBJEXT) \
	$(OBJDIR)/RefCounted$(OBJEXT) \
	$(OBJDIR)/SessionState$(OBJEXT) \
	$(OBJDIR)/Blob$(OBJEXT) \
	$(OBJDIR)/logging$(OBJEXT) \
	$(OBJDIR)/AsyncCompletion$(OBJEXT) \
	$(OBJDIR)/Url$(OBJEXT) \
	$(OBJDIR)/Uuid$(OBJEXT) \
	$(OBJDIR)/Shlib$(OBJEXT) \
	$(OBJDIR)/FieldValue$(OBJEXT) \
	$(OBJDIR)/FieldTable$(OBJEXT) \
	$(OBJDIR)/Array$(OBJEXT) \
	$(OBJDIR)/QueueOptionsTest$(OBJEXT) \
	$(OBJDIR)/InlineAllocator$(OBJEXT) \
	$(OBJDIR)/InlineVector$(OBJEXT) \
	$(OBJDIR)/ClientSessionTest$(OBJEXT) \
	$(OBJDIR)/SequenceSet$(OBJEXT) \
	$(OBJDIR)/StringUtils$(OBJEXT) \
	$(OBJDIR)/IncompleteMessageList$(OBJEXT) \
	$(OBJDIR)/RangeSet$(OBJEXT) \
	$(OBJDIR)/AtomicValue$(OBJEXT) \
	$(OBJDIR)/QueueTest$(OBJEXT) \
	$(OBJDIR)/AccumulatedAckTest$(OBJEXT) \
	$(OBJDIR)/DtxWorkRecordTest$(OBJEXT) \
	$(OBJDIR)/DeliveryRecordTest$(OBJEXT) \
	$(OBJDIR)/ExchangeTest$(OBJEXT) \
	$(OBJDIR)/HeadersExchangeTest$(OBJEXT) \
	$(OBJDIR)/MessageTest$(OBJEXT) \
	$(OBJDIR)/QueueRegistryTest$(OBJEXT) \
	$(OBJDIR)/QueuePolicyTest$(OBJEXT) \
	$(OBJDIR)/FramingTest$(OBJEXT) \
	$(OBJDIR)/HeaderTest$(OBJEXT) \
	$(OBJDIR)/SequenceNumberTest$(OBJEXT) \
	$(OBJDIR)/TimerTest$(OBJEXT) \
	$(OBJDIR)/TopicExchangeTest$(OBJEXT) \
	$(OBJDIR)/TxBufferTest$(OBJEXT) \
	$(OBJDIR)/TxPublishTest$(OBJEXT) \
	$(OBJDIR)/MessageBuilderTest$(OBJEXT) \
	$(OBJDIR)/ManagementTest$(OBJEXT) \
	$(OBJDIR)/MessageReplayTracker$(OBJEXT)

#	$(OBJDIR)/ConsoleTest$(OBJEXT) \


TESTS=$(TESTS) $(RELDIR)/unit_test$(EXEEXT)
TESTS=$(TESTS) $(RELDIR)/perftest$(EXEEXT)
TESTS=$(TESTS) $(RELDIR)/txtest$(EXEEXT)
TESTS=$(TESTS) $(RELDIR)/latencytest$(EXEEXT)
TESTS=$(TESTS) $(RELDIR)/echotest$(EXEEXT)
TESTS=$(TESTS) $(RELDIR)/client_test$(EXEEXT)
TESTS=$(TESTS) $(RELDIR)/topic_listener$(EXEEXT)
TESTS=$(TESTS) $(RELDIR)/topic_publisher$(EXEEXT)
TESTS=$(TESTS) $(RELDIR)/publish$(EXEEXT)
TESTS=$(TESTS) $(RELDIR)/consume$(EXEEXT)
TESTS=$(TESTS) $(RELDIR)/header_test$(EXEEXT)
#TESTS=$(TESTS) $(RELDIR)/failover_soak$(EXEEXT)
TESTS=$(TESTS) $(RELDIR)/declare_queues$(EXEEXT)
TESTS=$(TESTS) $(RELDIR)/replaying_sender$(EXEEXT)
TESTS=$(TESTS) $(RELDIR)/resuming_receiver$(EXEEXT)
TESTS=$(TESTS) $(RELDIR)/txshift$(EXEEXT)
TESTS=$(TESTS) $(RELDIR)/txjob$(EXEEXT)
TESTS=$(TESTS) $(RELDIR)/receiver$(EXEEXT)
TESTS=$(TESTS) $(RELDIR)/sender$(EXEEXT)

.cpp.obj:
	@mkdir -p $(RELDIR)
	@mkdir -p $(OBJDIR)
	$(CC) /O2 $(INCLUDES) $(FLAGS) /Fo""$(OBJDIR)//"" /Fd""$(OBJDIR)/vc90.pdb"" $**

all: $(SOURCES:.cpp=.obj) $(TESTS)

$(RELDIR)/perftest$(EXEEXT): {$(OBJDIR)}$(perftest_SOURCES:.cpp=.obj)
	$(LINK) /OUT:$(RELDIR)/%|fF$(EXEEXT) /PDB:$(ROOTDIR)/$(RELDIR)/%|fF.pdb /MANIFEST /MANIFESTFILE:""$(OBJDIR)\%|fF$(EXEEXT).intermediate.manifest"" /MANIFESTUAC:""level='asInvoker' uiAccess='false'"" $(LDFLAGS) $(LDLIBS) $(LIBS) %|pfF$(OBJEXT) 

$(RELDIR)/txtest$(EXEEXT): {$(OBJDIR)}$(txtest_SOURCES:.cpp=.obj)
	$(LINK) /OUT:$(RELDIR)/%|fF$(EXEEXT) /PDB:$(ROOTDIR)/$(RELDIR)/%|fF.pdb /MANIFEST /MANIFESTFILE:""$(OBJDIR)\%|fF$(EXEEXT).intermediate.manifest"" /MANIFESTUAC:""level='asInvoker' uiAccess='false'"" $(LDFLAGS) $(LDLIBS) $(LIBS) %|pfF$(OBJEXT) 

$(RELDIR)/latencytest$(EXEEXT): {$(OBJDIR)}$(latencytest_SOURCES:.cpp=.obj)
	$(LINK) /OUT:$(RELDIR)/%|fF$(EXEEXT) /PDB:$(ROOTDIR)/$(RELDIR)/%|fF.pdb /MANIFEST /MANIFESTFILE:""$(OBJDIR)\%|fF$(EXEEXT).intermediate.manifest"" /MANIFESTUAC:""level='asInvoker' uiAccess='false'"" $(LDFLAGS) $(LDLIBS) $(LIBS) %|pfF$(OBJEXT) 

$(RELDIR)/echotest$(EXEEXT): {$(OBJDIR)}$(echotest_SOURCES:.cpp=.obj)
	$(LINK) /OUT:$(RELDIR)/%|fF$(EXEEXT) /PDB:$(ROOTDIR)/$(RELDIR)/%|fF.pdb /MANIFEST /MANIFESTFILE:""$(OBJDIR)\%|fF$(EXEEXT).intermediate.manifest"" /MANIFESTUAC:""level='asInvoker' uiAccess='false'"" $(LDFLAGS) $(LDLIBS) $(LIBS) %|pfF$(OBJEXT) 

$(RELDIR)/client_test$(EXEEXT): {$(OBJDIR)}$(client_test_SOURCES:.cpp=.obj)
	$(LINK) /OUT:$(RELDIR)/%|fF$(EXEEXT) /PDB:$(ROOTDIR)/$(RELDIR)/%|fF.pdb /MANIFEST /MANIFESTFILE:""$(OBJDIR)\%|fF$(EXEEXT).intermediate.manifest"" /MANIFESTUAC:""level='asInvoker' uiAccess='false'"" $(LDFLAGS) $(LDLIBS) $(LIBS) %|pfF$(OBJEXT) 

$(RELDIR)/topic_listener$(EXEEXT): {$(OBJDIR)}$(topic_listener_SOURCES:.cpp=.obj)
	$(LINK) /OUT:$(RELDIR)/%|fF$(EXEEXT) /PDB:$(ROOTDIR)/$(RELDIR)/%|fF.pdb /MANIFEST /MANIFESTFILE:""$(OBJDIR)\%|fF$(EXEEXT).intermediate.manifest"" /MANIFESTUAC:""level='asInvoker' uiAccess='false'"" $(LDFLAGS) $(LDLIBS) $(LIBS) %|pfF$(OBJEXT) 

$(RELDIR)/topic_publisher$(EXEEXT): {$(OBJDIR)}$(topic_publisher_SOURCES:.cpp=.obj)
	$(LINK) /OUT:$(RELDIR)/%|fF$(EXEEXT) /PDB:$(ROOTDIR)/$(RELDIR)/%|fF.pdb /MANIFEST /MANIFESTFILE:""$(OBJDIR)\%|fF$(EXEEXT).intermediate.manifest"" /MANIFESTUAC:""level='asInvoker' uiAccess='false'"" $(LDFLAGS) $(LDLIBS) $(LIBS) %|pfF$(OBJEXT) 

$(RELDIR)/publish$(EXEEXT): {$(OBJDIR)}$(publish_SOURCES:.cpp=.obj)
	$(LINK) /OUT:$(RELDIR)/%|fF$(EXEEXT) /PDB:$(ROOTDIR)/$(RELDIR)/%|fF.pdb /MANIFEST /MANIFESTFILE:""$(OBJDIR)\%|fF$(EXEEXT).intermediate.manifest"" /MANIFESTUAC:""level='asInvoker' uiAccess='false'"" $(LDFLAGS) $(LDLIBS) $(LIBS) %|pfF$(OBJEXT) 

$(RELDIR)/consume$(EXEEXT): {$(OBJDIR)}$(consume_SOURCES:.cpp=.obj)
	$(LINK) /OUT:$(RELDIR)/%|fF$(EXEEXT) /PDB:$(ROOTDIR)/$(RELDIR)/%|fF.pdb /MANIFEST /MANIFESTFILE:""$(OBJDIR)\%|fF$(EXEEXT).intermediate.manifest"" /MANIFESTUAC:""level='asInvoker' uiAccess='false'"" $(LDFLAGS) $(LDLIBS) $(LIBS) %|pfF$(OBJEXT) 

$(RELDIR)/header_test$(EXEEXT): {$(OBJDIR)}$(header_test_SOURCES:.cpp=.obj)
	$(LINK) /OUT:$(RELDIR)/%|fF$(EXEEXT) /PDB:$(ROOTDIR)/$(RELDIR)/%|fF.pdb /MANIFEST /MANIFESTFILE:""$(OBJDIR)\%|fF$(EXEEXT).intermediate.manifest"" /MANIFESTUAC:""level='asInvoker' uiAccess='false'"" $(LDFLAGS) $(LDLIBS) $(LIBS) %|pfF$(OBJEXT) 

$(RELDIR)/failover_soak$(EXEEXT): {$(OBJDIR)}$(failover_soak_SOURCES:.cpp=.obj)
	$(LINK) /OUT:$(RELDIR)/%|fF$(EXEEXT) /PDB:$(ROOTDIR)/$(RELDIR)/%|fF.pdb /MANIFEST /MANIFESTFILE:""$(OBJDIR)\%|fF$(EXEEXT).intermediate.manifest"" /MANIFESTUAC:""level='asInvoker' uiAccess='false'"" $(LDFLAGS) $(LDLIBS) $(LIBS) %|pfF$(OBJEXT) 

$(RELDIR)/declare_queues$(EXEEXT): {$(OBJDIR)}$(declare_queues_SOURCES:.cpp=.obj)
	$(LINK) /OUT:$(RELDIR)/%|fF$(EXEEXT) /PDB:$(ROOTDIR)/$(RELDIR)/%|fF.pdb /MANIFEST /MANIFESTFILE:""$(OBJDIR)\%|fF$(EXEEXT).intermediate.manifest"" /MANIFESTUAC:""level='asInvoker' uiAccess='false'"" $(LDFLAGS) $(LDLIBS) $(LIBS) %|pfF$(OBJEXT) 

$(RELDIR)/replaying_sender$(EXEEXT): {$(OBJDIR)}$(replaying_sender_SOURCES:.cpp=.obj)
	$(LINK) /OUT:$(RELDIR)/%|fF$(EXEEXT) /PDB:$(ROOTDIR)/$(RELDIR)/%|fF.pdb /MANIFEST /MANIFESTFILE:""$(OBJDIR)\%|fF$(EXEEXT).intermediate.manifest"" /MANIFESTUAC:""level='asInvoker' uiAccess='false'"" $(LDFLAGS) $(LDLIBS) $(LIBS) %|pfF$(OBJEXT) 

$(RELDIR)/resuming_receiver$(EXEEXT): {$(OBJDIR)}$(resuming_receiver_SOURCES:.cpp=.obj)
	$(LINK) /OUT:$(RELDIR)/%|fF$(EXEEXT) /PDB:$(ROOTDIR)/$(RELDIR)/%|fF.pdb /MANIFEST /MANIFESTFILE:""$(OBJDIR)\%|fF$(EXEEXT).intermediate.manifest"" /MANIFESTUAC:""level='asInvoker' uiAccess='false'"" $(LDFLAGS) $(LDLIBS) $(LIBS) %|pfF$(OBJEXT) 

$(RELDIR)/txshift$(EXEEXT): {$(OBJDIR)}$(txshift_SOURCES:.cpp=.obj)
	$(LINK) /OUT:$(RELDIR)/%|fF$(EXEEXT) /PDB:$(ROOTDIR)/$(RELDIR)/%|fF.pdb /MANIFEST /MANIFESTFILE:""$(OBJDIR)\%|fF$(EXEEXT).intermediate.manifest"" /MANIFESTUAC:""level='asInvoker' uiAccess='false'"" $(LDFLAGS) $(LDLIBS) $(LIBS) %|pfF$(OBJEXT) 

$(RELDIR)/txjob$(EXEEXT): {$(OBJDIR)}$(txjob_SOURCES:.cpp=.obj)
	$(LINK) /OUT:$(RELDIR)/%|fF$(EXEEXT) /PDB:$(ROOTDIR)/$(RELDIR)/%|fF.pdb /MANIFEST /MANIFESTFILE:""$(OBJDIR)\%|fF$(EXEEXT).intermediate.manifest"" /MANIFESTUAC:""level='asInvoker' uiAccess='false'"" $(LDFLAGS) $(LDLIBS) $(LIBS) %|pfF$(OBJEXT) 

$(RELDIR)/receiver$(EXEEXT): {$(OBJDIR)}$(receiver_SOURCES:.cpp=.obj)
	$(LINK) /OUT:$(RELDIR)/%|fF$(EXEEXT) /PDB:$(ROOTDIR)/$(RELDIR)/%|fF.pdb /MANIFEST /MANIFESTFILE:""$(OBJDIR)\%|fF$(EXEEXT).intermediate.manifest"" /MANIFESTUAC:""level='asInvoker' uiAccess='false'"" $(LDFLAGS) $(LDLIBS) $(LIBS) %|pfF$(OBJEXT) 

$(RELDIR)/sender$(EXEEXT): {$(OBJDIR)}$(sender_SOURCES:.cpp=.obj)
	$(LINK) /OUT:$(RELDIR)/%|fF$(EXEEXT) /PDB:$(ROOTDIR)/$(RELDIR)/%|fF.pdb /MANIFEST /MANIFESTFILE:""$(OBJDIR)\%|fF$(EXEEXT).intermediate.manifest"" /MANIFESTUAC:""level='asInvoker' uiAccess='false'"" $(LDFLAGS) $(LDLIBS) $(LIBS) %|pfF$(OBJEXT) 

$(RELDIR)/unit_test$(EXEEXT): {$(OBJDIR)}$(unit_test_SOURCES:.cpp=.obj)
	$(LINK) /OUT:$(RELDIR)/%|fF$(EXEEXT) /PDB:$(ROOTDIR)/$(RELDIR)/%|fF.pdb /MANIFEST /MANIFESTFILE:""$(OBJDIR)\%|fF$(EXEEXT).intermediate.manifest"" /MANIFESTUAC:""level='asInvoker' uiAccess='false'"" $(LDFLAGS) $(LDLIBS) $(LIBS) $(UNIT_TEST_OBJECTS)
"	4	Improvement	starter	5	Trivial	6	Closed
12415509	QPID	ritchiem	Do not show Notification areas for MBeans which do not send Notifications	The JMX management console displays a Notifications tab area for every MBean, because the abstract AMQManagedObject class used as the basis for the MBeans on the broker implements NotificationBroadcaster. However, only the AMQQueueMBean currently emits any notifications, so this added tab is useless in many instances. As such, the console should check whether there are any notifications available for subscription before displaying the tab area when viewing an MBean.	4	Improvement	legacy-jmx-console	4	Minor	6	Closed
12415512	QPID	ritchiem	jmx management console outputs type of every notification recieved to stdout, with a null object name	The console currently pritns output for reciept of every notification, such as when a new MBean is registered (eg a new connection is made to the broker, or a queue is created) or unregistered. However, it simply outputs the type of the notification, followed by 'null' for the object name of the emitting mbean.	1	Bug	legacy-jmx-console	4	Minor	6	Closed
12415515	QPID	ritchiem	Make it easier to distinguish success and failure dialogues.	"The jmx management console currently displays ""operation successful"" or ""operation unsuccessful"" in a dialogue upon completion of many tasks. However, the dialogue styles used are the same and it is hard to distinguish the difference quickly, leading to the easy mistaking of the result. The dialogues should be more visually informative of the result."	4	Improvement	legacy-jmx-console	4	Minor	6	Closed
12415511	QPID	ritchiem	Remove the fixed value 'domain' option from the add connection dialogue, and node form the navigation tree	The jmx management console currently provides a combo box for the user to select the domain from which to view the mbeans. This field only contains 1 value as it is fixed within the broker. Additionally, this domain value is added as a node in the mbean navigation tree that servers no purpose, but which the user must expand every time they use the console. These should be removed.	4	Improvement	legacy-jmx-console	4	Minor	6	Closed
12414769	HBASE	nspiegelberg	Add bloomfilters	Add bloomfiltering to hfile.  Can be enabled on a family-level basis.  Ability to configure a row vs row+col level bloom.  We size the bloomfilter with the number of entries we are about to flush which seems like usually we'd be making a filter too big, so our implementation needs to take that into account.	3	Task	moved_from_0_20_5	3	Major	6	Closed
12414800	QPID	a.gazzarini	Asynchronous notification capability	"The current implementation of WS-Notification engine is synchronous. That means the publisher (QMan) will remain blocked until the notification has been processed on oberserver (client) side...this is in generarl not acceptable because a server component depends on a client behaviour...
So, notifications should be processed in separate threads. JDK 1.5 introduced a TrheadPoolEXecutor that is something like a WorkManager in a JEE environment. 
Qman will use it for asynchronous notification capability."	7	Sub-task	qman	2	Critical	6	Closed
12415623	QPID	ritchiem	Create Linux x86-64 and Solaris builds of the JMX Management Console	With x86-64 becoming a dominant architecture we should ensure the management console properly supports it by creating an x86-64 Linux build of the console. Additionally, a Solaris  build will round out the overall platform support of the console.	2	New Feature	legacy-jmx-console	4	Minor	6	Closed
12415679	QPID	ritchiem	jmx console saves its settings ini file direcly in the user home directory	The jmx management console saves an ini file to retain users customised navigation settings, however it does so directly in the user home directory. This is a bit ugly and at the very least should be moved into a hidden subdirectory.	1	Bug	legacy-jmx-console	4	Minor	6	Closed
12414034	LUCENE	thetaphi	if a filter can support random access API, we should use it	"I ran some performance tests, comparing applying a filter via
random-access API instead of current trunk's iterator API.

This was inspired by LUCENE-1476, where we realized deletions should
really be implemented just like a filter, but then in testing found
that switching deletions to iterator was a very sizable performance
hit.

Some notes on the test:

  * Index is first 2M docs of Wikipedia.  Test machine is Mac OS X
    10.5.6, quad core Intel CPU, 6 GB RAM, java 1.6.0_07-b06-153.

  * I test across multiple queries.  1-X means an OR query, eg 1-4
    means 1 OR 2 OR 3 OR 4, whereas +1-4 is an AND query, ie 1 AND 2
    AND 3 AND 4.  ""u s"" means ""united states"" (phrase search).

  * I test with multiple filter densities (0, 1, 2, 5, 10, 25, 75, 90,
    95, 98, 99, 99.99999 (filter is non-null but all bits are set),
    100 (filter=null, control)).

  * Method high means I use random-access filter API in
    IndexSearcher's main loop.  Method low means I use random-access
    filter API down in SegmentTermDocs (just like deleted docs
    today).

  * Baseline (QPS) is current trunk, where filter is applied as iterator up
    ""high"" (ie in IndexSearcher's search loop)."	4	Improvement	gsoc2011, lucene-gsoc-11, mentor	4	Minor	6	Closed
12415709	QPID	ritchiem	dont show admin mbeans in the navigation tree if the user doesnt have permission to access them	Currently the UserManagement and LoggingManagement mbeans are added to the navigation tree of the jmx management console for all users, but only 'admin' level users can access them. 'readonly' and 'readwrite' level users are presented with an access denied dialog when attempting to view them. This can be tested in advance, and the beans simply not displayed in the tree for such users.	4	Improvement	legacy-jmx-console	4	Minor	6	Closed
12415729	QPID	ritchiem	jmx management console confirmation dialogues confusingly have 3 choices	"When undertaking an operation, the jmx management console seeks confirmation from the user before executing, asking ""Do you want to  <operation name>?"". However, it presents a confirmation dialogue with 3 choices: Cancel, Yes, and No. This is silly, and probably a bit confusing for users, and should be reduced to a more sensible 2. Yes/No or Ok/Cancel."	1	Bug	legacy-jmx-console	4	Minor	6	Closed
12415752	IVY	mbenson	latest.integration isn't resolved against a Maven snapshot repository (when uniqueVersion = true)	"When latest.integration is the requested revision the ibiblio resolver doesn't go through the snapshots. So in effect you'll always end up with the latest.release.

Given the following ivysettings:
{code:title=ivysettings.xml}
<ivysettings>
   <settings defaultResolver=""snapshots.jboss.org""/>
   <resolvers>
      <ibiblio name=""snapshots.jboss.org"" m2compatible=""true"" usepoms=""true"" root=""http://snapshots.jboss.org/maven2""/>
   </resolvers>
</ivysettings>
{code}

Ivy won't go through the unique snapshot versions:
{noformat}
	listing revisions from maven-metadata: http://snapshots.jboss.org/maven2/org/jboss/ejb3/jboss-ejb3-cache/maven-metadata.xml
	found revs: [0.13.1-SNAPSHOT, 1.0.1-SNAPSHOT]
HTTP response status: 404 url=http://snapshots.jboss.org/maven2/org/jboss/ejb3/jboss-ejb3-cache/0.13.1-SNAPSHOT/jboss-ejb3-cache-0.13.1-SNAPSHOT.pom
CLIENT ERROR: Not Found url=http://snapshots.jboss.org/maven2/org/jboss/ejb3/jboss-ejb3-cache/0.13.1-SNAPSHOT/jboss-ejb3-cache-0.13.1-SNAPSHOT.pom
HTTP response status: 404 url=http://snapshots.jboss.org/maven2/org/jboss/ejb3/jboss-ejb3-cache/1.0.1-SNAPSHOT/jboss-ejb3-cache-1.0.1-SNAPSHOT.pom
CLIENT ERROR: Not Found url=http://snapshots.jboss.org/maven2/org/jboss/ejb3/jboss-ejb3-cache/1.0.1-SNAPSHOT/jboss-ejb3-cache-1.0.1-SNAPSHOT.pom
{noformat}

With the maven-snapshot-resolver it will:
{code:title=ivysettings.xml}
<ivysettings>
   <typedef name=""maven-snapshot-resolver"" classname=""org.jboss.ejb3.ivy.plugins.resolver.MavenSnapshotResolver""/>
   <settings defaultResolver=""snapshots.jboss.org""/>
   <resolvers>
      <maven-snapshot-resolver name=""snapshots.jboss.org"" m2compatible=""true"" usepoms=""true"" root=""http://snapshots.jboss.org/maven2""/>
   </resolvers>
</ivysettings>
{code}

{noformat}
	listing revisions from maven-metadata: http://snapshots.jboss.org/maven2/org/jboss/ejb3/jboss-ejb3-cache/maven-metadata.xml
	found revs: [0.13.1-SNAPSHOT, 1.0.1-SNAPSHOT]
	snapshots.jboss.org: found md file for org.jboss.ejb3#jboss-ejb3-cache;latest.integration
		=> http://snapshots.jboss.org/maven2/org/jboss/ejb3/jboss-ejb3-cache//1.0.1-SNAPSHOT/jboss-ejb3-cache-1.0.1-20090303.040911-22.pom (1.0.1-20090303.040911-22)
{noformat}"	1	Bug	patch	3	Major	5	Resolved
12415799	QPID	ritchiem	The jmx management console core plugin should no longer depend on the jmxremote.sasl plugin, and qpid-managment-common should only depend on it optionally	The jmx management console core plugin should no longer depend on the jmxremote.sasl plugin, and the qpid-managment-common plugin should only depend on it optionally since it is only required for making JMXMP based JMX connections.	1	Bug	legacy-jmx-console	5	Trivial	6	Closed
12415896	QPID	ritchiem	auto-expand the top level mbean type folders in the navigation tree upon establishing a connection	Auto expand the the top level mbean type folders in the navigation tree upon establishing a connection.	4	Improvement	legacy-jmx-console	4	Minor	6	Closed
12414990	ZOOKEEPER	cdarroch	remove locking in zk_hashtable.c or add locking in collect_keys()	"From a review of zk_hashtable.c it appears to me that all functions which manipulate the hashtables are called from the IO thread, and therefore any need for locking is obviated.

If I'm wrong about that, then I think at a minimum collect_keys() should acquire a lock in the same manner as collect_session_watchers().  Both iterate over hashtable contents (in the latter case using copy_table()).

However, from what I can see, the only function (besides the init/destroy functions used when creating a zhandle_t) called from the completion thread is deliverWatchers(), which simply iterates over a ""delivery"" list created from the hashtables by collectWatchers().  The activateWatcher() function contains comments which describe it being called by the completion thread, but in fact it is called by the IO thread in zookeeper_process().

I believe all calls to collectWatchers(), activateWatcher(), and collect_keys() are made by the IO thread in zookeeper_interest(), zookeeper_process(), check_events(), send_set_watches(), and handle_error().  Note that queue_session_event() is aliased as PROCESS_SESSION_EVENT, but appears only in handle_error() and check_events().

Also note that handle_error() is called only in zookeeper_process() and handle_socket_error_msg(), which is used only by the IO thread, so far as I can see."	1	Bug	pull-request-available	3	Major	6	Closed
12415110	ZOOKEEPER	mahadev	optmize session tracking in zookeeper.	sometimes a lot of zookeeper clients are read only. For such clients we do not need the session tracking in zookeeper. Getting rid of session tracking for such clients will help us sclae much better.	2	New Feature	session	3	Major	5	Resolved
12415173	HDFS	surendrasingh	Method to retrieve all quotas active on HDFS	"Currently the only way to view quota information on an HDFS is via dfs -count -q, which is fine when an admin is examining a specific directory for quota status.

It would also be good to do full HDFS quota audits, by pulling all HDFS quotas currently set on the system. This is especially important when trying to do capacity management (""OK, how much quota have we allotted so far?""). I think the only way to do this now is via lsr | count -q, which is pretty cumbersome.
"	2	New Feature	newbie	3	Major	10002	Patch Available
12415516	QPID	ritchiem	'Next' and 'Previous' type buttons are in the wrong order for areas providing TabularData viewing	In areas such as ViewUsers and ViewMessages, the buttons for providing Next and Previous type functionality are in the wrong order. This is confusing, even more so when paired with the First and Last type buttons also provided.	1	Bug	legacy-jmx-console	4	Minor	6	Closed
12415570	HADOOP	cheersyang	Trash documentation should describe its directory structure and configurations	"Trash documentation should mention the significance of ""Current"" and ""<time-stamp>"" directories which get generated inside Trash directory. The documentation should also incorporate modifications done in HADOOP: 4970."	4	Improvement	newbie	4	Minor	6	Closed
12415654	HADOOP	other_pirate	NPE in heartbeat when the configured topology script doesn't exist		1	Bug	newbie	3	Major	1	Open
12415688	QPID	ritchiem	remove unused 'transport' details from jmx management console's connection process	The JMX management console has hard coded 'transport' references to use of RMI which have not been used in the actual connection process since the JMXMP capabilities were added in a different class, and moreso now that the protocol type is auto negotiated by the JMX connection factory.. This should be cleaned up.	4	Improvement	legacy-jmx-console	4	Minor	6	Closed
12416335	SOLR	janhoy	Deprecate/Remove <indexDefaults> and <mainIndex> in favor of <indexConfig> in solrconfig.xml	"Given that we now handle multiple cores via the solr.xml and the discussion around <indexDefaults> and <mainIndex> at http://www.lucidimagination.com/search/p:solr?q=mainIndex+vs.+indexDefaults

We should deprecate old <indexDefaults> and <mainIndex> sections and only use a new <indexConfig> section.

3.6: Deprecation warning if old section used
4.0: If LuceneMatchVersion before LUCENE_40 then warn (so old configs will work), else fail fast"	4	Improvement	solrconfig.xml	3	Major	6	Closed
12416208	QPID	gemmellr	I/O Error while using 'Clear Queue' from Qpid Management Console	"From a user:

Clear Queue' option in Qpid Management Console works successfully if there are less messages and gives I/O exception (org.apache.qpid.protocol.AMQConstant) if there are large number of messages in the queue undelivered.
Steps to reproduce:
1. pump a persisent queue with messages (I had errors even with 200 messages) in the queue
2. Connect to the broker with Qpid Management Console, select the queue, and choose tab 'Clear Queue' and press 'execute'.

This error does not happen when I have around 50 messages (not sure of the limit) in the queue while it clears the queue successfully."	1	Bug	legacy-jmx-console	3	Major	6	Closed
12416621	TAP5	igor.drobiazko	tapestry-core should provide a built-in page to show the status of persistent data 	"In order to oprimize the amount of data persisted in the session via @Persist or as ASO one should be able to get an overview of it.  A page StateStatus should be provided which could loo like:

Persistant Fields
---------------------------------------------------------------------------------------------
Strategy Name |   Page Name   |   Component Id      |       Field Name
---------------------------------------------------------------------------------------------
   flash	             |    Login	        |   loginform.form       |     defaultTracker
-----------------------------------------------------------------------------------------------
   state	             |   Foo	 	|                                      |   bar
------------------------------------------------------------------------------------------------

Application State Objects

----------------------------------------------------------------------------------------------
com.example.model.User@ba8180[id=1,username=root,.......]
----------------------------------------------------------------------------------------------
com.example.model.Foo1f6c439[bar=baz] 
----------------------------------------------------------------------------------------------"	2	New Feature	bulk-close-candidate	3	Major	6	Closed
12416733	WICKET	ivaynberg	"Make Palette's ""Choices"" Model More Generics Friendly"	The Palette class suffers from the same issues as ListView and DropDownChoice.  It should be fixed similarly.	1	Bug	generics	3	Major	5	Resolved
12416299	MAPREDUCE	vinodkv	Duplicate destroy of process trees in TaskMemoryManager.	TaskMemoryManager currently works only on Linux and terminates tasks that transgress memory-limits by first calling TaskTracker.purgeTask() and then explicitly destroying the process tree to be sure that the whole process tree is cleaned up. After HADOOP-2721, we don't need this explicit process-tree destroying as the usual code-path of killing tasks itself takes care of cleaning up the whole process-trees.	1	Bug	newbie	4	Minor	5	Resolved
12416384	TAP5	igor.drobiazko	Add BeanPropertySelectModel	As raised in TAP5-213, we don't do enough to make the common cases of using the Select component easy enough.  To this end, we should add back in the BeanPropertySelectModel default implementation like T4 had (http://tapestry.apache.org/tapestry4.1/apidocs/org/apache/tapestry/form/BeanPropertySelectionModel.html).  Not only was it a good idea then, but it should help with a T4 migration to T5.	4	Improvement	bulk-close-candidate	4	Minor	6	Closed
12417050	QPID	ritchiem	improve splash screen description	The JMX management console's splash screen could be more descriptive, saying that it uses JMX to distinguish it from any future QMF efforts, and signalling that it is only for the Java broker.	4	Improvement	legacy-jmx-console	5	Trivial	6	Closed
12416930	QPID	ritchiem	MbeanType view does not adequately indicate button functionality	The MbeanType view does not adequately indicate its buttons functionality, leaving users uncertain what they should do. The can be made more clear by updating the text to indicate the button's purpose.	1	Bug	legacy-jmx-console	4	Minor	6	Closed
12417216	ODE	rrusin	Error handling in-out operations while WAIT is put inside process	"Scenario 1:
receive initiate
reply to initiate
wait 10 sec.  (here comes request for op1, it's saved to db)
receive op1
reply to op1

After reply I got 
ERROR - GeronimoLog.error(108) |
java.lang.NullPointerException
        at org.apache.ode.axis2.ODEService.onAxisMessageExchange(ODEService.java:186)
(see npe.log)


Scenario 2:
receive initiate
reply to initiate
receive op1 (here comes request for op1, it's dispatched immediately)
wait 10 sec.  
reply to op1

Here, I had process completion, but timeout waiting for response in client

For both scenarios, please use the same soapui test case. 
"	1	Bug	test	3	Major	1	Open
12416711	HADOOP	boky01	RunJar.unJar() should write the last modified time found in the jar entry to the uncompressed file	"For tools like jruby and jython, last modified times determine if a script gets recompiled.  Losing the correct last modified time causes some unfortunate recompilation race conditions when a job is running.
"	4	Improvement	newbie	4	Minor	5	Resolved
12419270	MAPREDUCE	amar_kamat	JobHistory should also support searching with special characters	"Today the jobhistory searches a single keyword in jobname. Searching for multiple keywords should also be allowed. 
Example :
For searching all jobs with ""sleep job"" in them the search string would be ""_:sleep job_"". But it doesnt work because the filename is not decoded before searching. "	1	Bug	newbie	3	Major	1	Open
12419334	DERBY	mamtas	Provide a way to drop statistics information	"Now that DERBY-269 has been resolved,  users can update statistics, but once they do, they are committed to using and maintaining the statistics, even if it doesn't improve performance or they have difficulty maintaining the statistics on a regular basis.  It would be good to have a way to drop statistics information so that users could revert to the prior behavior if needed.

"	4	Improvement	derby_backport_reject_10_8	3	Major	6	Closed
12419305	ODE	sathwik	Clustering	"We need to deploy Apache ODE in clustered environment to meet requirements for one of our projects. 
Per FAQ, the clustering support is under development, but it is not listed in the Roadmap. 
We need to know if clustering support will be provided in the next release i.e. 1.3. 
We will greatly appreciate if you let us know when this support will be added or if there is any workaround.
"	1	Bug	gsoc2015, java	3	Major	3	In Progress
12419524	PIVOT	gbrown	Replace Dispatcher with ExecutorService		4	Improvement	api-change	3	Major	5	Resolved
12419622	ODE	milinda	Adding web based BPEL debugging support	"In order to run a business process successfully in ODE, it is a must to verify and debug its BPEL process model before deploying it in Apache ODE. So exposing the process debugging functionality as a web services such that a user can remotely debug a process and adding a graphical monitoring console allows for setting breakpoints and to monitor the run time details of that process will increase the usability as well as popularity of the work-flow engine we are concerning. Currently though the debugging functionality is included in Apache ODE, it's not really been tested for the current Apache ODE and it's not exposed as a web service.
Web based debugging support for Apache ODE is a project aimed at exposing the debugging functionality as a web service and adding an AJAX based monitoring console to which consist of a graphical representation of a particular business process, allows for setting breakpoints to activities and allows for monitoring that process being debugged.
This will enable users to gain full advantage of the ODE, by reducing design time and the testing time during the process development by allowing them to remotely debug a business process, set breakpoints to process activities, modify variables and to monitor the run rime variable information."	2	New Feature	patch	3	Major	1	Open
12421766	DERBY	kristwaa	OOM issue using XA with timeouts	"When using JTA for transaction control and a transaction timeout is set,
EmbedXAResource ends up calling XATransactionState.scheduleTimeoutTask() which
in turn registers a timeoutTask with java.util.Timer. In the normal case where
the transaction finishes before the timeout, XATransactionState.xa_finalize()
then calls timeoutTask.cancel(). So far this so good. The problem, however, is
that java.util.TimerTask.cancel() does not actually remove the task from the
timer queue, meaning that a strong reference to the timeoutTask is kept (and
through that to XATransactionState, the EmbedConnection, etc). The reference
is not removed until the time at which the timeout would have fired, which can
be a long time. Under load this can quickly lead to an OOM situation.

A simple fix is to call Timer.purge() every so often. While the javadocs talk
about purge() being rarely needed and that it's not extremely cheap, I've
found that calling it after every cancel() is the best approach, for several
reasons: 1) the scenario here is that almost all tasks are cancelled, and
hence this somewhat fits the Timer.purge() description of an ""application that
cancels a large number of tasks""; 2) there usually isn't a very large number
of simultaneous transactions, and hence purge() is actually quite cheap; 3)
this ensures the strong reference is immediately removed, allowing the GC to
do a better job. Interestingly enough, I've had this exact same issue on a
different type of db, and I had tested the purge() there and found it to be in
the sub-microsecond range for 100 transactions (or similar - I don't recall
the exact data), i.e. completely negligible.

In short, my suggestion is to change xa_finalize as follows:

    synchronized void xa_finalize() {
        if (timeoutTask != null) {
            timeoutTask.cancel();
            Monitor.getMonitor().getTimerFactory().
                    getCancellationTimer().purge();
        }
        isFinished = true;
    }

As a temporary workaround, applications can do this themselves, i.e.
add something like the following whenever they close a Connection:

  import org.apache.derby.iapi.services.monitor.Monitor;
  Monitor.getMonitor().getTimerFactory().getCancellationTimer().purge();

"	1	Bug	derby_triage10_5_2	3	Major	6	Closed
12421927	CASSANDRA	xedin	SSTable compression	We should be able to do SSTable compression which would trade CPU for I/O (almost always a good trade).	2	New Feature	compression	10002	Normal	5	Resolved
12422776	ODE	mriou	Ode 2.0 beta problem while using pathner service - corresponding method not implemented	"We (Eclipse Swordfish project team) are using ODE with apache ServiceMix 4. Our test example consists of
simple bpel process that invoke jax-ws web service during execution and return result.

Ode 1.2 works fine with that. But ODE 2.0 beta not returns any response to caller. And I see following warning in logs:

*WARNING: Received a response for unknown partner role message exchange 11ee7ee0-28f9-4250-9c6c-e9becf573f7f*

After research source codes we find following code snippet inside org.apache.ode.jbi.OdeConsumer:

    private void outResponse(final InOut jbiMex) {

        PartnerRoleMessageExchange pmex = (PartnerRoleMessageExchange)
                 _ode._server.getMessageExchangeByForeignKey(jbiMex.getExchangeId());
                if (pmex == null) {
                      __log.warn(""Received a response for unknown partner role message exchange "" + jbiMex.getExchangeId());
                     return;
                 }
         ...........


so _ode._server.getMessageExchangeByForeignKey(jbiMex.getExchangeId() retutns NULL;

I've check _ode._server implementation class with is BpelServerImpl and find out that getMessageExchangeByForeignKey method not implemented:

    public MessageExchange getMessageExchangeByForeignKey(String foreignKey) throws BpelEngineException {
        // TODO Auto-generated method stub
        return null;
    }

It is very big issue for us,
"	1	Bug	patch	3	Major	1	Open
12422039	QPID	tedross	Java QMF Agent with Support for Nonmanaged objects	"The feature (with patches) is for a Java agent which supports the encoding and decoding of complex object types. The patches provided are based off of patches provided by Ted Ross (pythonConsole.pactch) and Rafael Schloming (javaAgent.patch).

The Java agent is an IOC friendly class which can be configured to connect to an AMQP broker. It allows for classes to be bound to QMF either by registering a managed object, or by directly registering the classes. Complex input and output types (including custom objects, lists, enumerations) are marshalled into and out of QMF Object types (type 20). Annotations can be used to control the class and package naming of the objects.

The python console has been extended to work with the java agent. The supplied test program (muppet.py) exercises much of the functionality of the Java Agent and complex object marshalling.

Open issues right now with this initial patch include:

- Type Inheritance: How to show in the schema that one type extends another (See Pikelet and Crumpet)?
- Do we allow operator overloading? (currently we do not). Right now a managed object can only have a single method with a single name
- Enumerations: Do we should the value values in the schema?
- Do we show in the schema that one type is unmanaged?
- If the Qpid deamon dies, the agent does not reconnect
- Maps: The current ftables type only passes Native QPID types. Should a new map be created which sends complex objects?"	2	New Feature	ant_build_system	3	Major	6	Closed
12422916	HADOOP	gkesavan	ant clean does not clean the generated api docs		1	Bug	newbie	3	Major	5	Resolved
12422343	TAP5	hlship	"Allow page classes to have a ""Page"" suffix that is not included in the URL"	"I have an application with a lot of read-only pages. For example, I have a page that shows a company and I would like a URI such as:  /company/1234

However, if I name the page class ""Company"" then I get a naming clash with the domain object ""Company"". What I would like to do is call the Tapestry 5 class ""CompanyPage"" - after all, that is what the class represents and it's certainly how the team refers to that thing internally and with our business (i.e. ""Have you seen the new company page?"").

So, please could the ComponentClassResolverImpl remove the suffix ""Page"" (if it exists) from the class name when it constructs the logical page name?



"	4	Improvement	bulk-close-candidate	4	Minor	6	Closed
12422893	QPID	gemmellr	DerbyStore is to strict, throwing constraint errors if a duplicate queue or exchange is registered	"Summary:

If a second attempt is made to store an exchange or queue is made then the store should not fail if the queue already exists. This is in line with what the BDB Message Store currently does. If we want to change the contract on the store to only allow one create per object then we can do that as part of the configuration storing improvements."	1	Bug	derbystore	3	Major	6	Closed
12421958	TAP5	mlusetti	Add ProgressListener support to Upload component	Would be great if Tapestry supported the ProgressListener interface out of the box.  As it is, I'm going to have to override the MultipartDecoder service and implement a custom Upload component.	5	Wish	bulk-close-candidate	3	Major	6	Closed
12422126	QPID	ritchiem	add attribute to logging management mbean to indicate available log output levels	It would be useful to have the broker indicate available output levels for the logging management MBean to set. This would make it more obvious what users can set the value to, and also would prove useful for any future UI or tools which needed to know the available options for display without resorting to hard coding.	4	Improvement	legacy-jmx-console	4	Minor	6	Closed
12422390	IVY	hibou	ApacheURLLister.retrieveListing() fails if the encoding of the URL list is different from the default encoding	"ApacheURLLister.retrieveListing() assumes that the list of URLs is encoded in the same encoding as the system's default encoding.

The problematic code is:
{code}
BufferedReader r = new BufferedReader(new InputStreamReader(URLHandlerRegistry.getDefault().openStream(url)));
String htmlText = FileUtil.readEntirely(r);
{code}

FileUtil.readEntirely() converts the the content of the BufferedReader r to a String. Because no encoding is specified in the InputStreamReader constructor, the default encoding is used. If the default encoding does not match the actual encoding of the data read from url,  htmlText ends up as a garbage String and the URL pattern matcher fails.

This causes an issue on z/OS, where the default encoding is EBCDIC (e.g. IBM-1047) but the data containing the list of URLs is typically retrieved from the network as ASCII (ISO-8559-1).

A workaround could be to specify the system property -Dfile.encoding=ISO-8559-1 on the command line, but this is a bit of a big hammer. In particular, it is not suitable when Ivy is used within an application where we don't to assume all input is ISO-8559-1.
"	1	Bug	patch	3	Major	5	Resolved
12424078	PDFBOX	danielwilson	Invalid code encountered while decoding CCITT	"I tried to convert the following document to image, but I got the attached result. 

It parsed just the text. I also tried different formats like JPG.  I ran it using the PDFToImage class passing the document path as parameter. 

I've read that sometimes the document is not created respecting the PDF standard. But, is there a possibility to ignore it?! In fact, it's very important to me, so, could I use PDF Box despite of those ""errors""? 

Thank you
Marcelo
"	1	Bug	CCITTFaxDecode, TIFF, ccitt	3	Major	1	Open
12422894	QPID	gemmellr	Update Derby store to check if a queue/exchange already exists on recovery	"Summary:

Due to the change that prevents duplicate MBean registrations the Derby code must now lookup the broker for an existing queue/exchange on recovery rather than simply replacing it with a new one."	1	Bug	derbystore	3	Major	6	Closed
12423138	QPID	aidan	stop copying jmx management console libs to 'build/lib' dir	"The build system copies the libs for each module into the 'build/lib' dir during the build process. The JMX management console build process does not use the libs from this dir (and moreso, the layout in which they are copied there is useless) as only the core plugin is created in the directory, with the full platform-specific console packages created in the plugins own release subdirectory.

As such, we should stop copying jmx management console libs to 'build/lib' dir."	3	Task	legacy-jmx-console	5	Trivial	6	Closed
12424187	DERBY	mamtas	SecureServerTest AssertionFailedError: Timed out waiting for network server to start	"I saw this  failure in the nightly run on  4/27 on the 10.5 branch - 10.5.1.2 - (769232).  I have not seen it in previous runs on the same machine.  There were actually two failures in the test. I think the second one failed because of the first so am not reporting a separate issue for that.

There were 2 failures:
1) SecureServerTest( Opened = false, Authenticated= false, CustomDerbyProperties= null, WildCardHost= null )junit.framework.AssertionFailedError: Timed out waiting for network server to start:Spawned SpawnedNetworkServer exitCode=0
	at org.apache.derbyTesting.junit.NetworkServerTestSetup.setUp(NetworkServerTestSetup.java:200)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:18)
	at junit.extensions.TestSetup.run(TestSetup.java:23)
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)
	at junit.extensions.TestSetup.run(TestSetup.java:23)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)
	at junit.extensions.TestSetup.run(TestSetup.java:23)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)
	at junit.extensions.TestSetup.run(TestSetup.java:23)
2) SecureServerTest( Opened = false, Authenticated= false, CustomDerbyProperties= functionTests/tests/derbynet/SecureServerTest.derby.properties, WildCardHost= null )junit.framework.AssertionFailedError: directory trace does not exist
	at org.apache.derbyTesting.functionTests.tests.derbynet.SecureServerTest.setTraceDirectory(SecureServerTest.java:386)
	at org.apache.derbyTesting.functionTests.tests.derbynet.SecureServerTest.testServerStartup(SecureServerTest.java:358)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java(Compiled Code))
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:105)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)
	at junit.extensions.TestSetup.run(TestSetup.java:23)
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)
	at junit.extensions.TestSetup.run(TestSetup.java:23)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)
	at junit.extensions.TestSetup.run(TestSetup.java:23)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)
	at junit.extensions.TestSetup.run(TestSetup.java:23)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)
	at junit.extensions.TestSetup.run(TestSetup.java:23)


"	1	Bug	derby_triage10_8	4	Minor	6	Closed
12421533	MAPREDUCE	rwisniewski	Improve the way error messages are displayed from jobclient	Today if a job is submitted with an already existing output directory then an exception trace is displayed on the client. A simple message like '{{Error running job as output path already exists}}' might suffice.	4	Improvement	newbie	3	Major	1	Open
12421613	QPID	rajith	Add an ant target to run interop tests	"Need to add an ant target to run the java examples against c++ and python clients using the c++ broker.
As a first step this should run the verify_all script."	4	Improvement	ant_build_system	4	Minor	6	Closed
12422868	DERBY	knutanders	"getMetaData().getIndexInfo crashes with ""ERROR X0Y68: Column 'PARAM1' already exists."""	"The following code in DataNucleus:
rs = conn.getMetaData().getIndexInfo(catalogName, schemaName, tableName, false,
true);
triggers an Exception (http://gist.github.com/95679):

Caused by: java.sql.SQLException: Column 'PARAM1' already exists.
        at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)
        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:119)
        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:70)
        ... 105 more
Caused by: ERROR X0Y68: Column 'PARAM1' already exists.
        at org.apache.derby.iapi.error.StandardException.newException(StandardException.java:303)
        at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.duplicateDescriptorException(DataDictionaryImpl.java:1678)
        at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.addDescriptor(DataDictionaryImpl.java:1662)
        at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.addSPSParams(DataDictionaryImpl.java:3682)
        at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.updateSPS(DataDictionaryImpl.java:3830)
        at org.apache.derby.iapi.sql.dictionary.SPSDescriptor.updateSYSSTATEMENTS(SPSDescriptor.java:1112)
        at org.apache.derby.iapi.sql.dictionary.SPSDescriptor.getPreparedStatement(SPSDescriptor.java:736)
        at org.apache.derby.iapi.sql.dictionary.SPSDescriptor.getPreparedStatement(SPSDescriptor.java:642)
        at org.apache.derby.impl.sql.compile.ExecSPSNode.generate(ExecSPSNode.java:177)
        at org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:447)
        at org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:88)
        at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConnectionContext.java:794)
        at org.apache.derby.impl.jdbc.EmbedPreparedStatement.<init>(EmbedPreparedStatement.java:128)
        ... 99 more"	1	Bug	derby_triage10_5_2	3	Major	6	Closed
12423076	AXIS2	robertlazarski	Axis2 OSGi bundles have split packages	"1) axis2-adb and axis2-kernel export ""org.apache.axis2.util""
2) axis2-kernel and axis2-transport-http export "" org.apache.axis2.transport.http""
3) axis2-kernel and axis2-transport-jms export ""org.apache.axis2.transport.jms""
 
These bundles are causing conflicts under OSGi as Import-Package is resolved in random order if they are split in multiple bundles."	1	Bug	osgi	3	Major	5	Resolved
12423772	CLK	a_adrian	Hibernate example webapp	A Hibernate based example webapplication (similar to the Cayenne based) .	2	New Feature	examples, hibernate	3	Major	3	In Progress
12424287	CLK	a_adrian	Refactor AbstractLink to Link and include Simple/External Link functionality.	"There doesn't seem to be any ""simple link"" control in Click to be  able to point to an arbitrary URL (internal but external too).
There's now the ExternalLink but it's just too specific :( - extending it would conflict with it's name (maybe a rename would be better).

In many cases there's no distinction in the application between an internal an external URL (e.g. because the external might be a subdomain).

Another problem is that AbstractLink is can't be used directly for these simple cases (being abstract).

Basically a SimpleLink code would look like ExternalLink, but it would have this additional snippet after L:106:
<code>
        String ctxPath = getContext().getRequest().getContextPath();
        if(!getTargetPath().contains(""://"")) {
            buffer.append(ctxPath);
        }
</code>
This would allow to use only one control, and in the application logic, depending on the target, to let the control itself render the required context path if needed.
----------------------------------------------------------------------
Update:
- Refactor abstract AbstractLink class to a concrete class, simply named ""Link""
- Include basic Link functionality in this Link class - something like SimpleLink and ExternalLink
- Deprecate ExternalLink

Users will be able to use the Link control directly so there will be no confusions.
(Most of the time they use ActionLink without an action, because AbstractLink is abstract)
"	2	New Feature	AbstractLink	3	Major	1	Open
12424316	QPID	aidan	JMX MC release archives are incomplete when building on Windows	JMX MC release archives are incomplete when building on Windows, the Eclipse RCP plugins are not copied to the release directories because of a file separator issue with using Ant's copy task in combination with a globmapper child element.	1	Bug	ant_build_system	4	Minor	6	Closed
12424532	MAPREDUCE	owen.omalley	add new options to mapred job -list-attempt-ids to dump counters and diagnostic messages	"It would be very nice when tracking down tasks that have strange values for their counters, if there was a command line tool to print out the task attempts and their counters and diagnostic messages. I propose adding switches to -list-attempt-ids to accomplish that:

{quote}
mapred job -list-attempt-ids [-counters] [-diagnostics] <job> <type> <state>
{quote}"	2	New Feature	newbie	3	Major	1	Open
12424691	QPID	ritchiem	JMX MC tar files are not gzipped as the filename indicates, and packages dont contain licence files.	JMX MC tar files are not gzipped as the filename indicates, and packages dont contain licence files.	1	Bug	ant_build_system	1	Blocker	6	Closed
12425057	ODE	vanto	A process with active = false in its deploy.xml shows as active in process list		1	Bug	patch	3	Major	5	Resolved
12425171	QPID	a.gazzarini	qman-jmx.sh startup script is not working	"The startup script for QMan (JMX Adapter) on Unix platforms is not working.
No problem for Windows version.

Regards,
Andrea"	1	Bug	qman	1	Blocker	6	Closed
12425351	TAP5	hlship	IE error using an ActionLink to update a Zone	"I have a problem when I use a HTML component that uses JavaScript, in a Zone. Sample:

				<t:zone t:id=""testZone"" id=""testZone"">
					<t:delegate to=""testblock"" />
				</t:zone>

                                 <a t:type=""actionlink"" t:id=""refreshZone"" href=""#"" t:zone=""testZone"">Refresh Zone</a>

				<t:block t:id=""testblock"">
					<t:form t:id=""testForm"" >
						<t:textfield t:clientId=""field1"" t:id=""field1"" t:value=""field1"" onClick=""alert('HI');""/>
						<t:submit t:id=""submit1"" t:value=""1"" />
					</t:form>
				</t:block>



If I enter in MS Explorer 7 or 8 and run this code (Click ""Refresh Zone""), the explorer fail with one syntactic error.

Thanks 

"	1	Bug	ie, javascript	3	Major	6	Closed
12425752	HIVE	navis	Select columns by index instead of name	"SELECT mytable[0], mytable[2] FROM some_table_name mytable;

...should return the first and third columns, respectively, from mytable regardless of their column names.

The need for ""names"" specifically is kind of silly when they just get translated into numbers anyway."	5	Wish	SQL	4	Minor	10002	Patch Available
12425536	HDFS	sho.shimauchi	FSEditLog should log progress during replay	When the NameNode is replaying a long edit log, it's handy to have reports on how far through it is, so you can judge how much time it is remaining.	4	Improvement	newbie	3	Major	6	Closed
12427012	HIVE	amareshwari	Hive TypeInfo/ObjectInspector to support union (besides struct, array, and map)	"There are already some cases inside the code that we use heterogeneous data: JoinOperator, and UnionOperator (in the sense that different parents can pass in records with different ObjectInspectors).
We currently use Operator's parentID to distinguish that. However that approach does not extend to more complex plans that might be needed in the future.

We will support the union type like this:

{code}
TypeDefinition:
  type: primitivetype | structtype | arraytype | maptype | uniontype
  uniontype: ""union"" ""<"" tag "":"" type ("","" tag "":"" type)* "">""
Example:
  union<0:int,1:double,2:array<string>,3:struct<a:int,b:string>>

Example of serialized data format:
  We will first store the tag byte before we serialize the object. On deserialization, we will first read out the tag byte, then we know what is the current type of the following object, so we can deserialize it successfully.

Interface for ObjectInspector:
interface UnionObjectInspector {
  /** Returns the array of OIs that are for each of the tags
   */
  ObjectInspector[] getObjectInspectors();
  /** Return the tag of the object.
   */
  byte getTag(Object o);
  /** Return the field based on the tag value associated with the Object.
   */
  Object getField(Object o);
};

An example serialization format (Using deliminated format, with ' ' as first-level delimitor and '=' as second-level delimitor)
userid:int,log:union<0:struct<touserid:int,message:string>>,1:string>
123 1=login
123 0=243=helloworld
123 1=logout

{code}
"	2	New Feature	uniontype	3	Major	6	Closed
12427269	DERBY	houxzhang	Make derbynet/NetworkServerControlClientCommandTest run regardless of the locale	"The NetworkServerControlClientCommandTest has in it a check that will only run the test if the locale is set to 'en'.

It is open to suggestion the how to achieve this and whether it should be done. Since the test is a pretty generic one, I think it should be ran regardless of the locale.

Knut suggested we'd force the locale to 'en' on the setUp() and back to its previous value on the tearDown(). On a first analysis this seems like the ideal method to go about it. Just removing the check for the locale altogether might not be wise because of the calls to assertFailedPing() that involve some hardcoded strings."	4	Improvement	gsoc, gsoc2011	4	Minor	6	Closed
12427333	HIVE	cmishra	Parallel Execution Mechanism	"In a massively parallel database system, it would be awesome to also parallelize some of the mapreduce phases that our data needs to go through.

One example that just occurred to me is UNION ALL: when you union two SELECT statements, effectively you could run those statements in parallel. There's no situation (that I can think of, but I don't have a formal proof) in which the left statement would rely on the right statement, or vice versa. So, they could be run at the same time...and perhaps they should be. Or, perhaps there should be a way to make this happen...PARALLEL UNION ALL? PUNION ALL?"	2	New Feature	hive-appu	3	Major	6	Closed
12427473	DERBY	kmarsden	highly intermittent java.lang.ClassCastException: [[Lorg.apache.derby.iapi.store.access.Qualifier; incompatible with org.apache.derby.iapi.types.DataValueDescriptor doing simple select	"I got a report from a user for a highly intermittent ClassCastException doing a select.  Below is the stack trace:
java.lang.ClassCastException: 
[[Lorg.apache.derby.iapi.store.access.Qualifier; incompatible 
with org.apache.derby.iapi.types.DataValueDescriptor
	at 
org.apache.derby.impl.sql.execute.GenericQualifier.getOrderable(
Unknown Source)
	at 
org.apache.derby.impl.sql.execute.NoPutResultSetImpl.clearOrdera
bleCache(Unknown Source)
	at 
org.apache.derby.impl.sql.execute.BulkTableScanResultSet.openSca
nController(Unknown Source)
	at 
org.apache.derby.impl.sql.execute.TableScanResultSet.openCore(Un
known Source)
	at 
org.apache.derby.impl.sql.execute.BulkTableScanResultSet.openCor
e(Unknown Source)
	at 
org.apache.derby.impl.sql.execute.BasicNoPutResultSetImpl.open(U
nknown Source)
	at 
org.apache.derby.impl.sql.GenericPreparedStatement.execute(Unkno
wn Source)
	at 
org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(Unkno
wn Source)
	at org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown 
Source)
	at 
org.apache.derby.impl.jdbc.EmbedStatement.executeQuery(Unknown 
Source)

I don't have a reproduction yet but have some information on the schema and query that occasionally fails:  The data here is contrived, I don't know the actual data in the table at the time of the failure.  The column names have changed, but represent the same types.


CREATE TABLE ""APP"".""RESOURCE"" 
	(
	""AUUID"" CHAR(36) NOT NULL, 
	""BUUID"" CHAR(36) NOT NULL, 
	""CUUID"" CHAR(36) NOT NULL, 
	""DUUID"" CHAR(36) NOT NULL, 
	""SECTION"" CHAR(6) NOT NULL, 
	""TYPE"" CHAR(48) NOT NULL, 
	""LASTUPDATE"" TIMESTAMP NOT NULL
	);
ALTER TABLE ""APP"".""RESOURCE"" ADD CONSTRAINT ""SQL060817095529130"" PRIMARY KEY (""AUUID"", ""BUUID"", ""SECTION"");

-- Not sure of the actual data.  This data was made up so the query would get a match.

INSERT INTO RESOURCE VALUES ('3b2c2edc-1401-0000-0080-c38634aef3ba', '3b2c2edc-1401-0000-0080-c38634aef3bb', '2be1347d-2001-0000-0080-8cd524f0d034', '2be1347d-2001-0000-0080-8cd524f0d033', 'GENRAL', 'NodeType', CURRENT_TIMESTAMP);



SELECT * FROM RESOURCE WHERE 
	SECTION='GENRAL' AND 
	TYPE='NodeType' AND 
	DUUID='2be1347d-2001-0000-0080-8cd524f0d033' AND 
	BUUID='3b2c2edc-1401-0000-0080-c38634aef3bb';


This has happened to just one user on z/OS with J2RE 1.5.0 IBM z/OS build pmz31dev-20081210 (SR9-0).  Other users running the same application on the same versions have not seen this issue.  This particular user has disabled the functionality causing the problem for now, so I am hoping we can glean some information from code inspection and debugging this sample query to see where the cast might go wrong.


"	1	Bug	derby_triage10_5_2	3	Major	6	Closed
12426148	HADOOP	kimballa	FileSystem.fixName() has unexpected behaviour	"{{FileSystem.fixName()}} tries to patch up fs.default.name values, but I'm not sure it helps that well. 

Has it been warning about deprecated values for long enough for it to be turned off? "	1	Bug	newbie	4	Minor	1	Open
12426206	HDFS	stevel@apache.org	Provide better error messages when fs.default.name is invalid	this the followon to HADOOP-5687 - its not enough to detect bad uris, we need good error messages and a set of tests to make sure everything works as intended.	4	Improvement	newbie	4	Minor	1	Open
12427650	ZOOKEEPER	rakeshr	need a way to remove watches that are no longer of interest	currently the only way a watch cleared is to trigger it. we need a way to enumerate the outstanding watch objects, find watch events the objects are watching for, and remove interests in an event.	7	Sub-task	remove_watches	2	Critical	5	Resolved
12427734	DERBY	dagw	Failover did not succeed in 2 min.: testReplication_Local_3_p6_autocommit_OK	"Failover did not succeed.
2) testReplication_Local_3_p6_autocommit_OK(org.apache.derbyTesting.functionTests.tests.replicationTests.ReplicationRun_Local_3_p6)junit.framework.AssertionFailedError: Failover did not succeed.
	at org.apache.derbyTesting.functionTests.tests.replicationTests.ReplicationRun.connectPing(ReplicationRun.java:270)
	at org.apache.derbyTesting.functionTests.tests.replicationTests.ReplicationRun_Local_3_p6.derby_3896(ReplicationRun_Local_3_p6.java:200)
	at org.apache.derbyTesting.functionTests.tests.replicationTests.ReplicationRun_Local_3_p6.testReplication_Local_3_p6_autocommit_OK(ReplicationRun_Local_3_p6.java:86)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:106)
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)
	at junit.extensions.TestSetup.run(TestSetup.java:25)

See http://dbtg.thresher.com/derby/test/Daily/jvm1.4/testing/testlog/vista-64/782274-suitesAll_diff.txt
"	1	Bug	derby_triage10_5_2	3	Major	6	Closed
12426953	HBASE	nspiegelberg	scaling compaction with multiple threads	"Was thinking we should build in support to be able to handle more then one thread for compactions this will allow us to keep up with compactions when we get to the point where we store Tb's of data per node and may regions
Maybe a configurable setting to set how many threads a region server can use for compactions.

With compression turned on my compactions are limited by cpu speed with multi cores then it would be nice to be able to scale compactions to 2 or more cores.
"	4	Improvement	moved_from_0_20_5	3	Major	6	Closed
12428006	DERBY	knutanders	Query executions fail when compressing a table using SYSCS_UTIL.SYSCS_COMPRESS_TABLE	"Query executions (SELECT and/or UPDATE) fail with serious exceptions while the table is being compressed using SYSCS_UTIL.SYSCS_COMPRESS_ TABLE. The compression eventually finishes normally, but the queries keep failing with the same error until the database is rebooted. More information about this can be found on the Derby mailing list at http://www.nabble.com/Issue-with-SYSCS_UTIL.SYSCS_COMPRESS_-TABLE-td23892893.html. The exception stacktrace is below: 

Caused by: java.sql.SQLException: The conglomerate (71,409) requested does not exist.
            at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
            at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)
            at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(Unknown Source)
            at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Unknown Source)
            at org.apache.derby.impl.jdbc.EmbedConnection.handleException(Unknown Source)
            at org.apache.derby.impl.jdbc.ConnectionChild.handleException(Unknown Source)
            at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(Unknown Source)
            at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeStatement(Unknown Source)
            at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeQuery(Unknown Source)
            at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:93)
            ... 25 more
        Caused by: ERROR XSAI2: The conglomerate (71,409) requested does not exist.
            at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
            at org.apache.derby.impl.store.access.btree.index.B2IFactory.readConglomerate(Unknown Source)
            at org.apache.derby.impl.store.access.RAMAccessManager.conglomCacheFind(Unknown Source)
            at org.apache.derby.impl.store.access.RAMTransaction.findExistingConglomerate(Unknown Source)
            at org.apache.derby.impl.store.access.RAMTransaction.openScan(Unknown Source)
            at org.apache.derby.impl.store.access.BackingStoreHashTableFromScan.<init>(Unknown Source)
            at org.apache.derby.impl.store.access.RAMTransaction.createBackingStoreHashtableFromScan(Unknown Source)
            at org.apache.derby.impl.sql.execute.HashScanResultSet.openCore(Unknown Source)
            at org.apache.derby.impl.sql.execute.JoinResultSet.openRight(Unknown Source)
            at org.apache.derby.impl.sql.execute.JoinResultSet.openCore(Unknown Source)
            at org.apache.derby.impl.sql.execute.JoinResultSet.openCore(Unknown Source)
            at org.apache.derby.impl.sql.execute.ProjectRestrictResultSet.openCore(Unknown Source)
            at org.apache.derby.impl.sql.execute.UnionResultSet.getNextRowCore(Unknown Source)
            at org.apache.derby.impl.sql.execute.SortResultSet.getRowFromResultSet(Unknown Source)
            at org.apache.derby.impl.sql.execute.SortResultSet.getNextRowFromRS(Unknown Source)
            at org.apache.derby.impl.sql.execute.SortResultSet.loadSorter(Unknown Source)
            at org.apache.derby.impl.sql.execute.SortResultSet.openCore(Unknown Source)
            at org.apache.derby.impl.sql.execute.SortResultSet.openCore(Unknown Source)
            at org.apache.derby.impl.sql.execute.BasicNoPutResultSetImpl.open(Unknown Source)
            at org.apache.derby.impl.sql.GenericPreparedStatement.execute(Unknown Source) "	1	Bug	derby_triage10_5_2	3	Major	6	Closed
12428027	DERBY	olesolberg	ReplicationRun_Local and ReplicationRun_Local_StateTest_part1 failed after testing fix of 4268	"When testing the fix for bug 4268, ReplicationRun_Local and ReplicationRun_Local_StateTest_part1 failed. This is after revision: 785298. 
$ cat error-stacktrace.out
[Error/failure logged at Tue Jun 16 22:15:46 PDT 2009]
junit.framework.ComparisonFailure: Unexpected SQL state. expected:<...20> but wa
s:<...07>
        at junit.framework.Assert.assertEquals(Assert.java:81)
        at org.apache.derbyTesting.junit.BaseJDBCTestCase.assertSQLState(BaseJDB
CTestCase.java:762)
        at org.apache.derbyTesting.junit.BaseJDBCTestCase.assertSQLState(BaseJDB
CTestCase.java:811)
        at org.apache.derbyTesting.functionTests.tests.replicationTests.Replicat
ionRun.failOver_direct(ReplicationRun.java:1381)
        at org.apache.derbyTesting.functionTests.tests.replicationTests.Replicat
ionRun.failOver(ReplicationRun.java:1302)
        at org.apache.derbyTesting.functionTests.tests.replicationTests.Replicat
ionRun_Local.testReplication_Local_existingTestsAsReplLoad(ReplicationRun_Local.
java:148)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at junit.framework.TestCase.runTest(TestCase.java:154)
        at junit.framework.TestCase.runBare(TestCase.java:127)
        at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:
106)
        at junit.framework.TestResult$1.protect(TestResult.java:106)
        at junit.framework.TestResult.runProtected(TestResult.java:124)
        at junit.framework.TestResult.run(TestResult.java:109)
        at junit.framework.TestCase.run(TestCase.java:118)
        at junit.framework.TestSuite.runTest(TestSuite.java:208)
        at junit.framework.TestSuite.run(TestSuite.java:203)
        at junit.framework.TestSuite.runTest(TestSuite.java:208)
        at junit.framework.TestSuite.run(TestSuite.java:203)
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)
        at junit.extensions.TestSetup$1.protect(TestSetup.java:19)
        at junit.framework.TestResult.runProtected(TestResult.java:124)
        at junit.extensions.TestSetup.run(TestSetup.java:23)
        at junit.framework.TestSuite.runTest(TestSuite.java:208)
        at junit.framework.TestSuite.run(TestSuite.java:203)
        at junit.framework.TestSuite.runTest(TestSuite.java:208)
        at junit.framework.TestSuite.run(TestSuite.java:203)
        at junit.textui.TestRunner.doRun(TestRunner.java:116)
        at junit.textui.TestRunner.start(TestRunner.java:172)
        at junit.textui.TestRunner.main(TestRunner.java:138)
Caused by: java.sql.SQLException: DERBY SQL error: SQLCODE: -1, SQLSTATE: XRE07,
 SQLERRMC: Could not perform operation because the database is not in replicatio
n master mode.
        at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(SQLE
xceptionFactory40.java:96)
        at org.apache.derby.client.am.SqlException.getSQLException(SqlException.
java:358)
        at org.apache.derby.jdbc.ClientDriver.connect(ClientDriver.java:149)
        at java.sql.DriverManager.getConnection(Unknown Source)
        at java.sql.DriverManager.getConnection(Unknown Source)
        at org.apache.derbyTesting.functionTests.tests.replicationTests.Replicat
ionRun.failOver_direct(ReplicationRun.java:1368)
        ... 28 more
Caused by: org.apache.derby.client.am.SqlException: DERBY SQL error: SQLCODE: -1
, SQLSTATE: XRE07, SQLERRMC: Could not perform operation because the database is
 not in replication master mode.
        at org.apache.derby.client.am.Connection.completeSqlca(Connection.java:2
075)
        at org.apache.derby.client.net.NetConnectionReply.parseRdbAccessFailed(N
etConnectionReply.java:540)
        at org.apache.derby.client.net.NetConnectionReply.parseAccessRdbError(Ne
tConnectionReply.java:433)
        at org.apache.derby.client.net.NetConnectionReply.parseACCRDBreply(NetCo
nnectionReply.java:297)
        at org.apache.derby.client.net.NetConnectionReply.readAccessDatabase(Net
ConnectionReply.java:121)
        at org.apache.derby.client.net.NetConnection.readSecurityCheckAndAccessR
db(NetConnection.java:835)
        at org.apache.derby.client.net.NetConnection.flowSecurityCheckAndAccessR
db(NetConnection.java:759)
        at org.apache.derby.client.net.NetConnection.flowUSRIDONLconnect(NetConn
ection.java:592)
        at org.apache.derby.client.net.NetConnection.flowConnect(NetConnection.j
ava:399)
        at org.apache.derby.client.net.NetConnection.<init>(NetConnection.java:2
19)
        at org.apache.derby.client.net.NetConnection40.<init>(NetConnection40.ja
va:77)
        at org.apache.derby.client.net.ClientJDBCObjectFactoryImpl40.newNetConne
ction(ClientJDBCObjectFactoryImpl40.java:269)
        at org.apache.derby.jdbc.ClientDriver.connect(ClientDriver.java:140)
        ... 31 more

=====Trace for ReplicationRun_Local_StateTest_part1===========
[Error/failure logged at Tue Jun 16 22:19:28 PDT 2009]
junit.framework.ComparisonFailure: Unexpected SQL state. expected:<...20> but wa
s:<...07>
        at junit.framework.Assert.assertEquals(Assert.java:81)
        at org.apache.derbyTesting.junit.BaseJDBCTestCase.assertSQLState(BaseJDB
CTestCase.java:762)
        at org.apache.derbyTesting.junit.BaseJDBCTestCase.assertSQLState(BaseJDB
CTestCase.java:811)
        at org.apache.derbyTesting.functionTests.tests.replicationTests.Replicat
ionRun.failOver_direct(ReplicationRun.java:1381)
        at org.apache.derbyTesting.functionTests.tests.replicationTests.Replicat
ionRun.failOver(ReplicationRun.java:1302)
        at org.apache.derbyTesting.functionTests.tests.replicationTests.Replicat
ionRun_Local_StateTest_part1.testReplication_Local_StateTest_part1(ReplicationRu
n_Local_StateTest_part1.java:160)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at junit.framework.TestCase.runTest(TestCase.java:154)
        at junit.framework.TestCase.runBare(TestCase.java:127)
        at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:
106)
        at junit.framework.TestResult$1.protect(TestResult.java:106)
        at junit.framework.TestResult.runProtected(TestResult.java:124)
        at junit.framework.TestResult.run(TestResult.java:109)
        at junit.framework.TestCase.run(TestCase.java:118)
        at junit.framework.TestSuite.runTest(TestSuite.java:208)
        at junit.framework.TestSuite.run(TestSuite.java:203)
        at junit.framework.TestSuite.runTest(TestSuite.java:208)
        at junit.framework.TestSuite.run(TestSuite.java:203)
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)
        at junit.extensions.TestSetup$1.protect(TestSetup.java:19)
        at junit.framework.TestResult.runProtected(TestResult.java:124)
        at junit.extensions.TestSetup.run(TestSetup.java:23)
        at junit.framework.TestSuite.runTest(TestSuite.java:208)
        at junit.framework.TestSuite.run(TestSuite.java:203)
        at junit.framework.TestSuite.runTest(TestSuite.java:208)
        at junit.framework.TestSuite.run(TestSuite.java:203)
        at junit.textui.TestRunner.doRun(TestRunner.java:116)
        at junit.textui.TestRunner.start(TestRunner.java:172)
        at junit.textui.TestRunner.main(TestRunner.java:138)
Caused by: java.sql.SQLException: DERBY SQL error: SQLCODE: -1, SQLSTATE: XRE07,
 SQLERRMC: Could not perform operation because the database is not in replicatio
n master mode.
        at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(SQLE
xceptionFactory40.java:96)
        at org.apache.derby.client.am.SqlException.getSQLException(SqlException.
java:358)
        at org.apache.derby.jdbc.ClientDriver.connect(ClientDriver.java:149)
        at java.sql.DriverManager.getConnection(Unknown Source)
        at java.sql.DriverManager.getConnection(Unknown Source)
        at org.apache.derbyTesting.functionTests.tests.replicationTests.Replicat
ionRun.failOver_direct(ReplicationRun.java:1368)
        ... 28 more
Caused by: org.apache.derby.client.am.SqlException: DERBY SQL error: SQLCODE: -1
, SQLSTATE: XRE07, SQLERRMC: Could not perform operation because the database is
 not in replication master mode.
        at org.apache.derby.client.am.Connection.completeSqlca(Connection.java:2
075)
        at org.apache.derby.client.net.NetConnectionReply.parseRdbAccessFailed(N
etConnectionReply.java:540)
        at org.apache.derby.client.net.NetConnectionReply.parseAccessRdbError(Ne
tConnectionReply.java:433)
        at org.apache.derby.client.net.NetConnectionReply.parseACCRDBreply(NetCo
nnectionReply.java:297)
        at org.apache.derby.client.net.NetConnectionReply.readAccessDatabase(Net
ConnectionReply.java:121)
        at org.apache.derby.client.net.NetConnection.readSecurityCheckAndAccessR
db(NetConnection.java:835)
        at org.apache.derby.client.net.NetConnection.flowSecurityCheckAndAccessR
db(NetConnection.java:759)
        at org.apache.derby.client.net.NetConnection.flowUSRIDONLconnect(NetConn
ection.java:592)
        at org.apache.derby.client.net.NetConnection.flowConnect(NetConnection.j
ava:399)
        at org.apache.derby.client.net.NetConnection.<init>(NetConnection.java:2
19)
        at org.apache.derby.client.net.NetConnection40.<init>(NetConnection40.ja
va:77)
        at org.apache.derby.client.net.ClientJDBCObjectFactoryImpl40.newNetConne
ction(ClientJDBCObjectFactoryImpl40.java:269)
        at org.apache.derby.jdbc.ClientDriver.connect(ClientDriver.java:140)
        ... 31 more
"	1	Bug	derby_triage10_5_2	4	Minor	6	Closed
12427109	TAP5	jkemnade	TextField validate parameter allows Null, but throws NPE	"Component TextField has parameter ""validate"" annotated by
   @Parameter(defaultPrefix = BindingConstants.VALIDATE)
There is no attribute allowNull, but it has default value ""true"" (http://tapestry.apache.org/tapestry5.1/apidocs/org/apache/tapestry5/annotations/Parameter.html#allowNull()). 
So null value is allowed according to specification.

But if you set parameter validate to null, NullPointerException is thrown from AbstractTextProperties.begin(MarkupWriter writer), line: 173."	1	Bug	patch	3	Major	6	Closed
12428266	QPID	andrew.kennedy	Maven artifacts for the client	The attached patch files adds the maven ant tasks to the build system. It allows, on a per-module basis, to support creating a pom file and exporting the jars to a maven repository. This is not a very DRY solution, as it requires copying the dependency information from the build.deps file. I have only added the pom files for the client bits, since i believe these are the most likely to be required by folks using QMF.	2	New Feature	ant_build_system	3	Major	6	Closed
12428429	DERBY	brettw	Statement cache deadlock	"Due to a design flaw in the statement cache, a deadlock can occur if a prepared statement becomes out-of-date.

I will illustrate this with the following example:

The application is using the embedded Derby driver. The application has two threads, and each thread uses its own connection.

There is a table named MYTABLE with column MYCOLUMN.

1. A thread prepares and executes the query SELECT MYCOLUMN FROM MYTABLE. The prepared statement is stored in the statement cache (see org.apache.derby.impl.sql.GenericStatement for this logic)
2. After some time, the prepared statement becomes invalid or out-of-date for some reason (see org.apache.derby.impl.sql.GenericPreparedStatement)
3. Thread 1 begins a transaction and executes LOCK TABLE MYTABLE IN EXCLUSIVE MODE
4. Thread 2 begins a transaction and executes SELECT MYCOLUMN FROM MYTABLE. The statement is in the statement cache but it is out-of-date. The thread begins to recompile the statement. To compile the statement, the thread needs a shared lock on MYTABLE. Thread 1 already has an exclusive lock on MYTABLE. Thread 2 waits.
5. Thread 1 executes SELECT MYCOLUMN FROM MYTABLE. The statement is in the statement cache but it is being compiled. Thread 1 waits on the statement's monitor.
6. We have a deadlock. Derby eventually detects a lock timeout, but the error message is not descriptive. The stacks at the time of the deadlock are:

This deadlock is unique because it can still occur in a properly designed database. You are only safe if all of your transactions are very simple and cannot be interleaved in a sequence that causes the deadlock, or if your particular statements do not require a table lock to compile. (For the sake of simplicity, I used LOCK TABLE in my example, but any UPDATE statement would fit.)"	1	Bug	derby_triage10_5_2	3	Major	6	Closed
12428431	HDFS	xyao	Stack trace on spaceQuota excced .	"Currently disk space quota exceed exception spits out stack trace . It's better to show error message instead of stack trace .

{code}
somehost:Hadoop guesti$ bin/hdfs dfsadmin -setSpaceQuota 2 2344
somehost:Hadoop guest$ bin/hadoop fs -put conf 2344
09/06/19 16:44:30 WARN hdfs.DFSClient: DataStreamer Exception: org.apache.hadoop.hdfs.protocol.QuotaExceededException: org.apache.hadoop.hdfs.protocol.QuotaExceededException: The quota of /user/guest/2344 is exceeded: namespace quota=-1 file count=4, diskspace quota=2 diskspace=67108864
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        ..................
{code}"	1	Bug	newbie	3	Major	5	Resolved
12428555	QPID	aidan	Derby doesn't honour QPID_WORK for storage	DerbyMessageStore doesn't honour QPID_WORK, if path isn't specified it defaults to cwd. 	1	Bug	derbystore	3	Major	6	Closed
12428571	QPID	gemmellr	[GSoC 2009] Create a new UI for the JMX Management Console	Create a new UI for the JMX Management Console, replacing the current generic interface with a more tailored solution.	4	Improvement	legacy-jmx-console	3	Major	6	Closed
12428574	QPID	aidan	move JMX MBean interface definitions to management-common	To facilitate making use of the MBean interfaces for generating proxy objects, the relevant interfaces are to be moved to the management-common module to break reliance on the complete broker libs.	7	Sub-task	legacy-jmx-console	3	Major	6	Closed
12428576	QPID	aidan	create a factory class to generate the views for the various MBeans	Currently the Eclipse View used in the console to display the operations etc for each MBean includes all required methods to generate the generic view. With the introduction of  specific view designs for each MBean type this will be better conducted seperately and handed back to the View for display.	7	Sub-task	legacy-jmx-console	3	Major	6	Closed
12428577	QPID	aidan	create a new view for the User Management mbean	create a new view for the User Management mbean	7	Sub-task	legacy-jmx-console	3	Major	6	Closed
12428578	QPID	aidan	create a new view for the Logging Management mbean	create a new view for the Logging Management mbean	7	Sub-task	legacy-jmx-console	3	Major	6	Closed
12428579	QPID	aidan	create a new view for the Queue mbeans	create a new view for the Queue mbeans	7	Sub-task	legacy-jmx-console	3	Major	6	Closed
12428746	QPID	aidan	create a new queue / exchange / connection selection view	create a new queue / exchange / connection selection view, allowing users to directly open queues etc without adding them to the navigation tree first, and showing any additional attribute information in a more obvious manner, eg in a table.	7	Sub-task	legacy-jmx-console	3	Major	6	Closed
12428747	QPID	aidan	create a new view for the Exchange mbeans		7	Sub-task	legacy-jmx-console	3	Major	6	Closed
12428748	QPID	aidan	create a new view for the Connection mbeans		7	Sub-task	legacy-jmx-console	3	Major	6	Closed
12428749	QPID	aidan	create a new view for the VirtualHostManager mbeans		7	Sub-task	legacy-jmx-console	3	Major	6	Closed
12428751	QPID	aidan	add an mbean to present system information, including API versioning for the JMX interface		7	Sub-task	legacy-jmx-console	3	Major	6	Closed
12428752	QPID	aidan	enable automated update to negate need for users to manually refresh the data		7	Sub-task	legacy-jmx-console	3	Major	6	Closed
12428817	HIVE	zhenxiao	improve group by syntax	"It would be nice if group by allowed either column aliases or column position (like mysql).

It can be burdensome to have to repeat UDFs both in the select and in the group by.

e.g. instead of:
select f1(col1), f2(col2), f3(col3), count(1) group by f1(col1), f2(col2), f3(col3);

it would allow:
select f1(col1), f2(col2), f3(col3), count(1) group by 1, 2, 3;
"	4	Improvement	features	3	Major	6	Closed
12428841	DERBY	mikem	Intermittent failure in 'store/updatelocks.sql' on Windows Vista	"*** Start: updatelocks jdk1.6.0_06 storemats:storemats 2009-06-24 23:16:00 ***
23201 del
< APP     |UserTran|ROW     |1   |X   |A           |(2,6)     |GRANT|ACTIVE  
23201a23201
> APP     |UserTran|ROW     |2   |X   |A           |(2,6)     |GRANT|ACTIVE  
Test Failed.
*** End:   updatelocks jdk1.6.0_06 storemats:storemats 2009-06-24 23:16:27 ***

See http://dbtg.thresher.com/derby/test/Daily/jvm1.6/testing/testlog/vista/788063-derbyall_diff.txt"	1	Bug	derby_backport_reject_10_5	4	Minor	6	Closed
12428993	PIG	ashutoshc	Performance: Unnnecessary computation in FRJoin	"In POFRJoin implementation POLocalRearrange is used to extract join keys from the input tuples. If keys match then to perform actual join input tuples are fed to Foreach which does a cross on its inputs. After keys are extracted using POLocalRearrange output; function getValueTuple(POLocalRearrange lr, Tuple tuple) is called to reconstruct the input tuple. It seems that this function call is unnecessary since we already have input tuple at that time. 

This is not a bug, but since this function would get called for every tuple, if it is eliminated, it should certainly help to improve performance. "	4	Improvement	Performance	4	Minor	1	Open
12429093	QPID	aidan	widen viewMessages(int From, int To) AMQQueueMBean method to use Long values	"The viewMessages() operation is inherently limited to viewing the first 2^31 undelivered messages on the queue at any given time due to its use of int parameters. Equally, getMessageCount() returns an int value. However, the SimpleAMQQueue implementation is not limited to 2^31 messages and so there is potential that not all messages can be viewed.

This should be rectified by increasing the parameter range to Long. The viewMessages() implementation will then be limited to viewing ANY 2^31 messages on the queue as the TabularData OpenData result sets used to support generic JMX clients are also fixed in size by an int index."	7	Sub-task	legacy-jmx-console	4	Minor	6	Closed
12429374	QPID	aidan	add status bar for feedback reports	add status bar for feedback reports	7	Sub-task	legacy-jmx-console	3	Major	6	Closed
12429378	QPID	aidan	gather list of available exchange types from broker instead of hardcoding in console		7	Sub-task	legacy-jmx-console	3	Major	6	Closed
12429379	QPID	aidan	expose ability to delete arbitrary message from queue	Currently you can only delete the first message on a queue. It would be useful if you could instead delete an arbitrary message of your choice. The queue implementation supports this but it is not currently exposed through JMX. It will be exposed as an operation and support added to the new management console UI.	7	Sub-task	legacy-jmx-console	3	Major	6	Closed
12429420	QPID	aidan	per-virtualhost notification areas show all notifications sent by the server	The console offers per-virtualhost notification areas, however these show all notifications sent by the server instead of just those related to the virtual host being examined	7	Sub-task	legacy-jmx-console	3	Major	6	Closed
12429789	RAMPART	robertlazarski	Allow custom https listeners to populate the client certificate chain in the message context	Https transport listeners should be allowed to provide access to the client certificate chain (eg. Axis2 NIO SSL transport listener)	7	Sub-task	Patch	4	Minor	1	Open
12429936	QPID	aidan	No way back from object view	It would be easier to navigate through objects (such as queues) if there was a quick way to get back to the list you were in without having to re-navigate, a la the back button in other browser-type things. 	4	Improvement	legacy-jmx-console	4	Minor	6	Closed
12429940	QPID	ritchiem	New list views in MC should allow multiple selection	"The jmx_mc_gsoc09 branch MC has a great new feature that provides table lists of data. It would be great if the these list views would allow multiple selection.

In the LoggingManagement window this could allow several loggers to be set to a new level at the same time.

In the UserManagement panel multiple selection should be allowed so that they may be bulk deleted or have access rights bulk set.

In the VirtualHostManager multiple selection would allow for bulk deletion.

In the Exchange,Queue,Connection sections this would allow for builk adding to favourites.


"	4	Improvement	legacy-jmx-console	4	Minor	6	Closed
12430046	QPID	aidan	Expose message copying ability through JMX	The Queue implementations support the ability of copying messages to another queue, but this is not exposed through the relevant JMX MBean. This should be exposed as JMX operation and supported in the new management console UI.	2	New Feature	legacy-jmx-console	3	Major	6	Closed
12430123	HADOOP	pooja.gupta	Implement moveToLocal  HDFS command	"Surprisingly  executing HDFS FsShell command -moveToLocal outputs  - ""Option '-moveToLocal' is not implemented yet.""

 
{code}
statepick-lm:Hadoop rphulari$ bin/hadoop fs -moveToLocal bt t
Option '-moveToLocal' is not implemented yet.
{code}"	4	Improvement	newbie	4	Minor	10002	Patch Available
12430347	LUCENE	thetaphi	MMapDirectory should only mmap large files, small files should be opened using SimpleFS/NIOFS	"This is a followup to LUCENE-1741:
Javadocs state (in FileChannel#map): ""For most operating systems, mapping a file into memory is more expensive than reading or writing a few tens of kilobytes of data via the usual read and write methods. From the standpoint of performance it is generally only worth mapping relatively large files into memory.""
MMapDirectory should get a user-configureable size parameter that is a lower limit for mmapping files. All files with a size<limit should be opened using a conventional IndexInput from SimpleFS or NIO (another configuration option for the fallback?)."	4	Improvement	dead	3	Major	1	Open
12430377	QPID	ritchiem	lib jars moved to wrong location for client and broker binary releases 	When running ant with the 'release-bin' target to generate the client and broker (and JMX MC) binary release archives in java/client/release and java/broker/release, the lib jars are incorrectly put in the root of the package directory instead of in the lib/ sub-directory.	1	Bug	ant_build_system	3	Major	6	Closed
12430656	QPID	aidan	remove the containing Type folders for the top-level single mbeans in the server navigation tree	There are mbeans presented at the top level of the server navigation tree, eg User Management, Logging Management etc. These are contained in a folder indicating their type, which makes the navigation tree larger and more cumbersome to interact with, and so they should be removed to expose the mbean directly.	4	Improvement	legacy-jmx-console	3	Major	6	Closed
12430514	QPID	aidan	provide ability to determine queue order of messages when viewing via JMX	"It is not currently possible to determine the queue order of messages (which may not equal their respective IDs due to moving messages etc) from the results returned by the JMX interface, as the TabularData OpenData container does not provide ordering.

A 'queue position' field will be added to the result set to allow sorting by queue order in future"	2	New Feature	legacy-jmx-console	3	Major	6	Closed
12430527	CMIS	gcolumbro	Arrange shapshots deploy to http://incubator.apache.org/chemistry/ 	"Arrange automated deployment to incubator.apache.org as discussed here http://www.mail-archive.com/chemistry-dev@incubator.apache.org/msg00397.html.
"	4	Improvement	documentation, maven, site	4	Minor	5	Resolved
12430813	DERBY	lilywei	With derby client setTransactionIsolation executes and commits even if isolation has not changed 	"With in EmbedConnection.setIsolation() we have a check to see if the isolation level is the same and if so just return without doing a commit:
  public void setTransactionIsolation(int level) throws SQLException {

		if (level == getTransactionIsolation())
			return;


with org.apache.derby.client.am.Connection we have no such check. It would be good if the client driver acted like embedded.
"	4	Improvement	derby_backport_reject_10_6	4	Minor	6	Closed
12431001	MAPREDUCE	amar_kamat	[Rumen] Need a standalone JobHistory log anonymizer	Job history logs contain a rich set of information that can help understand and characterize cluster workload and individual job execution. Examples of work that parses or utilizes job history include HADOOP-3585, MAPREDUCE-534, HDFS-459, MAPREDUCE-728, and MAPREDUCE-776. Some of the parsing tools developed in previous work already contains a component to anonymize the logs. It would be nice to combine these effort and have a common standalone tool that can anonymizes job history logs and preserve much of the structure of the files so that existing tools on top of job history logs continue work with no modification.	2	New Feature	anonymization, rumen	3	Major	6	Closed
12430835	DERBY	rhillegas	Attempt to reuse streams in client on insert gives protocol exception and inserts wrong data	"If a user attempts to reuse a stream set as a parameter to a prepared statement, the statement execution should fail with SQL State XJ001.  Instead client fails with a protocol error and inserts wrong data. See the attached java program ReproReuseStream.java for a reproduction.
[C:/kmarsden/repro/reusestream] java ReproReuseStream
Insert row 1
Try to insert row 2 with reused streams
java.sql.SQLException: Network protocol error: end of stream prematurely reached, parameter #4.  Remaining data has been
 padded with 0x0.
        at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:96)
        at org.apache.derby.client.am.SqlException.getSQLException(SqlException.java:358)
        at org.apache.derby.client.am.PreparedStatement.executeUpdate(PreparedStatement.java:399)
        at ReproReuseStream.main(ReproReuseStream.java:41)
Caused by: org.apache.derby.client.am.SqlException: Network protocol error: end of stream prematurely reached, parameter
 #4.  Remaining data has been padded with 0x0.
        at org.apache.derby.client.net.Request.writePlainScalarStream(Request.java:490)
        at org.apache.derby.client.net.Request.writeScalarStream(Request.java:264)
        at org.apache.derby.client.net.NetStatementRequest.buildEXTDTA(NetStatementRequest.java:951)
        at org.apache.derby.client.net.NetStatementRequest.writeExecute(NetStatementRequest.java:147)
        at org.apache.derby.client.net.NetPreparedStatement.writeExecute_(NetPreparedStatement.java:178)
        at org.apache.derby.client.am.PreparedStatement.writeExecute(PreparedStatement.java:1801)
        at org.apache.derby.client.am.PreparedStatement.flowExecute(PreparedStatement.java:2031)
        at org.apache.derby.client.am.PreparedStatement.executeUpdateX(PreparedStatement.java:404)
        at org.apache.derby.client.am.PreparedStatement.executeUpdate(PreparedStatement.java:390)
        ... 1 more
Go ahead and commit so we can see the wrong data.
ID         |MNAME
                    |MVALUE     |BYTEDATA
                                         |CHARDATA

------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
--------------------------------------------------
1          |mname
                    |0          |636363636363636363636363636363636363636363636363636363636363636363636363636363636363636
3636363636363636363636363636363636363636&|cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
ccccccccccccccccccccccccccccccccccccccccccccccccc&
2          |mname
                    |0          |000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000&|
                                                 &

To workaround the issue users should not attempt to reuse streams but we should give a better message and not insert wrong data.

The code was extracted from StreamingColumnTest testDerby500 but the commits were removed.
"	1	Bug	derby_backport_reject_10_6	3	Major	6	Closed
12431005	QPID	aidan	auto-refresh mechanism can generate NPE during application shutdown	The automated refreshing mechanism can generate a NullPointerException if the application shutdown is timed such that a refresh is attempted during the shutdown process.	1	Bug	legacy-jmx-console	4	Minor	6	Closed
12431007	QPID	aidan	Notification tabs all start a thread on creation, and never halt them	The Notification areas/tabs start an update thread upon creation and have it loop forever, continually sleeping if the view is not visible. This thread isnt destroyed even after the view is disposed of, and so viewing each individual MBean results in an additional background thread.	1	Bug	legacy-jmx-console	2	Critical	6	Closed
12431078	OFBIZ	lektran	Security :  The remote web server is prone to cross-site scripting attacks.	"The pollbox seems to be subjet to request argument injection, without any strip of html tags (ex : <script>).

Nessus scan log :


Web Server Generic XSS

Synopsis :

The remote web server is prone to cross-site scripting attacks.

Description :

The remote host is running a web server that fails to adequately
sanitize request strings of malicious JavaScript. By leveraging this
issue, an attacker may be able to cause arbitrary HTML and script code
to be executed in a user's browser within the security context of the
affected site.

See also :

http://en.wikipedia.org/wiki/Cross-site_scripting

Solution :

Contact the vendor for a patch or upgrade.

Risk factor :

Medium / CVSS Base Score : 4.3
(CVSS2#AV:N/AC:M/Au:N/C:N/I:P/A:N)

Plugin output :

The request string used to detect this flaw was :

/?<script>cross_site_scripting.nasl</script>

The output was :

HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
X-Powered-By: JSP/2.1
Set-Cookie: OFBiz.Visitor=12065; Expires=Wed, 21-Jul-2010 21:31:20 GMT; Path=/
Content-Type: text/html;charset=UTF-8
Transfer-Encoding: chunked
Date: Tue, 21 Jul 2009 21:31:19 GMT


[...]
<h3>Mouse Hand Poll</h3>
<div class=""screenlet-body"">
<form method=""post"" action=""/control/minipoll/main"" style=""margin: 0;"">
<input type=""hidden"" name=""<script>cross_site_scripting.nasl</script>"" value=""""/>
<input type=""hidden"" name=""surveyId"" value=""1004""/>
<table width=""100%"" border=""0"" cellpadding=""2"" cellspacing=""0"">
[...]

CVE : CVE-2002-1060, CVE-2003-1543, CVE-2005-2453, CVE-2006-1681
BID : 5305, 7344, 7353, 8037, 14473, 17408
Other references : OSVDB:4989, OSVDB:18525, OSVDB:24469, OSVDB:42314

Nessus ID : 10815"	7	Sub-task	CVE	2	Critical	6	Closed
12430960	DERBY	kmarsden	hang in suites.all with ibm 1.5 on AIX after ttestDefaultProperties	"The test run for 10.5.2.0 hung in suites.All. The console output (the run was with -Dderby.tests.trace=true) showed ttestDefaultProperties had successfully completed but the run was halted.
ps -eaf | grep java showed the process that kicked off suites.All, and a networkserver process with the following flags:
- classpath <classpath including derby.jar, derbytools.jar, derbyclient.jar, derbynet.jar, derbyTesting.jar, derbyrun.jar, derbyTesting.jar and junit.jar> -Dderby.drda.logConnections= -Dderby.drda.traceAll= -Dderby.drda.traceDirectory= -Dderby.drda.keepAlive= -Dderby.drda.timeSlice= -Dderby.drda.host= -Dderby.drda.portNumber= -derby.drda.minThreads= -Dderby.drda.maxThreads= -Dderby.drda.startNetworkServer= -Dderby.drda.debug= org.apache.derby.drda.NetworkServerControl start -h localhost -p 1527
This process had been sitting for 2 days.
After killing the NetworkServerControl process, the test continued successfully (except for DERBY-4186, fixed in trunk), but the following was put out to the console:
 START-SPAWNED:SpawnedNetworkServer STANDARD OUTPUT: exit code=137
2009-07-18 03:16:07.157 GMT : Security manager installed using the Basic server
security policy.
2009-07-18 03:16:09.169 GMT : Apache Derby Network Server - 10.5.2.0 - (794445)
started and ready to accept connections on port 1527
END-SPAWNED  :SpawnedNetworkServer STANDARD OUTPUT:

"	1	Bug	derby_backport_reject_10_5	3	Major	6	Closed
12431008	QPID	aidan	Notifications view clears the table and forces deselection at every refresh	Notifications view clears the table and forces deselection at every refresh	1	Bug	legacy-jmx-console	3	Major	6	Closed
12431014	YARN	djp	When killing a task, we don't always need to send a subsequent SIGKILL	In both TaskController/LinuxTaskController, while killing tasks, first a SIGTERM and then a subsequent SIGKILL. We don't need to send the SIGKILL always. It can be avoided when the SIGTERM command (kill pid for process or kill -- -pid for session) returns a non-zero exit code, i.e. when the signal is not sent successfully because process/process group doesn't exist. 'man 2 kill' says exit code is non-zero only when process/process group is not alive or invalid signal is specified or the process doesn't have permissions. The last two don't happen in mapred code.	4	Improvement	newbie	3	Major	1	Open
12431143	QPID	aidan	retrieving attributes for the queue selection list takes excessively long with large numbers of queues	Retrieving attributes for the queue selection list takes excessively long with a large (eg 10k) number of queues, freezing the interface for several seconds. This is due to the sheer number of RPC calls that have to be made to retrieve the data, so a method will be added to the JMX mbeans to allow collection of the information in a single call, and the console adapted accordingly.	4	Improvement	legacy-jmx-console	2	Critical	6	Closed
12431055	HIVE	teddy.choi	optimize UDF split	"Min Zhou added a comment - 21/Jul/09 07:34 AM
It's very useful for us .
some comments:

   1. Can you implement it directly with Text ? Avoiding string decoding and encoding would be faster. Of course that trick may lead to another problem, as String.split uses a regular expression for splitting.
   2. getDisplayString() always return a string in lowercase.

[ Show » ]
Min Zhou added a comment - 21/Jul/09 07:34 AM It's very useful for us . some comments:

   1. Can you implement it directly with Text ? Avoiding string decoding and encoding would be faster. Of course that trick may lead to another problem, as String.split uses a regular expression for splitting.
   2. getDisplayString() always return a string in lowercase.


[ Permlink | « Hide ]
Namit Jain added a comment - 21/Jul/09 09:22 AM
Committed. Thanks Emil
[ Show » ]
Namit Jain added a comment - 21/Jul/09 09:22 AM Committed. Thanks Emil

[ Permlink | « Hide ]
Emil Ibrishimov added a comment - 21/Jul/09 10:48 AM
There are some easy (compromise) ways to optimize split:

1. Check if the regex argument actually contains some ""regex specific characters"" and if it doesn't, do a straightforward split without converting to strings.
2. Assume some default value for the second argument (for example - split(str) to be equivalent to split(str, ' ') and optimize for this value
3. Have two separate split functions - one that does regex and one that splits around plain text.

I think that 1 is a good choice and can be done rather quickly.
[ Show » ]
Emil Ibrishimov added a comment - 21/Jul/09 10:48 AM There are some easy (compromise) ways to optimize split: 1. Check if the regex argument actually contains some ""regex specific characters"" and if it doesn't, do a straightforward split without converting to strings. 2. Assume some default value for the second argument (for example - split(str) to be equivalent to split(str, ' ') and optimize for this value 3. Have two separate split functions - one that does regex and one that splits around plain text. I think that 1 is a good choice and can be done rather quickly.
"	1	Bug	optimization	3	Major	5	Resolved
12431122	QPID	aidan	the Clear button in each VirtualHost Notifications area still clears all server-wide Notifications	The VirtualHost Notifications areas usedto display all Notifications for the entire server, but have now been restricted to those only for the specific VirtualHost in question. However, the clear button in each VirtualHost Notifications area still clears all server-wide Notifications as before.	1	Bug	legacy-jmx-console	3	Major	6	Closed
12431345	QPID	aidan	change the Fanout Exchange JMX bindings() results to return a single binding entry with all bound queues	"The Fanout Exchange JMX MBean currently returns a series of CompositeData elements containing the queue name and an array also containing the queue name. This produces a results view whereby there is a 'binding key' for every queue bound to the exchange (when infact no binding key at all is used for the exchange), each associated with the single queue.

To be more representative of the actual process within the exchange, this will be changed to return a single CompositeData element within the TabularData which contains a 'wildcard binding' with all the queue names in the associated list, indicating all bound queues are enqueued to."	4	Improvement	legacy-jmx-console	3	Major	6	Closed
12431373	QPID	aidan	enable opening queues and exchanges directly from other mbean views	Some of the mbeans (eg VirtualHostManager and Exchanges) list queues in their results. As it is now possible to open mbeans without adding them to the navigation tree it would be useful if you could double click on the queue etc names in other mbeans and have them open for viewing.	4	Improvement	legacy-jmx-console	4	Minor	6	Closed
12431332	QPID	astitcher	On shutting down the broker, the connection state of active connections is not freed	"The IO layer (e.g. AsynchIOHandler for TCP) creates and holds a ConnectionCodec object by pointer for each connection. All connection state is rooted in that object. However for connections that are active when the broker is shutdown, those objects and all their internal state, is not freed but is leaked.

As the broker is shutting down anyway, the leak is not nice but not critical (henc I've marked this as minor rather than major). However it can lead to e.g. Queue destructors not being called etc. "	1	Bug	leak	4	Minor	4	Reopened
12431391	HIVE	rmsmani@gmail.com	add UDFquote	"add UDFquote

look at

http://dev.mysql.com/doc/refman/5.0/en/func-op-summary-ref.html

for details"	2	New Feature	pull-request-available, todoc4.0, udf	3	Major	6	Closed
12431594	DERBY	knutanders	test failure in lang.ErrorMessageTest with IBM iseries IBM 1.5	"There was this error during the 10.5.2.0 test run - when the ErrorMessageTest was run by itself later there was no problem, and neither did this show up during the ibm 1.6 run:

1) testDeadlockTimeout(org.apache.derbyTesting.functionTests.tests.lang.ErrorMessageTest)junit.framework.ComparisonFailure: Not a deadlock expected:<...001> but was:<...XL2>"	1	Bug	derby_triage10_8	4	Minor	6	Closed
12431644	QPID	aidan	new UI dialogs open in the upper left corner of the screen on Windows	Several parts of the new UI include custom dialogs for taking user input. On Linux these new shells open in the centre of the parent however, in WIndows they instead open at or near the upper left corner of the screen the application is running. They should instead be centred on the application or the monitor.	1	Bug	legacy-jmx-console	4	Minor	6	Closed
12431664	HIVE	jvs	Hive HBase Integration (umbrella)	Add a serde over the hbase's tables, so that hive can analyse the data stored in hbase easily.	2	New Feature	HiveHBase	3	Major	6	Closed
12431778	LUCENE	thetaphi	NumericRange support for new query parser	"It would be good to specify some type of ""schema"" for the query parser in future, to automatically create NumericRangeQuery for different numeric types? It would then be possible to index a numeric value (double,float,long,int) using NumericField and then the query parser knows, which type of field this is and so it correctly creates a NumericRangeQuery for strings like ""[1.567..*]"" or ""(1.787..19.5]"".

There is currently no way to extract if a field is numeric from the index, so the user will have to configure the FieldConfig objects in the ConfigHandler. But if this is done, it will not be that difficult to implement the rest.

The only difference between the current handling of RangeQuery is then the instantiation of the correct Query type and conversion of the entered numeric values (simple Number.valueOf(...) cast of the user entered numbers). Evenerything else is identical, NumericRangeQuery also supports the MTQ rewrite modes (as it is a MTQ).

Another thing is a change in Date semantics. There are some strange flags in the current parser that tells it how to handle dates."	2	New Feature	contrib, gsoc, gsoc2011, lucene-gsoc-11, mentor	3	Major	6	Closed
12431786	QPID	aidan	Previous/Next N Message button in queue browser should take current size as step size	"It would be clearer to calculate the size of the currently displayed range of messages and use that for the size of messages the next/previous buttons step through. So if you displayed messages 20-30 you'd have ""previous 10"" and ""next 10"" buttons. "	4	Improvement	legacy-jmx-console	3	Major	6	Closed
12431788	QPID	aidan	Add ability to configure attributes shown on queue list	"The information about a queue displayed on the VirtualHost queue list view  that a user would find useful varies by use case. It would be good to provide a means for any queue attribute to be added or removed from this view. 

The list of attributes should be persisted between invocations of the management console and should be shared across all instances of the queue view, not just per virtualhost or per broker. "	4	Improvement	legacy-jmx-console	3	Major	6	Closed
12431645	QPID	aidan	queue names are not sorted when presented for user selection in some new UI dialogs	queue names are not sorted when presented for user selection in some new UI dialogs	1	Bug	legacy-jmx-console	4	Minor	6	Closed
12431649	QPID	aidan	password fields are not masked in the new UserManagement UI	password fields are not masked in the new UserManagement UI	1	Bug	legacy-jmx-console	4	Minor	6	Closed
12431854	HADOOP	yuzhihong@gmail.com	"""package"" task in build.xml should copy source with preservelastmodified"	In the package task, it copies the source to dist.dir without using preservelastmodified=true. This can cause issues with the autotools configure process for the C++ builds. Namely, it will sometimes think the configure script is out of date with respect to its source files and try to re-bootstrap, which relies on particular versions of autotools on the building computer. This isn't something that should be required for those wanting to build from a distribution tarball.	1	Bug	newbie	3	Major	5	Resolved
12432069	ZOOKEEPER	phunt	c client logs an invalid error when zookeeper_init is called with chroot	"The C client logs this error message when zookeeper_init is called with chroot. 

2009-08-03 18:14:29,130:6624(0x5e66e950):ZOO_ERROR@sub_string@730: server path  does not include chroot path /chroot

I'll attach a simple program to reproduce this.

Thanks!
--Michi"	1	Bug	logging	4	Minor	6	Closed
12431787	QPID	aidan	Clear notifications should prompt when clearing all of them	"The clear notifications button removes all the notifications if none are selected. This is a good choice of behaviour, but could be made safer with a ""are you sure? yes/no"" prompt in case of user error. "	4	Improvement	legacy-jmx-console	3	Major	6	Closed
12431789	QPID	aidan	Reload Log4J configuration file	After changing the log4j configuration file through the management console it would be good to be able to force a reload of the file without having to have the watch interval configured. 	4	Improvement	legacy-jmx-console	3	Major	6	Closed
12431877	TAP5	hlship	Server side error during provideCompletions event for Autocompleter mixin is not reported on the client side properly	"You would expect that the console would be raised to display the Ajax error (as happens with, say, a Zone update) but instead you get no notification and some wierd presentation oddities (I believe because the autocompleter is expecting an <UL> markup snippet, and instead recieves the exception report page!).

It may just be time to find a complete replacement for the Scriptaculous.Autocompleter."	1	Bug	bulk-close-candidate	4	Minor	6	Closed
12432438	QPID	aidan	AddUser operation in the new UserManagement UI does not MD5 hash the password when connected to pre-0.5 brokers	Older brokers (pre 0.5) require the user password to be presented by the console in MD5 hashed format. This was changed to plain text in 0.5 when the PlainPasswordFilePrincipleDatabase was updated to allow manipulation using the management console. As a result, the console must detect the broker management API version and send the appropriate content when creating users on older brokers. The new UI is currently not doing this (although does when altering the password).	1	Bug	legacy-jmx-console	2	Critical	6	Closed
12432457	DERBY	lilywei	ASSERT FAILED calling setTransactionIsolation checking isolation_ == level   on  pooled connection	"For DERBY-4314, I thought I would do a little testing to understand the server round trips in various scenarios for pooled connections.  So I wrote the small attached program ConnReuse.java and hit this assertion in client:


Exception in thread ""main"" org.apache.derby.shared.common.sanity.AssertFailure: ASSERT FAILED
        at org.apache.derby.shared.common.sanity.SanityManager.ASSERT(SanityManager.java:98)
        at org.apache.derby.client.am.Connection.setTransactionIsolationX(Connection.java:987)
        at org.apache.derby.client.am.Connection.setTransactionIsolation(Connection.java:915)
        at org.apache.derby.client.am.LogicalConnection.setTransactionIsolation(LogicalConnection.java:253)
        at TestConnReuse.main(TestConnReuse.java:32)
---------------

To run the program on trunk:
java org.apache.derby.drda.NetworkServerControl start
java TestConnReuse.

This needs more investigation, but I thought I would go ahead and log the bug.  I tried this only on  trunk.  I  have not yet
- Tried it on the branches.
- Tried it with Lily's DERBY-4314 patch.
- Tried it with embedded.
- Tried actually doing something with the prior logical connection which might be related.

"	1	Bug	derby_backport_reject_10_5, derby_backport_reject_10_6	4	Minor	6	Closed
12431960	MAHOUT	srowen	ARFF VectorIterable	"Convert ARFF to Vector.  See http://www.cs.waikato.ac.nz/~ml/weka/arff.html

Create a VectorIterable implementation for ARFF."	2	New Feature	MAHOUT_INTRO_CONTRIBUTE	4	Minor	6	Closed
12432642	QPID	aidan	navigation tree node doesnt auto-expand upon connection when adding a new server	The navigation tree node for a server doesnt auto-expand upon connection when adding a new server, but does when reconnecting an existing server.	1	Bug	legacy-jmx-console	4	Minor	6	Closed
12432054	QPID	aidan	Clear queue doesn't clear acquired messages which is a little confusing if that's all there is.	The clear queue button prompts but doesn't actually clear the queue. I suspect because all the messages have been acquired by consumers. This should probably display a better error message if there are acquired messages which can't be cleared. An int return of uncleared ones maybe?	1	Bug	legacy-jmx-console	4	Minor	6	Closed
12432080	QPID	aidan	provide new icons to distinguish the various 'manager' mbeans	The console currently uses the same icon for all the mbean objects in the navigation tree. It would be helpful if the various 'manager' mbeans were visually identifiable.	4	Improvement	legacy-jmx-console	5	Trivial	6	Closed
12432786	QPID	aidan	create a new JMX management console testing spec	The updated UI for the console has  rendered the testing spec even further out of date, and a new one should be created.	3	Task	legacy-jmx-console	3	Major	6	Closed
12432787	QPID	aidan	create a new JMX management console user guide	The updated UI for the console has rendered the user guide even further out of date, and a new one should be created.	3	Task	legacy-jmx-console	3	Major	6	Closed
12433007	ODE	vanto	Compiler should throw a meaningful error if <from>/<to> expression is empty	"If the expression is empty, the only error message is from the expression compiler and is quite confusing:

java.lang.IllegalStateException: XPath string and xpath node are both null
    at org.apache.ode.bpel.elang.xpath20.compiler.XPath20ExpressionCompilerImpl.doJaxpCompile.

Fixing this issue will also help if a copy and paste engineer added a BPEL 1.1 <from expression=""someexp""/> to a BPEL 2.0 process ;)"	1	Bug	patch	3	Major	1	Open
12433597	HDFS	qwertymaniac	documentation for dfsadmin, datanode, etc is using bin/hadoop instead of bin/hdfs	forest documentation is using bin/hadoop for dfsadmin command help instead of bin/hdfs	1	Bug	newbie	3	Major	5	Resolved
12433051	MAPREDUCE	tucu00	Documentation for config to set map/reduce task environment	"HADOOP-2838 added mapred.child.env to allow users to set the map/reduce tasks' environment.

MAPREDUCE-478 will break that into mapred.map.child.env and mapred.reduce.child.env. We need to add documentation (forrest) for these knobs."	1	Bug	newbie	3	Major	6	Closed
12433169	HIVE	he yongqiang	add hive.intermediate.compression.codec option	"Hive uses the jobconf compression codec for all map-reduce jobs. This includes both mapred.map.output.compression.codec and mapred.output.compression.codec.

In some cases, we want to distinguish between the codec used for intermediate map-reduce jobs (that produces intermediate data between jobs) and the final map-reduce jobs (that produces data stored in tables).

For intermediate data, lzo might be a better fit because it's much faster; for final data, gzip might be a better fit because it saves disk spaces.

We should introduce two new options:
{code}
hive.intermediate.compression.codec=org.apache.hadoop.io.compress.LzoCodec
hive.intermediate.compression.type=BLOCK
{code}
And use these 2 options to override the mapred.output.compression.* in the FileSinkOperator that produces intermediate data.

Note that it's possible that a single map-reduce job may have 2 FileSInkOperators: one produces intermediate data, and one produces final data. So we need to add a flag to fileSinkDesc for that.
"	4	Improvement	compression	3	Major	6	Closed
12433251	QPID	aidan	the Add To Favourites and Open Queue buttons stop working after changing the attribute selection on the Queues selection view	the Add To Favourites and Open Queue buttons stop working after changing the attribute selection on the Queues selection view. This is because changing the attributes involves recreating the table and the selection listeners are no longer attached to the table in view.	1	Bug	legacy-jmx-console	4	Minor	6	Closed
12433252	MAPREDUCE	ajisakaa	harchive: Document how to unarchive	"I was thinking of implementing harchive's 'unarchive' feature, but realized it has been implemented already ever since harchive was introduced.
It just needs to be documented."	4	Improvement	newbie	4	Minor	6	Closed
12433254	LEGAL	robertburrelldonkin	Is the BSD License a NOTICE for the purposes of 3rd party licensing policy?	"BSD license family template [1] includes the clause:

* Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

My reading is that this means that the complete license [1] must be reproduced when a binary is included within an Apache release

This leads to the question: is the BSD License a NOTICE for the purposes of 3rd party licensing policy?

Robert

[1]
Copyright (c) <YEAR>, <OWNER>
All rights reserved.

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
    * Neither the name of the <ORGANIZATION> nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS ""AS IS"" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE."	11	Question	Resolved.html	3	Major	6	Closed
12433755	QPID	shuston	New WCF channel using Qpid cpp client libraries	"Client software is provided that leverages the existing Qpid C++ libraries to offer a rich programming environment and runtime support for .NET application developers on the Windows platform.

The initial focus is on an AMQP Windows Communication Foundation (WCF) channel with transaction support and full programmatic access to AMQP message properties. 

Follow on work will include broker management capabilities.

This first patch provides a basic WCF implementation that supports both WCF-to-WCF and WCF-to-non-WCF applications.

Functional tests and sample programs are further provided in related patches.

"	2	New Feature	legacy-wcf-client	3	Major	6	Closed
12433814	QPID	aidan	add a key-value based dialog for creating headers exchange bindings	"The new console UI currently requires users to type in new bindings for a headers exchange in the format: key=value,key=value which is not obvious and can be error prone, leading to creation of an incorrect binding. The old UI made a custom area of text fields to gather the keys and values, this should be updated and added to the new UI. 

Default values will be added for the 'x-match' key that must be set to configure the matching behaviour of the binding. Incorrect restrictions placed on the value of a key in the old UI will be removed, as it is valid to specify an empty or null value for a given key, indicating the key should be matched on presence alone."	4	Improvement	legacy-jmx-console	4	Minor	6	Closed
12433816	QPID	aidan	open the default queue mbean when double clicking a channel entry	The Connection Operations tab does not allow double clicking a Channel entry with a default queue name in order to open the queue mbean, as other views do support. This should be added.	4	Improvement	legacy-jmx-console	4	Minor	6	Closed
12433817	QPID	aidan	JMX connections properly closed by the server are not cleaned up by the console	In the past the JMXConnectorServer has not been stopped properly, and so only JMXConnectionNotification.FAILED notifications have been emitted by the JMXConnection in the console when the server was shut down (cleanly or otherwise). However, QPID-2039 corrects this and so when the JMXConnectorServer is stopped, it closes the client connections cleanly and causes them to emit a JMXConnectionNotification.CLOSED notification. The console only listens for JMXConnectionNotification.FAILED Notifications and as result does not clean up the connection when the server is shut down properly. Instead, the severed connection is considered ok by the console and it throws connection refused exceptions as it attempts to refresh the view using the broken connection.	1	Bug	legacy-jmx-console	4	Minor	6	Closed
12433818	QPID	aidan	some tables in the new UI are missing default sort indicators	some tables in the new UI are missing default sort indicators, meaning you must sort them in order to see the direction indicator.	1	Bug	legacy-jmx-console	4	Minor	6	Closed
12433819	QPID	aidan	reduce the minimum vertical footprint of the QueueOperations tab to better suit use with a 1024x768 screen resolution	reduce the minimum vertical footprint of the QueueOperations tab to better suit use with a 1024x768 screen resolution	4	Improvement	legacy-jmx-console	3	Major	6	Closed
12433949	QPID	aidan	the disconnection process may fail to remove all NotificationListeners and does not close the JMXConnector	The exception handling in the disconnection process may lead to failure to remove all NotificationListeners. Additionally, the disconnection process does not not actually close the JMXConnector. A combination of these issues could lead to multiple subscribed NotificationListeners to the same server across multiple JMXConnectors.	1	Bug	legacy-jmx-console	3	Major	6	Closed
12433982	OFBIZ	chrisg	"Adding Germany (de_DE) Labels for ""Quote"" (!= ""Offerte"")"	"As described on the German Translation WIKI Page (https://cwiki.apache.org/confluence/display/OFBIZ/Dictionary+for+translations+to+German), the lingo ""Offerte"" in Germany for a english Quote is unsual and mostly considered old-fashioned. I have therefore added a locale de_DE entry for occurencies of this.

Additionally, labels containing one of the following have been added in Germany-lingo as well:
* Quote Item = Angebotsposition
* Work Effort Quote = Angebot für A(rbeitsa)ufwand

"	4	Improvement	i18n, localization	4	Minor	6	Closed
12433995	ZOOKEEPER	phunt	DEBUG message for outstanding proposals in leader should be moved to trace.	"this is the code in Leader.java 
{code}
 if (LOG.isDebugEnabled()) {
            LOG.debug(""Ack zxid: 0x"" + Long.toHexString(zxid));
            for (Proposal p : outstandingProposals.values()) {
                long packetZxid = p.packet.getZxid();
                LOG.debug(""outstanding proposal: 0x""
                        + Long.toHexString(packetZxid));
            }
            LOG.debug(""outstanding proposals all"");
        }

{code}

We should move this debug to trace since it will cause really high latencies in response times from zookeeper servers in case folks want to use DEBUG logging for servers.
"	6	Test	logging	3	Major	6	Closed
12434146	MAPREDUCE	tucu00	Add jvm params introduced in MAPREDUCE-478 to mapred-default.xml	"mapred-default.xml still provides definition for old params which were deprecated in MAPREDUCE:478. It should be changed to define the new params such as  mapred.map.child.java.opts, mapred.reduce.child.java.opts, mapred.map.child.env, mapred.reduce.child.env, mapred.map.child.ulimit,  mapred.reduce.child.ulimit.

"	4	Improvement	newbie	4	Minor	5	Resolved
12434347	RAMPART	robertlazarski	The way referncelist processing of SAML issued tokens doesn't work properly and algorithm validation required in PolicyBasedResultsValidator	"$summary.

Related JIRA on WSS4J: WSS-206

Thanks & regards.
-Prabath"	1	Bug	Patch	3	Major	1	Open
12434714	VELOCITY	claude	Provide JSR 223 implementation	Would be great that Velocity comes with a JSR 223 implementation like groovy do for example	2	New Feature	gsoc2012	3	Major	6	Closed
12434954	LUCENE	gbowyer@fastmail.co.uk	auto-warming from Apache Solr causes NULL Pointer	"Sep 6, 2009 12:48:07 PM org.apache.solr.common.SolrException log
SEVERE: Error during auto-warming of key:org.apache.solr.search.QueryResultKey@b00371eb:java.lang.NullPointerException
        at org.apache.lucene.spatial.tier.DistanceFieldComparatorSource$DistanceScoreDocLookupComparator.copy(DistanceFieldComparatorSource.java:101)
        at org.apache.lucene.search.TopFieldCollector$MultiComparatorScoringMaxScoreCollector.collect(TopFieldCollector.java:554)
        at org.apache.solr.search.DocSetDelegateCollector.collect(DocSetHitCollector.java:98)
        at org.apache.lucene.search.IndexSearcher.doSearch(IndexSearcher.java:281)
        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:253)
        at org.apache.lucene.search.Searcher.search(Searcher.java:171)
        at org.apache.solr.search.SolrIndexSearcher.getDocListAndSetNC(SolrIndexSearcher.java:1088)
        at org.apache.solr.search.SolrIndexSearcher.getDocListC(SolrIndexSearcher.java:876)
        at org.apache.solr.search.SolrIndexSearcher.access$000(SolrIndexSearcher.java:53)
        at org.apache.solr.search.SolrIndexSearcher$3.regenerateItem(SolrIndexSearcher.java:328)
        at org.apache.solr.search.LRUCache.warm(LRUCache.java:194)
        at org.apache.solr.search.SolrIndexSearcher.warm(SolrIndexSearcher.java:1468)
        at org.apache.solr.core.SolrCore$3.call(SolrCore.java:1142)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
        at java.lang.Thread.run(Thread.java:619)
"	1	Bug	dead	3	Major	6	Closed
12435116	UIMA	rico.la	lucas.xsd exists 3 times in different places	"lucas.xsd exists three times in different places:
desc/
src/main/resources (seems to be the current version)
src/test/resorces

Can it be deleted from desc and src/test/resources ?"	4	Improvement	Stale	3	Major	5	Resolved
12435162	TAP5	jkemnade	DateField selects wrong date if client is in a different timezone than the server	"This affects 5.0.18 and 5.1.0.5 in my testing.

Situation is that if the server is running in a different timezone than the client, the DateField chooser will select the wrong date on the calendar.

For example, if the server is running in ""Pacific/Auckland"" and the client is running in ""America/Los_Angeles"", Auckland is a ""day ahead"" of Los Angeles for most of the time and the bug is easy to reproduce.

Right now it is 3:40PM Sep 8, 2009 America/Los_Angeles and 10:40AM Sep 9, 2009 Pacific/Auckland.  If the date on the server to be displayed by the DateField is Sep 9, 2009, when you select the date chooser, Sep 8, 2009 is selected in the JavaScript calendar dialog.

I found this message which seems to indicate that Howard thought it might be an issue - looks like he was correct:

http://www.nabble.com/Re%3A-Tapestry-5.0.15-DateField-localization-problem--patch-included--p20033325.html

"	1	Bug	desired_for_5.5	3	Major	6	Closed
12435405	QPID	gemmellr	QueueDelete doesn't check durability of queue before performing store delete	The JMX queueDelete method does not check the durablity of the queue so calls delete on the store for transient queues. This results in a NOT_FOUND exception being thrown.	1	Bug	jmx_interface	3	Major	6	Closed
12434767	QPID	shuston	null pointer exception in InputLink	"NullRefeneceException is thrown in InputLink::sync() on ""lock l(waiters)""

The code is has a race condition where a timeout callback can happen before the handler object is fully initialized."	1	Bug	legacy-wcf-client	3	Major	6	Closed
12435417	QPID	gemmellr	InVM JMX Console appears to have problems starting up/shutting down.	"Summary:

Running queue.ModelTest InVM results in alternating Pass/Fails. The even tests will always fail to get a JMX Connection however, the by the time the next test starts it will have cleared up the issue and the new JMX interface will be ok.

So while QPID-2094 has enabled the ability to use the JMX interface from an InVM test case it appears that there are problems with the registration/unregistration of the JMX Server components."	1	Bug	jmx_interface	3	Major	5	Resolved
12435427	UIMA	rico.la	Add test search against index to LuceneCASIndexerTest.testIndexOneDocument test 	"The test should index one document and then do a test search against the freshly created index. After modifying the lucas.xml in a way its indexing the DocumentAnnotation I was unable to do a test search with the following code:

 FSDirectory directory = (FSDirectory) luceneCASIndexer.getIndexWriter().getDirectory();

 String path = directory.getFile().getPath();
    
 // Make sure index gets written to disk ...
 analysisEngine.destroy();
    
 // Open index and do a test search against it.
 IndexSearcher searcher = new IndexSearcher(path);
    
QueryParser parser = new QueryParser(""text"", new SimpleAnalyzer());
Query query = parser.parse(""test document"");
    
searcher.search(query, new HitCollector() {
      
      @Override
      public void collect(int doc, float score) {
        ...
      }
    });

Can you please have a look Rico ?

In the end it would be nice if all three kinds of text sources are tested, covered text, feature values, referenced feature values."	4	Improvement	Stale	4	Minor	5	Resolved
12435471	HADOOP	gfarnum	Add a Ceph FileSystem interface.	"The experimental distributed filesystem Ceph does not have a single point of failure, uses a distributed metadata cluster instead of a single in-memory server, and might be of use to some Hadoop users.

http://ceph.com/docs/wip-hadoop-doc/cephfs/hadoop/"	2	New Feature	ceph	4	Minor	5	Resolved
12435748	QPID	shuston	WCF channel requires the Qpid binaries to be in %QPID_ROOT%\cpp\build	Currently the WCF channel code expects the Qpid binaries to be in %QPID_ROOT%\cpp\build location, so the build fails if the user has built the Qpid code in a different location.	1	Bug	legacy-wcf-client	3	Major	6	Closed
12435868	ODE	vanto	Namespace declarations not being copied in ASSIGN.replaceElement	"The following line in ASSIGN.replaceElement looks wrong:

        DOMUtils.copyNSContext(ptr, replacement); 

I think it should be:

        DOMUtils.copyNSContext(src, replacement); 

The rationale is that the RE strategy should copy the attributes from the source element to the target element. Without this change, you may end up with undeclared namespace prefixes in the output of your BPEL."	1	Bug	patch	2	Critical	5	Resolved
12436119	DERBY	myrna	Connection to Derby database using jar subprotocol doesn't work if the path has round bracket in it	"In 64 bit windows vista OS, if an executable is 32 bit than it is generally installed under 
""C:\Program Files (x86)"" folder. The brackets in the path cause problems while connecting
to any database stored in that folder(in jar format) through derby JDBC.

The effective connection string is :
jdbc:derby:jar:(C:/Program Files(86)/ClassicModels.jar)ClassicModels 
This fails because the closing brackets is not escaped. 

I looked into the documentation and didn't find references to escaping the brackets in the path. 
I think this problem should be reproducible on all platforms.




you cannot connect to it,  "	1	Bug	derby_triage10_5_2	3	Major	6	Closed
12436926	TAP5	hlship	"The ""entity"" persistence strategy should be discussed in the documentation"		1	Bug	bulk-close-candidate	3	Major	6	Closed
12436940	TAP5	hlship	Palette component should render as an ordinary <select> and update the DOM to provide the normal L&F	"It should output the elements in default sort order, identifying which are selected.  On the client side, the Tapestry.Palette class can work from there to reveal hidden buttons and created the ""available"" column select.

Basically, the structure should be inside largely invisible DIVs (i.e., matching the current structure), and when the DOM is loaded, the non-selected options can be moved to a (newly created) <select> (the available list).

The goal is to simplify the generated markup, and allow the Palette to be used when JavaScript is disabled.
"	1	Bug	bulk-close-candidate	3	Major	6	Closed
12437088	DERBY	bryanpendleton	Derby ROLLUP support in GROUP BY clause is a subset of the SQL Standard specified behavior		4	Improvement	derby_triage10_10	3	Major	1	Open
12437140	QPID	shuston	Transaction support for the WCF channel	"Transaction support is currently lacking from the WCF channel.

As an initial implementation, full distributed transaction support from within .NET is proposed using the dtx AMQP classes and creating a plugin to the MSDTC infrastructure to drive recovery.

Added performance from promotable transaction enlistment is deferred to a later date."	2	New Feature	legacy-wcf-client	2	Critical	6	Closed
12437666	DERBY	knutanders	Assert failure (sane) or NullPointerException (insane) when attempting to GROUP BY expression containing scalar subquery	"The following is not caught by the error checking (or maybe it is supposed to work?):

select sum(i) from t group by j + (select j from t where i=1)

java.sql.SQLException: Java exception: 'ASSERT FAILED dummySubqueryList.size() is expected to be 0: org.apache.derby.shared.common.sanity.AssertFailure'.
	at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:119)
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:70)
	... 16 more
Caused by: org.apache.derby.shared.common.sanity.AssertFailure: ASSERT FAILED dummySubqueryList.size() is expected to be 0
	at org.apache.derby.shared.common.sanity.SanityManager.ASSERT(SanityManager.java:120)
	at org.apache.derby.impl.sql.compile.GroupByList.bindGroupByColumns(GroupByList.java:220)
	at org.apache.derby.impl.sql.compile.SelectNode.bindExpressions(SelectNode.java:629)
	at org.apache.derby.impl.sql.compile.DMLStatementNode.bindExpressions(DMLStatementNode.java:227)
	at org.apache.derby.impl.sql.compile.DMLStatementNode.bind(DMLStatementNode.java:140)
	at org.apache.derby.impl.sql.compile.CursorNode.bindStatement(CursorNode.java:249)
	at org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:319)
	at org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:88)
	at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConnectionContext.java:824)
	at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:606)"	1	Bug	derby_triage10_5_2	3	Major	6	Closed
12437951	MAPREDUCE	vinodkv	User's task-logs filling up local disks on the TaskTrackers	Some user's jobs are filling up TT disks by outrageous logging. mapreduce.task.userlog.limit.kb is not enabled on the cluster. Disks are getting filled up before task-log cleanup via mapred.task.userlog.retain.hours can kick in.	1	Bug	critical-0.22.0	3	Major	5	Resolved
12437267	ODE	objectiser	Auto Complete Copy Destination (L-Value) does not work for variables with message parts	"I tried to use insertMissingToData attribute to copy a value to a variable with message part. But it throws the runtime error :
 
Assignment Fault: {http://docs.oasis-open.org/wsbpel/2.0/process/executable}selectionFailure,lineNo=104,faultExplanation={http://docs.oasis-open.org/wsbpel/2.0/process/executable}selectionFailure: No results for expression: {OXPath10Expression $outputVar.resultType/child::ns2:paramA}
15:01:42,401 ERROR [ASSIGN] Assignment Fault: {http://docs.oasis-open.org/wsbpel/2.0/process/executable}selectionFailure,lineNo=104,faultExplanation={http://docs.oasis-open.org/wsbpel/2.0/process/executable}selectionFailure: No results for expression: {OXPath10Expression $outputVar.resultType/child::ns2:paramA}

I also tried insertMissingToData attribute to copy a value to a variable with element type, it works fine.

A sample process (FlexibleAssign) is attached."	1	Bug	patch	3	Major	5	Resolved
12438039	MAPREDUCE	rohanmehta	LocalJobRunner should run with any file-system	LocalJobRunner is hard-coded to run with only the local file-system. This will help users write map/reduce programs in local mode yet accessing input/schema/data files etc. from any file system.	4	Improvement	newbie	3	Major	5	Resolved
12437439	THRIFT	dreiss	sending random data crashes thrift service	"Sending random data to a Java thrift service causes it to crash with extreme prejudice.

dd if=/dev/urandom count=1 | nc $host 9160

... produces ...

java.lang.OutOfMemoryError: Java heap space
        at org.apache.thrift.protocol.TBinaryProtocol.readStringBody(TBinaryProtocol.java:296)
        at org.apache.thrift.protocol.TBinaryProtocol.readMessageBegin(TBinaryProtocol.java:203)
        at org.apache.cassandra.service.Cassandra$Processor.process(Cassandra.java:615)
        at org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:253)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:636)"	1	Bug	gsoc	2	Critical	6	Closed
12438366	QPID	gemmellr	qPID JMX Management Console does not connect to qpid java broker on Windows. Server Connection Failed. Reason: An unknown error has occurred.	"- qpid-management-eclipse-plugin-0.5-win32-win32-x86\qpidmc.exe does not connect to qpid-server on port 8999
- error message: Server Connection Failed. Reason: An unknown error has occurred.
- telnet to 8999 works ok
- config.xml used contains following section: <management>
        <enabled>true</enabled>
        <jmxport>8999</jmxport>
        <ssl>
            <enabled>false</enabled>
            <!-- Update below path to your keystore location, eg ${conf}/qpid.keystore  -->
            <keyStorePath>${conf}/qpid.keystore</keyStorePath>
            <keyStorePassword>password</keyStorePassword>
        </ssl>
    </management>
- passwd file contains admin:admin
- jmxremote.access contains admin=admin

- log4j configured for additional debug info
- log shows
2009-10-17 12:07:25,910 INFO  [main] database.ConfigurationFilePrincipalDatabaseManager (ConfigurationFilePrincipalDatabaseManager.java:54) - Initialising PrincipleDatabase authentication manager
2009-10-17 12:07:25,910 INFO  [main] database.ConfigurationFilePrincipalDatabaseManager (ConfigurationFilePrincipalDatabaseManager.java:54) - Initialising PrincipleDatabase authentication manager
2009-10-17 12:07:25,926 INFO  [main] database.PlainPasswordFilePrincipalDatabase (PlainPasswordFilePrincipalDatabase.java:96) - PlainPasswordFile using file D:\ig\installs\amqp\qpid\qpid-java-0.5\qpid-0.5\etc\passwd
2009-10-17 12:07:25,926 INFO  [main] database.PlainPasswordFilePrincipalDatabase (PlainPasswordFilePrincipalDatabase.java:96) - PlainPasswordFile using file D:\ig\installs\amqp\qpid\qpid-java-0.5\qpid-0.5\etc\passwd
2009-10-17 12:07:25,926 INFO  [main] database.PlainPasswordFilePrincipalDatabase (PlainPasswordFilePrincipalDatabase.java:368) - Created user:guest
2009-10-17 12:07:25,926 INFO  [main] database.PlainPasswordFilePrincipalDatabase (PlainPasswordFilePrincipalDatabase.java:368) - Created user:guest
2009-10-17 12:07:25,926 INFO  [main] database.PlainPasswordFilePrincipalDatabase (PlainPasswordFilePrincipalDatabase.java:368) - Created user:client
2009-10-17 12:07:25,926 INFO  [main] database.PlainPasswordFilePrincipalDatabase (PlainPasswordFilePrincipalDatabase.java:368) - Created user:client
2009-10-17 12:07:25,926 INFO  [main] database.PlainPasswordFilePrincipalDatabase (PlainPasswordFilePrincipalDatabase.java:368) - Created user:server
2009-10-17 12:07:25,926 INFO  [main] database.PlainPasswordFilePrincipalDatabase (PlainPasswordFilePrincipalDatabase.java:368) - Created user:server
2009-10-17 12:07:25,926 INFO  [main] database.PlainPasswordFilePrincipalDatabase (PlainPasswordFilePrincipalDatabase.java:368) - Created user:admin
2009-10-17 12:07:25,926 INFO  [main] database.PlainPasswordFilePrincipalDatabase (PlainPasswordFilePrincipalDatabase.java:368) - Created user:admin
2009-10-17 12:07:25,926 INFO  [main] database.ConfigurationFilePrincipalDatabaseManager (ConfigurationFilePrincipalDatabaseManager.java:100) - Initialised principal database 'passwordfile' successfully
2009-10-17 12:07:25,926 INFO  [main] database.ConfigurationFilePrincipalDatabaseManager (ConfigurationFilePrincipalDatabaseManager.java:100) - Initialised principal database 'passwordfile' successfully
2009-10-17 12:07:25,926 INFO  [main] manager.PrincipalDatabaseAuthenticationManager (PrincipalDatabaseAuthenticationManager.java:66) - Initialising Default PrincipleDatabase authentication manager.
2009-10-17 12:07:25,926 INFO  [main] manager.PrincipalDatabaseAuthenticationManager (PrincipalDatabaseAuthenticationManager.java:66) - Initialising Default PrincipleDatabase authentication manager.
2009-10-17 12:07:25,926 INFO  [main] manager.PrincipalDatabaseAuthenticationManager (PrincipalDatabaseAuthenticationManager.java:173) - Initialised AMQPLAIN SASL provider successfully
2009-10-17 12:07:25,926 INFO  [main] manager.PrincipalDatabaseAuthenticationManager (PrincipalDatabaseAuthenticationManager.java:173) - Initialised AMQPLAIN SASL provider successfully
2009-10-17 12:07:25,926 INFO  [main] manager.PrincipalDatabaseAuthenticationManager (PrincipalDatabaseAuthenticationManager.java:173) - Initialised PLAIN SASL provider successfully
2009-10-17 12:07:25,926 INFO  [main] manager.PrincipalDatabaseAuthenticationManager (PrincipalDatabaseAuthenticationManager.java:173) - Initialised PLAIN SASL provider successfully
2009-10-17 12:07:25,926 INFO  [main] manager.PrincipalDatabaseAuthenticationManager (PrincipalDatabaseAuthenticationManager.java:173) - Initialised CRAM-MD5 SASL provider successfully
2009-10-17 12:07:25,926 INFO  [main] manager.PrincipalDatabaseAuthenticationManager (PrincipalDatabaseAuthenticationManager.java:173) - Initialised CRAM-MD5 SASL provider successfully
2009-10-17 12:07:26,035 INFO  [main] manager.PrincipalDatabaseAuthenticationManager (PrincipalDatabaseAuthenticationManager.java:111) - Additional SASL providers successfully registered.
2009-10-17 12:07:26,035 INFO  [main] manager.PrincipalDatabaseAuthenticationManager (PrincipalDatabaseAuthenticationManager.java:111) - Additional SASL providers successfully registered.
2009-10-17 12:07:26,067 DEBUG [main] management.AMQUserManagementMBean (AMQUserManagementMBean.java:497) - Setting Access Rights:{admin=admin}
2009-10-17 12:07:26,067 DEBUG [main] management.AMQUserManagementMBean (AMQUserManagementMBean.java:497) - Setting Access Rights:{admin=admin}
2009-10-17 12:07:26,067 WARN  [main] management.JMXManagedObjectRegistry (JMXManagedObjectRegistry.java:196) - Starting JMX ConnectorServer on port '8999' (+9099)
2009-10-17 12:07:26,067 WARN  [main] management.JMXManagedObjectRegistry (JMXManagedObjectRegistry.java:196) - Starting JMX ConnectorServer on port '8999' (+9099)
2009-10-17 12:07:26,067 WARN  [main] management.JMXManagedObjectRegistry (JMXManagedObjectRegistry.java:197) - Starting JMX ConnectorServer on port '8999' (+9099)
2009-10-17 12:07:26,238 DEBUG [main] virtualhost.VirtualHost (VirtualHost.java:287) - Loading configuration for virtualhost: development
2009-10-17 12:07:26,238 DEBUG [main] virtualhost.VirtualHost (VirtualHost.java:287) - Loading configuration for virtualhost: development
2009-10-17 12:07:26,270 INFO  [main] virtualhost.VirtualHost (VirtualHost.java:358) - Binding queue:org.apache.qpid.server.queue.SimpleAMQQueue@df48c4 with routing key 'queue' to exchange:org.apache.qpid.server.virtualhost.VirtualHost@1226a77
2009-10-17 12:07:26,270 INFO  [main] virtualhost.VirtualHost (VirtualHost.java:358) - Binding queue:org.apache.qpid.server.queue.SimpleAMQQueue@df48c4 with routing key 'queue' to exchange:org.apache.qpid.server.virtualhost.VirtualHost@1226a77
2009-10-17 12:07:26,270 DEBUG [main] exchange.DirectExchange (DirectExchange.java:178) - Binding queue:org.apache.qpid.server.queue.SimpleAMQQueue@df48c4 with routing key 'queue' to exchange:DirectExchange[amq.direct]
2009-10-17 12:07:26,270 DEBUG [main] exchange.DirectExchange (DirectExchange.java:178) - Binding queue:org.apache.qpid.server.queue.SimpleAMQQueue@df48c4 with routing key 'queue' to exchange:DirectExchange[amq.direct]
2009-10-17 12:07:26,285 DEBUG [main] exchange.DirectExchange (DirectExchange.java:178) - Binding queue:org.apache.qpid.server.queue.SimpleAMQQueue@df48c4 with routing key 'queue' to exchange:DirectExchange[<<default>>]
2009-10-17 12:07:26,285 DEBUG [main] exchange.DirectExchange (DirectExchange.java:178) - Binding queue:org.apache.qpid.server.queue.SimpleAMQQueue@df48c4 with routing key 'queue' to exchange:DirectExchange[<<default>>]
2009-10-17 12:07:26,285 INFO  [main] virtualhost.VirtualHost (VirtualHost.java:358) - Binding queue:org.apache.qpid.server.queue.SimpleAMQQueue@dc86eb with routing key 'ping' to exchange:org.apache.qpid.server.virtualhost.VirtualHost@1226a77
2009-10-17 12:07:26,285 INFO  [main] virtualhost.VirtualHost (VirtualHost.java:358) - Binding queue:org.apache.qpid.server.queue.SimpleAMQQueue@dc86eb with routing key 'ping' to exchange:org.apache.qpid.server.virtualhost.VirtualHost@1226a77
2009-10-17 12:07:26,285 DEBUG [main] exchange.DirectExchange (DirectExchange.java:178) - Binding queue:org.apache.qpid.server.queue.SimpleAMQQueue@dc86eb with routing key 'ping' to exchange:DirectExchange[amq.direct]
2009-10-17 12:07:26,285 DEBUG [main] exchange.DirectExchange (DirectExchange.java:178) - Binding queue:org.apache.qpid.server.queue.SimpleAMQQueue@dc86eb with routing key 'ping' to exchange:DirectExchange[amq.direct]
2009-10-17 12:07:26,285 DEBUG [main] exchange.DirectExchange (DirectExchange.java:178) - Binding queue:org.apache.qpid.server.queue.SimpleAMQQueue@dc86eb with routing key 'ping' to exchange:DirectExchange[<<default>>]
2009-10-17 12:07:26,285 DEBUG [main] exchange.DirectExchange (DirectExchange.java:178) - Binding queue:org.apache.qpid.server.queue.SimpleAMQQueue@dc86eb with routing key 'ping' to exchange:DirectExchange[<<default>>]
2009-10-17 12:07:26,285 INFO  [main] store.MemoryMessageStore (MemoryMessageStore.java:69) - Using capacity 50000 for hash tables
2009-10-17 12:07:26,285 INFO  [main] store.MemoryMessageStore (MemoryMessageStore.java:69) - Using capacity 50000 for hash tables
2009-10-17 12:07:26,285 INFO  [main] manager.PrincipalDatabaseAuthenticationManager (PrincipalDatabaseAuthenticationManager.java:66) - Initialising 'development' PrincipleDatabase authentication manager.
2009-10-17 12:07:26,285 INFO  [main] manager.PrincipalDatabaseAuthenticationManager (PrincipalDatabaseAuthenticationManager.java:66) - Initialising 'development' PrincipleDatabase authentication manager.
2009-10-17 12:07:26,285 WARN  [main] access.ACLManager (ACLManager.java:99) - Plugin handling security section principal-databases is 
2009-10-17 12:07:26,285 WARN  [main] access.ACLManager (ACLManager.java:99) - Plugin handling security section principal-databases is 
2009-10-17 12:07:26,301 WARN  [main] access.ACLManager (ACLManager.java:99) - Plugin handling security section access is 
2009-10-17 12:07:26,301 WARN  [main] access.ACLManager (ACLManager.java:99) - Plugin handling security section access is 
2009-10-17 12:07:26,301 WARN  [main] access.ACLManager (ACLManager.java:99) - Plugin handling security section msg-auth is 
2009-10-17 12:07:26,301 WARN  [main] access.ACLManager (ACLManager.java:99) - Plugin handling security section msg-auth is 
2009-10-17 12:07:26,301 WARN  [main] access.ACLManager (ACLManager.java:99) - Plugin handling security section jmx is 
2009-10-17 12:07:26,301 WARN  [main] access.ACLManager (ACLManager.java:99) - Plugin handling security section jmx is "	1	Bug	legacy-jmx-console	3	Major	6	Closed
12438469	PIVOT	gbrown	Add a SuggestionPopup class	"This class will be used to facilitate suggestions (i.e. ""auto-lookup"") for text input components.
"	2	New Feature	api-change	3	Major	5	Resolved
12438579	MAPREDUCE	simleo	SerialUtils.cc: deserializeFloat is out of sync with SerialUtils.hh	"{noformat}
*** SerialUtils.hh ***
  float deserializeFloat(InStream& stream);

*** SerialUtils.cc ***
  void deserializeFloat(float& t, InStream& stream)
  {
    char buf[sizeof(float)];
    stream.read(buf, sizeof(float));
    XDR xdrs;
    xdrmem_create(&xdrs, buf, sizeof(float), XDR_DECODE);
    xdr_float(&xdrs, &t);
  }
{noformat}
"	1	Bug	BB2015-05-TBR	3	Major	5	Resolved
12439197	DERBY	dagw	With generated columns,  INSERT with DEFAULT inside a VALUES clause inside a UNION fails.	"Repro on trunk:

 create table mytab (i int generated always as (j*2), j int);
insert into mytab values (default,1) union values (default,2);

ERROR XJ001: Java exception: 'ASSERT FAILED col[0] is null: org.apache.derby.shared.common.sanity.AssertFailure'.
java.sql.SQLException: Java exception: 'ASSERT FAILED col[0] is null: org.apache.derby.shared.common.sanity.AssertFailure'.
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:95)
	at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:142)
	at org.apache.derby.impl.jdbc.Util.javaException(Util.java:299)
	at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(TransactionResourceImpl.java:403)
	at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(TransactionResourceImpl.java:346)
	at org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConnection.java:2204)
	at org.apache.derby.impl.jdbc.ConnectionChild.handleException(ConnectionChild.java:81)
	at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1323)
	at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:625)
	at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:555)
	at org.apache.derby.impl.tools.ij.ij.executeImmediate(ij.java:329)
	at org.apache.derby.impl.tools.ij.utilMain.doCatch(utilMain.java:521)
	at org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:363)
	at org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:261)
	at org.apache.derby.impl.tools.ij.Main.go(Main.java:229)
	at org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:184)
	at org.apache.derby.impl.tools.ij.Main.main(Main.java:75)
	at org.apache.derby.tools.ij.main(ij.java:59)
Caused by: java.sql.SQLException: Java exception: 'ASSERT FAILED col[0] is null: org.apache.derby.shared.common.sanity.AssertFailure'.
	at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:119)
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:70)
	... 17 more
Caused by: org.apache.derby.shared.common.sanity.AssertFailure: ASSERT FAILED col[0] is null
	at org.apache.derby.shared.common.sanity.SanityManager.THROWASSERT(SanityManager.java:162)
	at org.apache.derby.shared.common.sanity.SanityManager.THROWASSERT(SanityManager.java:147)
	at org.apache.derby.impl.store.access.sort.MergeSort.checkColumnTypes(MergeSort.java:474)
	at org.apache.derby.impl.store.access.sort.MergeInserter.insert(MergeInserter.java:98)
	at org.apache.derby.impl.sql.execute.SortResultSet.loadSorter(SortResultSet.java:326)
	at org.apache.derby.impl.sql.execute.SortResultSet.openCore(SortResultSet.java:270)
	at org.apache.derby.impl.sql.execute.InsertResultSet.open(InsertResultSet.java:415)
	at org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt(GenericPreparedStatement.java:436)
	at org.apache.derby.impl.sql.GenericPreparedStatement.execute(GenericPreparedStatement.java:317)
	at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1235)
"	1	Bug	derby_backport_reject_10_5	4	Minor	6	Closed
12439232	ODE	seanahn	Take out the third transaction that loads up the my role mex and related data	"Currently, there are at least 3 transactions per a request:

1. Creates and persists a mex from the integration layer thread(HTTP thread)
2. Runs the process instance on the JACOB threads
3. Loads up the mex and related data(response), constructs the SOAP response and sends it back to the client(HTTP thread)

We can remove the 3rd transaction with minimum effort by sending back the MyRoleMessageExchange object through the ResponseCallback object."	4	Improvement	patch	4	Minor	1	Open
12439330	ZOOKEEPER	phunt	Give more feedback on that current flow of events in java client logs	"As discussed during the 10/23 meeting, one issue we have in debugging ZK client logs with HBase is that we have a hard time following the flow of events. It may be obvious for a ZK dev, but in our POV that kind of trace isn't very intuitive:

{code}
2009-09-27 15:41:10,776 INFO org.apache.zookeeper.ClientCnxn: Attempting connection to server ...
2009-09-27 15:41:10,776 INFO org.apache.zookeeper.ClientCnxn: Priming connection to java.nio.channels.SocketChannel[connected local=/ ... remote=...
2009-09-27 15:41:10,776 INFO org.apache.zookeeper.ClientCnxn: Server connection successful 
2009-09-27 15:41:10,784 WARN org.apache.zookeeper.ClientCnxn: Exception closing session 0x0 to sun.nio.ch.SelectionKeyImpl@2c9b42e6
{code}

This excerpt is just an example. We would like to see something like a numbering of the events and possibly, in the case of an exception, at which point did it went wrong and what's the next step."	4	Improvement	logging	3	Major	6	Closed
12439332	ZOOKEEPER	phunt	Revisit some java client log messages	"As discussed during the 10/23 meeting, some messages in the java client logs are mixing up terms from different levels. For example:

{code}
2009-10-14 15:12:43,566 WARN org.apache.zookeeper.ClientCnxn: Exception closing session 0x1244f619478000d to sun.nio.ch.SelectionKeyImpl@15e32c4
java.io.IOException: Session Expired
   at org.apache.zookeeper.ClientCnxn$SendThread.readConnectResult(ClientCnxn.java:589)
   at org.apache.zookeeper.ClientCnxn$SendThread.doIO(ClientCnxn.java:709)
   at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:945)
{code}

Which session are we talking about in the first line? Now I know that it's a network-related session and not the ZK one, but I've seen many of our users getting confused over those lines. "	4	Improvement	logging	3	Major	6	Closed
12439512	QPID	gemmellr	Allow for configuration of producer flow control queue properties through Management Console	"The Java Broker now supports a simplistic producer side flow control model governed by setting limits on how large a queue may grow.

Broker queues now have two new properties:

capacity : the size in bytes at which the queue is considered ""full"" and all channels sending
                     messages to the queue will (on next send) be sent a flow control message

flowResumeCapcity: the size at which, when reached, blocked sessions will be unflowed (presuming
                                       there is no other reason why the session has been flow controlled).

Currently these properties can be set on queue creation (either through the queue.declare arguments, or in the XML configuration) but cannot be modified through the management console.

The Queue MBean needs to be altered to allow access to these properties"	2	New Feature	jmx_interface	4	Minor	6	Closed
12439513	QPID	gemmellr	Allow viewing of channel flow control status via JMX Management Console	"When Flow Control is being utilised on the broker, it may be useful to expose the status of a channel (based on thevalue of _blocking in AMQChannel) as a read-only property via the management console.

Channel properties are currently only exposed by the broker over JMX via the ManagedConnection mbean interface which defines a channels() method implemented in the AMQProtocolSessionMBean, that returns a data set consisting of channel id, transactional status, default queue, and number of unacked messages for all channels on the connection. In order to expose the flow controlled status of the channel, this result set would be expanded to include the value of the new _blocking AtomicBoolean within AMQSession. 

Expanding the result set would not affect compatability with the older console UI, which should automatically display it thanks to its completely generic construction. The new console UI utilises this particular information set quite differently in order to construct a structured table and would not make use of the additional information until modified to do so (its presence would not interfere until that time, it simply wont be utilised) by performing a small update to add a new table column when the additional information is available on supporting brokers."	2	New Feature	legacy-jmx-console	3	Major	6	Closed
12439540	QPID	shuston	Broker hangs on shutdown if Windows SQL-based store gets a timeout initializing	"If the C++ broker startup tries to load the store and ms-sql provider, but the initial connection to SQL times out like this:

2009-10-30 11:31:46 error MSSQL can't open  at Provider=SQLOLEDB;Data Source=LILY\SQLEXPRESS;Integrated Security=SSPI: Unspecified error: Timeout expired

the broker may hang on shutdown. The main thread is the only one left and it's hung on a call to CoUninitialize().

"	1	Bug	deadlock	3	Major	1	Open
12439585	HADOOP	ajisakaa	Documenting Hadoop metrics	Metrics should be part of public API, and should be clearly documented similar to HADOOP-5073, so that we can reliably build tools on top of them.	4	Improvement	metrics	3	Major	6	Closed
12439796	LUCENE	michaelbusch	Ability to turn off the store for an index	"It would be really good in combination with parallel indexing if the
Lucene store could be turned off entirely for an index. 

The reason is that part of the store is the FieldIndex (.fdx file),
which contains an 8 bytes pointer for each document in a segment, even
if a document does not contain any stored fields.

With parallel indexing we will want to rewrite certain parallel
indexes to update them, and if such an update affects only a small
number of documents it will be a waste if you have to write the .fdx
file every time.

So in the case where you only want to update a data structure in the
inverted index it makes sense to separate your index into multiple
parallel indexes, where the ones you want to update don't contain any
stored fields.

It'd be also great to not only allow turning off the store but to make
it customizable, similarly to what flexible indexing wants to achieve
regarding the inverted index.

As a start I'd be happy with the ability to simply turn off the store and to
add more flexibility later."	2	New Feature	gsoc2014	4	Minor	1	Open
12439955	TS	andrewhsu	IPv6 support	"Support for IPv6 for client connections, but NOT origin connections.  Client support is more important to begin with so TS can be used as an IPv6 to IPv4 gateway.

Design doc here:
http://cwiki.apache.org/confluence/display/TS/IPv6+Feature+Design"	2	New Feature	ipv4, ipv6, networking, tcpip	2	Critical	6	Closed
12440010	QPID	gemmellr	only admin level users can complete connection to 2.5.0.0 or below (when configured to use <security-enabled> / JMXMP)	"Only admin level users can complete connection to 2.5.0.0, or older brokers configured to use <security-enabled> / JMXMP for their management connection.

Thisis due to the new console using a fallback method to determine what 'Qpid JMX API' version to classify the broker as supporting. In doing so, the console queries the MbeanServerConnection for the existence of the UserManagement MBean using an exact match for its 'type' key. Whilst other calls to the same queryNames method will return the UserManagement MBean's ObjectName, the broker uses the exact type of this MBean to prevent non-admin users from actually accessing it and so when the query is an exact match is placed in the query this raises a SecurityException and causes the connection to fail.

The solution is to change the query to use an ObjectName pattern to match the UserManagement MBean which will still match only the Mbean in question but prevent the security check from denying the request."	1	Bug	legacy-jmx-console	3	Major	6	Closed
12440017	QPID	gemmellr	enable the updated jmx management console to connect to very old brokers	The updated jmx management console uses the UserManagement MBean to classify the management API version when connecting to brokers pre 0.6. The UserManagement MBean was not present in the earliest releases, so to enable full backwards connectivity it should treat the lack of the MBean as meaning an earlier version, instead of failing to complete the connection as present.	1	Bug	legacy-jmx-console	3	Major	6	Closed
12440069	HIVE	he yongqiang	Bucketed Map Join	"Hive already have support for map-join. Map-join treats the big table as job input, and in each mapper, it loads all data from a small table.

In case the big table is already bucketed on the join key, we don't have to load the whole small table in each of the mappers. This will greatly alleviate the memory pressure, and make map-join work with medium-sized tables.


There are 4 steps we can improve:

S0. This is what the user can already do now: create a new bucketed table and insert all data from the small table to it; Submit BUCKETNUM jobs, each doing a map-side join of ""bigtable TABLEPARTITION(BUCKET i OUT OF NBUCKETS)"" with ""smallbucketedtable TABLEPARTITION(BUCKET i OUT OF NBUCKETS)"".

S1. Change the code so that when map-join is loading the small table, we automatically drop the rows with the keys that are NOT in the same bucket as the big table. This should alleviate the problem on memory, but we might still have thousands of mappers reading the whole of the small table.

S2. Let's say the user already bucketed the small table on the join key into exactly the same number of buckets (or a factor of the buckets of the big table), then map-join can choose to load only the buckets that are useful.

S3. Add a new hint (e.g. /*+ MAPBUCKETJOIN(a) */), so that Hive automatically does S2, without the need of asking the user to create temporary bucketed table for the small table.
"	2	New Feature	Bucketing	3	Major	6	Closed
12440384	ODE	seanahn	Versioning doesn't Works and NPE occured.	"I deployed new versions of processes via deployment web service, older process became ""RETIRED""
but When I sended request to start the process, NullPointerException occured.

2009-11-11 14:33:20.640+0900,ERROR,,localhost,,,,,null,""java.lang.NullPointerException
	at org.apache.ode.axis2.ODEService.onAxisMessageExchange(ODEService.java:162)
	at org.apache.ode.axis2.hooks.ODEMessageReceiver.invokeBusinessLogic(ODEMessageReceiver.java:69)
	at org.apache.ode.axis2.hooks.ODEMessageReceiver.invokeBusinessLogic(ODEMessageReceiver.java:63)
	at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:100)
	at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:176)
	at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:275)
	at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:133)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:713)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:806)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
	at org.apache.geronimo.tomcat.valve.DefaultSubjectValve.invoke(DefaultSubjectValve.java:56)
	at org.apache.catalina.valves.RequestFilterValve.process(RequestFilterValve.java:269)
	at org.apache.catalina.valves.RemoteAddrValve.invoke(RemoteAddrValve.java:81)
	at org.apache.geronimo.tomcat.GeronimoStandardContext$SystemMethodValve.invoke(GeronimoStandardContext.java:406)
	at org.apache.geronimo.tomcat.valve.GeronimoBeforeAfterValve.invoke(GeronimoBeforeAfterValve.java:47)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:568)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
	at java.lang.Thread.run(Thread.java:619)

Both new ACTIVE process and older RETIRED process are in target list in MessageExchange.
Should ode send request to only ACTIVE request?
and it appears that BrokeredMyRoleMessageExchangeImpl#getOperation always return null."	1	Bug	patch	3	Major	1	Open
12440534	HDFS	jonzoo	Error message not clear for set space quota out of boundary  values. 	"Error message is not clear for upper values of out of boundary quota values .

E.g 
Following error message is thrown if we try to apply quota value of 23498752039458723094578 which is out of upper limit of quota.  
{noformat}
[hadoo@l20044 ~]$ hadoop dfsadmin -setSpaceQuota  23498752039458723094578 test
setSpaceQuota: For input string: ""23498752039458723094578""
{noformat}

Instead of above error message it should print 
{noformat}
setSpaceQuota: Invalid values for quota : 9223372036854775807 and 0
{noformat}
"	1	Bug	newbie	4	Minor	6	Closed
12440272	QPID	gemmellr	Allow deleting the first message on a queue through the JMX Management Console when connected to older brokers 	Java brokers previous to 0.6 do not support deletion of arbitrary messages, only the 'first message on the queue' at any given time. This was not exposed in the updated console due for release with 0.6 (where the broker now does support deletion of arbitrary messages). This decision was made because by its very nature the method cannot guarantee which message would be deleted when it is executed, as any queue activity could alter which message is at the head of the queue. However, users may have come to expect this method to be present, and so it should be exposed for older brokers that lack the ability to exactly specify which messages should be deleted.	2	New Feature	legacy-jmx-console	4	Minor	6	Closed
12440281	QPID	gemmellr	disable moving messages using JMX Management Console for older brokers with known defects	The ability to classify the management version of brokers allows for preventing users of the updated console from using the Move Messages queue functionality on older brokers with known defects in this method. The console should be updated accordingly.	4	Improvement	legacy-jmx-console	3	Major	6	Closed
12440294	QPID	gemmellr	JMX Management Console may try to auto-refresh between recieving notification of JMXConnector failure/closure and the server view actually being closed 	"The JMX Management Console may try to auto-refresh the server view between recieving notification of JMXConnector failure/closure, and the server view actually finishing being cleaned up and cleared. This can result in NullPointerException when the console tries using details of an MBean retrieved from a map that can no longer return the required details. This can also lead to failure to properly clean up the connection tree, leaving the defunct server connection in view with the user unable to reconnect to that server without restarting the console.
"	1	Bug	legacy-jmx-console	3	Major	6	Closed
12440616	HBASE	apurtell	[EC2] EBS support	"Tweak HBase EC2 scripts to provide an option for backing HDFS with EBS volumes instead of plain instance storage. 

Accept a list of EBS volume identifiers to assign to datanodes or dynamically create them on behalf of the user. Use ZK to coordinate volume mounts on the datanodes. 

Will also require terminate-hbase-cluster to do a clean HBase shutdown if EBS volumes are used rather than just ec2-terminate-instance. Presumably this option would be used to persist data across cluster instances. "	7	Sub-task	moved_from_0_20_5	4	Minor	6	Closed
12440533	TAP5	hlship	Link should support multiple values for a single query parameter	You should be able to set multiple values for a query parameter in the same way that you can get multiple values for a single parameter from Request.	4	Improvement	bulk-close-candidate	4	Minor	6	Closed
12440833	LUCENENET	pnasser	Putting  support classes in separate files and in a separate directory	"I am going to add some new classes (nio support, IdentityHashMap, ...) What is the best place to put it in? SuportClass is getting bigger and bigger.
I think it is  time to put all support classes in separate files and in a separate directory (ex. JavaSupport).  Any comments? 
"	4	Improvement	refactoring	3	Major	5	Resolved
12440843	QPID	shuston	WCF assemblies not COM visible	The two assemblies for the WCF channel (Apache.Qpid.Channel and Apache.Qpid.Interop) are not currently visible to COM components. This causes problems for integration into Excel using the Excel RealTimeData mechanism which uses COM objects.	4	Improvement	legacy-wcf-client	3	Major	6	Closed
12440945	QPID	gemmellr	FailedDequeueException whilst clearing queue of messages moved/copied from another queue	"Whilst testing the updated management console, attempt was made to clear the queues used previously as destinations to test copying and moving messages between queues. The originating queue had previously been cleared without issue, however attempting to clear the queues to which the messages were moved/copied resulted in a FailedDequeueException. 

This may relate to a difference in treatment of persistent messages between their initial delivery to the broker, and when they are moved/copied. Currently all persistent messages are entered into the store on arrival at the broker, regardless of whether the queue they are destined for is durable. When moving/copying, the queue durability is also checke, and so the messages that threw the FailedDequeueException (but apprently were dequeued) had not been entered into the store for the destination queue as the queue was not durable."	1	Bug	jmx_interface	4	Minor	6	Closed
12440723	CASSANDRA	dbrosius	nodeprobe snapshot to support specific column families	"It would be good to support dumping specific column families via nodeprobe for backup purposes.

In my particular case the majority of cassandra data doesn't need to be backed up except for a couple of column families containing user settings / profiles etc."	4	Improvement	jmx, lhf	10003	Low	5	Resolved
12440778	DERBY	houxzhang	Wrap rollback in exception handlers in try-catch	"Avoid this pattern everywhere:

		}catch(SQLException se){
			//issue a rollback on any errors
			conn.rollback();
			throw  se;
		}

because an error in rollback will shadow the original exception."	1	Bug	derby_triage10_8	3	Major	6	Closed
12441054	ODE	rrusin	Provide OSGi packaging and Karaf feature descriptor for deployment to ServiceMix 4.1	"ServiceMix 4.1 supports OSGi bundle deployment for JBI components and the use of feature descriptors to deploy a set of related bundles. The ODE JBI component should be packaged so that it can be easily deployed to a ServiceMix 4.1 container from a maven repo using the feature install mechanism. 

We've done some initial work in this area already and I'd like to consider having the 1.x ODE component available as an optional feature in ServiceMix 4.1 by default. 
"	2	New Feature	patch	3	Major	5	Resolved
12441156	IVY	hibou	dependencies failed using branch attribute (and extra attributes)	"*** Investigation
i tried to use the branch attribute inside my projekt DEV like this:

	<ivy-module version=""1.1"">
		<info ... module=""DEV"" ....

		<dependency org=""testng"" name=""testng"" 
			branch=""mybranch1"" rev=""latest.integration""  
			conf=""compile,tests->default""/>
		.....

If I now try to resolve my dependencies, it failed
because ivy 2.1.0 try to resolve the latest version (5.6) of testng/testng
which has NO branch-keyword inside it's ivy.xml. The ivy.xml
of version testng/testng/4.6 contains the following:

<ivy-module version=""1.1"">
    <info
        organisation=""testng"" module=""testng""
        branch=""mybranch1""  revision=""4.6.1.2""
        status=""release""         
        publication=""20060227000000"">
      .....

It looks like the resolver skip this 4.6.1.2 version (which is the only one containing the 
branch attribute ""mybranch1"") and try to download the 5.6 (containing NO branch attribute !). 

I go the following error message:

[ivy:configure] :: Ivy 2.1.0 - 20090925235825 :: http://ant.apache.org/ivy/ ::
...
	---------------------------------------------------------------------
[ivy:resolve] :: problems summary ::
[ivy:resolve] :::: WARNINGS
[ivy:resolve] 		::::::::::::::::::::::::::::::::::::::::::::::
[ivy:resolve] 		::          UNRESOLVED DEPENDENCIES         ::
[ivy:resolve] 		::::::::::::::::::::::::::::::::::::::::::::::
[ivy:resolve] 		:: testng#testng#mybranch1;latest.integration: several problems occured while resolving dependency: testng#testng#mybranch1;latest.integration {compile=[default], tests=[default]}:
[ivy:resolve] 	java.text.ParseException: inconsistent module descriptor file found in 'I:\testng\testng\5.6\ivy.xml': bad branch name: expected='mybranch1' found='null'; 
[ivy:resolve] 	java.text.ParseException: inconsistent module descriptor file found in 'http://ivyrepos.dtnet.de/testng/testng/5.6/ivy.xml': bad branch name: expected='mybranch1' found='null'; 
[ivy:resolve] 		::::::::::::::::::::::::::::::::::::::::::::::
[ivy:resolve] 
[ivy:resolve] :::: ERRORS
[ivy:resolve] 		shared-filesystem: bad branch name found in I:\testng\testng\5.6\ivy.xml: expected='mybranch1 found='null'
[ivy:resolve] 		shared-web: bad branch name found in http://ivyrepos.dtnet.de/testng/testng/5.6/ivy.xml: expected='mybranch1 found='null'
[ivy:resolve] 
[ivy:resolve] :: USE VERBOSE OR DEBUG MESSAGE LEVEL FOR MORE DETAILS

*** Make it reproducable

I create a VERY small sample project (build.xml & ivy.xml)
using a sample ivyrepos on our server.

Could somebody look closer to the problem by downloading the project from
    http://www.opensource-online.org/fileadmin/swd/ivy/ivy-test.zip

To run, yust unzip and start ""ant -f build.xml"" and you can see the failure:

[ivy:resolve]           ::::::::::::::::::::::::::::::::::::::::::::::
[ivy:resolve]           ::          UNRESOLVED DEPENDENCIES         ::
[ivy:resolve]           ::::::::::::::::::::::::::::::::::::::::::::::
[ivy:resolve]           :: testng#testng#mybranch1;latest.integration: java.text.ParseException: inconsistent module descriptor file found in 'http:/
www.opensource-online.org/fileadmin/swd/ivy/testng/testng/5.6/ivy.xml': bad branch name: expected='mybranch1' found='';
[ivy:resolve]           ::::::::::::::::::::::::::::::::::::::::::::::
[ivy:resolve]
[ivy:resolve] :::: ERRORS
[ivy:resolve]           default: bad branch name found in http://www.opensource-online.org/fileadmin/swd/ivy/testng/testng/5.6/ivy.xml: expected='myb
anch1 found=''
[ivy:resolve]
[ivy:resolve] :: USE VERBOSE OR DEBUG MESSAGE LEVEL FOR MORE DETAILS

*** Same problem using extra attributes instead auf branch attribute
if tried a workaround not using the branch-keyword but defining a own extra atrribute like this:

<ivy-module version=""2.0"" xmlns:swd=""http://softwaredemo.de/ivy/extra"">
 ...
		<dependency org=""testng"" name=""testng""  swd:suite=""mybranch-e2"" rev=""latest.integration""  
					conf=""compile,tests->default""/>

But this tells me a similar result - also a failure.

regards
Danny

P.S.: refer also to http://old.nabble.com/dependencies-failed-using-branch-attribute-td26411302.html
"	1	Bug	patch	3	Major	4	Reopened
12441123	VXQUERY	tillw	Add XQTS test report to site	The current status of the XQTS test suite should be part of the VXQuery site.	2	New Feature	documentation, starter	3	Major	1	Open
12441383	ZOOKEEPER	phunt	remove unnecessary/annoying log of tostring error in Request.toString()	"Why are we logging this? It's unnecessary and just annoying afaict. We should remove it entirely.

2009-11-18 05:37:29,312 WARN org.apache.zookeeper.server.Request: Ignoring exception during toString
java.nio.BufferUnderflowException
	at java.nio.HeapByteBuffer.get(HeapByteBuffer.java:127)
	at java.nio.ByteBuffer.get(ByteBuffer.java:675)
	at org.apache.zookeeper.server.Request.toString(Request.java:199)
	at java.lang.String.valueOf(String.java:2827)
	at java.lang.StringBuilder.append(StringBuilder.java:115)
	at org.apache.zookeeper.server.quorum.CommitProcessor.processRequest(CommitProcessor.java:167)
	at org.apache.zookeeper.server.quorum.FollowerRequestProcessor.run(FollowerRequestProcessor.java:68)
"	1	Bug	logging	4	Minor	6	Closed
12441427	ZOOKEEPER	phunt	review logging to ensure that session related messages include session id	"when the server is logging session related log messages it must include the session id in hex form

this greatly simplifies debugging - being able to relate a session message back to a particular session. otw there's
too much going on and there is no way to determine what messages are related to a particular session"	1	Bug	newbie	3	Major	1	Open
12441382	ZOOKEEPER	phunt	client should log timeout negotiated with server	The ZK client should log the timeout negotiated with the server if the time is different than the timeout parameter specified by the client.	1	Bug	logging	3	Major	6	Closed
12442355	QPID	shuston	Interoperability test for binary and text messages	"A program to test the interoperability of the WCF client and the C++ client would be useful.

This would include text and binary data as a first step towards QPID-2226"	6	Test	legacy-wcf-client	3	Major	6	Closed
12442395	QPID	gemmellr	rename the JMX Management Console release artifacts	"The JMX Management Console release artifacts should be renamed. Whilst they in fact contain a completely standalone Eclipse RCP based application, their current naming (eg qpid-management-eclipse-plugin-0.6-linux-gtk-x86.tar.gz) based on the module that forms the core functionality gives the impression they simply hold an Eclipse plugin. More than one user has been lead to this conclusion and proceeded to try and integrate the contents with an Eclipse installation. They should not contain the eclipse-plugin designation of the module, and instead be named to reflect the application name, Qpid JMX Management Console.
"	4	Improvement	legacy-jmx-console	3	Major	6	Closed
12442396	QPID	gemmellr	provide meaningful error messages when failing to complete the JMX connection	Provide meaningful error messages when failing to complete the JMX connection. Currently the console uses a couple of generic error messages during connection failure. Instead, the exceptions raised should be used to provide more useful error messages to the user to help diagnose connection issues, eg when a connection times out, or fails due to there being no route to the host, etc.	4	Improvement	legacy-jmx-console	3	Major	6	Closed
12441751	PDFBOX	lehmi	Wingdings font recognition + spacing issue	"Windings characters issue
-------------------------

If filed this question first in Tika's wish list (tika-331) but Ken Krugler suggest it was a PDFBox issue.

I have PDF files that include some characters in Windings font. 
Tika parser replaces them with some Unicode characters that have nothing to do with the original, and, in some cases, replaces them with alphabetic characters. That is normal regarding these characters codes inside Windings font, but when hands pictures are replaced by alphabetic characters like A, B, etc. that disturbs further lexical analysis.

Would it be possible to improve the parsing and remplace these characters with more accurate Unicode characters ? 
(see http://www.alanwood.net/demos/wingdings.html for possible correspondences). 

Attached files :

test1.pdf is a PDF file including Windings characters. Some are commonly used by people, others less fequently. 

Parsing_result1.txt is the text file produced by Tika.

test2.pdf is another example with the same WORD source file converted into PDF with another tool, and Parsing_result2.txt is the Tika parsing result. Windings characters are translated into different Unicode characters than with the previous version.

Spacing issue 
-------------

Look at lines 10 and 11 in test2.pdf. 
Look at lines 11 and 12 in Tika parsing result (Parsing_result2.txt) : 

ðLocalisation des zones de livraison et de stockage 
ðLocalisation des zones dangereuses 

There is no space between ð and Localisation (ð is the translation of Winding's ""Rightwards white arrow"" by Tika). 

If you copy and paste lines 10 and 11 in test2.pdf into a Notepad Window, you get : 

ð Localisation des zones de livraison et de stockage 
ð Localisation des zones dangereuses 

...with a space between ð and Localisation. 

In my case, the missing space after Tika parsing result in considering ""ðLocalisation"" as a single word in following analysis. 

Regards"	5	Wish	wingdings	3	Major	6	Closed
12442482	QPID	gemmellr	0-10 protocol connections do not have a matching JMX MBean to allow management	0-10 protocol connections do not have a matching JMX MBean to allow management	1	Bug	jmx_interface	2	Critical	6	Closed
12442483	QPID	gemmellr	AMQQueueMBean.viewMessages does not show 0-10 protocol MessageTransferMessage's 	AMQQueueMBean.viewMessages does not show 0-10 protocol MessageTransferMessage's, it can only show messages based on the AMQMessage class used by lower ptorocol versions. As such a user will not see messages on the queue if they are produced with a 0-10 client but will for a 0-8/0-9 client.	1	Bug	jmx_interface	1	Blocker	6	Closed
12442498	QPID	shuston	WCF AmqpChannelListener can hang for 60 seconds on close	"When closing a WCF service the ChannelListener can hang for 60 seconds, until it times out and aborts.

This is known issue #3 in the Readme file.

It would be nice to erradicate this for 0.6"	1	Bug	legacy-wcf-client	2	Critical	6	Closed
12442532	LEGAL	robertburrelldonkin	CERN license category?	"If OK, do we also add an ASL notice?

// Copyright (c) 1999 CERN - European Organization for Nuclear Research.

// Permission to use, copy, modify, distribute and sell this software and
// its documentation for any purpose is hereby granted without fee,
// provided that the above copyright notice appear in all copies and that
// both that copyright notice and this permission notice appear in
// supporting documentation. CERN makes no representations about the
// suitability of this software for any purpose. It is provided ""as is""
// without expressed or implied warranty.
"	11	Question	Resolved.html	3	Major	6	Closed
12442013	TAP5	thiagohp	Expose ability to render a portion of a page (a Block, Component, etc.) without using internal services	"Currently you have to create an instance of PageRenderQueyeImpl and obtain an appropriate MarkupWriter.  This could be combined into a facade service to do all the necessary work.
"	2	New Feature	month-of-tapestry	4	Minor	5	Resolved
12442122	HIVE	pauly	Lateral View optimizations	"Had a offline discussion with Paul yesterday.


This is a followup on https://issues.apache.org/jira/browse/HIVE-935
Say, the query is 

select .. from T LATERAL VIEW explode(c2_list) as c2 LATERAL VIEW explode(c3_list) as c3


If we follow the suggestion from https://issues.apache.org/jira/browse/HIVE-935, 
(Lateral View Join operator will always have 2 inputs - the inputs will not be merged like join),
the explode operator for c3_list will be called once for each input on c2, which can be expensive.

Instead, if we merge the inputs and let LATERAL VIEW have 3 inputs, we will be invoking explode
operator for c3_list once for each row.

So, merging should be performed when the right side lateral views are not referencing anything from the
left side lateral views."	2	New Feature	optimization	3	Major	1	Open
12442059	OFBIZ	toashishvijay	Improvement in Cybersource integration to better handle a sale transaction response	"For running the sale transaction that is auth+capture in a single transaction we set field autoBill to true in PaymentGatewayCyberSource entity or payment.cybersource.autoBill to true in payment.properties.

Improvement in code for Cybersource integration to handle better sale transaction response is needed. Sale transaction is used in Cybersource integration to provide payment authorization and capture together. Its already supported but improvement is needed so that transaction can be better entered in the system for further review for a specific order.

"	4	Improvement	3rdParty, cybersource, integration	4	Minor	6	Closed
12442113	HBASE	apurtell	[EC2] Add support for running a mapreduce job automatically once the cluster is up	Run a mapreduce job once the cluster is up if configured. Use to support running PE from a convenient command line script. Can also be used to import data or run a full system test (suite).	7	Sub-task	moved_from_0_20_5	4	Minor	6	Closed
12442696	QPID	gemmellr	copying messages to a new queue only works with a persistent message and a durable queue	Following changes to the transaction processing with the 0-10 additions, copying messages to a new queue using the JMX interface only works with a persistent message and a durable destination queue.	1	Bug	jmx_interface	3	Major	6	Closed
12442781	DERBY	kristwaa	Download page does not have link to KEYS file	"The download page http://db.apache.org/derby/releases/release-10.5.3.0.cgi is missing the section ""Verifying releases"".

Also, the KEYS file should be linked from http://www.apache.org/dist/db/derby/KEYS , not http://svn.apache.org/repos/asf/db/derby/code/trunk/KEYS"	1	Bug	derby_backport_reject_10_8	2	Critical	6	Closed
12442901	QPID	cliffjansen	Tests for Transactional WCF channel	New tests are needed for the transactional functionality of the WCF channel.	3	Task	legacy-wcf-client	3	Major	6	Closed
12442959	QPID	shuston	Build of Release configuration fails	"Locations for the Release intermediaries are not properly resolved.

This is known issue #1 in the ReadMe.txt file and prevents non-debug versions of the code from building without user intervention.

This should be easy to fix."	1	Bug	legacy-wcf-client	3	Major	6	Closed
12443160	DERBY	dagw	Left outer join reassociation rewrite gives wrong result	"The following script and output shows the problem:

> create table r(c1 char(1));
> create table s(c1 char(1), c2 char(1));
> create table t(c1 char(1));

> insert into r values 'a';
> insert into s values ('b', default);
> insert into t values ('c');

> select * from s left outer join t on s.c2=t.c1 or s.c2 is null;

C1  |C2  |C1  
--------------
b   |NULL|c   

> select * from r left outer join s on r.c1=s.c1;
C1  |C1  |C2  
--------------
a   |NULL|NULL


> select * from (r left outer join s on r.c1=s.c1) left outer join t on s.c2=t.c1 or s.c2 is null;

C1  |C1  |C2  |C1  
-------------------
a   |NULL|NULL|c   

> select * from r left outer join (s left outer join t on s.c2=t.c1 or s.c2 is null) on r.c1=s.c1;

C1  |C1  |C2  |C1  
-------------------
a   |NULL|NULL|c   

The last result is wrong. The correct answer should be:

C1  |C1  |C2  |C1  
-------------------
a   |NULL|NULL|NULL   

since in the last form, the left table r has the value 'a', which does
not match any row in result of the compound inner given the join
predicate (""r.c1=s.c1""), so all nulls should be appended to the 'a'
from the outer table r.


This happens because internally the last form is rewritten to the
second but the last form (left-deep), but this rewrite is not
justified here unless the join predicate on s rejects null, which the
present one explicitly does not (""or s.c2 is null""). Cf. for example
[1], page 52, which describes this transform and its prerequisite
condition as indentity #7.

[1] Galindo-Legaria, C. & Rosenthal, A.: ""Outerjoin simplification and
reordering for query optimization"", ACM Transactions on Database
Systems, Vol 22, No 1, March 1997.
"	1	Bug	derby_backport_reject_10_5	3	Major	6	Closed
12443213	QPID	astitcher	release artifact for WCF channel	The steps to create a release artifact for the WCF channel need to be made explicit.	4	Improvement	legacy-wcf-client	3	Major	6	Closed
12443227	SHIRO	kaosko	Oauth support	"Create support for OAuth provider  support 'out of the box'. 
This could involve a standalone provider webapp with some flexible mechanism for data storage, and/or remote data retrieval & management,
and a customisable way to integrate application/transport specific OAuth based authentication with Shiro (HTTP/XMPP etc).

"	2	New Feature	patch, patch-with-test	3	Major	1	Open
12443497	ODE	rrusin	"OpenJPA based DAO doesn't support  wildcards properly in ""name"" and ""namespace"" filters in InstanceManagement"	"if we give the following strings as the namespace, it will not work properly
          
http://ode/unit-sample/H*
http://ode/unit-s*le/H*"	1	Bug	patch	3	Major	1	Open
12443648	PDFBOX	lehmi	PrintImageLocations example calculates wrong image width/height	"As described in [1] the code for calculating the image position and width/height should be updated similar to the code in [2].


[1] http://markmail.org/thread/hzti74yt45vz326r
[2] http://svn.apache.org/repos/asf/pdfbox/trunk/src/main/java/org/apache/pdfbox/util/operator/pagedrawer/Invoke.java "	1	Bug	PrintImageLocations	3	Major	6	Closed
12443661	QPID	shuston	WCF channel tests fixed on NUnit 2.5.2	The Channel Functional tests refer specifically to NUnit 2.5.2, preventing its use with, say, NUnit 2.5.3. The specific NUnit version number need not be specified.	1	Bug	legacy-wcf-client	4	Minor	6	Closed
12443886	HDFS	szetszwo	Balancer documentation should not be in javadoc	The best documentation for the balancer currently exists as a large JavaDoc on the Balancer class. This is less than useful, especially since we no longer generate javadocs for HDFS as part of the build process. We should either extract extract it into a forrest style doc, or else change the production javadoc to include certain whitelisted HDFS classes that we think users will want to see.	7	Sub-task	newbie	3	Major	1	Open
12444023	DERBY	rhillegas	The network client changes UDTs into Strings and returns their type as LONGVARBINARY.	"This is a pre-existing bug which seems to have been with Derby since the beginning. Some of the columns in the system tables (e.g., SYS.SYSALIASES.ALIASINFO) contain objects. If you select these columns:

1) In the embedded client you will get the correct results. You will get the objects in these columns. In addition, the ResultSetMetaData for these columns will correctly report that the columns have type JAVA_OBJECT and will give a reasonable type name (the class name for the object in the column).

2) However, in the network client, you will get the wrong results. ResultSet.getObject() will return Strings rather than the original objects. In addition, the ResultSetMetaData for these columns will incorrectly report that their type is LONGVARBINARY."	1	Bug	derby_backport_reject_10_5	3	Major	6	Closed
12444056	HIVE	hagleitn	Implement INFORMATION_SCHEMA in Hive	INFORMATION_SCHEMA is part of the SQL92 standard and would be useful to implement using our metastore.	2	New Feature	TODOC3.0, pull-request-available	3	Major	6	Closed
12444098	AVRO	opwvhk	Protocol namespace always written out in toJson	"The javadoc for Protocol indicates that namespaces are optional. However, toJson() always prints it out. If no namespace is set, it generates ""namespace"": null in the JSON.

Not sure whether namespaces are in fact required, or if it should just not output it when null."	1	Bug	pull-request-available	3	Major	5	Resolved
12444272	QPID	shuston	Windows installer doesn't add WCF DLLs to GAC	"When the installer installs the WCF DLLs they should be added to the GAC as well to remove the need for users to explicitly code the path when writing code that uses WCF.
The lines to do this are in the installer but are not being executed for some reason."	1	Bug	legacy-wcf-client	4	Minor	6	Closed
12444354	QPID	astitcher	Release notes for the WCF/C++ client 	Updated release notes are required for the 0.6 release.	4	Improvement	legacy-wcf-client	3	Major	6	Closed
12444701	QPID	gemmellr	"remove redundant ""version"" key property from the ObjectName of the JMX MBeans"	"Brokers from 0.5 onward have an additional version=X key property in the MBean ObjectName. This was added in 0.5 to enable version tracking for the MBeans to accomodate compatibility checks where necessary after changes. In 0.6.0.0 a new version tracking system was put in place, using the new ServerInformation MBean. As such, the version key property in the ObjectName is no longer required.

Motivation for removing the key property is that for certain JMX operations that require knowing the exact ObjectName of the single remote MBean you wish to operate on, you must know the value of the version key, which is different on each type of MBean and also differs between releases. Whilst it is possible to easily Query the server for this information, the ability to first perform this query is not always available to the user (eg for non-bespoke server health checks) and as such they need to know the exact value in advance. Removing the now-unused version key from the ObjectName will remove this need in future broker releases. "	4	Improvement	jmx_interface	3	Major	6	Closed
12445592	HBASE	jdcryans	Simple Master/Slave replication	We should first build a very simple replication mechanism to validate our assumptions and get a feel of what replication is in this very distributed context. 	7	Sub-task	replication	3	Major	6	Closed
12445871	QPID	rajith	Provide a consistent naming convention for JMS client properties	"It would be nice if all Qpid clients followed a similar convention for naming configuration properties.
The C++ client currently use the following convention. 
""qpid<dot><property_name>"" . 

For starters the JMS client could follow the same strategy.  Some of its properties are starting with ""amqj<dot>"" while other are using ""qpid<dot>"".
The logical choice would be to use ""qpid<dot>"" with backwards compatibility for old property name.

The following thread captured the discussion happened on qpid-dev
http://mail-archives.apache.org/mod_mbox/qpid-dev/201001.mbox/%3Cf5f5e0731001081456g5390a9c3w95c42b6fd7a8acb3@mail.gmail.com%3E

The following location will be used to document all the client properties.
http://cwiki.apache.org/confluence/display/qpid/Qpid+extensions+to+AMQP
As Robert mentioned all properties should indicate how they are used and whether they alter only client internal behaviour, or whether they are passed down the wire to the broker which could alter broker behaviour
Later on it will be added to the documentation being developed in the Qpid svn."	4	Improvement	possibly_complete	3	Major	5	Resolved
12446006	ACE	jbonofre	Add support of Felix Karaf feature deployment	ACE should be able to deploy Karaf feature.	2	New Feature	karaf	3	Major	6	Closed
12446105	QPID	ritchiem	Java Client sends 0-9 frames on 0-91 connection	"Noticed when running the FailoverBeforeConsumingRecoverTest and RecoverTest against external Java Broker when 0-10 is excluded from the Java Broker. Client and broker happily negotiate 0-91 but on recover a 0-9 frame is sent.

Dispatcher-Channel-1 2010-01-18 08:11:26,393 DEBUG [qpid.protocol] SEND: [org.apache.qpid.client.protocol.AMQProtocolHandler@1cab805] Frame channelId: 1, bodyFrame: [	: requeue=false]
BROKER: AnonymousIoService-4 2010-01-18 08:11:26,398 ERROR [qpid.server.protocol.AMQProtocolEngine] Unexpected exception when processing datablock
BROKER: org.apache.qpid.framing.AMQFrameDecodingException: Method 102 unknown in AMQP version 0-91 (while trying to decode class 60 method 102. [error code 503: command invalid]
"	1	Bug	amqp_compliance	4	Minor	6	Closed
12446279	HIVE	zshao	allow sub-directories for an external table/partition	"Sometimes users want to define an external table/partition based on all files (recursively) inside a directory.

Currently most of the Hadoop InputFormat classes do not support that. We should extract all files recursively in the directory, and add them to the input path of the job.

"	4	Improvement	inputformat	3	Major	1	Open
12445359	AVRO	kojiromike	Generate documentation for Python with Sphinx		4	Improvement	pull-request-available	3	Major	5	Resolved
12445371	HADOOP	umamaheswararao	Path.normalize should use StringUtils.replace in favor of String.replace	"in our environment, we are seeing that the JobClient is going out of memory because Path.normalizePath(String) is called several tens of thousands of times, and each time it calls ""String.replace"" twice.

java.lang.String.replace compiles a regex to do the job which is very costly.
We should use org.apache.commons.lang.StringUtils.replace which is much faster and consumes almost no extra memory.
"	1	Bug	newbie	4	Minor	6	Closed
12444843	MAILBOX	norman	Add a file based Mailbox implementation using the maildir layout	"I would like to have support for file bases Mailbox using the maildir layout in the IMAP project.

More infos about the maildir layout:

http://www.qmail.org/qmail-manual-html/man5/maildir.html


"	2	New Feature	gsoc, gsoc2010, mentor	3	Major	5	Resolved
12446872	QPID	astitcher	Exception Thrown at qpid/sys/epoll/EpollPoller.cpp:254 Leaves Orphan File Descriptor	"
While researching JIRA QPID-2367 I noticed a pileup of file descriptors in /proc/PID/fd.  I traced the creation of these descriptors back to this chunk of code in qpid/sys/epoll/EpollPoller.cpp:

244     PollerPrivate() :
245         epollFd(::epoll_create(DefaultFds)),
246         isShutdown(false) {
247         QPID_POSIX_CHECK(epollFd);
248         ::sigemptyset(&sigMask);
249         // Add always readable fd into our set (but not listening to it yet)
250         ::epoll_event epe;
251         epe.events = 0;
252         epe.data.u64 = 0;
253         QPID_POSIX_CHECK(::epoll_ctl(epollFd, EPOLL_CTL_ADD, alwaysReadableFd, &epe));
254     }

The problem is with the second QPID_POSIX_CHECK -- a macro that throws an exception.  If an exception is thrown then the file descriptor allocated by epollFd(::epoll_create(DefaultFds)) is left dangling.  A ::close(epollFd) would be needed in the catch() block to free it.  

There are a number of functions with a similar design in EpollPoller.cpp that might be similarly affected."	1	Bug	leak	4	Minor	1	Open
12446919	PIVOT	gbrown	Allow Tooltips to contain arbitrary content	"Currently, tooltips can only contain a single line of non-wrapping text.
"	4	Improvement	api-change	4	Minor	5	Resolved
12446921	PIVOT	gbrown	Add a Resources argument to org.apache.pivot.wtkx.Bindable#initialize()	"This will allow a caller to obtain a reference to the resources used to load the WTKX object, for later use at runtime.
"	4	Improvement	api-change	4	Minor	5	Resolved
12447027	QPID	astitcher	WCF/C++ Client subtree lacks Apache licensing files	"Licence and Notice files are missing.  Requirements described at

http://www.apache.org/dev/apply-license.html"	1	Bug	legacy-wcf-client	1	Blocker	6	Closed
12446209	AXIS2C	samisa	AIX: axutil_uuid_get_mac_addr() returns NULL => uuid with zeroes	"axutil_uuid_get_mac_addr() return NULL on AIX 5.3.
The axutil_uuid_get_mac_addr() implementation is the default one (neither HAVE_LINUX_IF_H or HAVE_GETIFADDRS defined).

Note that the case of axutil_uuid_get_mac_addr() returning NULL is not handled in axutil_uuid_gen_v1(), so invalid memory access occurs."	1	Bug	AIX, Ethernet, MAC, patch, uuid	3	Major	5	Resolved
12445368	ZOOKEEPER	marccelani	"""exceeded deadline by N ms"" floods logs"	"More important zookeeper warnings are drown out by the following several times per minute:

2010-01-12 17:39:57,227:22317(0x4147eb90):ZOO_WARN@zookeeper_interest@1335: Exceeded deadline by 13ms

Perhaps this is an issue with the way virtualized systems manage gettimeofday results?

Maybe the current 10ms threshold could be pushed up a bit.  I notice that 95% of the messages are below 50ms.

Is there an obvious configuration change that I can make to fix this?

config file below:

# The number of milliseconds of each tick
tickTime=2000
# The number of ticks that the initial
# synchronization phase can take
initLimit=10
# The number of ticks that can pass between
# sending a request and getting an acknowledgement
syncLimit=5
# the directory where the snapshot is stored.
dataDir=/mnt/zookeeper
# the port at which the clients will connect
clientPort=2181

server.1=hbase.1:2888:3888
server.2=hbase.2:2888:3888
server.3=hbase.3:2888:3888
server.4=hbase.4:2888:3888
server.5=hbase.5:2888:3888
"	1	Bug	patch	3	Major	5	Resolved
12446493	QPID	shuston	Need functional tests for the transactional AMQP WCF channel		6	Test	legacy-wcf-client	3	Major	6	Closed
12446562	AXIS2C	shankar	[AIX] util/include/axutil_utils_defines.h should not map AXIS2_CALL to __stdcall on non-Windows platforms	"__stdcall is a Microsoft specific keyword that should be used only for Win32 builds.
(reference: http://msdn.microsoft.com/en-us/library/zxk0tw93%28VS.80%29.aspx )

 However util/include/axutil_utils_defines.h contains this code:
========================================
#if defined(__GNUC__)
#if defined(__i386)
#define AXIS2_CALL __attribute__((cdecl))
#define AXIS2_WUR __attribute__((warn_unused_result))
#else
#define AXIS2_CALL
#define AXIS2_WUR


#endif
#else
#if defined(__unix)
#define AXIS2_CALL
#define AXIS2_WUR


#else                           /* WIN32 */
#define AXIS2_CALL __stdcall
#define AXIS2_WUR
#endif
#endif
========================================

On AIX platforms, the C preprocessor doesn't have the __unix define and Insure++ doesn't know the __stdcall keyword.

So this makes Insure++ fail to compile such function variable declaration as AXIS2_CALL is mapped to __stdcall:
========================================
    void *(
        AXIS2_CALL
        * my_fn)();
========================================"	1	Bug	AIX, patch	1	Blocker	5	Resolved
12445861	SOLR	hossman	Script based UpdateRequestProcessorFactory	"A script based UpdateRequestProcessorFactory (Uses JDK6 script engine support). The main goal of this plugin is to be able to configure/write update processors without the need to write and package Java code.

The update request processor factory enables writing update processors in scripts located in {{solr.solr.home}} directory. The functory accepts one (mandatory) configuration parameter named {{scripts}} which accepts a comma-separated list of file names. It will look for these files under the {{conf}} directory in solr home. When multiple scripts are defined, their execution order is defined by the lexicographical order of the script file name (so {{scriptA.js}} will be executed before {{scriptB.js}}).

The script language is resolved based on the script file extension (that is, a *.js files will be treated as a JavaScript script), therefore an extension is mandatory.

Each script file is expected to have one or more methods with the same signature as the methods in the {{UpdateRequestProcessor}} interface. It is *not* required to define all methods, only those hat are required by the processing logic.

The following variables are define as global variables for each script:
 * {{req}} - The SolrQueryRequest
 * {{rsp}}- The SolrQueryResponse
 * {{logger}} - A logger that can be used for logging purposes in the script"	2	New Feature	UpdateProcessor	2	Critical	6	Closed
12445909	AXIS2C	shankar	Upgrade autotools	"Upgrading autotools on the machine used to make releases would probably help to fix issues on non-Linux systems such as AIX.

Here is a script to upgrade all configure.ac:

for d in $( find . -name configure.ac | sed 's@/[^/]*$@@' )
do
        echo autoreconf/autoupdate for $d
        ( cd $d ; autoreconf -i && autoupdate ) || exit 1
done
"	4	Improvement	AIX, autoconf, autotools, build, libtool	3	Major	6	Closed
12446259	SOLR	gsingers	Solr fails to start if QueryElevationComponent config is missing	"QueryElevationComponent tries to do preload some data if its config file does not exist:

{code}
        if (!exists){
          // preload the first data
          RefCounted<SolrIndexSearcher> searchHolder = null;
          try {
            searchHolder = core.getNewestSearcher(false);
            IndexReader reader = searchHolder.get().getReader();
            getElevationMap( reader, core );
          } finally {
            if (searchHolder != null) searchHolder.decref();
          }
        }
{code}

This does not work though, as asking for the newest searcher causes a request to be submitted to Solr before its ready to handle it:

{code}
     [java] SEVERE: java.lang.NullPointerException
     [java] 	at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:173)
     [java] 	at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:131)
     [java] 	at org.apache.solr.core.SolrCore.execute(SolrCore.java:1317)
     [java] 	at org.apache.solr.core.QuerySenderListener.newSearcher(QuerySenderListener.java:52)
     [java] 	at org.apache.solr.core.SolrCore$3.call(SolrCore.java:1147)
     [java] 	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
     [java] 	at java.util.concurrent.FutureTask.run(FutureTask.java:138)
{code}

The SearchHandler has not yet been core informed (as the QueryElevationComponent causes this as its getting core informed right before the SearchHandler) and so its components arraylist is still null.

"	1	Bug	newdev	3	Major	6	Closed
12446427	PIVOT	gbrown	Improve user experience in TerraFormSkin	"The current implementation does not draw enough attention to flagged fields, and it is not clear to the user that mousing over the flag icon will reveal an error message. TerraFormSkin should be updated to highlight flagged fields more effectively.
"	4	Improvement	api-change	3	Major	5	Resolved
12451651	WW	jogep	Replace Dojo Plugin with a jQuery Plugin	"replace the deprecated dojo plugin with jquery plugin.

http://code.google.com/p/struts2-jquery/

the plugin works already fine in my environments.

"	2	New Feature	jquery, plugin	4	Minor	6	Closed
12454927	DERBY	dagw	Client setCharacterStream closes its Reader argument stream in finalizer	"The javadoc for PreparedStatement.setCharacterStream does not specify that the stream passed in will be closed, only that it will read to the number of characters specified.
For the embedded driver, the stream is not closed after execution; the client driver, however, will close the stream when the internal stream object EncodedInputStream is garbage collected, which can happen any time after the statement has been executed.
I am not sure this a bug vs. the JDBC specification, but it would be nice to harmonize client and embedded behavior on this.
"	1	Bug	derby_backport_reject_10_6	4	Minor	6	Closed
12455129	PIVOT	gbrown	Update QueryServlet API for consistency with client-side Query API		4	Improvement	api-change	3	Major	5	Resolved
12455529	CASSANDRA	riffraff	Use Map.entrySet and Map.values instead of multiple lookups from Map.keySet	"in a few places in the codebase there are loops on Map containers in which the values are read but the iteration is done on the keys with subsequent calls to map.get(key). 

Using entrySet/values instead of keySet should bear a little performance improvement in that kind of loops (10/30%, if I recall correctly) but mostly the patch just gets rid of a few more FindBugs warnings. All tests still passing"	4	Improvement	findbugs	10003	Low	5	Resolved
12455549	TS	georgep	Build with --enable-debug completes, executable seg faults	"Build completes, but when a call to ""traffic_server"" is issued, TS seg faults.



""./configure --enable-debug""

<log>
FATAL: ink_queue.cc:347: failed assert `!((uintptr_t)TO_PTR(FREELIST_POINTER(item))&(((uintptr_t)f->alignment)-1))`
traffic_server - STACK TRACE:
traffic_server(ink_fatal_va+0xb1)[0x833b24c]
traffic_server(ink_fatal+0x1e)[0x833b28e]
traffic_server(_ink_assert+0xb7)[0x833a6ab]
traffic_server(ink_freelist_new+0x2ca)[0x833e863]
traffic_server(_ZN14ClassAllocatorI18HostDBContinuationE5allocEv+0x12)[0x82859c0]
traffic_server(_ZN15HostDBProcessor5startEi+0x2ac)[0x827c8f8]
traffic_server(main+0xb48)[0x8157148]
/lib/tls/i686/nosegneg/libc.so.6(__libc_start_main+0xe6)[0xb716ab56]
traffic_server[0x80fa5c1]

</log>"	1	Bug	Linux, Ubuntu_Karmic, build, configure, enable-debug, i386, segmentation_fault	3	Major	6	Closed
12455565	PDFBOX	lehmi	PDSimpleFont.  Font height reported as zero.	"The logic for PDSimpleFont.getFontHeight() can return a value of zero.   
This will corrupt or compromise text extraction and layout.
In particular, test with 'http://www.encana.com/investor/financial/shareholder/pdfs/info-circular-french.pdf', pg 12 

When a PDFontDescriptor is used, the current logic uses:
   1) an average of xHeight and capHeight.   
             xHeight is the height from the baseline to the top of a lower case letter like 'x'.
             CapHeight is the height from the baseline to the top of an upper case latin char.
   2) xHeight
   3) capHeight
   4) ascent
   5) zero

This is really bizarre.  'xHeight' is an optional parameter, and 'capHeight' is often missing.

The font bounding box is a required parameter and is the height that is used by Acrobat Reader when you select a line of text.
The bounding box is not perfect, because it often overlaps the line above, but it is a consistent value.  The problem with the
current logic is that the reported height varies way too much, and a zero value can be reported.

I have modified the logic as follows. The goal was to make the nominal values the same as the current logic,
but return a very similar number when parameters go missing.

         PDFontDescriptor desc = getFontDescriptor();
          if( desc != null )  {
           	float height = desc.getCapHeight();				// Top of Cap to baseline (eg 715)
            	if (height==0) {
            		height=desc.getAscent();					// Max height from baseline (eg 715);
            	   	if (height==0) {
            	   		PDRectangle bbox = desc.getFontBoundingBox();
            	   		height = bbox.getHeight()/2;			// Max height less max depth (eg (1006-(-325))=1331/2=665)
            	   		if (height==0) {
            	   			height=desc.getXHeight();			// Top of lower-case to baseline (eg 518)
            	   			height-=desc.getDescent();		// Depth below baseline (eg 209, to get total of 727)
            	   		}
            	   	}
            	}
                retval=height;
          }
"	1	Bug	PDSimpleFont, textExtraction	3	Major	6	Closed
12455569	IVYDE	hibou	Impossible to resolve dependencies: missing diagnostics	"IvyDE produces an error ""Impossible to resolve dependencies"", but does not explain, why: no message, no stack trace:

http://screencast.com/t/YzFjMmYxMjY

ivy.xml is open on double-click to that line. So I have no idea, what should be done to fix the problem.

I request a better diagnostics."	5	Wish	diagnostics	3	Major	5	Resolved
12455701	TS	bcall	"""Dynamic"" keep-alive timeouts"	"(This is from a Y! Bugzilla ticket 1821593, adding it here. . Originally posted by Leif Hedstrom on 2008-03-19):


Currently you have to set static keep-alive idle timeouts in TS, e.g.

   CONFIG proxy.config.http.keep_alive_no_activity_timeout_in INT 8
   CONFIG proxy.config.http.keep_alive_no_activity_timeout_out INT 30


even with epoll() in 1.17.x, this is difficult to configure, and put an appropriate timeout. The key here is that the
settings above need to assure that you stay below the max configured number of connections, e.g.:

    CONFIG proxy.config.net.connections_throttle INT 75000


I'm suggesting that we add one (or two) new configuration options, and appropriate TS code support, to instead of
specifying timeouts, we specify connection limits for idle KA connections. For example:

    CONFIG proxy.config.http.keep_alive_max_idle_connections_in INT 50000
    CONFIG proxy.config.http_keep_alive_max_idle_connections_out INT 5000

(one still has to be careful to leave head-room for active connections here, in the example above, 20000 connections
could be active, which is a lot of traffic).

These would override the idle timeouts, so one could use the max_idle connections for incoming (client) connections,
and the idle timeouts for outgoing (origin) connections for instance.

The benefit here is that it makes configuration not only easier, but also a lot safer for many applications."	2	New Feature	A	4	Minor	6	Closed
12455761	WICKET	ivaynberg	Wicket redirects don't work with Apache JMeter	"Unlike some browsers, JMeter does not fix up the broken URLs returned in the Location header of 302 redirects generated by wicket.

For instance, after signing out of a wicket 1.4.6 app, the redirect might be to Location: http://host/wicket-app/.
Some browsers and even some webservers will fix this up (removing the dot), but JMeter will not and glassfish (and possibly other appservers) will return a 404 error.

I've have discussed the issue with the JMeter developer and hence opened this ticket.
http://mail-archives.apache.org/mod_mbox/jakarta-jmeter-user/201002.mbox/browser

Many thanks,
Alex

"	1	Bug	jmeter, redirect	3	Major	5	Resolved
12455793	COUCHDB	jchris	_update: document created with undefined _id	Using an update handler, if a document is returned with  {  _id : undefined }, the document will be created on the database with an undefined _id and will henceforth not be accessible to modify or delete although it will show up in views.	1	Bug	updates	3	Major	6	Closed
12455809	TIKA	jukkaz	Error parsing HTML partial with AutoDetect parser	"I get the following error parsing a html file containing a partial HTML document.  

TIKA-237: Illegal SAXException from org.apache.tika.parser.xml.DcXMLParser@3a43af 

The following conditions need to exist in the file for the error to be thrown:

+ A HTML comment before any HTML tags
+ More than one top level HTML tag

I will attach a test file to reproduce"	1	Bug	html, parser	3	Major	5	Resolved
12455833	COUCHDB	tilgovi	"_update handler ignores ""code"" in response doc"	"When using an _update handler, it should be possible to return a response code.

  return [ doc, {
  headers : { ""Location"" : ""/"" },
  code	  : 303,
  body	  : 'Redirecting'
  }];

Should return 303 (the redirect for POST) but in fact, on a successful create returns 201.  This means it is not possible to use the browser to POST as you cannot redirect on return.  This feels like a bug.

In any case, I would respectfully suggest that the syntax of the _update handler be changed so that there is a store(doc) call (or similar) which returns a JSON object to the update handler so that the handler may redirect appropriately.  That would make it possible to do updates client-side with little or no client-side javascript."	1	Bug	update	3	Major	6	Closed
12455861	SOLR	noble.paul	DIH with threads enabled doesn't respond to the abort command	"When the multithreaded entity processor is enabled by adding the threads=""x"" attribute to an entity, the thread runner code doesn't check the status of the abort flag. The process continues to run after the abort command is given."	1	Bug	dih, multithread	3	Major	5	Resolved
12455949	PIVOT	gbrown	Make Dialog more WTKX-friendly	"Move the modal flag to a property so it can be declared in WTKX:

<Dialog modal=""true"">
...
</Dialog>
"	4	Improvement	api-change	4	Minor	5	Resolved
12455973	TS	zwoop	Two scripts, for building and basic config settings for testing.	"Two scripts, for building and basic config settings for testing.

"	6	Test	automated, bash, fedora_12, linux, script, test, trafficserver, ubuntu, ubuntu_karmic	4	Minor	6	Closed
12455981	PDFBOX	lehmi	Invalid Images Returned	"When getting images from a PDF document using PDXObjectImage (code fragment below), it returns an image with invalid characteristics.  The PDXObjectImage is not null, but attributes like .getColorSpace() return null.  The image has a height and width, but the getRGBImage() method returns null.

This happens on EVERY image of the attached file.  Code fragment and output is shown below.  

If I use the write2file() method of PDXObjectImage to write out the image to a fil, then I get a valid image.  (At least, it displays fine.)

Code Fragment:

                // Get a list of pages from the input PDF document
                List pages = InputDoc.getDocumentCatalog().getAllPages();
                // Process each page
                int i = 0;
                for (Object obj : pages)
                {
                    String Barcode = null;
                    i++;
                    PDPage page = (PDPage)obj;
                    // Get the image on the page and process it
                    PDResources resources = page.getResources();
                    Map images = resources.getImages();
                    System.out.println(""Found "" + images.size() + "" images on Page "" + i);
                    if( images != null )
                    {
                        Iterator imageIter = images.keySet().iterator();
                        while ( imageIter.hasNext() )
                        {
                            String key = (String)imageIter.next();
                            System.out.println(""key = "" + key);
                            PDXObjectImage image = (PDXObjectImage)images.get( key );
                            if (image != null)
                            {
                                System.out.println(""Image subtype = "" + image.SUB_TYPE.toString());
                                System.out.println(""Image suffix = "" + image.getSuffix());
                            System.out.println(""PDX image has height = "" + image.getHeight()
                                                + "" and width "" + image.getWidth());
                            // Convert image to a Buffered Image, so we can
                            // look for a barcode and decode it
                            BufferedImage RGBimage = image.getRGBImage();
                            if (RGBimage == null)
                                System.out.println(""RGBimage is null"");
                            }
                        }
                    }

Output:

Found 1 images on Page 1
key = Obj3
Image subtype = Image
Image suffix = tiff
PDX image has height = 2335 and width 1651
RGBimage is null
Found 1 images on Page 2
key = Obj8
Image subtype = Image
Image suffix = tiff
PDX image has height = 2335 and width 1651
RGBimage is null
Found 1 images on Page 3
key = Obj13
Image subtype = Image
Image suffix = tiff
PDX image has height = 2335 and width 1651
RGBimage is null
Found 1 images on Page 4
key = Obj18
Image subtype = Image
Image suffix = tiff
PDX image has height = 2335 and width 1651
RGBimage is null
Found 1 images on Page 5
key = Obj23
Image subtype = Image
Image suffix = tiff
PDX image has height = 2335 and width 1651
RGBimage is null
Found 1 images on Page 6
key = Obj28
Image subtype = Image
Image suffix = tiff
PDX image has height = 2335 and width 1651
RGBimage is null
Found 1 images on Page 7
key = Obj33
Image subtype = Image
Image suffix = tiff
PDX image has height = 2335 and width 1651
RGBimage is null
Found 1 images on Page 8
key = Obj38
Image subtype = Image
Image suffix = tiff
PDX image has height = 2335 and width 1651
RGBimage is null
Found 1 images on Page 9
key = Obj43
Image subtype = Image
Image suffix = tiff
PDX image has height = 2335 and width 1651
RGBimage is null
Found 1 images on Page 10
key = Obj48
Image subtype = Image
Image suffix = tiff
PDX image has height = 2335 and width 1651
RGBimage is null

"	1	Bug	PDXObjectImage, image, invalid, null	3	Major	6	Closed
12455985	COUCHDB	jchris	Users are unable to login to futon when require_valid_user is set to true	"Using basic auth to login to futon doesn't work. A cookie is required. 
This presents an annoying / difficult user experience. "	1	Bug	login	4	Minor	6	Closed
12456029	SLING	fmeschbe	Patch with added functionality for the mocks in o.a.s.commons.testing	"This patch provides some small extra functionality to the MockNode, MockProperty and MockValue classes.
Basically it provides a couple of setters so that one is able to set more then a string property.

Patch taken from trunk/bundles/commons/testing ."	4	Improvement	mocks, patch, testing	3	Major	6	Closed
12455396	CASSANDRA	stuhood	Row keys should be byte[]s, not Strings	"This issue has come up numerous times, and we've dealt with a lot of pain because of it: let's get it knocked out.

Keys being Java Strings can make it painful to use Cassandra from other languages, encoding binary data like integers as Strings is very inefficient, and there is a disconnect between our column data types and the plain String treatment we give row keys.

The key design decision that needs discussion is: Should we apply the column AbstractTypes to row keys? If so, how do Partitioners change?"	4	Improvement	abstract_types, binary, keys, partitioners	10000	Urgent	5	Resolved
12455451	SLING	enorman	Problem with non-ascii characters in uploaded files filname	"I use a simple form to upload files into Sling, such as this one:

<code>
<form enctype=""multipart/form-data"" action=""/sling/notes/*"" method=""POST"">
			<textarea rows=""5"" cols=""40"" name=""text""></textarea>
			
			<label>Pièce jointe:</label>
			<input type=""file"" name=""attachments/*"" class=""input-text"">
			
			<input type=""hidden"" value=""2010-02-05T16:08:06"" name=""created""> 
			<input type=""hidden"" value=""esg"" name=""creator"">
			<input type=""hidden"" value=""2010-02-05T16:08:06"" name=""modified""> 
			<input type=""hidden"" value=""esg"" name=""editor"">
			<input type=""hidden"" value=""esg/notes"" name=""sling:resourceType"">
										
			<input type=""submit"" value=""envoyer"" class=""form-button"">
		</form>
</code>

Everything works fine, but when the filename contains non-ascii characters the name of the node ends up wrong.
Example:

In the file upload input field I specify a file which name is ""avé_un_assent.jpg""

The sling node ends up being: /sling/content/notes/2_1265383081005/attachments/avÃ©_un_assent.jpg
where it should be /sling/content/notes/2_1265383081005/attachments/avé_un_assent.jpg (or /sling/content/notes/2_1265383081005/attachments/av%C3%A9_un_assent.jpg)

Using esp script the Node.getName() method also return an incorrect name

I verified content headers (sent and returned) and the content encodings are properly set to utf-8

Thanks for your help
"	1	Bug	encoding, file_upload, utf-8	3	Major	5	Resolved
12455459	MAHOUT	drew.farris	Use avro for serialization of structured documents.	"Explore the intersection between Writables and Avro to see how serialization can be improved within Mahout. 

An intermediate goal is the provide a structured document format that can be serialized using Avro as an Input/OutputFormat and Writable "	4	Improvement	avro, mapreduce, serialization, writable	4	Minor	6	Closed
12455471	JS2	adouma	DeveloperBrowser-type portlets for delegated admin can be used to assign global admin role	"There is no way for a deployer to configure preset lists (or combinations) of allowed roles etc that a delegated administrator can assign to filtered users, or to filter out certain roles from the list of options available. (Also no way to set required attributes like language, which would be useful too).

So a delegated admin can give users full global admin privileges. This makes the portlet unsuitable for production use."	1	Bug	delegated, portlet, security	3	Major	5	Resolved
12455547	TS	jasongiedymin	Reverse Proxy Mode + Cache crashes / Segmentation fault when using HTTPS dynamic pages, Static Fine	"In current trunk:

Trafficserver crashes when using HTTPS dynamic pages in reverse proxy + cache mode.

Crashes with Segmentation Fault.

The dynamic pages are PHP, and will crash.  Happens with Phpmyadmin and wordpress.

Static pages work correctly fine.

<log>
[Feb  6 18:29:06.180] Server {2991545200} ERROR: SSL ERROR: SSL_ServerHandShake.
[Feb  6 18:29:06.180] Server {2991545200} ERROR: SSL::7:error:14094416:SSL routines:SSL3_READ_BYTES:sslv3 alert certificate unknown:s3_pkt.c:1053:SSL alert number 46
NOTE: Traffic Server received Sig 11: Segmentation fault
traffic_server - STACK TRACE:
[0xb7755400]
traffic_server(_ZN17HttpServerSession11do_io_closeEi+0x22)[0x815cb22]
[0x1]
traffic_server(_ZN6HttpSM12main_handlerEiPv+0x299)[0x8176159]
traffic_server(_ZN18UnixNetVConnection9mainEventEiP5Event+0x441)[0x82d8f81]
traffic_server(_ZN13InactivityCop16check_inactivityEiP5Event+0x83)[0x82d15c3]
traffic_server(_ZN7EThread13process_eventEP5Eventi+0xa2)[0x82f7042]
traffic_server(_ZN7EThread7executeEv+0x504)[0x82f79f4]
traffic_server[0x82f676c]
/lib/tls/i686/nosegneg/libpthread.so.0[0xb7735815]
/lib/tls/i686/nosegneg/libc.so.6(clone+0x5e)[0xb7134ebe]
/lib/tls/i686/nosegneg/libc.so.6(clone+0x5e)[0xb7134ebe]
Segmentation fault (core dumped)
</log>"	1	Bug	Cache, HTTPS, Reverse_Proxy, SSL, Segmenation_Fault, i386	3	Major	6	Closed
12455595	PDFBOX	lehmi	Unknown encoding for 'GBK-EUC-H'	"Unknown encoding for 'GBK-EUC-H' for chinese pdf document. To fix it.

1.add method to org.apache.pdfbox.pdmodel.font.PDFont.java

public String getEncodingName() {
        COSBase encoding = font.getDictionaryObject(COSName.ENCODING);
        if (encoding != null) {
            if (encoding instanceof COSName) {
                return ((COSName) encoding).getName();
            }
        }
        return null;
    }

2.modify  encode method.
from
        if( retval == null && cmap != null )
        {
                retval = cmap.lookup( c, offset, length );
        }
        //if we havn't found a value yet and
        //we are still on the first byte and
        //there is no cmap or the cmap does not have 2 byte mappings then try to encode
        //using fallback methods.

to

        if( retval == null && cmap != null )
        {
            String encodingStr = getEncodingName();
            if (encodingStr != null) {
                EncodingConverter converter = EncodingConversionManager.getConverter(encodingStr);
                if (converter != null) {
                    if (length == 1) return null;
                    retval = converter.convertBytes(c, offset, length, cmap);
                } else {
                    retval = cmap.lookup( c, offset, length );
                }
            } else {
                retval = cmap.lookup( c, offset, length );
            }
        }
        //if we havn't found a value yet and
        //we are still on the first byte and
        //there is no cmap or the cmap does not have 2 byte mappings then try to encode
        //using fallback methods.

"	1	Bug	encoding	3	Major	6	Closed
12455855	HIVE	cwsteinbach	Add Checkstyle documentation to developer guide	Add checkstyle documentation to the Hive developer manual.	3	Task	checkstyle	3	Major	6	Closed
12455867	WICKET	ivaynberg	setResponsePage in AjaxButton works WRONG in 1.4.6	"Suppose inside a BookmarkablePage which is mounted to ""CurrentPage"" , 
there is an AjaxButton , when clicked , it will setResponsePage(CurrentPage.class , pps)

If a user is browsing http://foo.bar/app/CurrentPage/key/value , and submit the AjaxButton , 
In 1.4.5 , he will be redirect to http://foo.bar/app/CurrentPage/key/value  , it is correct 
But in 1.4.6 , he will be redirect to http://foo.bar/app/CurrentPage/key/CurrentPage/key/value , it is WRONG

I think there may be something wrong in wicket2312's patch"	1	Bug	AjaxButton, setResponsePage	3	Major	5	Resolved
12455987	WW	lukaszlenart	Link broken in Struts documentation	The link to migration guide on the page: http://struts.apache.org/roadmap.html#migrate_s1 is broken. It points to http://struts.apache.org/2.x/WW/migration-guide.html but that page seems to have been moved to http://struts.apache.org/2.x/docs/migration-guide.html	4	Improvement	documentation, improvement	4	Minor	6	Closed
12456066	FELIX	rickhall	Fragment bundle ignored silently when the host Bundle-SymbolicName equals import package name	"I reproduce the problem with two simple bundles. Attachment is the test bundles.

The test case export a package org.bug.api and import by itself.

Fail silently When the host Bundle-SymbolicName=org.bug.api
Success When the host Bundle-SymbolicName=org.bug.apix

It may caused the name used as key for maps.


====================================================================
FAILURE
====================================================================
-> install file:/tmp/fail/bug.bundle.fragment-0.0.1-SNAPSHOT.jar
Bundle ID: 3
-> install file:/tmp/fail/bug.bundle.host-0.0.1-SNAPSHOT.jar
Bundle ID: 4
-> start 4
-> ps
[   3] [Installed  ] [    1] Unnamed -
org.bug:bug.bundle.fragment:bundle:0.0.1-SNAPSHOT (0.0.1.SNAPSHOT)
[   4] [Active     ] [    1] Unnamed -
org.bug:bug.bundle.host:bundle:0.0.1-SNAPSHOT (0.0.1.SNAPSHOT)




====================================================================
EXPECTED
====================================================================
-> install file:/tmp/success/bug.bundle.fragment-0.0.1-SNAPSHOT.jar
Bundle ID: 3
-> install file:/tmp/success/bug.bundle.host-0.0.1-SNAPSHOT.jar
Bundle ID: 4
-> start 4
DEBUG: WIRE: 4.0 -> org.osgi.framework -> 0
DEBUG: FRAGMENT WIRE: 3.0 -> hosted by -> 4.0
-> ps
[   3] [Resolved   ] [    1] Unnamed -
org.bug:bug.bundle.fragment:bundle:0.0.1-SNAPSHOT (0.0.1.SNAPSHOT)
[   4] [Active     ] [    1] Unnamed -
org.bug:bug.bundle.host:bundle:0.0.1-SNAPSHOT (0.0.1.SNAPSHOT)
"	1	Bug	fragment	3	Major	6	Closed
12456069	PIVOT	gbrown	Allow users to navigate list view content via keyboard	Make lists respond to letter keystrokes by jumping to the appropriate list item.	2	New Feature	api-change	4	Minor	5	Resolved
12456075	WICKET	ivaynberg	Throttling breaks AjaxFormSubmitBehavior's precondition check	"AjaxFormSubmitBehavior#getPreconditionScript() looks like:
return ""return Wicket.$$(this)&&Wicket.$$('"" + getForm().getMarkupId() + ""')"";

The javascript keyword 'this' should point to the DOM element which initiated the ajax event. (It wants to check that the component still exists on the page, before initiating the ajax request, as well as the form this behavior is linked to). When using an AjaxThrottlingCallDecorator to throttle the ajax request, the throttle callback function is not bound to the DOM element. The result is that 'this' refers to the window element, in the context of the throttle callback. The precondition function gets bind(this) called on it, but it's the wrong 'this'. I think that the throttle callback should be bound to 'this' at the time the callback is defined.

AbstractDefaultAjaxBehavior#throttleScript(...) should be changed from:

return new AppendingStringBuffer(""wicketThrottler.throttle( '"").append(throttleId)
			.append(""', "")
			.append(throttleDelay.getMilliseconds())
			.append("", function() { "")
			.append(script)
			.append(""});"");
to:
return new AppendingStringBuffer(""wicketThrottler.throttle( '"").append(throttleId)
			.append(""', "")
			.append(throttleDelay.getMilliseconds())
			.append("", function() { "")
			.append(script)
			.append(""}.bind(this));"");
"	1	Bug	AbstractDefaultAjaxBehavior, AjaxCallThrottlingDecorator, AjaxFormSubmitBehavior, ajax, throttle, throttleScript, wicket	3	Major	5	Resolved
12456114	FILEUPLOAD	simone.tripodi	ProgressListener doesn't work on Streaming API	When using the Streaming API the update()-method of my ProgressListener is not being called. If I use the parseRequest()-method instead the update()-method is called as expected. Any hints?	1	Bug	fileupload, progress_listener, streaming_api	3	Major	6	Closed
12456177	HBASE	jdcryans	Handle 10min+ network partitions between clusters	"We need a nice way of handling long network partitions without impacting a master cluster (which pushes the data). Currently it will just retry over and over again.

I think we could:

 - Stop replication to a slave cluster if it didn't respond for more than 10 minutes
 - Keep track of the duration of the partition
 - When the slave cluster comes back, initiate a MR job like HBASE-2221 

Maybe we want less than 10 minutes, maybe we want this to be all automatic or just the first 2 parts. Discuss."	7	Sub-task	replication	3	Major	6	Closed
12456198	ODE	vanto	Potential race condition when receiving messages before the IMA has been activated (Hibernate)	There is a potential race condition with the hibernate implementation when a message is received before the matching IMA has become active.	1	Bug	hibernate	3	Major	5	Resolved
12456201	HIVE	pauly	drop_partition_by_name() should use drop_partition_common()	drop_partition was refactored to separate common parts to a function in HIVE-1152. drop_partition_by_name should make use of the common function.	4	Improvement	metastore	3	Major	6	Closed
12454954	DERBY	kristwaa	Delete old releases from http://www.apache.org/dist	"The following old releases should be deleted from the main distribution folder:

 db-derby-10.3.3.0/              19-May-2008 23:36    -   
 db-derby-10.4.2.0/              08-Sep-2008 13:18    -   
 db-derby-10.5.1.1/              29-Apr-2009 18:03    -   
 db-derby-10.5.2.0/              31-Jul-2009 20:18    -   

They are all available via the archives, so should be removed to free up space on the mirrors (and the ASF mirror masters)."	3	Task	derby_backport_reject_10_8	3	Major	6	Closed
12456354	PIVOT	gbrown	Make Alert and Prompt properties mutable	"Specifically, type, message, options, and body. This will make it easier to work with these classes in WTKX.
"	4	Improvement	api-addition	4	Minor	5	Resolved
12456369	CASSANDRA	wolfeidau	cassandra-cli.bat batch file not passing arguments onto the main class	"If you run the following command in windows the arguments will not get passed to the CliMain class.

E:\Working\apache-cassandra-incubating-trunk>bin\cassandra-cli.bat --host 127.0.0.1 --port 9160
"	1	Bug	windows	10002	Normal	5	Resolved
12456441	WW	lukaszlenart	Move xwork core into Struts 2	Move Xwork core into Struts 2 directory and link it with Struts 2 master pom	4	Improvement	cleanup, maven, struts	3	Major	6	Closed
12456519	THRIFT	dreiss	Memory leak in TCompactProtocol	TCompactProtocol's member string_buf_ is realloc in TCompactProtocol::readBinary() but never freed.	1	Bug	leak, memory	3	Major	6	Closed
12456549	HARMONY	qiuxiaox	[jdktools] Implement the apt command line tool	"The Annotation Processing Tool (apt) is provided as part of the basic JDK tools (http://java.sun.com/javase/6/docs/technotes/tools/index.html). It is expected that the implementation will be written in Java using the samsa launcher.  It will be necessary to implement the missing class library packages that support the implementation,
namely:

  javax.annotation.processing
  javax.lang.model
  javax.lang.model.element
  javax.lang.model.type
  javax.lang.model.util
"	3	Task	gsoc, mentor	3	Major	1	Open
12456589	DERBY	sleroux	In ij GETCURRENTROWNUMBER directly writeits result  to output	"In ij, the statement GETCURRENTROWNUMBER directly write its result to output instead of returning it:

Here are the faulty lines in ij.ij, method GetCurrentRowNumber():
	...
	LocalizedResource.OutputWriter().println(utilInstance.getCurrentRowNumber(rs));
	return null;

This interferes with testing - and possibly with any external tool using the ij.ij parser.
"	1	Bug	ij	5	Trivial	6	Closed
12456600	HIVE	namit	Enforce bucketing for a table	"If the table being inserted is a bucketed, currently hive does not try to enforce that.
An option should be added for checking that.

Moreover, the number of buckets can be higher than the number of maximum reducers, in which
case a single reducer can write to multiple files."	2	New Feature	Bucketing	3	Major	6	Closed
12455287	PIG	zjffdu	Filter equality does not work for tuples	"From the documentation I understand that it should be possible to  filter a relation based on the equality of tuples. http://wiki.apache.org/pig/PigTypesFunctionalSpec , http://hadoop.apache.org/pig/docs/r0.5.0/piglatin_reference.html#deref:

 However with this data file

-- indext.txt:
(1,one) (1,ONE)
(2,two) (22, twentytwo)
(3,three)       (3,three)

I run this pig script:
A = LOAD 'indext.txt' AS (t1:(a:int, b:chararray), t2:(a:int, b:chararray)); B = FILTER A BY t1==t2; DUMP B;
Expecting the output:
((3,three),(3,three))

However there is an error:
2010-02-03 09:05:20,523 [main] ERROR org.apache.pig.tools.grunt.Grunt 
- ERROR 2067: EqualToExpr does not know how to handle type: tuple
> Pig Stack Trace
> ---------------
> ERROR 2067: EqualToExpr does not know how to handle type: tuple
> org.apache.pig.impl.logicalLayer.FrontendException: ERROR 1066:  
> Unable to
> open iterator for alias B
>        at org.apache.pig.PigServer.openIterator(PigServer.java:475)
>        at
> org.apache.pig.tools.grunt.GruntParser.processDump(GruntParser.java: 
> 532)
>        at
> org
> .apache
> .pig.tools.pigscript.parser.PigScriptParser.parse(PigScriptParser.
> java:190)
>        at
> org
> .apache
> .pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:166
> )
>        at
> org
> .apache
> .pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:142
> )
>        at org.apache.pig.tools.grunt.Grunt.exec(Grunt.java:89)
>        at org.apache.pig.Main.main(Main.java:397)
> Caused by: org.apache.pig.impl.logicalLayer.FrontendException: ERROR
> 1002:
> Unable to store alias B
>        at org.apache.pig.PigServer.store(PigServer.java:530)
>        at org.apache.pig.PigServer.openIterator(PigServer.java:458)
>        ... 6 more
> Caused by: org.apache.pig.backend.executionengine.ExecException:  
> ERROR 2067:
> EqualToExpr does not know how to handle type: tuple
>        at
> org
> .apache
> .pig.backend.hadoop.executionengine.physicalLayer.expressionOperat
> ors.EqualToExpr.getNext(EqualToExpr.java:108)
>        at
> org
> .apache
> .pig.backend.hadoop.executionengine.physicalLayer.relationalOperat
> ors.POFilter.getNext(POFilter.java:148)
>        at
> org
> .apache
> .pig.backend.hadoop.executionengine.physicalLayer.PhysicalOperator
> .processInput(PhysicalOperator.java:231)
>        at
> org
> .apache
> .pig.backend.local.executionengine.physicalLayer.counters.POCounte
> r.getNext(POCounter.java:71)
>        at
> org
> .apache
> .pig.backend.hadoop.executionengine.physicalLayer.PhysicalOperator
> .processInput(PhysicalOperator.java:231)
>        at
> org
> .apache
> .pig.backend.hadoop.executionengine.physicalLayer.relationalOperat
> ors.POStore.getNext(POStore.java:117)
>        at
> org
> .apache
> .pig.backend.local.executionengine.LocalPigLauncher.runPipeline(Lo
> calPigLauncher.java:146)
>        at
> org
> .apache
> .pig.backend.local.executionengine.LocalPigLauncher.launchPig(Loca
> lPigLauncher.java:109)
>        at
> org
> .apache
> .pig.backend.local.executionengine.LocalExecutionEngine.execute(Lo
> calExecutionEngine.java:165)

Thanks
Neil
"	1	Bug	equality, filter, tuple	3	Major	6	Closed
12456618	CXF	dkulp	Codegen generates unnecessary holder	"Since 2.2.6 the codegen plugin generates unnecessary holder. The attached file CxfUnnecessaryHolderService.wsdl can be used to reproduce it:

{code:title=2.2.5|borderStyle=solid}
    public de.test.dekies.webservices.customer.CustomerLoyalityActionData saveCxfUnnecessaryHolderData(
        @WebParam(name = ""CxfUnnecessaryHolderActionData"", targetNamespace = """")
        de.test.dekies.webservices.customer.CustomerLoyalityActionData cxfUnnecessaryHolderActionData,
{code} 

{code:title=2.2.6|borderStyle=solid}
    public void saveCxfUnnecessaryHolderData(
        @WebParam(mode = WebParam.Mode.INOUT, name = ""CxfUnnecessaryHolderActionData"", targetNamespace = """")
        javax.xml.ws.Holder<CustomerLoyalityActionData> cxfUnnecessaryHolderActionData,
{code} "	1	Bug	codegen	3	Major	6	Closed
12456626	SYNAPSE	ruwan	Synapse strips the quotes from SOAPAction attribute	"when a SOAP-message passes synapse the SOAPAction attribute will be stripped off its quotes. It does not seem to be a big thing as my JAX-WS web service still process the request, but complains:

 

17.02.2010 23:28:44 com.sun.xml.internal.ws.transport.http.HttpAdapter fixQuotesAroundSoapAction

WARNUNG: Received WS-I BP non-conformant Unquoted SoapAction HTTP header: addx

 

 

##############  my synapse.xml  ################

 

<definitions xmlns=""http://ws.apache.org/ns/synapse"">

 

    <in>

        <!-- Log all messages passing through -->

        <log level=""full""/>

            <send/>

    </in>

    <out>

        <log level=""full""/>

        <send/>

    </out>

</definitions>

 

 

############ SOAP-message get into synapse ###########

 

POST http://127.0.0.1:9876/soap/add1.add1HttpSoap11Endpoint HTTP/1.1

Content-Type: text/xml; charset=UTF-8

SOAPAction: ""addx""

User-Agent: Axis2

Host: 127.0.0.1:9876

Proxy-Connection: Keep-Alive

Transfer-Encoding: chunked

 

2de

<?xml version='1.0' encoding='UTF-8'?><soapenv:Envelope xmlns:soapenv=""http://schemas.xmlsoap.org/soap/envelope/""><soapenv:Header><addr:To xmlns:addr=""http://www.w3.org/2005/08/addressing"">http://127.0.0.1:9876/soap/add1.add1HttpSoap11Endpoint</addr:To><addr:Action xmlns:addr=""http://www.w3.org/2005/08/addressing"">addx</addr:Action><addr:ReplyTo xmlns:addr=""http://www.w3.org/2005/08/addressing""><addr:Address>http://www.w3.org/2005/08/addressing/anonymous</addr:Address></addr:ReplyTo><addr:MessageID xmlns:addr=""http://www.w3.org/2005/08/addressing"">uuid:hqejbhcnphr51wo3bwjqam</addr:MessageID></soapenv:Header><soapenv:Body><addx xmlns=""http://adder.services/"">

  <arg0 xmlns="""">0</arg0>

</addx></soapenv:Body></soapenv:Envelope>

0

 

##############  SOAP-message leaving synapse ################

 

POST http://127.0.0.1:9876/soap/add1.add1HttpSoap11Endpoint HTTP/1.1

Host: 127.0.0.1:9876

Proxy-Connection: Keep-Alive

SOAPAction: addx

Content-Type: text/xml; charset=UTF-8

Transfer-Encoding: chunked

Connection: Keep-Alive

User-Agent: Synapse-HttpComponents-NIO

 

fb

<?xml version='1.0' encoding='UTF-8'?><soapenv:Envelope xmlns:soapenv=""http://schemas.xmlsoap.org/soap/envelope/""><soapenv:Header /><soapenv:Body><addx xmlns=""http://adder.services/"">

  <arg0 xmlns="""">0</arg0>

</addx></soapenv:Body></soapenv:Envelope>

0

 

##############################################################

 

notice: first it was SOAPAction = ""addx"", then SOAPAction = addx
"	1	Bug	SOAPAction	3	Major	5	Resolved
12456670	AXIS2C	shankar	XML numeric entities are not parsed by guththila	"The guththila_token_evaluate_references function does not parse numeric entities such as &#65; or &#x41; (which should map to the letter 'A').

A test case is attached.

Here is its output:
1..2
not ok
#    input: <root>abc&#x41;&#x42;def</root>
#      got: <root>abc&amp;#x41;&amp;#x42;def</root>
# expected: <root>abcABdef</root>
not ok
#    input: <root>abc&#65;&#66;def</root>
#      got: <root>abc&amp;#65;&amp;#66;def</root>
# expected: <root>abcABdef</root>


"	1	Bug	TAP, UTF-8, Unicode, XML, encoding, entities, entity	1	Blocker	5	Resolved
12456678	TS	georgep	Mask Version Info in response header 'via'	"I was looking at the response headers and found something along the lines of:

Via	HTTP/1.1 <proxy> (ApacheTrafficServer/2.0.0-alpha [cMsSf ])

Would like an option to mask the version info for security purposes."	1	Bug	config, display, header, information, mask, response, security, version, via	4	Minor	6	Closed
12455378	SOLR	noble.paul	DIH multithreading sometimes throws NPE	"When the ""threads"" attribute is set on a root entity in the DIH's data-config.xml, the multithreading code sometimes throws a NullPointerException after the full-index command is given.

I haven't yet been able to figure out exactly which reference holds the null or why, but it does happen consistently with the same backtrace.

My configuration is:

1. Multi-core Solr under tomcat
2. Using JdbcDataSource and the default SqlEntityProcessor

To reproduce:

1. Add the attribute threads=""2"" to the root entity declaration in data-config.xml
2. Send the full-import command either directly to .../core/dataimport?command=full-import or through the /admin/dataimport.jsp control panel.
3. Wait for the NPE to show up in the logs/console
"	1	Bug	dih, multithread	3	Major	5	Resolved
12456747	MAHOUT	drew.farris	Collocations: improve performance by making Gram BinaryComparable	"Robin's profiling indicated that a large portion of a run was spent in readFields() in Gram due to the deserialization occuring as a part of Gram comparions for sorting. He pointed me to BinaryComparable and the implementation in Text.

Like Text, in this new implementation, Gram stores its string in binary form. When encoding the string at construction time we allocate an extra character's worth of data to hold the Gram type information. When sorting Grams, the binary arrays are compared instead of deserializing and comparing fields.

 "	4	Improvement	binary, collocations, comparison	4	Minor	6	Closed
12455462	HIVE	he yongqiang	bucketing mapjoin where the big table contains more than 1 big partition		2	New Feature	Bucketing	3	Major	6	Closed
12455466	DOSGI	chris@die-schneider.net	Better handling for port conflicts when using property org.apache.cxf.rs.address	"Below is an exception from the mailing list thread that describes the issue... (reverse order!)


I see....Perhaps it could recognize that a conflict will occur and print a more meaningful exception message advising users to use a context property. If DOSGI will try to silently attach the endpoint to a paxweb-enabled HttpService then it might become complicated (paxweb may not be installed in case of multibindle distro) or a user might've used the explicit address exactly because a standalone jetty were expected to start, etc...

Can you please open a JIRA in a DOSGI subproject so that we can track this issue and discuss how to fix it ?

thanks, Sergey

----- Original Message ----- From: ""Daniel Bimschas"" <bimschas@itm.uni-luebeck.de>
To: <users@cxf.apache.org>
Sent: Friday, February 05, 2010 3:07 PM
Subject: Re: DOSGi and JSON responses


Oh, I know of the org.osgi.service.http.port value that lets Pax Web start it's Jetty instance on 8080 per default. I tried to say that users of DOSGI (especially newbies) would certainly expect that using ""org.apache.cxf.rs.address"" would work nevertheless by simply using the same port (i.e. if there's no web context conflict).

I guess that some DOSGI (or CXF) bundle which is responsible for registering the JAX-RS servlet to some Jetty instance could surely check if there's a servlet container instance running on the desired port and reusing that instance...

Daniel

Am 05.02.2010 um 15:56 schrieb Sergey Beryozkin:

Hi

This can be easily fixed AFAIK, I can't recall the name of the paxweb property but you can ensure its Httpservice occupies some other port...Just checked in ServiceMix, it is

org.osgi.service.http.port=8181,

add it to felix/etc/config.properties. etc

cheers, Sergey

Sergey,

I just stumbled over another issue that may annoy DOSGI users. If you start the single bundle distribution (no idea if it's the same with multi bundle) it starts a Jetty on localhost:8080 which should be usable like a OSGi compendium HTTP service (that's what I understood at least). Now if one uses the JAX-RS stuff and registers it's instance with the ""org.apache.cxf.rs.address"" property he will have to choose a port other than 8080 or he'll get the following exception:

WARNUNG: WARNING : Problem creating a remote endpoint for de.uniluebeck.itm.soapraktikum.ws0910.persons.vz.rest.PersonResource from CXF PublishHook, reason is null
org.apache.cxf.service.factory.ServiceConstructionException
at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.create(JAXRSServerFactoryBean.java:114)
at org.apache.cxf.dosgi.dsw.handlers.JaxRSPojoConfigurationTypeHandler.createServer(JaxRSPojoConfigurationTypeHandler.java:129)
at org.apache.cxf.dosgi.dsw.hooks.ServiceHookUtils.createServer(ServiceHookUtils.java:86)
at org.apache.cxf.dosgi.dsw.hooks.CxfPublishHook.createServer(CxfPublishHook.java:106)
at org.apache.cxf.dosgi.dsw.hooks.CxfPublishHook.publishEndpoint(CxfPublishHook.java:80)
at org.apache.cxf.dosgi.dsw.Activator$1.run(Activator.java:164)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:637)
Caused by: org.apache.cxf.interceptor.Fault: Could not start Jetty server: Address already in use
at org.apache.cxf.transport.http_jetty.JettyHTTPServerEngine.addServant(JettyHTTPServerEngine.java:339)
at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.activate(JettyHTTPDestination.java:157)
at org.apache.cxf.transport.AbstractObservable.setMessageObserver(AbstractObservable.java:48)
at org.apache.cxf.binding.AbstractBindingFactory.addListener(AbstractBindingFactory.java:164)
at org.apache.cxf.endpoint.ServerImpl.start(ServerImpl.java:122)
at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.create(JAXRSServerFactoryBean.java:105)
... 8 more
Caused by: java.net.BindException: Address already in use
at sun.nio.ch.Net.bind(Native Method)
at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:119)
at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:59)
at org.mortbay.jetty.nio.SelectChannelConnector.open(SelectChannelConnector.java:205)
at org.mortbay.jetty.nio.SelectChannelConnector.doStart(SelectChannelConnector.java:304)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
at org.mortbay.jetty.Server.doStart(Server.java:233)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
at org.apache.cxf.transport.http_jetty.JettyHTTPServerEngine.addServant(JettyHTTPServerEngine.java:306)
... 13 more

I guess it should be possible to reuse the running Jetty instance and deploy the instance to the standard OSGi HTTP service. At least that's what a user would expect. What do you think about it?

Kind regards,
Daniel"	4	Improvement	configuration	4	Minor	5	Resolved
12456759	AXIS2C	nandika	Memory leak in axis2_engine_send	"Hi guys, 

I found a memory leak, which is pretty annoyng to me. It is small, but my applications runs really long time, and it sends frequent requests.
I'm developing under windows and I'm using a nice memory leak tool, called Visual Leak Detector.
Here is the Visual Leak Detector stacktrace report:

    d:\workspaces\toptapi\cti-build-setups\axis2c-src-1.6.0\util\src\allocator.c (75): axutil_allocator_malloc_impl
    d:\workspaces\toptapi\cti-build-setups\axis2c-src-1.6.0\util\src\stream.c (86): axutil_stream_create_internal
    d:\workspaces\toptapi\cti-build-setups\axis2c-src-1.6.0\util\src\stream.c (510): axutil_stream_create_socket
    0x01021760 (File and line number not available): (Function name unavailable)
    0x01024D65 (File and line number not available): (Function name unavailable)
    0x0102B66A (File and line number not available): (Function name unavailable)
    0x0102A9A5 (File and line number not available): (Function name unavailable)
    d:\workspaces\toptapi\cti-build-setups\axis2c-src-1.6.0\src\core\engine\engine.c (176): axis2_engine_send
    d:\workspaces\toptapi\cti-build-setups\axis2c-src-1.6.0\src\core\clientapi\op_client.c (1171): axis2_op_client_two_way_send
    d:\workspaces\toptapi\cti-build-setups\axis2c-src-1.6.0\src\core\clientapi\op_client.c (508): axis2_op_client_execute
    d:\workspaces\toptapi\cti-build-setups\axis2c-src-1.6.0\src\core\clientapi\svc_client.c (733): axis2_svc_client_send_receive_with_op_qname

The (Function name unavailable) is actually a macro, that's why it can't find the stacktrace. It is in line 176:

status = AXIS2_TRANSPORT_SENDER_INVOKE(transport_sender, env, msg_ctx);

This macro actually allocates memory for  an axutil_stream_t *stream in axis2c-src-1.6.0\util\src\stream.c (510): axutil_stream_create_socket function.
This stream is never freed.

Could you add the call to axutil_stream_free(...) where appropriate?"	1	Bug	axis2	1	Blocker	5	Resolved
12456797	FELIX	karlpauls	The log4j from felix launcher is messing up felix osgi container 	"**** This issue is not type question rather than a bug ****

I have created a launcher programme which is responsible for laoding the config values and instantiating the felix container (1.4.1). 

Everything is working fine except for one small glitch.  Please take a look for following error message thrown by the log4j bundle. 

The launcher programme is using log4j for logging. But when it starts the felix container, log4j bundle is installed since it is used by the application itself. 
I have listed deployed bundles further below. 

My view is, the log4j library loaded by launcher is visible to felix container and hence log4j bundle fails to start cleanly. This is going to be a big problem for dpeloyment. 

I am using felix 1.4.1, is that too old to be good? 

Is there any setting that I need to pass to instruct the felix to create comepletly new classloader as system-classloader? Being a OSGI container I expected it to create new class-loader as system-classloader but now I feel it does not.  

Can someome please help me understand? 

Shrini




===

log4j: reset attribute= ""false"".
log4j: Threshold =""null"".
log4j: Level value for root is  [DEBUG].
log4j: root level set to DEBUG
log4j: Class name: [org.apache.log4j.RollingFileAppender]
log4j: Setting property [file] to [**************/launcher.log].
log4j: Setting property [append] to [true].
log4j: Setting property [maxFileSize] to [10MB].
log4j: Setting property [maxBackupIndex] to [15].
log4j: Parsing layout of class: ""org.apache.log4j.PatternLayout""
log4j: Setting property [conversionPattern] to [%d{dd MMM yyyy HH:mm:ss,SSS} %t %-5p %c{2} - %m%n].
log4j: setFile called: **************/launcher.log, true
log4j: setFile ended
log4j: Adding appender named [FILE] to category [root].
-> log4j:ERROR A ""org.apache.log4j.xml.DOMConfigurator"" object is not assignable to a ""org.apache.log4j.spi.Configurator"" variable.
log4j:ERROR The class ""org.apache.log4j.spi.Configurator"" was loaded by
log4j:ERROR [6.0] whereas object of type
log4j:ERROR ""org.apache.log4j.xml.DOMConfigurator"" was loaded by [sun.misc.Launcher$AppClassLoader@17182c1].
log4j:ERROR Could not instantiate configurator [org.apache.log4j.xml.DOMConfigurator].
log4j:WARN No appenders could be found for logger (org.springframework.osgi.extender.internal.activator.ContextLoaderListener).
log4j:WARN Please initialize the log4j system properly.

=====

[   0] [Active     ] [    0] System Bundle (2.0.1)
[   1] [Active     ] [    5] AOP Alliance API (1.0.0)
[   2] [Active     ] [    5] Apache Commons Collections (3.2.0)
[   3] [Active     ] [    5] Apache Commons Lang (2.4.0)
[   4] [Active     ] [    5] Apache Commons Logging (1.1.1)
[   5] [Active     ] [    5] Apache Commons Pool (1.3.0)
[   6] [Active     ] [    5] Apache Log4J (1.2.15)
[   7] [Active     ] [    5] Apache Felix Bundle Repository (1.4.2)
[   8] [Active     ] [    5] Apache Felix Shell Service (1.4.1)
[   9] [Active     ] [    5] Apache Felix Shell TUI (1.4.1)
[  10] [Active     ] [    5] Spring AOP (2.5.6)
[  11] [Active     ] [    5] Spring Beans (2.5.6)
[  12] [Active     ] [    5] Spring Context (2.5.6)
[  13] [Active     ] [    5] Spring Context Support (2.5.6)
[  14] [Active     ] [    5] Spring Core (2.5.6)
[  15] [Active     ] [    5] spring-osgi-core (1.2.1)
[  16] [Active     ] [    5] spring-osgi-extender (1.2.1)
[  17] [Active     ] [    5] spring-osgi-io (1.2.1)

============


"	1	Bug	classloader, launcher, system	3	Major	6	Closed
12454952	DERBY	kristwaa	Old download pages should refer to archive.apache.org only	"The download page still shows lots of really old releases, which is fine.

However, some of their download pages 

http://db.apache.org/derby/releases/release-10.2.2.0.html#Distributions
http://db.apache.org/derby/releases/release-10.4.1.3.html#Distributions
http://db.apache.org/derby/releases/release-10.4.2.0.html#Distributions
http://db.apache.org/derby/releases/release-10.3.3.0.html#Distributions
http://db.apache.org/derby/releases/release-10.5.1.1.html#Distributions

still point to www.apache.org for the hashes and sig files. 
The pages should point to archive.apache.org for both the releases and the hashes/sigs.
"	1	Bug	derby_backport_reject_10_8	3	Major	6	Closed
12455820	WICKET	jdonnerstag	Form#anyComponentError change in 1.4 breaks validation	In wicket 1.4, Form#anyComponentError was changed so that it only calls hasErrorMessage() on instances of Form or FormComponent. This is a validation-breaking change. Currently, when Component#error(...) is called for any component which is neither a Form nor FormComponent, the error is ignored by a Form#hasError() check on the form containing this component. Please change it back to check any Component.	1	Bug	Form, anyComponentError, hasError, hasErrorMessage, validation, wicket	3	Major	5	Resolved
12455836	TS	raghavj	Improve stats API	"As it stands today, traffic server limits the number of stats that can be registered to 250. 
The code must be changed to allow a large number of stats (100000)  to be tracked.
The API for adding coupled stats is cumbersome to use and as a result, has very few users. Current stats API must be cleaned up or gotten rid of.

Thanks,
--raghav
"	4	Improvement	cleanup, stats	3	Major	6	Closed
12455864	SOLR	noble.paul	DataImportHandler: dataimporter.functions.escapeSql() does not escape backslash character	"MySQL requires that the backslash and the quote character used to quote the string in the query be escaped.  Currently only single and double quotes are escaped.

See: http://dev.mysql.com/doc/refman/4.1/en/mysql-real-escape-string.html"	1	Bug	dih	3	Major	5	Resolved
12456921	PHOTARK	luis.gsoc	Provide support for subscribing to Google Picasa albuns (GData based)	Allow the ability for a user to create a new album, that points to a remote photo feed from Picasa.	2	New Feature	gsoc, mentor	3	Major	5	Resolved
12456946	ESME	rhirsch	Search in the web interface is case sensitive (and not in a good way)	"Search through the web interface is case sensitive in a bad way.

Recreation instructions:

1. Create a new message, with body ""Test""
2. Search for ""Test"" - the message is not returned in the results
3. Search for ""test"" - the message is returned!

This happens because there is a discrepancy between the way that message bodies are normalized and entered into the search database and the was that search terms are normalized to be turned into queries of the search database."	1	Bug	search	3	Major	6	Closed
12455169	UIMA	cwiklik	CPM setAnalysisEngine throws IndexOutOfBounds	"A user tried to do several calls to aCPM.setAnalysisEngine(xxx).  This method is set up to remove a previous AE if it exists, replacing it with the new one.

See http://markmail.org/message/3s2w7hxb24l3czky
There are several issues:

The method CPMEngine removeCasProcessor(int aCasProcessorIndex) has a bad bounds test, need to change
{noformat}
    if (aCasProcessorIndex < 0 || aCasProcessorIndex > annotatorList.size())  to
    if (aCasProcessorIndex < 0 || aCasProcessorIndex >= annotatorList.size())
{noformat} 

The CPMEngine class uses two different collections to represent lists of analysis engines:
*  casprocessorList (an array - includes AEs and Cas Consumers)
* annotatorList (a linked list, not sure if it has both AEs and Cas Consumers)

The CPMImpl setAnalysisEngine seems to have set something which shows up in the array from getCasProcessors call, while the ""annotatorList"" is not updated and remains empty.

This method:
{noformat}
  public void removeCasProcessor(CasProcessor aCasProcessor) { 
    cpEngine.removeCasProcessor(0);
  }
{noformat}
 
ignores its argument, and removes the 0'th CasProcessor.  This seems wrong, given the Javadoc.

The Javadoc for setAnalysisEngine's javadoc should emphasize that this is a convenience method for the common case of supporting a single AE. If it is called multiple times, it will replace the first AE (if it exists) .  The Javadocs should be expanded to say if you want to add multiple AEs to a pipe line, to not use this method, but use addCasProcessor instead. "	1	Bug	Stale	4	Minor	5	Resolved
12456975	HBASE	tsuna	Unnecessary call to syncWal(region); in HRegionServer	"Some methods unconditionally call {{syncWal}} on the region even though the operation specifically asks to not use the WAL.

The most obvious example is in {{incrementColumnValue}} where, regardless of the value of the argument {{writeToWAL}}, we always call {{syncWal(region);}}."	4	Improvement	performance	4	Minor	6	Closed
12455295	CXF	dkulp	LogUtils does not recognize SLF4J due to invallid Class.forName()  	"LogUtils uses Class.forName(""org/slf4j/impl/StaticLoggerBinder"") to determine if SLF4J is present. This will always throw a ClassNotFound exception which is ignored in the catch and JUL gets used. The correct statement should be Class.forName(""org.slf4j.impl.StaticLoggerBinder""); Which then will initialize logging correctly.
"	1	Bug	logging, slf4j	4	Minor	6	Closed
12455322	CASSANDRA	tzz	bitmasks applied to SliceRange	Add bitmasks (OR of an array of ANDs) to the SliceRange.  Make them optional.	2	New Feature	api	10003	Low	5	Resolved
12456044	XERCESC	bsk	spelling fixes for xerces	I was running a spelling fix process against a Symbian repository and discovered that a portion of the changes was to Xerces, so I'm trying to deliver the spelling fixes here.	1	Bug	cleanup	5	Trivial	6	Closed
12456118	FILEUPLOAD	simone.tripodi	"If ServletFileUpload.setSizeMax() is set the values ""bytesRead"" and ""contentLength"" of the ProgressListeners update()-method are ZERO"	"I wrote a ProgressListener to visualize the upload of a file.
The Listener works as expected as long as the sizeMax-value of the ServletFileUpload class is not explicitly set.
If it is set the update()-method of the ProgressListener has ZERO-values for bytesRead and contentLength ... whats wrong here?
\\
\\
{code:title=UploadServlet.java|borderStyle=solid}
...
FileItemFactory factory = new DiskFileItemFactory();
ServletFileUpload upload = new ServletFileUpload(factory);
upload.setHeaderEncoding(request.getCharacterEncoding());
upload.setFileSizeMax(DEFAULT_SIZE_MAX);
// if sizeMax is set the update()-method has ZERO values for bytesRead and contentLength
//upload.setSizeMax(DEFAULT_SIZE_MAX);
FileUploadListener listener = new FileUploadListener(request);
upload.setProgressListener(listener);
			
List items = null;
try {
   items = upload.parseRequest(request);
}
...
{code} 

{code:title=FileUploadListener.java|borderStyle=solid}
public class FileUploadListener implements ProgressListener
{
   private volatile long 
   bytesRead = 0L,
   contentLength = -100L,
   tenKBRead = -1L,
   startTime = System.currentTimeMillis();
		
   public FileUploadListener(HttpServletRequest request) 
   {
      final HttpSession session = request.getSession();
      session.setAttribute(""FILE_UPLOAD_LISTENER"", this);			
   }
	    	
   public void update(long aBytesRead, long aContentLength, int anItem)	    
   {
      long tenKB = aBytesRead / 10240;
      if (tenKBRead == tenKB)
         return;
      tenKBRead = tenKB;
      bytesRead = aBytesRead;
      if (contentLength != aContentLength)
         contentLength = aContentLength;
   }

   public long getBytesRead() 
   {
      return bytesRead;
   }

   public long getContentLength() 
   {
      return contentLength;
   }
	    
   public long getElapsedTimeInSeconds()
   {
      return (System.currentTimeMillis() - startTime) / 1000;
   }
}
{code} "	1	Bug	Zero, bytesRead, contentLength, fileupload, progress_listener, sizeMax	3	Major	6	Closed
12456154	IBATIS	cbegin	Unable to access oracle ref cursor as OUT parameter	"Hi,

I am trying to execute a stored procedure from my web application using Ibatis 3.0 Beta 9 version. 
Following is snippet from mapper.xml file:

<resultMap id=""userDataResultMap"" type=""TestUserData"">
		<id property=""userid"" column=""userid"" />
		<result property=""firstName"" column=""firstName""/>
		<result property=""lastName"" column=""lastName""/>
		<result property=""zip"" column=""zip""/>
		<result property=""summary"" column=""summary""/>
		<result property=""specialities"" column=""specialities""/>
		<result property=""isActive"" column=""isActive""/>
		<result property=""country"" column=""country""/>
		<result property=""platform"" column=""platforms""/>
	</resultMap>


	<select id=""getFullPublicData""   statementType=""CALLABLE"" parameterType=""User""  >
		{call p_user_public_data(#{userId},#{userData,mode=OUT,jdbcType=CURSOR,javaType=TestUserData,resultMap=userDataResultMap},#{noOfConnections,mode=OUT,jdbcType=NUMERIC,javaType=int},#{noOfRecommendations,mode=OUT,jdbcType=NUMERIC,javaType=int})}
	</select>

The stored procedure is getting executed, but I am getting following error message while I execute using Ibatis, It seems there is some issue with OUT parameter which has a Oracle ref cursor as jdbc type.

org.apache.ibatis.exceptions.IbatisException: 
### Error querying database.  Cause: java.lang.NullPointerException
### The error may involve com.test.data.UserPublicViewMapper.getFullPublicData-Inline
### The error occurred while setting parameters
### Cause: java.lang.NullPointerException
	org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:8)
	org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:61)
	org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:53)
	org.apache.ibatis.session.defaults.DefaultSqlSession.selectOne(DefaultSqlSession.java:38)
	org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:66)
	org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:35)
	$Proxy6.getFullPublicData(Unknown Source)
	com.test.service.UserPublicViewDO.getUserPublicData(UserPublicViewDO.java:29)
	com.test.action.UserPublicDataAction.execute(UserPublicDataAction.java:18)
	sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	java.lang.reflect.Method.invoke(Unknown Source)
	com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:441)
	com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:280)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:243)
	com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:165)
	com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:252)
	org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
	com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:122)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
	com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
	com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:179)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:235)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:89)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:130)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:267)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:126)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:138)
	com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:165)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:179)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
	org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:488)
	org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:395)


root cause 

java.lang.NullPointerException
	org.apache.ibatis.executor.resultset.FastResultSetHandler.handleOutputParameters(FastResultSetHandler.java:64)
	org.apache.ibatis.executor.statement.CallableStatementHandler.query(CallableStatementHandler.java:43)
	org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:55)
	org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:41)
	org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:90)
	org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:68)
	org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:59)
	org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:53)
	org.apache.ibatis.session.defaults.DefaultSqlSession.selectOne(DefaultSqlSession.java:38)
	org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:66)
	org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:35)
	$Proxy6.getFullPublicData(Unknown Source)
	com.test.service.UserPublicViewDO.getUserPublicData(UserPublicViewDO.java:29)
	com.test.action.UserPublicDataAction.execute(UserPublicDataAction.java:18)
	sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	java.lang.reflect.Method.invoke(Unknown Source)
	com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:441)
	com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:280)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:243)
	com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:165)
	com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:252)
	org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
	com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:122)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
	com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
	com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:179)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:235)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:89)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:130)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:267)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:126)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:138)
	com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:165)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:179)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
	org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
	org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:488)
	org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:395)


Any suggestion would be helpful as it has become a show stopper in my project.

Thanks,
Arpana"	1	Bug	CURSOR, OUT, procedure, stored	3	Major	6	Closed
12457067	VXQUERY	sjaco002	add architecture summary to site		4	Improvement	starter	3	Major	1	Open
12455349	PIVOT	tvolkert	Protected Component attributes methods doesn't work for custom components	"The existing protected attributes methods in Component don't allow custom components (those outside of the WTK package) to leverage attributes, because ""A protected member or constructor of an object may be accessed from outside the package in which it is declared only by code that is responsible for the implementation of that object."" [1]

This ticket proposes to change the attributes methods to the following signatures:

    public <T extends Enum<T>> Object getAttribute(T key);
    public <T extends Enum<T>> Object setAttribute(T key, Object value);

Containers will define their own attribute enum values to implement their static attribute-based methods.

[1] http://java.sun.com/docs/books/jls/third_edition/html/names.html#6.6.2"	4	Improvement	api-change	4	Minor	5	Resolved
12455449	WICKET	ivaynberg	RequestCycle.detach() recreates SessionData after logout	"After every page request the RequestCycle asks the RequestLogger (if any) to write the time taken etc to the logger (using the SessionData of the current Session). If none exists then a new SessionData is created (RequestLogger line 250). However when a user logs out the SessionData is destroyed, but the page still has to detach and thus creates a new SessionData entity. 

When we lookup the live sessions 	and peak sessions from RequestLogger, the two numbers are (nearly) always the same. Which is wrong when all users have logged out or closed their browser (no difference there)."	1	Bug	login, logout, requestcycle, requestlogger, session, sessiondata	4	Minor	5	Resolved
12455510	FELIX	mcculls	Service-Component property doesn't allow to use wildcards for filenames	"According to the OSGI 4.2 compendium specification it is allowed to use wildcards for the Service-Component manifest entry:

> XML documents containing component descriptions must be specified by the Service-Component header in the manifest. The value of the header is a comma separated list of paths to > XML entries within the bundle.
> Service-Component ::= header // 3.2.4
> The Service-Component header has no architected directives or properties.
> The last component of each path in the Service-Component header may use wildcards so that Bundle.findEntries can be used to locate the XML docu- ment within the bundle and its fragments. For example:
> Service-Component: OSGI-INF/*.xml

If I try to configure maven-bundle-plugin with the following settings:

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.felix</groupId>
                <artifactId>maven-bundle-plugin</artifactId>
                <extensions>true</extensions>
                <version>2.0.1</version>
                <configuration>
                    <instructions>
                        <Bundle-SymbolicName>${pom.groupId}.${pom.artifactId}</Bundle-SymbolicName>
                        <Private-Package>${pom.groupId}.${pom.artifactId}.*</Private-Package>
                        <Service-Component>OSGI-INF/*.xml</Service-Component>
                    </instructions>
                </configuration>
            </plugin>
        </plugins>
    </build>

I get the following Exception during execution:

Bad Service-Component header: OSGI-INF/*.xml, no such file OSGI-INF/*.xml
java.lang.NullPointerException
	at java.util.zip.ZipFile.getInputStream(ZipFile.java:180)
	at org.osgi.impl.bundle.obr.resource.BundleInfo.doDeclarativeServices(BundleInfo.java:194)
	at org.osgi.impl.bundle.obr.resource.BundleInfo.build(BundleInfo.java:95)
	at org.apache.felix.obrplugin.ExtractBindexInfo.<init>(ExtractBindexInfo.java:86)
	at org.apache.felix.obrplugin.ObrUpdate.updateRepository(ObrUpdate.java:223)
	at org.apache.felix.obrplugin.ObrInstall.updateLocalBundleMetadata(ObrInstall.java:183)
	at org.apache.felix.obrplugin.ObrInstall.execute(ObrInstall.java:142)
	at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:556)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:535)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
	at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
	at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
	at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
	at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
	at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
org.apache.maven.plugin.MojoExecutionException: Exception
	at org.apache.felix.obrplugin.ExtractBindexInfo.<init>(ExtractBindexInfo.java:91)
	at org.apache.felix.obrplugin.ObrUpdate.updateRepository(ObrUpdate.java:223)
	at org.apache.felix.obrplugin.ObrInstall.updateLocalBundleMetadata(ObrInstall.java:183)
	at org.apache.felix.obrplugin.ObrInstall.execute(ObrInstall.java:142)
	at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:556)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:535)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
[ERROR] unable to build Bindex informations
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
	at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
	at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
	at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
[WARNING] Exception while updating local OBR: BindexException
	at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
org.apache.maven.plugin.MojoExecutionException: BindexException
	at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
	at org.apache.felix.obrplugin.ObrUpdate.updateRepository(ObrUpdate.java:230)
	at org.apache.felix.obrplugin.ObrInstall.updateLocalBundleMetadata(ObrInstall.java:183)
	at org.apache.felix.obrplugin.ObrInstall.execute(ObrInstall.java:142)
	at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:556)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:535)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
	at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
	at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
	at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
	at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
	at org.codehaus.classworlds.Launcher.main(Launcher.java:375)"	1	Bug	bnd, ds, maven, scr, service-component	3	Major	6	Closed
12455562	PDFBOX	lehmi	Fonts should not be cached by PDFStreamEngine	"org.apache.pdfbox.util.PDFStreamEngine
   Fonts are cached using variable 'private Map documentFontCache = new HashMap();'
   which is used in method 'processSubStream()' and the call 'sr.fonts = resources.getFonts(documentFontCache);

The problem is that PDF documents can store a limited range of 'firstChar' and 'lastChar' (maybe just a space char),  and then expand that range at a later point within the same page. When the font is cached, those updates are ignored. 

In particular, test  'http://www.encana.com/investor/financial/shareholder/pdfs/info-circular-french.pdf, pg 1'.   
Using font caching, the widths of the characters in the upper right corner of the page are reported as zero, and the text extraction and text merging is compromised.
Without font caching, the widths are correct. There are other examples that cause the same problem.

To fix the problem change the call in method 'processSubStream()' to:
             sr.fonts = resources.getFonts(null);

There was some effort put into font caching.  Unfortunately, it should not be used on unknown documents.
 "	1	Bug	PDFStreamEngine, fontwidth	3	Major	6	Closed
12456298	KARAF	pieber	Improve error reporting for features installer	"When a feature is installed and one of the to-be-installed bundles raises an exception, the feature installer only reports 'null' on the console to the user. The error reporting should be improved so that at least the user knows which bundle caused the error (the only way to know currently is to switch logs to TRACE level and note the last bundle trying to install).

Steps to reproduce:
1. unzip one of the bundles of a feature (the bundle can already be installed, it does not change anything)
2. Make a trivial change in the Manifest
3. Zip again the bundle using 7-Zip file archiver (mode: ZIP format, normal compression)
4. Change the file name to xxx.jar and copy it back to your Maven local repository (note: if the file was taken from Karaf 'system' repository, it should be placed here back again).

This way we have created a bundle whose Manifest won't be found by the Jar reader.

5. Install the feature containing your bundle

When the feature installer tries to open the target bundle to compare version to the currently installed version, it will raise an exception. The exception is catched, but on the console only ""null"" is displayed."	1	Bug	features, packaging	4	Minor	6	Closed
12457124	HBASE	stack	PE defaults to 1k rows - uncommon use case, and easy to hit benchmarks	"The PerformanceEvaluation uses 1k rows, which I would argue is uncommon, and also provides an easy to hit performance goal.  Most of the harder performance issues happens at the low and high side of cell size.  In our own application, our key sizes range from 4 bytes to maybe 100 bytes.  Very rarely 1000 bytes.  If we have large values, they are VERY large, like multiple k sizes.

Recently a change went into HBase that ran well with PE because the overhead of 1k rows is very low in memory, but under small rows, the expected performance would be hit much more.  This is because the per-value overhead (eg: node objects of the skip list/memstore) is amortized more with 1k values. 

We should make this a tunable setting, and have a low default.  I would argue for a 10-30 byte default."	7	Sub-task	moved_from_0_20_5	3	Major	6	Closed
12457131	PDFBOX	jukkaz	Unable to find resource 'org.apache.pdfbox:jempbox:pom:1.0.0' in repository maven central (http://repo1.maven.org/maven2/)	"The pom.xml file of jempbox is missing in the central repository. It is named ""pom.xml"" there but it should have been named ""jempbox-1.0.0.pom"""	1	Bug	maven	3	Major	6	Closed
12455622	FELIX	clement.escoffier	Handler require callback are not called if the service (required) is registered before the instance of the handler has been started.	Handler require callback are not called if the service (required) is registered before the instance of the handler has been started.	1	Bug	callback, handler	3	Major	6	Closed
12457153	PIVOT	gbrown	Multiple host windows	Until now, all Pivot windows run within a single native host window (which can hold child windows). Some applications could, however, benefit greatly from the possibility of having multiple host windows ('parent windows'). For example, one could then use the possibility to use different monitors for each host window in a multi-monitor setup (e.g. one window 1 one monitor 1 for basic tasks, and window 2 on monitor 2 for heavy-duty 3d rendering).	2	New Feature	host, multiple, windows	3	Major	5	Resolved
12457158	COUCHDB	fdmanana	Replication not  possible via IPv6	"I have a host which is only reachable via IPv6. While I can connect to a CouchDB running on this host just fine, I cannot replicate my database to it.

This is due to the inet6-option missing from the gen_tcp.connect() call. I will attach a patch which fixes the issue.

To test it, you can use a host which only has an AAAA record in the DNS. CouchDB will immediately return 404 if you want to replicate to it unless you add the inet6 option."	1	Bug	ipv6	1	Blocker	5	Resolved
12457176	SOLR	koji	XPath entity processor problem with empty fields processing.	"Xpath entity processor has following problem with processing the empty fields.
While processing XML containing a field with empty value, its fetching the next fields value.

When I import the follow record into SOLR by DIH
<add>
...
    <doc>
        <field name=""keywords""></field>
        <field name=""ContentURL"">http://apache.org</field>
    </doc>
...
</add>

When I query the record, the return result is not the same as expect:
There is no ""ContentURL"" field, instead there is a field ""keywords"" has content ""http://apache.org"".
"	1	Bug	DIH, xpath	3	Major	6	Closed
12456508	HIVE	cwsteinbach	Enable automatic patch testing on Hudson	"See http://developer.yahoo.net/blogs/hadoop/2007/12/if_it_hurts_automate_it_1.html

"	3	Task	test-patch	3	Major	5	Resolved
12456510	HBASE	stack	Compaction events should be written to HLog	"The sequence for a compaction should look like this:
# Compact region to ""new"" files
# Write a ""Compacted Region"" entry to the HLog
# Delete ""old"" files

This deals with a case where the RS has paused between step 1 and 2 and the regions have since been reassigned."	4	Improvement	moved_from_0_20_5	1	Blocker	6	Closed
12456516	ARIES	irobins	Blog sample contains redundant image files that bloat its size by 400%	As the Blog sample has evolved, the blog-servlet WAB has added new image files without removing old redundant ones. In particular, header.png is 300k of a 360k module and it is no longer used.	1	Bug	sample	5	Trivial	6	Closed
12455798	AXIS2	veithen	"Configuration from URL (""axis2.xml.url"") fails with 'stream closed' (unusable)"	"Attempting to use a URL to point to the axis2.xml file does not work -- every call will fail with a ""stream closed"" exception.

The problem is in WarBasedAxisConfigurator, which has these lines of code (lines 113 to 135, nb line 124):

                String axis2xmlpath = config.getInitParameter(PARAM_AXIS2_XML_PATH);
                if (axis2xmlpath != null) {
                    // when init parameter was present.
                    axis2Stream = new FileInputStream(axis2xmlpath);
                    log.debug(""using axis2.xml from path: "" + axis2xmlpath);
                }

                if (axis2Stream == null) {
                    String axisurl = config.getInitParameter(PARAM_AXIS2_XML_URL);
                    if (axisurl != null) {
                        axis2Stream = new URL(axisurl).openStream();
                        axisConfig = populateAxisConfiguration(axis2Stream);
                        log.debug(""loading axis2.xml from URL: "" + axisurl);
                    }
                }

                if (axis2Stream == null) {
                    // both the axis2.xml.path and axis2.xml.url init parameters were not present
                    // try to find the default /WEB-INF/conf/axis2.xml
                    axis2Stream = config.getServletContext()
                            .getResourceAsStream(""/WEB-INF/conf/axis2.xml"");
                    log.debug(""trying to load axis2.xml from module: /WEB-INF/conf/axis2.xml"");
                }

And then further down at line 157:

            axisConfig = populateAxisConfiguration(axis2Stream);

The problem is that we are attempting to call populateAxisConfiguration TWICE -- once when we grab the URL, and once at the very end.  No other configuration method attempts to do this; just the URL-based method.

This should be an incredibly easy fix -- just remove the call on line 124."	1	Bug	closed, configuration, fail, stream, url, xml	3	Major	5	Resolved
12455842	SLING	justinedelson	Inside a Bundle Project it is not possible to executed an embedded Test with LaunchPad, Cargo and Jetty	"Inside a bundle project I could not start an integration test. Even though I could create a launchpad bundles firing up the embedded Web container (Cargo / Jetty) or even just Jetty fails.

Steps to reproduce it:
1) Create a Servlet
2) Create a Bundle that contains the Servlet
3) Take the POM from launchpad / /testing and move these maven plugins inside the integration test profile: launchpad and war
4) Make sure the launchpad plugin is called after the JAR file is created (pre-integration-test)

Running that with 'mvn -P jcrinstall-tests integration-test' fails because Sling is never launched even though launchpad-bundles is created and the war files seems to be fine.

Running the same without Cargo and plain Jetty fails because now Sling is deployed inside ""${basedir}/sling/_"" and also the System Console is not coming up even though the sling home page does.

Cheers - Andy"	1	Bug	bundle, integration, test	3	Major	6	Closed
12455854	HIVE	cwsteinbach	Update Eclipse project configuration to match Checkstyle	"We recently made Checkstyle part of the build. We need to update
the Eclipse project configuration so that it is compatible with Checkstyle."	3	Task	checkstyle, eclipse	3	Major	6	Closed
12455858	HBASE	kaykay.unique	Support of List [ ] in HBaseOutputWritable for serialization 	"On a higher language semantics , List < > are very useful for manipulation and when finally sent down to the wire - the protocol currently seems to take only [ ]  through an expensive copy. 

Supporting List <T > directly would save us the copy in terms of memory and add to faster / deserialization. "	4	Improvement	List, RPC	3	Major	6	Closed
12455894	DERBY	rhillegas	Referencing streaming CLOBs in (some) generated column clauses fails	"Referencing a CLOB represented as a stream in generated columns can lead to data corruption or that the query fails.

For instance, with 10.5:
create table t (id int, myclob clob, clen generated always as (length(myclob)));
# Insert CLOB using the streaming APIs (setCharacterStream).
The exception 'java.lang.ClassCastException: org.apache.derby.iapi.types.ReaderToUTF8Stream cannot be cast to org.apache.derby.iapi.types.Resetable'

On trunk the same query results in data corruption, and this isn't detected before the value is read back from store.

Workaround:
Don't use the streaming APIs when using CLOBs in generated columns. This increases the memory footprint, and may not feasible for large CLOBs.

FYI, BLOB deals with this by materializing the value, which effectively equals to using the workaround mentioned above."	1	Bug	CLOB, derby_triage10_8	3	Major	6	Closed
12455898	PIVOT	gbrown	Make FileBrowserSheet WTKX-compatible. 	"Because FileBrowserSheet requires a constructor argument specifying the mode, it can't be instantiated in WTKX. The mode should be passed as an argument to open().
"	4	Improvement	api-addition	4	Minor	5	Resolved
12457190	COUCHDB	paul.joseph.davis	Minor code cleanup in couch_httpd_auth	While experimenting with a custom handler I found some code repeated several times.  Figured I'd get my feet wet with both Couch and Erlang at the same time and submit a patch that removes the repetition.  Please review and apply as you see fit.	4	Improvement	cleanup	5	Trivial	5	Resolved
12457205	PIVOT	rwhitcomb	Add Ability to Add tooltipText for Tabs in a TabPane.	It is requested that the ability to set tooltipText (just like icons and labels) be added for each tab in a TabPane.  This would be most useful in space constrained interfaces where there is only enough room on each tab to display an icon (or a minimal label), but further explanation of what is on the tab would be useful to the user in order to know which tab to select.	2	New Feature	tabpane, tooltiptext	4	Minor	5	Resolved
12456568	LOGCXX	chand	SMTPAppender generating Emails with an empty body	"After compiling log4cxx with -DLOG4CXX_HAS_LIBESMTP defined to get the SMTPAppender working, the SMTPAppender now generates Emails as expected. However, the body of the Email message is always blank. Is anyone else experiencing this problem? Here's my DOMConfigurator configuration file.

<?xml version=""1.0"" encoding=""UTF-8""?>
<!DOCTYPE log4j:configuration SYSTEM ""log4j.dtd"">

<log4j:configuration debug=""true"" xmlns:log4j=""http://jakarta.apache.org/log4j/"">
    <appender name=""stdout"" class=""org.apache.log4j.ConsoleAppender"">
        <layout class=""org.apache.log4j.PatternLayout"">
            <param name=""ConversionPattern"" value=""%d{ABSOLUTE} %5p %c{1}:%L - %m%n""/>
        </layout>
    </appender>

    <appender name=""mail"" class=""org.apache.log4j.net.SMTPAppender"">
        <param name=""SMTPHost"" value=""mailhost""/>
        <param name=""From"" value=""somebody@domain.com""/>
        <param name=""To"" value=""removed@domain.com""/>
        <param name=""Subject"" value=""log4cxx test""/>
        <param name=""BufferSize"" value=""10""/>
        <layout class=""org.apache.log4j.PatternLayout"">
            <param name=""ConversionPattern"" value=""%d{ABSOLUTE} %5p %c{1}:%L - %m%n""/>
        </layout>
    </appender>

    <root>
        <priority value=""info""></priority>
        <appender-ref ref=""stdout""/>
        <appender-ref ref=""mail""/>
    </root>
</log4j:configuration>
"	1	Bug	SMTPAppender, libesmtp	3	Major	5	Resolved
12456588	CASSANDRA	wolfeidau	Improve cassandra-cli error display and thrift connection checking	"A new user observed that thier was some ambiguous error messages presented by the cassandra CLI if you connected to the wrong port on the cassandra daemon, or in fact anything else listening for a tcp connection. The CLI will say ""connected"" but when you run any of the commands a thrift exception will be displayed.

So I suggest the following enhancements:
* Verify that the CLI is indeed connected to a thrift port by requesting the cluster name
* Hide as many of the stack traces as possible displaying a simple error message
* Implement a --debug argument to the CLI which will output stacktraces
"	4	Improvement	cli	10002	Normal	5	Resolved
12456596	MAPREDUCE	zshao	FileInputFormat to support multi-level/recursive directory listing	"As we have seen multiple times in the mailing list, users want to have the capability of getting all files out of a multi-level directory structure.

4/1/2008: http://mail-archives.apache.org/mod_mbox/hadoop-core-user/200804.mbox/%3Ce75c02ef0804011433x144813e6x2450da7883de3aca@mail.gmail.com%3E

2/3/2009: http://mail-archives.apache.org/mod_mbox/hadoop-core-user/200902.mbox/%3C7F80089C-3E7F-4330-90BA-6F1C5B0B0F3F@nist.gov%3E

6/2/2009: http://mail-archives.apache.org/mod_mbox/hadoop-common-user/200906.mbox/%3C4A258A16.8050300@darose.net%3E


One solution that our users had is to write a new FileInputFormat, but that means all existing FileInputFormat subclasses need to be changed in order to support this feature.

We can easily provide a JobConf option (which defaults to false) to {{FileInputFormat.listStatus(...)}} to recursively go into directory structure.
"	4	Improvement	inputformat	3	Major	5	Resolved
12457227	CASSANDRA	gdusbabek	Unable to start Cassandra in windows if P drive exsists	"When running bin\cassandra.bat from main dir, Cassandra exits with:
Invalid parameter - P:
Starting Cassandra Server
Listening for transport dt_socket at address: 8888
Exception in thread ""main"" java.lang.NoClassDefFoundError: org/apache/cassandra/service/CassandraDaemon
Caused by: java.lang.ClassNotFoundException: org.apache.cassandra.service.CassandraDaemon
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
Could not find the main class: org.apache.cassandra.service.CassandraDaemon.  Program will exit."	1	Bug	Missing-Class, P-Drive, win32, windows, wont-start	10003	Low	5	Resolved
12456682	CMIS	klevenzs	Refactoring of java packages for client junit test 	"It's difficult to identify client test cases in surefire report becaus of inconsistent package name.

Current package is: 
   org.apache.opencmis.test
Should be: 
   org.apache.opencmis.client.test

"	6	Test	api, junit, test	5	Trivial	6	Closed
12455970	PDFBOX	lehmi	shfill operator needs implementation	"I have a PDF file (for which I do not yet have release permission) that uses the ""sh"" operator, equivalent to PostScript's shfill (per PDF spec 1.7 page 987).

Adobe provides implementation guidance in a 78-page document at http://www.adobe.com/devnet/postscript/pdfs/TN5600.SmoothShading.pdf#17

I will be trying to add this functionality this week, but if anyone has hints, suggestions, etc. they are most certainly welcome!"	2	New Feature	shading, shadingpattern	3	Major	6	Closed
12455974	OWB	gerdogdu	Owb on Google App Engine	Implement support for Google App Engine	2	New Feature	google_app_engine	4	Minor	6	Closed
12456010	FELIX	gnt	File Install fails to move fragment bundle into RESOLVED state	"The file-install will install the fragment bundle but fails to move it to resolve. The fragment bundle remains in INSTALLED state. 

If we install it from equinox shell, then fragment bundle is installed and resolved correctly. 

Can someone please comment ?



"	1	Bug	fileinstall, fragment, resolved	3	Major	6	Closed
12456014	CASSANDRA	nickmbailey	RPM Packages	"RPM packages (and debs of course) would be nice,especially now that cassandra is maturing and gaining more interest.

Lowering the threshold for getting cassandra running and getting started is also important.

I think the RabbitMQ project has an admirable ""Download and install"" experience, not to mention the rather cute ""2 min guarantee"". Definitely a good inspiration.

I've been studying Cloudera's Hadoop packages, which are very nice, and really appreciate the separate packages for configuration.
This allows easy deployment of node configuration to a cluster.

I'll have a spec file for building RHEL5 / CentOS packages ready for review and attached here in a bit.
"	4	Improvement	distribution, packaging, rpm	10003	Low	5	Resolved
12457265	WW	jogep	Client Validation don't display Global Messages	"When I define a Validation like this:

@Validations(requiredStrings = {
    @RequiredStringValidator(fieldName = ""loginuser"", type = ValidatorType.FIELD, message = ""Login User is required""), 
    @RequiredStringValidator(fieldName = ""loginpassword"", type = ValidatorType.FIELD, message = ""Password is required"")
}, expressions = {
  @ExpressionValidator(expression = ""loginpassword.trim().equals('test') == true"", message = ""Password must be test.""),
})

The Form with XHTML Theme only display the RequiredString Messages but not the Expression Message."	1	Bug	client, validation	4	Minor	6	Closed
12457266	PHOTARK	suho	Integrate OpenId with photark	Integration of  Open Id with photark.This allows users of popular openids (e.g gmail , yahoo) to use the photark and make the  pictures private...and share albums with some users only..	2	New Feature	gsoc, mentor	3	Major	6	Closed
12457276	HARMONY	purefire	[performance] improve performance in Harmony network and IO classes	"The current performance of networking/io is a bit slow in Harmony implementation. Much work to be done to improve as:
1. use high performance native API like readv/writev instead to fill the arrays of data
2. simplify the native call stack to save time;
3. reduce unnecessary array copy in the data read/write 
4. remove unnecessary synchronizations
5. remove redundant varieties
etc. "	3	Task	gsoc, mentor	3	Major	1	Open
12456774	WICKET	ivaynberg	PagingNavigator should display button images	"1)
i would like to replace the naviagtion chars < << ... by images, 
following this http://javathoughts.capesugarbird.com/2007/04/how-to-change-markup-of-built-in-wicket.html instructions.

2)
Here you can see a generated link from me app
...
<a wicket:id=""prev"" href=""?x=pPt1KTjFgq7jCvFV7Vtod43EPo0hbPO-EDP4AMUHOsUoaAgCgpvR6F6GtmhTk1TRCvllRbG1Pu4"" title=""Go to previous page""> 
<img src=""img/previous_btn.gif"" border=""0"" onclick=""window.location.href='img/previous_btn.gif';return false;""/> 
</a>
...
my problem is the ""onclick...""-part - is it possible to leave it?

3)
so i googled and found: http://old.nabble.com/extra-%27onclick%27-is-generated-for-an-image-wrapped-by-a-link-td20980894.html;
... instead of wicket:link, use bookmarkablepagelink component instead.

4)
is there any possible way to perform step 3) in my case?

many thx in advance
Josef
p.s. wicket is great"	1	Bug	PagingNavigator, image, navigation	4	Minor	6	Closed
12456191	QPID	tedross	SASL<->Ruby binding can cause seg_faults	"There is an issue with the sasl bindings where it returns a raw ruby VALUE type for the sasl context. This works _UNTIL_ the ruby runtime tries to access that variable which then causes a segfault. 

This is easy to see if you try to inspect the variable at all (like print it or ask for its class or methods). In my application, for reasons I haven't determined yet, just having this variable on the heap meant that when an exception occurred trying to print the exceptions message caused a seg fault. 

In any case, passing back raw VALUEs to ruby code is a Bad Idea and goes against the spec. There is a simple macro and fix for this which wraps the returned value in a ruby object. This fixes the issue I was having and means the deleting of the object is done automatically (instead of having a manual free function).

I have a patch with the simple, low impact fix, really it would be better to the extension so the sasl client is repersented as a real ruby object but that would require atleast some client code changes."	1	Bug	sasl, segmenation_fault	3	Major	6	Closed
12456206	WICKET	ivaynberg	non-performant Collections.synchronizedMap() should be replaced with ConcurrentMap	"The following two classes use Collections.synchronizedMap() --> lots of contention @ concurrent load. 
* RequestListenerInterface.interfaces
* WebApplication.addBufferedResponse
* Injector.inject() - 'cache' field. 

The last instance makes @SpringBean unusable in production (too much contention @ concurrent load)

Here's a sample output of contention around monitor of class java.util.Collections$SynchronizedMap:

{noformat}
+--------------------------------------------------------------------------------------+------------------+-----------------+
|                                         Name                                         |    Time (ms)     |      Count      |
+--------------------------------------------------------------------------------------+------------------+-----------------+
|  +---java.util.Collections$SynchronizedMap.get(Object)                               |  126,101   51 %  |  19,145   52 %  |
|  | |                                                                                 |                  |                 |
|  | +---org.apache.wicket.injection.Injector.inject(Object, IFieldValueFactory)       |  109,912   45 %  |  16,285   44 %  |
|  | |                                                                                 |                  |                 |
|  | +---org.springframework.beans.CachedIntrospectionResults.forClass(Class)          |   16,188    7 %  |   2,860    8 %  |
|  |                                                                                   |                  |                 |
|  +---java.util.Collections$SynchronizedMap.put(Object, Object)                       |  119,343   49 %  |  17,676   48 %  |
|    |                                                                                 |                  |                 |
|    +---org.apache.wicket.injection.Injector.inject(Object, IFieldValueFactory)       |                  |                 |
|      |                                                                               |                  |                 |
|      +---org.apache.wicket.injection.ConfigurableInjector.inject(Object)             |                  |                 |
|        |                                                                             |                  |                 |
|        +---org.apache.wicket.injection.ComponentInjector.onInstantiation(Component)  |  118,060   48 %  |  17,467   47 %  |
|        |                                                                             |                  |                 |
|        +---com.castanealabs.gui.model.ZipCodeValidator.<init>()                      |      686    0 %  |     106    0 %  |
|        |                                                                             |                  |                 |
|        +---com.castanealabs.gui.model.ProductSkuProgramDataProvider.<init>(IModel)   |      337    0 %  |      59    0 %  |
|        |                                                                             |                  |                 |
|        +---com.castanealabs.gui.model.ProductTypeProgramDataProvider.<init>(IModel)  |      259    0 %  |      44    0 %  |
+--------------------------------------------------------------------------------------+------------------+-----------------+

Generated by YourKit Java Profiler 8.0.22 Feb 12, 2010 3:52:25 PM
{noformat}
"	1	Bug	performance	3	Major	5	Resolved
12457323	DERBY	sleroux	Make it possible to define variables in ij	"It would be nice to have a way in ij to store statement results in variables for later re-use.

Notably, It would allow to use (meta)data obtained by some statements (such as SHOW ....) beyond the simple display of the result. Moreover, it could be a first step toward extending the scripting capabilities of ij.

See http://old.nabble.com/IJ-scripting-(variables-in-IJ-)-td27290712.html
Related to DERBY-4557"	4	Improvement	ij	3	Major	1	Open
12457334	CXF	dkulp	Missing end tag for <faultstring> within Soap Fault containing a ws-security authentication failure	"When testing with ws-security username Token, an authentication failure results in an expected soap fault. The soap fault contains the beginning tag <faultstring>  but no end tag. For example: 

<soap:Envelope xmlns:soap=""http://schemas.xmlsoap.org/soap/envelope/""><soap:Body><soap:Fault><faultcode xmlns:ns1=""http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd"">ns1:FailedAuthentication</faultcode><faultstring>

When invoked using the CXF client, this results in the following exception:

org.apache.cxf.binding.soap.SoapFault: Could not parse message.
	at org.apache.cxf.binding.soap.interceptor.Soap11FaultInInterceptor.unmarshalFault(Soap11FaultInInterceptor.java:70)
	at org.apache.cxf.binding.soap.interceptor.Soap11FaultInInterceptor.handleMessage(Soap11FaultInInterceptor.java:46)
	at org.apache.cxf.binding.soap.interceptor.Soap11FaultInInterceptor.handleMessage(Soap11FaultInInterceptor.java:35)
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:236)
	at org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver.onMessage(AbstractFaultChainInitiatorObserver.java:96)
	at org.apache.cxf.binding.soap.interceptor.CheckFaultInterceptor.handleMessage(CheckFaultInterceptor.java:69)
	at org.apache.cxf.binding.soap.interceptor.CheckFaultInterceptor.handleMessage(CheckFaultInterceptor.java:34)
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:236)
	at org.apache.cxf.endpoint.ClientImpl.onMessage(ClientImpl.java:664)
	at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponseInternal(HTTPConduit.java:2160)
	at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponse(HTTPConduit.java:2040)
	at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1965)
	at org.apache.cxf.io.CacheAndWriteOutputStream.postClose(CacheAndWriteOutputStream.java:47)
	at org.apache.cxf.io.CachedOutputStream.close(CachedOutputStream.java:188)
	at org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:66)
	at org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:627)
	at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62)
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:236)
	at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:478)
	at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:308)
	at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:260)
	at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:73)
	at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:124)
	at $Proxy56.submit(Unknown Source)
	at com.sandbox.wkl.client.WorklistingClientIntegrationTest.invokeService_withInvalidPassword_fails(WorklistingClientIntegrationTest.java:55)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.springframework.test.context.junit4.SpringTestMethod.invoke(SpringTestMethod.java:160)
	at org.springframework.test.context.junit4.SpringMethodRoadie.runTestMethod(SpringMethodRoadie.java:233)
	at org.springframework.test.context.junit4.SpringMethodRoadie$RunBeforesThenTestThenAfters.run(SpringMethodRoadie.java:333)
	at org.springframework.test.context.junit4.SpringMethodRoadie.runWithRepetitions(SpringMethodRoadie.java:217)
	at org.springframework.test.context.junit4.SpringMethodRoadie.runTest(SpringMethodRoadie.java:197)
	at org.springframework.test.context.junit4.SpringMethodRoadie.run(SpringMethodRoadie.java:143)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.invokeTestMethod(SpringJUnit4ClassRunner.java:160)
	at org.junit.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:51)
	at org.junit.internal.runners.JUnit4ClassRunner$1.run(JUnit4ClassRunner.java:44)
	at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:27)
	at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:37)
	at org.junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java:42)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:97)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:46)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: com.ctc.wstx.exc.WstxEOFException: Unexpected EOF; was expecting a close tag for element <faultstring>
 at [row,col {unknown-source}]: [1,247]
	at com.ctc.wstx.sr.StreamScanner.throwUnexpectedEOF(StreamScanner.java:686)
	at com.ctc.wstx.sr.BasicStreamReader.nextFromTree(BasicStreamReader.java:2730)
	at com.ctc.wstx.sr.BasicStreamReader.next(BasicStreamReader.java:1019)
	at com.ctc.wstx.sr.BasicStreamReader.getElementText(BasicStreamReader.java:669)
	at org.apache.cxf.binding.soap.interceptor.Soap11FaultInInterceptor.unmarshalFault(Soap11FaultInInterceptor.java:61)
	... 47 more"	1	Bug	security, soapfault	3	Major	6	Closed
12456263	WICKET	ivaynberg	AjaxFormChoiceComponentUpdatingBehavior cannot find the choice	"AjaxFormChoiceComponentUpdatingBehavior tries to find the form components (the choices) by iterating the children elements with tagName 'input' and verifying some constraints. One of this constraints have been changed recently and now the children could not be found:

Index: src/main/java/org/apache/wicket/ajax/form/AjaxFormChoiceComponentUpdatingBehavior.java
===================================================================
--- src/main/java/org/apache/wicket/ajax/form/AjaxFormChoiceComponentUpdatingBehavior.java	(revision 909983)
+++ src/main/java/org/apache/wicket/ajax/form/AjaxFormChoiceComponentUpdatingBehavior.java	(working copy)
@@ -70,7 +70,7 @@
 		asb.append("" for (var i = 0 ; i < inputNodes.length ; i ++) {\n"");
 		asb.append("" var inputNode = inputNodes[i];\n"");
 		asb.append("" if (!inputNode.type) continue;\n"");
-		asb.append("" if (!(inputNode.className.indexOf('wicket-'+markupId)===0)) continue;\n"");
+		asb.append("" if (!(inputNode.id.indexOf(markupId+'-')===0)) continue;\n"");
 		asb.append("" var inputType = inputNode.type.toLowerCase();\n"");
 		asb.append("" if (inputType == 'checkbox' || inputType == 'radio') {\n"");
 		asb.append("" Wicket.Event.add(inputNode, 'click', callbackScript);\n"");
"	1	Bug	ajax, choice, form, update, wicket	3	Major	6	Closed
12456272	LUCENE	rcmuir	problem with edgengramtokenfilter and highlighter	"i ran into a problem while using the edgengramtokenfilter, it seems to report incorrect offsets when generating tokens, more specifically all the tokens have offset 0 and term length as start and end, this leads to goofy highlighting behavior when creating edge grams for tokens beyond the first one, i created a small patch that takes into account the start of the original token and adds that to the reported start/end offsets.

"	1	Bug	EdgeNGramTokenFilter, Highlighter	4	Minor	6	Closed
12456335	CXF	dkulp	@Resource not injecting WebServiceContext in jaxws intereceptor	"If you want to inject the WebServiceContext into a In/Out-Interceptor configured with xml (e.g. <jaxws:ininterceptors><bean id=""someInterceptor"" class=""test.SomeInterceptor""/></jaxws:ininterceptors />) with the @resource annotation, the WebServiceContext is null. (Even with component-scan enabled and annotation-config defined)

If you inject the WebServiceContext into the interceptor with a property-setter in the xml (e.g. <property name=""ctx"" value=""javax.xml.ws.WebServiceContext"" />) the instance is not empty, but holding nothing (like MessageContext )

The documentation suggest the way with the @Resource annotation, so this is rather confusing.

The work-around I found, is to set the properties I wanted to set on the message in the handleMessage method of the interceptor (e.g. message.put(""someKey"", someValue); )
I would rather see the @Resource injection working.

Regards,

Auke Noppe
Developer @ Ymor (.nl)"	1	Bug	IoC, cxf, interceptors, resource, spring	3	Major	6	Closed
12456338	WICKET	ivaynberg	Implementing fix in WICKET-1292	"I have been trying to implement the workaround you mention in this ticket. I have not been successful. I am not clear where the following code (from the comment in WICKET-1292) would go in the test case java files included in WICKET - 1292?

from ticket:

Workaround by Maurice Marrink:

// continueToOriginaldestination does not work if there is no url available, so we need to fake one here(testing only hack)

mock.setupRequestAndResponse();
WebRequestCycle cycle = mock.createRequestCycle();
String url1 = cycle.urlFor(new BookmarkablePageRequestTarget(YOUR_PAGE_HERE.class, null)).toString();

mock.getServletRequest().setURL(""/GeneralTest$1/GeneralTest$1/"" + url1);
mock.processRequestCycle();

---
mock is the WicketTester.
GeneralTest$1 from the url is the classname of your application without the package. (in my case it is an anonymous inner class hence the $1) Note that this classname appears twice in the url."	3	Task	WICKET-1292	3	Major	5	Resolved
12456365	WICKET	mgrigorov	AjaxPagingNavigator Link factories should return AbstractLink	"AjaxPagingNavigator doesn't submit forms.  The mailinglists instruct the user to override the Link factory classes in order to return SubmitLinks.  However, both SubmitLink and AjaxSubmitLink do not inherit from Link.  It is my opinion that AjaxPagingNavigator.new*Link() functions should return AbstractLink.

I am currently forced to fork the majority of AjaxPagingNavigator inorder to create a ""Sub""class.
"	4	Improvement	api, cleanup, easy, inconsistency	3	Major	5	Resolved
12457352	TS	i.galic	[GSoC] FreeBSD: Add raw disk support for the cache	"Currently only a file cache is supported on FreeBSD. Raw Disk support should be added before 3.3 release.
-George"	1	Bug	freebsd, gsoc	3	Major	6	Closed
12457369	HIVE	sdong	create a new input format where a mapper spans a file	"This will be needed for Sort merge joins.

"	2	New Feature	Bucketing	3	Major	6	Closed
12457374	STDCXX	farid	Unable to generate Visual Studio solution and project files	"Fails on the following lines

Line 337:  VCProject.AddPlatform(PLATFORM);
method AddPlatform is not implement in Visual C++
Suggestion:  remove

Line 363:   VCProject.AddConfiguration(confNames[i]);
method    AddConfiguration is not available under automation.  WScript fails.
Suggestion: 
1.  Generate solution using application.
or
2.  Change the a modern build system "	1	Bug	MSVC, wscript	3	Major	6	Closed
12457376	HIVE	aprabhakar	When checkstyle is activated for Hive in Eclipse environment, it shows all checkstyle problems as errors.	As of now, checkstyle plugin reports all problems as errors. This causes an overwhelming number of errors to show up (3000+) which masks real errors that might be there. Since all the checkstyle violations are not going to be fixed in one shot, it is desirable to lower the severity of checkstyle violations to warnings so that the plugin can be kept enabled. This will encourage developers to spot checkstyle violations in the files they touch and potentially fix them as they go along, along with pointing out violations as they code.	4	Improvement	cleanup, eclipse	4	Minor	6	Closed
12456922	PHOTARK	luis.gsoc	Provide support for subscribing to Flickr albuns (ATOM Feed based)	Allow the ability for a user to create a new album, that points to a remote photo feed from Flickr.	2	New Feature	gsoc, mentor	3	Major	5	Resolved
12456927	SHIRO	lhazlewood	Problem with WebRememberMeManager	"I executed the following code to see if I needed to get the current user again after logging out: 
        Subject currentUser; 
        currentUser = SecurityUtils.getSubject();   // < --No exception 
        currentUser = SecurityUtils.getSubject();   // < --No exception 
        currentUser.logout();                              // < --No exception 
        currentUser = SecurityUtils.getSubject();   // < --EXCEPTION 

Resulting in the application throwing a NullPointerException from WebRememberMeManager.  

Here is the stack trace: (I'm currently trying to learn how to install and use JUnit)

32046 [btpool0-1] WARN org.apache.shiro.mgt.DefaultSecurityManager - Delegate RememberMeManager instance of type [org.apache.shiro.web.WebRememberMeManager] threw an exception during getRememberedPrincipals(). 
java.lang.NullPointerException 
        at org.apache.shiro.web.attr.CookieAttribute.getCookie(CookieAttribute.java:262) 
        at org.apache.shiro.web.attr.CookieAttribute.removeValue(CookieAttribute.java:357) 
        at org.apache.shiro.web.WebRememberMeManager.forgetIdentity(WebRememberMeManager.java:320) 
        at org.apache.shiro.web.WebRememberMeManager.forgetIdentity(WebRememberMeManager.java:316) 
        at org.apache.shiro.mgt.AbstractRememberMeManager.onRememberedPrincipalFailure(AbstractRememberMeManager.java:547) 
        at org.apache.shiro.mgt.AbstractRememberMeManager.getRememberedPrincipals(AbstractRememberMeManager.java:488) 
        at org.apache.shiro.mgt.DefaultSecurityManager.getRememberedIdentity(DefaultSecurityManager.java:598) 
        at org.apache.shiro.mgt.DefaultSecurityManager.resolvePrincipals(DefaultSecurityManager.java:486) 
        at org.apache.shiro.mgt.DefaultSecurityManager.createSubject(DefaultSecurityManager.java:363) 
        at org.apache.shiro.subject.Subject$Builder.buildSubject(Subject.java:751) 
        at org.apache.shiro.SecurityUtils.getSubject(SecurityUtils.java:57) 
        at burp_erp_t1.TestShiroServlet.login(TestShiroServlet.java:43) 
        at burp_erp_t1.TestShiroServlet.doPost(TestShiroServlet.java:24) 
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:713) 
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:806) 
        at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487) 
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1093) 
        at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:373) 
        at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:306) 
        at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:81) 
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084) 
        at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:51) 
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084) 
        at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43) 
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084) 
        at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:121) 
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084) 
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:360) 
        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216) 
        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181) 
        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:712) 
        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405) 
        at com.google.apphosting.utils.jetty.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:70) 
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:139) 
        at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:352) 
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:139) 
        at org.mortbay.jetty.Server.handle(Server.java:313) 
        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:506) 
        at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:844) 
        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:644) 
        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211) 
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:381) 
        at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:396) 
        at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:442) "	1	Bug	NullPointerException, RememberMeManager, WebRememberMeManager	3	Major	6	Closed
12456419	DERBY	sleroux	Using ij to copy data from one DB to an other	"It is possible to have open connections to several databases while running ij, but it is not currently possible to copy data from one DB to an other one.

Not only such a feature would allow to copy data between Derby databases. But, ij being mostly DB agnostic, if will ease import/export from any JDBC compliant data source.

See http://old.nabble.com/Using-IJ-to-copy-data-from-one-DB-to-an-other-one-td27598138.html"	4	Improvement	ij	4	Minor	6	Closed
12456974	HARMONY	purefire	[i18n-tool] the gsoc2009 Proposals harmony-i18n-tool	"This idea is proposed by Jing Lv in 2009gsoc and was not done.I had discuss this idea with the  mentor Jing Lv last month。I think I can do it as a gsoc2010 project. 
see more detail  http://wiki.apache.org/harmony/Harmony_i18n_tool.

About Me:
I am a jave teacher and programer。
I can contribute 5h every week to this project. from 2010-3-1 to 2010-7-1.
I can contribute 3 every day to this project. from 2010-7-1 to 2010-9-5.

"	3	Task	gsoc, mentor	5	Trivial	1	Open
12457032	HIVE	cwsteinbach	Implement ddldump utility for Hive Metastore	"Implement a ddldump utility for the Hive metastore that will generate the QL DDL necessary to recreate the state of the current metastore on another metastore instance.

A major use case for this utility is migrating a metastore from one database to another database, e.g. from an embedded Derby instanced to a MySQL instance.

The ddldump utility should support the following features:
* Ability to generate DDL for specific tables or all tables.
* Ability to specify a table name prefix for the generated DDL, which will be useful for resolving table name conflicts."	2	New Feature	ddl, derby, metastore, migration, mysql	3	Major	5	Resolved
12457378	HARMONY	qiuxiaox	[jdktools] jdwp agent logging enhancement for debugging	"Harmony current JDWP agent have full logging functionality.
But all log messages are messed up regardless of its running thread information.

On the other hand, we support a lot of types log level, user need to rerun the appilcation to get different type of log.
It would be much convenient if we have a log analyzer to help sort out log messages, then we can only need get the ALL log message.

In a word, this job is trying to enhance our jdwp log system to facilitate jdwp debugging.

1. Support thread information.
2. Can sort out user desired log message.
3. Find out bug-prone log message.

"	2	New Feature	gsoc	4	Minor	1	Open
12457426	AXIS2C	shankar	Remove hard-coded version number from release tools (dist.sh...)	"Currently the last version number (1.6.0) is hard coded in the release scripts (dist.sh, bindist.sh).
It would be easier to build custom builds if those release scripts  would use the version number defined in configure.ac.

The fix is to make the script to be generated from template by the configure script:
- rename the scripts to ${script}.in
- replace ""1.6.0"" with ""@VERSION@""
- add ${script} to AC_CONFIG_FILES() in configure.ac"	5	Wish	autoconf, autotools, cleanup, release	4	Minor	5	Resolved
12457444	QPID	gemmellr	DerbyStore does not persist queue exclusivity or arguments	"Whilst investigating enabling the tests in qpid/java/systests/src/main/java/org/apache/qpid/test/unit/ct/DurableSubscriberTest.java to run against the Java broker, it was observed (stacktrace below) that after restarting the broker it was not possible to recreate a durable subscription as the recovered queue had lost its exclusivity during the restart process, and the client connected via 0-91 was unable to redeclare the queue as a result of an exclusivity mismatch between the request and the existing queue. 

Investigating this has found this to be bec ause we dont persist the queue exclusivity as set in the QueueDeclare body. The DebyStore also does not persist the queue arguments it is given.


Error registering consumer: org.apache.qpid.AMQChannelClosedException: Error: Cannot re-declare queue 'clientid:dursub' with different exclusivity (was: false requested true) [error code 405: Already exists] [error code 405: Already exists]
javax.jms.JMSException: Error registering consumer: org.apache.qpid.AMQChannelClosedException: Error: Cannot re-declare queue 'clientid:dursub' with different exclusivity (was: false requested true) [error code 405: Already exists] [error code 405: Already exists]
        at org.apache.qpid.client.AMQSession$4.execute(AMQSession.java:1800)
        at org.apache.qpid.client.AMQSession$4.execute(AMQSession.java:1744)
        at org.apache.qpid.client.AMQConnectionDelegate_8_0.executeRetrySupport(AMQConnectionDelegate_8_0.java:290)
        at org.apache.qpid.client.AMQConnection.executeRetrySupport(AMQConnection.java:765)
        at org.apache.qpid.client.failover.FailoverRetrySupport.execute(FailoverRetrySupport.java:102)
        at org.apache.qpid.client.AMQSession.createConsumerImpl(AMQSession.java:1742)
        at org.apache.qpid.client.AMQSession.createConsumer(AMQSession.java:911)
        at org.apache.qpid.client.AMQSession_0_8.createDurableSubscriber(AMQSession_0_8.java:502)
        at org.apache.qpid.client.AMQTopicSessionAdaptor.createDurableSubscriber(AMQTopicSessionAdaptor.java:73)
<snip>
"	1	Bug	derbystore	3	Major	6	Closed
12457485	DERBY	knutanders	"Memory leak on server when using ""SET ROLE"" command"	"Scenario:
-connect into database
-use command SET ROLE
-repeat simple selects many times -> memory consumtions ends with database ""outOfMemory: heap space"" crash.

Sometimes this crash ends with loosing (of course previously commited) data in different tables - this is in the case using ""UPDATE"" etc. command.
Without command SET ROLE everythings works OK. 
"	1	Bug	memory_leak, role	3	Major	6	Closed
12457638	SOLR	yseeley@gmail.com	Memory leak in FastLRUCache	"Every time a commit happens two Stats instances [org.apache.solr.common.util.ConcurrentLRUCache.Stats] are leaking.

Following code [org.apache.solr.search.FastLRUCache] to maintain cumulative cache statistics causing this Stats object leak. 

{noformat}
    cumulativeStats = (List<ConcurrentLRUCache.Stats>) persistence;
    cumulativeStats.add(cache.getStats());
{noformat}

Everytime a *commit* happens a new cache object is getting created and its stats is added to the list which is not released at all."	1	Bug	cache, commit, memory_leak, search	3	Major	6	Closed
12457643	CXF	dkulp	CLONE -WSDL Schema Imports - include schema location doesnt have full path	"Hi I have configured one webservice using following xml configuration

<jaxws:endpoint address=""/PersonService"" implementor=""#personServiceBean"" id=""personService"">
	<jaxws:schemaLocations >
		<jaxws:schemaLocation>WEB-INF/classes/app/valueobjects/RequestResponse.xsd</jaxws:schemaLocation>
	</jaxws:schemaLocations>
	<jaxws:properties>
		<entry key=""schema-validation-enabled"" value=""true""/>
	</jaxws:properties>
</jaxws:endpoint>

CXF generates WSDL at runtime but generateds WSDL looks like

<?xml version='1.0' encoding='UTF-8'?><wsdl:definitions name=""PersonService"" targetNamespace=""http://www.webservice.com/ws"" xmlns:ns1=""http://cxf.apache.org/bindings/xformat"" xmlns:soap=""http://schemas.xmlsoap.org/wsdl/soap/"" xmlns:tns=""http://www.webservice.com/ws"" xmlns:wsdl=""http://schemas.xmlsoap.org/wsdl/"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema"">
  <wsdl:types>
<schema attributeFormDefault=""unqualified"" elementFormDefault=""qualified"" targetNamespace=""http://www.webservice.com/ws"" xmlns=""http://www.w3.org/2001/XMLSchema"" xmlns:tns=""http://www.webservice.com/ws"">
<include schemaLocation=""valueobjects.xsd"" />
<complexType name=""GetPersonDetails"">
<sequence>
<element minOccurs=""0"" ref=""tns:Person"" />
</sequence>
</complexType>
<complexType name=""GetPersonDetailsResponse"">
<sequence>
<element minOccurs=""0"" ref=""tns:Person"" />
</sequence>
</complexType>
<element name=""GetPersonDetails"" nillable=""true"" type=""tns:GetPersonDetails"" />
<element name=""GetPersonDetailsResponse"" nillable=""true"" type=""tns:GetPersonDetailsResponse"" />
</schema>
  </wsdl:types>
...........


The include element in schema doesn't contain entire path and hence the clients are not able to retrieve related elements."	1	Bug	SchemaGeneration, SchemaValidation	1	Blocker	6	Closed
12457647	FTPSERVER	niklas	MKD command on linux checks for path separator before passing to filesystemview	Only a problem on linux although the windows might check for a backslash and have the same problem. the filesystemview should be the one to decide if a path is valid	1	Bug	linux, mkd	3	Major	6	Closed
12457663	HBASE	kovyrin	Hbase Shell hcd() method is broken by the replication scope parameter	"Since an additional HColumnDescriptor constructor parameter (scope) was introduced, hbase shell hcd() method fails to create a HColumnDescriptor object:

hbase(main):007:0> alter 'doc_total_stats', {NAME => 'country_views', VERSIONS => 1}
ArgumentError: wrong # of arguments(8 for 9)
"	1	Bug	hbase, shell	3	Major	6	Closed
12457680	KARAF	gnt	Add features:info command	"Currently there is no way to check contents of the feature. It's also hard to determine what dependencies feature has.

First command - describes feature using Feature instance. Command by default displays info about configuration (-c), dependencies (-d) and bundles (-b option) in feature.
{code}
karaf@root> features:desc payment-service
Description of payment-service 1.0.0.SNAPSHOT feature
----------------------------------------------------------------
Feature has no configuration.
Feature dependens on:
  datasource 0.0.0
  dataaccess 0.0.0
  activemq-camel 0.0.0
  camel-jetty 0.0.0
  contract 0.0.0
Feature contains followed bundles:
  mvn:org.code-house.esb.payment/engine/1.0.0.SNAPSHOT
  mvn:org.code-house.esb.payment/binding/1.0.0.SNAPSHOT
  mvn:org.code-house.esb.payment/persistence/1.0.0.SNAPSHOT
{code}

Second command displays features tree. If user will pass -b parameter feature bundles will be attached to tree.
{code}
karaf@root> features:tree payment-service
 payment-service 1.0.0.SNAPSHOT
    datasource 0.0.0
       activemq 0.0.0 *
       postgresql 8.3
       spring 2.5.6.SEC01
       commons-dbcp 0.0.0
    dataaccess 1.0.0.SNAPSHOT
       domain 1.0.0.SNAPSHOT
          persistence-api 1.0.0
       hibernate 0.0.0
          persistence-api 1.0.0
    activemq-camel 5.3.0-fuse-01-00
    camel-jetty 0.0.0 *
    contract 1.0.0.SNAPSHOT
Tree contains 2 unresolved dependencies
 * means that node declares dependency but the dependant feature is not available.
{code}

{code}
karaf@root> features:tree domain
 domain 1.0.0.SNAPSHOT
    persistence-api 1.0.0
{code}

{code}
karaf@root> features:tree -b domain
 domain 1.0.0.SNAPSHOT
 + mvn:org.code-house/domain/1.0.0.SNAPSHOT
 + mvn:org.code-house.security/domain/1.0.0.SNAPSHOT
 \ mvn:org.code-house.shippingstock/domain/1.0.0.SNAPSHOT
    persistence-api 1.0.0
    \ mvn:javax.persistence/com.springsource.javax.persistence/1.0.0
{code}"	4	Improvement	console, features, karaf	3	Major	6	Closed
12457681	COUCHDB	benoitc	Rewrite Handler not translating variables inside array values.	"It seems that it's not possible at the moment create url rewrites with params such startkey,endkey or any query with an array value like ""startkey"" : ["":user"",0]
I've found the same issue listed here: http://www.mail-archive.com/dev@couchdb.apache.org/msg06925.html where benoitc tells it should work and zachary told it's working for him, but mysteriously, not for me
[
    {
      ""from""  : "":user"",
      ""to""    : ""_view/all"",
      ""method"": ""GET"",
      ""query"" : {
                  ""startkey"": ["":user"",""a""],
                  ""endkey"": ["":user"", ""z""]
                }
    }
]

it's a very simple rewrite, but I'm getting this when calling it:
http://localhost:5984/test/_design/core/_rewrite/ludicco
----
[info] [<0.3063.0>] 127.0.0.1 - - 'GET' /test/_design/core/_view/all?startkey=%5B%22%3Auser%22%2C%22a%22%5D&endkey=%5B%22%3Auser%22%2C%22z%22%5D&user=ludicco 200

But the same works when using values such ""startkey"" : "":user"".
It seems that the rewrite handler expects  only a simple string as placeholder.
"	4	Improvement	arguments, handler, http, interface, rewrite, value	3	Major	6	Closed
12457693	MAPREDUCE	ravidotg	Deprecate mapred.permissions.supergroup in favor of hadoop.cluster.administrators	HADOOP-6568 added the configuration {{hadoop.cluster.administrators}} through which admins can configure who the superusers/supergroups for the cluster are. MAPREDUCE itself already has {{mapred.permissions.supergroup}} (which is just a single group). As agreed upon at HADOOP-6568, this should be deprecated in favor of {{hadoop.cluster.administrators}}.	1	Bug	configuration	3	Major	5	Resolved
12457695	MAPREDUCE	vicaya	Log messages of JobACLsManager should use security logging of HADOOP-6586	{{JobACLsManager}} added in MAPREDUCE-1307 logs the successes and failures w.r.t job-level authorization in the corresponding Daemons' logs. The log messages should instead use security logging of HADOOP-6586.	1	Bug	logging	3	Major	6	Closed
12457701	GERONIMODEVTOOLS	delos	Upgrade to eclipse 3.5.2	Since eclipse 3.5.2 is released, upgrade eclipse in our dependencies to 3.5.2	1	Bug	eclipse	3	Major	6	Closed
12457793	HDFS	ekoontz	Miscellaneous improvements to HTML markup for web UIs	The Web UIs have various bits of bad markup (eg missing <head> sections, some pages missing CSS links, inconsistent td vs th for table headings). We should fix this up.	4	Improvement	newbie	4	Minor	6	Closed
12457794	MAPREDUCE	blee	Miscellaneous improvements to HTML markup for web UIs	The Web UIs have various bits of bad markup (eg missing <head> sections, some pages missing CSS links, inconsistent td vs th for table headings). We should fix this up.	1	Bug	newbie	4	Minor	5	Resolved
12457838	SSHD	gnt	Accept SSH-2 names from Putty	"When using WinSCP and FileZilla in SFTP, it uses Putty underneath. Putty sends messages ending with @putty.projects.tartarus.org.
More documentation about the meaning of those names can be found at http://tartarus.org/~simon/putty-snapshots/htmldoc/AppendixF.html

This patch accepts theses messages, otherwise a SSH_MSG_CHANNEL_FAILURE is sent to the client and the connection fails.
There is no implementation based on thoses messages in the patch, it just accepts the requests but does not do anything specific about it."	1	Bug	filezilla, putty, puttysftp, sftp, winscp	4	Minor	5	Resolved
12457903	PIG	daijy	Provide a more flexible data format to load complex field (bag/tuple/map) in PigStorage	"With [PIG-613|https://issues.apache.org/jira/browse/PIG-613], we are able to load txt files containing complex data type (map/bag/tuple) according to schema. However, the format of complex data field is very strict. User have to use pre-determined special characters to mark the beginning and end of each field, and those special characters can not be used in the content. The goals of this issue are:

1. Provide a way for user to escape special characters
2. Make it easy for users to customize Utf8StorageConverter when they have their own data format

This is a candidate project for Google summer of code 2013. More information about the program can be found at https://cwiki.apache.org/confluence/display/PIG/GSoc2013"	1	Bug	gsoc2013	3	Major	1	Open
12457966	MAHOUT	srowen	Rationalize use of similarity metrics as weights in user-based, item-based recommendation	"See this thread: http://old.nabble.com/weighted-score-td27686783.html

In short, using similarity values as weights in a weighted average is problematic since they can be negative. This can result in weighted averages well out of range of possible preference values, even infinite. The current solution simply moves the values from [-1,1] to [0,2] but this has undesirable effects like giving weight of 1 to entities with no similarity.

Tamas advances, and Ted refined, a convincing argument that negative weights can be handled in a different way which doesn't require them to be arbitrarily shifted. It is simply a matter of capping the estimated preference at the max or min value the preference value can take on.

It's possible for the framework to track this max/min value observed in the data, and do the capping, with little performance impact. Hence I want to make this change after 0.3 is released."	4	Improvement	item, similarity, user, weight	4	Minor	6	Closed
12457969	WW	lukaszlenart	Tabbed pane	I've created 4 tab tab1 tab2 tab3 tab4  now from tab3 iam submitting value ........which returns value to the same tab 3 and want to show tab3 .But instead tab1 loads ...........how am i to work around so that i get tab3 	3	Task	monitoring	2	Critical	6	Closed
12457975	PIVOT	gbrown	Rename Direction enum to FocusTraversalDirection	"It is somewhat arbitrary to define direction as ""forward"" and ""backward"", and this enum is used almost exclusively for focus traversal. The only other place it is used is in the delete() method of TextArea and TextInput, which uses Direction.BACKWARD to represent ""backspace"". This makes some sense, but Direction.FORWARD doesn't really correspond to ""delete"". This method should instead take a boolean ""backspace"" argument that would be used to distinguish between backspace and delete. Then the only use of the Direction enum would truly be focus traversal, and the name ""FocusTraversalDirection"" is more appropriate.
"	4	Improvement	api-change	4	Minor	5	Resolved
12458022	HBASE	kovyrin	Hbase shell does not work when started from the build dir	When we build hbase with mvn -DskipTests package assembly:directory it would be nice to be able to use bin/hbase shell directly from the build dir. At this moment hbase script does not add maven target directories to CLASSPATH.	4	Improvement	maven, shell	5	Trivial	6	Closed
12458028	HBASE	kovyrin	More directories should be ignored when using git for development	Maven target dirs should be git-ignored	4	Improvement	git, maven	5	Trivial	6	Closed
12458030	HIVE	zshao	"Explicitly say ""Hive Internal Error"" to ease debugging"	"Our users complain that hive fails error messages like ""FAILED: Unknown exception: null"".

We should explicitly mention that's an internal error of Hive, and provide more information (stacktrace) on the screen to ease bug reporting and debugging.


In other cases, we will still put the detailed information (stacktrace) in the log, since users should be able to figure out what's wrong with a single line of message.
"	4	Improvement	error, message	3	Major	6	Closed
12458054	WW	lukaszlenart	S2 JSON Plugin handles json content and contentType encoding differently	"Hi

I'm using Struts 2 with Struts 2 JSON Plugin. When I deploy my application on a Linux box and the JVM file.encoding parameter is set to ISO-8859-1 the json content is generated as UTF-8 and the content type is application/json;charset=iso-8859-1. So to workaround this problem I set the defaultEncoding attribute to UTF-8 to fix it on Redhat Linux. But if I run this configuration on windows with the defaultEncoding attribute I get the json content with what it looks to be iso-8859-1 encoding and content type application/json;charset=utf-8.

To replicate the problem on Windows you can set defaultEncoding to utf-8."	1	Bug	encoding, json, s2, struts	3	Major	6	Closed
12458078	AVRO	brucem	CMake-based build system for Avro/C	"I am working on a CMake-based build system for Avro/C.  This has these advantages over the current autoconf build system:

 * Easier to get features like universal binaries correct.
 * Works on Windows to make it easier to work on a Windows port of Avro/C.
 * Lets us generate project files for Visual Studio and XCode.
"	2	New Feature	cmake	3	Major	6	Closed
12458140	CXF	dkulp	NPE when calling a web service with header	"When Web Service which has a simple input header parameter is called from a Java consumer, a NullPointerException is thrown.
When It is called from an external SOAP Client, there is no problem

SEI : 
{quote}
@WebService
public interface BugService {

	@WebResult(name = ""return"")
	public String print(
			@WebParam(name = ""name"", header = true) String name);

}
{quote}

Consumer : 
{quote}
Service service = Service.create(wsdlURL, serviceName);
BugService client = service.getPort(BugService.class);
System.out.println(client.print(""header""));
{quote}

Exception : 
{quote}
java.lang.NullPointerException
	at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.initializeClassInfo(ReflectionServiceFactoryBean.java:754)
	at org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean.initializeWSDLOperation(JaxWsServiceFactoryBean.java:222)
	at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.initializeWSDLOperations(ReflectionServiceFactoryBean.java:674)
	at org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean.initializeWSDLOperations(JaxWsServiceFactoryBean.java:258)
	at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.buildServiceFromWSDL(ReflectionServiceFactoryBean.java:424)
	at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.initializeServiceModel(ReflectionServiceFactoryBean.java:528)
	at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.create(ReflectionServiceFactoryBean.java:278)
	at org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean.create(JaxWsServiceFactoryBean.java:178)
	at org.apache.cxf.jaxws.ServiceImpl.createPort(ServiceImpl.java:411)
	at org.apache.cxf.jaxws.ServiceImpl.getPort(ServiceImpl.java:296)
	at org.apache.cxf.jaxws.ServiceImpl.getPort(ServiceImpl.java:291)
	at javax.xml.ws.Service.getPort(Service.java:161)
	at com.header.ws.ConsumerBug.main(ConsumerBug.java:17)
{quote}


"	1	Bug	header	3	Major	6	Closed
12458159	PDFBOX	lehmi	loading an fdf containing a file attachment throws IOException	"loading of an fdf file generates the following exception:

java.io.IOException: Unknown dir object c=')' cInt=41 peek=')' peekInt=41 org.apache.pdfbox.io.PushBackInputStream@28d08633
	at org.apache.pdfbox.pdfparser.BaseParser.parseDirObject(BaseParser.java:993)
	at org.apache.pdfbox.pdfparser.BaseParser.parseCOSArray(BaseParser.java:704)
	at org.apache.pdfbox.pdfparser.BaseParser.parseDirObject(BaseParser.java:906)
	at org.apache.pdfbox.pdfparser.BaseParser.parseCOSDictionaryValue(BaseParser.java:157)
	at org.apache.pdfbox.pdfparser.BaseParser.parseCOSDictionary(BaseParser.java:234)
	at org.apache.pdfbox.pdfparser.BaseParser.parseDirObject(BaseParser.java:895)
	at org.apache.pdfbox.pdfparser.PDFParser.parseObject(PDFParser.java:521)
	at org.apache.pdfbox.pdfparser.PDFParser.parse(PDFParser.java:179)
	at org.apache.pdfbox.pdmodel.fdf.FDFDocument.load(FDFDocument.java:206)
	at org.apache.pdfbox.pdmodel.fdf.FDFLoaderTestCase.testLoadFailingAttachment(FDFLoaderTestCase.java:36)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:592)
	at junit.framework.TestCase.runTest(TestCase.java:154)
	at junit.framework.TestCase.runBare(TestCase.java:127)
	at junit.framework.TestResult$1.protect(TestResult.java:106)
	at junit.framework.TestResult.runProtected(TestResult.java:124)
	at junit.framework.TestResult.run(TestResult.java:109)
	at junit.framework.TestCase.run(TestCase.java:118)
	at junit.framework.TestSuite.runTest(TestSuite.java:208)
	at junit.framework.TestSuite.run(TestSuite.java:203)
	at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:130)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

this is (still) related the detection of the end of stream. 
in the stream data, there is the endstream token: the stream reading then stops, expecting to find cosobjects from then on: that is the reason of the failure.
"	1	Bug	FDF	3	Major	6	Closed
12458187	HIVE	appodictic	bogus assertion in GroupByOperator.initializeOp	"export HADOOP_OPTS=""-ea""

and then run the following query in Hive:

select count(1) from pokes;

This causes an assertion failure:

Caused by: java.lang.AssertionError
	at org.apache.hadoop.hive.ql.exec.GroupByOperator.initializeOp(GroupByOperator.java:161)
	at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:344)
	at org.apache.hadoop.hive.ql.exec.ExecReducer.configure(ExecReducer.java:143)
	... 10 more
"	1	Bug	cleanup	3	Major	1	Open
12458200	HADOOP	farisa	Improve documentation for rack awareness	The current documentation for rack awareness (http://hadoop.apache.org/common/docs/r0.20.0/cluster_setup.html#Hadoop+Rack+Awareness) should be augmented to include a sample script.	4	Improvement	newbie	3	Major	5	Resolved
12458221	DERBY	sleroux	In ij, GET CURSOR does not honor qualified identifiers	DERBY-4550 introduced qualified identifiers for cursor statements in ij. But cursors obtained by a GET CURSOR statement are always created in the current connection.	1	Bug	ij	3	Major	6	Closed
12458226	WICKET	ivaynberg	Child modal text fields getting disabled	"Whenever we open multiple child page and modal on top of one on another in sequence. Eg A -->B-->C---D-->E. Than on closing page window E, textfield of parent modal D are getting disabled. This is working fine in Mozilla and chrome browser but this issue is happening in IE browsers.

This seems to be critical bug."	1	Bug	features	4	Minor	5	Resolved
12458236	WINK	rott	Content-Type of HTTP Response contains no charset.	"I have the following handler:

{code}
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.Context;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Request;
import javax.ws.rs.core.Response;

import org.apache.wink.common.model.atom.AtomEntry;
import org.apache.wink.common.model.atom.AtomText;

@Path(""contentType"")
public class ContentTypeTest {
	@GET
	@Produces( { MediaType.APPLICATION_XML, MediaType.TEXT_XML, MediaType.APPLICATION_JSON, ""text/javascript"" })
	public Response getRepresentation(@Context Request req) {
		AtomEntry e = new AtomEntry();
		e.setTitle(new AtomText(
				""\u5341\u5341\u5341\u5341\u5341\u5341\u5341\u5341\u5341\u5341\u5341\u5341\u4e00\u69cb\u30bd\u30c1\u2010""));
		return Response.ok(e).build();
	}
}
{code}

When I open the resource I get the following HTTP response:
{code}
Content-Type:	application/xml
Content-Length:	274
Server:	Jetty(6.1.x)
{code}

You can see that the charset is not specified and the content is not properly decoded e.g. by RestClient - http://code.google.com/p/rest-client/

However I can see that the XML is properly encoded by opening the resource in FF and enforcing UTF-8 decoding.

Shouldn't wink put the encoding used during serialization if different than ASCII?"	1	Bug	charset, missing	3	Major	6	Closed
12458275	SOLR	noble.paul	DataImportHandler: dataimporter.functions.formatDate should have a redefined concept of NOW for each import	"MySQL requires that the backslash and the quote character used to quote the string in the query be escaped.  Currently only single and double quotes are escaped.

See: http://dev.mysql.com/doc/refman/4.1/en/mysql-real-escape-string.html"	1	Bug	dih	3	Major	6	Closed
12458276	SOLR	noble.paul	DataImportHandler: dataimporter.functions.formatDate should have a redefined concept of NOW for each import	"""The first argument can be a computed value eg: '${dataimporter.functions.formatDate('NOW-3DAYS', 'yyyy-MM-dd HH:mm')}'  and it uses the syntax of the datemath parser in Solr.""  When using a relative date with NOW, NOW is set with teh first full-import but not with subsequent imports.  NOW should be redefined with each new import."	1	Bug	dih	4	Minor	5	Resolved
12458323	PIVOT	gbrown	"Add ""inline"" attribute to <wtkx:include> element"	"Currently, if you don't define an ID for an include, it inherits the namespace of the parent WTKX. While this is a useful feature, it isn't very intuitive. 

Instead, we should define an ""inline"" attribute for the <wtkx:include> element. If true, the include would inherit the parent's namespace; otherwise, it would define its own.
"	4	Improvement	api-change	4	Minor	5	Resolved
12458409	THRIFT	roger.meier	Make generated Haskell code an instance of Arbitrary	"The patch
   * Generates Arbitrary instances for Thrift structs, enums and exceptions
   * Provides Arbitrary instances for GHC's Int64, Data.Map.Map and Data.Set.Set
   * Makes Thrift enums instances of Bounded and improves the Enum instance declaration

Making a type an instance of Test.QuickCheck.Arbitrary specifies how to generate random instances of the struct. This is useful for testing.

For example, consider the following simple Thrift declaration:

{code:title=distributed_log.thrift}
enum LogLevel { DEBUG, INFO, WARNING, ERROR }                                         
                                                                                      
typedef i32 UnixTimeStamp                                                             
                                                                                      
struct LogEntry {                                                                     
   1: LogLevel level,                                                                 
   2: UnixTimeStamp timestamp,                                                        
   3: string message                                                                  
}                                                                                     
                                                                                      
service Logger {                                                                      
   void log(1: LogEntry entry)                                                        
}
{code}

With the patch, the following program (import statements elided) is a fuzzer for the log service.

{code:title=LogTest.hs}
-- ripped from Test.QuickCheck.Gen.sample'                                            
infexamples ∷  Gen a →  IO [a]                                                        
infexamples (MkGen m) =                                                               
  do rnd ←  newStdGen                                                                 
     let rnds rnd = rnd1 : rnds rnd2 where (rnd1, rnd2) = split rnd                   
     return [(m r n) | (r, n) ←  rnds rnd `zip` [0,2..] ]                             
                                                                                      
infentries = infexamples (arbitrary ∷  Gen LogEntry)                                  
                                                                                      
main = do entries ←  infentries                                                       
          forM entries logAnEntry                                                     
                                                                                      
logAnEntry entry = do                                                                 
    transport ←  hOpen (""localhost"", PortNumber 9090)                                 
    let binProto = BinaryProtocol transport                                           
    let client = (binProto, binProto)                                                 
    (Client.log client) entry                                                         
    tClose transport                                                                  
    `Control.Exception.catch`                                                         
    (λ(TransportExn s t) →  print s)
--On systems with Haskell we could just generate a fuzzer like this one.
{code}

In implementing the Arbitrary instances, it was useful to make Thrift enums instances of Bounded and to improve the Enum instance. Specifically, whereas before, 

{code}
[DEBUG .. ]
{code}

would throw an exception, now it behaves as expected without an exception.

I consider the patch incomplete. It's more of a starting point for a discussion at this point than a serious candidate for inclusion. If it is of interest, I'd appreciate some direction on testing it as well as style, and I'd welcome any other comments or thoughts."	2	New Feature	test	4	Minor	6	Closed
12458651	JCR	c_koell	Deadlock inside XASession on Weblogic	"In one of our client deployments on WebLogic 9.2 we observed JackRabbit sessions going stale in a load test. This was observed against release 1.6.1 (to which we migrated due to concurrency related issues JCR-2081 and JCR-2237). Same effect with 2.0.0.
 
I could finally reproduce this issue locally. And it seems to boil down to WLS invoking the sequence of <prepare> ... <release> ... <commit> on one XA session from multiple threads, as it seems breaking assumptions of the thread-bound java.util.concurrent-RWLock based DefaultISMLocking class.
Effectively the setActiveXid(..) method on DefaultISMLocking$RWLock fails as the old active XID was not yet cleared. With the result of more and more sessions deadlocking in below's invocation stack.

{code}
""[ACTIVE] ExecuteThread: '27' for queue: 'weblogic.kernel.Default (self-tuning)'"" daemon prio=1 tid=0x33fc3ec0 nid=0x2324 in Object.wait() [0x2156a000..0x2156beb0] at java.lang.Object.wait(Native Method) - waiting on <0x68a54698> (a EDU.oswego.cs.dl.util.concurrent.WriterPreferenceReadWriteLock$WriterLock) at java.lang.Object.wait(Object.java:474) at EDU.oswego.cs.dl.util.concurrent.WriterPreferenceReadWriteLock$WriterLock.acquire(Unknown Source) - locked <0x68a54698> (a EDU.oswego.cs.dl.util.concurrent.WriterPreferenceReadWriteLock$WriterLock) at org.apache.jackrabbit.core.state.DefaultISMLocking$1.<init>(DefaultISMLocking.java:64) at org.apache.jackrabbit.core.state.DefaultISMLocking.acquireWriteLock(DefaultISMLocking.java:61) at org.apache.jackrabbit.core.version.AbstractVersionManager.acquireWriteLock(AbstractVersionManager.java:146) at org.apache.jackrabbit.core.version.XAVersionManager$1.prepare(XAVersionManager.java:562) at org.apache.jackrabbit.core.TransactionContext.prepare(TransactionContext.java:154) - locked <0x6dc2ad88> (a org.apache.jackrabbit.core.TransactionContext) at org.apache.jackrabbit.core.XASessionImpl.prepare(XASessionImpl.java:331) at org.apache.jackrabbit.jca.TransactionBoundXAResource.prepare(TransactionBoundXAResource.java:68) at weblogic.connector.security.layer.AdapterLayer.prepare(AdapterLayer.java:397) at weblogic.connector.transaction.outbound.XAWrapper.prepare(XAWrapper.java:297) at weblogic.transaction.internal.XAServerResourceInfo.prepare(XAServerResourceInfo.java:1276) at weblogic.transaction.internal.XAServerResourceInfo.prepare(XAServerResourceInfo.java:499) at weblogic.transaction.internal.ServerSCInfo$1.execute(ServerSCInfo.java:335) at weblogic.kernel.Kernel.executeIfIdle(Kernel.java:243) at weblogic.transaction.internal.ServerSCInfo.startPrepare(ServerSCInfo.java:326) at weblogic.transaction.internal.ServerTransactionImpl.localPrepare(ServerTransactionImpl.java:2516) at weblogic.transaction.internal.ServerTransactionImpl.globalPrepare(ServerTransactionImpl.java:2211) at weblogic.transaction.internal.ServerTransactionImpl.internalCommit(ServerTransactionImpl.java:266) at weblogic.transaction.internal.ServerTransactionImpl.commit(ServerTransactionImpl.java:227) at weblogic.transaction.internal.TransactionManagerImpl.commit(TransactionManagerImpl.java:283) at org.springframework.transaction.jta.JtaTransactionManager.doCommit(JtaTransactionManager.java:1028) at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:709) at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:678)
{code}"	1	Bug	thread, xa	2	Critical	6	Closed
12458699	AVRO	pwendell	add tools that read/write json records from/to avro data files	"It might be useful to have command-line tools that can read & write arbitrary json data from & to Avro data files.
"	2	New Feature	gsoc	3	Major	6	Closed
12458723	LUCENE	cmale	Fully decouple IndexWriter from analyzers	"IndexWriter only needs an AttributeSource to do indexing.

Yet, today, it interacts with Field instances, holds a private
analyzers, invokes analyzer.reusableTokenStream, has to deal with a
wide variety (it's not analyzed; it is analyzed but it's a Reader,
String; it's pre-analyzed).

I'd like to have IW only interact with attr sources that already
arrived with the fields.  This would be a powerful decoupling -- it
means others are free to make their own attr sources.

They need not even use any of Lucene's analysis impls; eg they can
integrate to other things like [OpenPipeline|http://www.openpipeline.org].
Or make something completely custom.

LUCENE-2302 is already a big step towards this: it makes IW agnostic
about which attr is ""the term"", and only requires that it provide a
BytesRef (for flex).

Then I think LUCENE-2308 would get us most of the remaining way -- ie, if the
FieldType knows the analyzer to use, then we could simply create a
getAttrSource() method (say) on it and move all the logic IW has today
onto there.  (We'd still need existing IW code for back-compat).
"	4	Improvement	gsoc2011, lucene-gsoc-11, mentor	3	Major	6	Closed
12458768	MAPREDUCE	aloknsingh	Need streaming examples in mapred/src/examples/streaming	"The examples directory contains the examples for pipes, java mapred but not for the streaming.

We are planning to add the test cases for the streaming in the examples respository"	4	Improvement	hadoop_examples_streaming	4	Minor	1	Open
12458795	WICKET	jdonnerstag	Enhancing RadioChoice input items with individual title and css class attributes	"Wicket is a great framework based on an excellent idea. It is a joy to work with. There are several existing components and most of them are very usable and customizable as much as possible, however there are still a few places for improvement. One of those is org.apache.wicket.markup.html.form.RadioChoice, where it is currently not possible to set HTML title and class attributes for the individual input tags. This would be a great feature for some client-side javascript frameworks, and in my case the JQuery star-rating plugin is even hard to use without these. For this purpose I have created my own private alternative for this component, but it would be good to have it included in wicket, so that others can benefit too.
See below the changes I have performed to enable this feature! Please note that all changes are made so that current behavior is not changed only new optional behavior is added.
Changes in method onComponentTagBody(...)
                ...
                // Add radio tag
                String title = getTitle(index, choice);
                String cssClass = getCssClass(index, choice);
                buffer.append(""<input name=\"""").append(getInputName()).append(""\"" type=\""radio\"""");
                if (title != null)
                    buffer.append("" title=\"""").append(title).append(""\"""");
                if (cssClass != null)
                    buffer.append("" class=\"""").append(cssClass).append(""\"""");
                buffer.append((isSelected(choice, index, selected) ? "" checked=\""checked\"""" : """"));
                buffer.append((enabled ? """" : "" disabled=\""disabled\""""));
                buffer.append("" value=\"""").append(id).append(""\"" id=\"""").append(idAttr)
                        .append(""\"""");
                ...
Added two new methods:
    /**
     * Returns the title attribute to be output for the input tag with the given index and choice
     * value. By default this returns null, and so the title attribute won't be set, but this can be
     * overridden.
     * 
     * @param index
     * @param choice
     * @return title attribute to be used for the given input tag
     */
    protected String getTitle(int index, T choice) {
        return null;
    }

    /**
     * Returns the CSS class attribute to be output for the input tag with the given index and
     * choice value. By default this returns null, and so the class attribute won't be set, but this
     * can be overridden.
     * 
     * @param index
     * @param choice
     * @return CSS class attribute to be used for the given input tag
     */
    protected String getCssClass(int index, T choice) {
        return null;
    }
"	4	Improvement	form	4	Minor	5	Resolved
12458804	JCR	tmueller	SQL2 query - supplying column selector fails with NPE on getColumnName()	"I am preparing and executing an SQL2 query (JCR 2.0) as follows:

QueryManager qm = jcrSession.getWorkspace().getQueryManager();
String queryString = ""select order.[customerAccountUUID] as cust from [atl:order] as order"";
Query query = qm.createQuery(queryString, Query.JCR_SQL2);
QueryResult queryResult = query.execute();

The following query fails:

select order.[customerAccountUUID] from [atl:order] as order

java.lang.NullPointerException
        org.apache.jackrabbit.commons.query.sql2.QOMFormatter.isSimpleName(QOMFormatter.java:577)
        org.apache.jackrabbit.commons.query.sql2.QOMFormatter.formatName(QOMFormatter.java:567)
        org.apache.jackrabbit.commons.query.sql2.QOMFormatter.format(QOMFormatter.java:452)
        org.apache.jackrabbit.commons.query.sql2.QOMFormatter.format(QOMFormatter.java:123)
        org.apache.jackrabbit.commons.query.sql2.QOMFormatter.format(QOMFormatter.java:117)

line 452: c.getColumnName() returns null.

The following query is fine:

select order.[customerAccountUUID] as cust from [atl:order] as order

I have been using the test case (here: http://svn.apache.org/viewvc/jackrabbit/trunk/jackrabbit-spi-commons/src/test/resources/org/apache/jackrabbit/spi/commons/query/sql2/test.sql2.txt?view=markup) as a guideline.

Cheers,

James "	1	Bug	query, sql2	3	Major	6	Closed
12458843	HDFS	nidaley	Generate Eclipse's .classpath file from Ivy config	HDFS companion issue for HADOOP-6407.	4	Improvement	ant, eclipse, ivy	3	Major	6	Closed
12458852	CAY	andrus	"Exception when attempting to ""Infer Relationships"""	"CayenneModeler Error Please copy the message below and report this error by going to http://issues.apache.org/cayenne/

CayenneModeler Info
Version: cayenne.version
Build Date: cayenne.build.date
Exception: 
=================================
java.lang.NullPointerException
	at org.apache.cayenne.modeler.dialog.autorelationship.InferRelationshipsControllerBase.createJoin(InferRelationshipsControllerBase.java:157)
	at org.apache.cayenne.modeler.dialog.autorelationship.InferRelationshipsControllerBase.setRelationships(InferRelationshipsControllerBase.java:71)
	at org.apache.cayenne.modeler.dialog.autorelationship.InferRelationshipsController.<init>(InferRelationshipsController.java:65)
	at org.apache.cayenne.modeler.action.InferRelationshipsAction.performAction(InferRelationshipsAction.java:47)
	at org.apache.cayenne.modeler.util.CayenneAction.actionPerformed(CayenneAction.java:163)
	at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2012)
	at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2335)
	at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:404)
	at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
	at javax.swing.AbstractButton.doClick(AbstractButton.java:374)
	at javax.swing.plaf.basic.BasicMenuItemUI.doClick(BasicMenuItemUI.java:1688)
	at javax.swing.plaf.basic.BasicMenuItemUI$Handler.mouseReleased(BasicMenuItemUI.java:1732)
	at java.awt.AWTEventMulticaster.mouseReleased(AWTEventMulticaster.java:289)
	at java.awt.Component.processMouseEvent(Component.java:6108)
	at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
	at java.awt.Component.processEvent(Component.java:5873)
	at java.awt.Container.processEvent(Container.java:2105)
	at java.awt.Component.dispatchEventImpl(Component.java:4469)
	at java.awt.Container.dispatchEventImpl(Container.java:2163)
	at java.awt.Component.dispatchEvent(Component.java:4295)
	at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4461)
	at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4125)
	at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4055)
	at java.awt.Container.dispatchEventImpl(Container.java:2149)
	at java.awt.Window.dispatchEventImpl(Window.java:2478)
	at java.awt.Component.dispatchEvent(Component.java:4295)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:604)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:275)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:200)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:190)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:185)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:177)
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:138)
"	1	Bug	Cayenne	4	Minor	6	Closed
12458904	MAHOUT	robinanil	Implement some recommendation ideas used by the Netflix top teams to boost the recommenders package	"
A student with a good proposal 
- should be free to work for Mahout in the summer and should be thrilled to work in this area :)
- should be able to program in Java and be comfortable with datastructures and algorithms
- must be clear about the algorithm or heuristic, how it works, its strengths, its weaknesses and possible tweaks.
- must have a plan on making it a map/reduce implementation
- should be able to show the improvement on the netflix data as compared to the baseline recommender package by the end of summer of code
- must have clear deadlines and pace it evenly across the span of 3 months.
- may have a background in these area.  Past work, thesis etc counts, so show it in the proposal clearly

If you can do something extra it counts, but make sure the plan is reasonable within the specified time frame."	2	New Feature	gsoc, mentor	3	Major	6	Closed
12458916	SLING	fpaparoni	GSoC 2010: create a mini-CMS to demonstrate Sling	"This is a suggested project for Google Summer of Code 2010.

The goal is to create a mini-CMS with Sling, that demonstrates Sling best practices.

The emphasis is on the quality and readability of the demo code, and we expect to have to go through several iterations to refine it and the corresponding JCR content model so that they demonstrate Sling best practices. We will not necessarily create a full-fledged CMS, the goal is for the result to be educational and help Sling newcomers understand how to create web applications with it.

Suggested technologies: jQuery for the front-end, ESP and/or JSP for server-side scripting, and Java code in OSGi bundles for back-end functionality.

See http://tinyurl.com/asfgsoc for the full list of GSoC 2010 projects at the ASF, and http://community.apache.org/gsoc for general GSoC information."	3	Task	gsoc, gsoc2010sling, mentor, tutorial	3	Major	5	Resolved
12458954	CXF	dkulp	Concurrency issue with AsyncHandler	"The problem is on the access to the ClientCallback.done boolean

You can have a situation where the client uses the Future object he got from the dispatch.invokeAsync() method.
It performs an active wait using Future.isDone()

On another Thread, the WS response comes back, and the JaxwsClientCallback.handlerResponse() is called. The handler provided by the client is called, so far everything went well. After the AsyncHandler.handleResponse() invocation, the ClientCallback set the 'done' boolean to true.

But this value change is never seen by the Future.isDone() invocations!

Because the ClientCallback.done boolean is not 'volatile'.

I've made a try with a volatile 'done' and it works perfectly.

Could it be possible that this simple change makes it to the 2.2.7 ?"	1	Bug	concurrency	3	Major	6	Closed
12458972	MAHOUT	robinanil	Proposal for GSoC2010 (Linear SVM for Mahout)	"Title/Summary: Linear SVM Package (LIBLINEAR) for Mahout

Student: Zhen-Dong Zhao

Student e-mail: zhaozd@comp.nus.edu.sg

Student Major: Multimedia Information Retrieval /Computer Science

Student Degree: Master        Student Graduation: NUS'10           Organization: Hadoop

0 Abstract
Linear Support Vector Machine (SVM) is pretty useful in some applications with large-scale datasets or datasets with high dimension features. This proposal will port one of the most famous linear SVM solvers, say, LIBLINEAR [1] to mahout with unified interface as same as Pegasos [2] @ mahout, which is another linear SVM solver and almost finished by me. Two distinct con tributions would be: 1) Introduce LIBLINEAR to Mahout; 2) Uniﬁed interfaces for linear SVM classiﬁer.

1 Motivation
As one of TOP 10 algorithms in data mining society [3], Support Vector Machine is very powerful Machine Learning tool and widely adopted in Data Mining, Pattern Recognition and Information Retrieval domains.

The SVM training procedure is pretty slow, however, especially on the case with large-scale dataset. Nowadays, several literatures propose SVM solvers with linear kernel that can handle large-scale learning problem, for instance, LIBLINEAR [1] and Pegasos [2]. I have implemented a prototype of linear SVM classiﬁer based on Pegasos [2] for Mahout (issue: Mahout-232). Nevertheless, as the winner of ICML 2008 large-scale learning challenge (linear SVM track (http://largescale.first.fraunhofer.de/summary/), LIBLINEAR [1] suppose to be incorporated in Mahout too. Currently, LIBLINEAR package supports:

  (1) L2-regularized classiﬁers L2-loss linear SVM, L1-loss linear SVM, and logistic regression (LR)
  (2) L1-regularized classiﬁers L2-loss linear SVM and logistic regression (LR)

Main features of LIBLINEAR are following:
  (1) Multi-class classiﬁcation: 1) one-vs-the rest, 2) Crammer & Singer
  (2) Cross validation for model selection
  (3) Probability estimates (logistic regression only)
  (4) Weights for unbalanced data

All the functionalities suppose to be implemented except probability estimates and weights for unbalanced data (If time permitting, I would like to do so).

2 Unified Interfaces
Linear SVM classiﬁer based on Pegasos package on Mahout already can provide such functionalities: (http://issues.apache.org/jira/browse/MAHOUT-232)

  (1) Sequential Binary Classiﬁcation (Two-class Classiﬁcation), includes sequential training and prediction;
  (2) Sequential Regression;
  (3) Parallel & Sequential Multi-Classiﬁcation, includes One-vs.-One and One-vs.-Others schemes.

Apparently, the functionalities of Pegasos package on Mahout and LIBLINEAR are quite similar to each other. As aforementioned, in this section I will introduce an unified interfaces for linear SVM classiﬁer on Mahout, which will incorporate Pegasos, LIBLINEAR. 
The unfied interfaces has two main parts: 1) Dataset loader; 2) Algorithms. I will introduce them separately.

2.1 Data Handler
The dataset can be stored on personal computer or on Hadoop cluster. This framework provides high performance Random Loader, Sequential Loader for accessing large-scale data.

2.2 Sequential Algorithms
Sequential Algorithms will include binary classiﬁcation, regression based on Pegasos and LIBLINEAR with uniﬁed interface.

2.3 Parallel Algorithms
It is widely accepted that to parallelize binary SVM classiﬁer is hard. For multi-classiﬁcation, however, the coarse-grained scheme (e.g. each Mapper or Reducer has one independent SVM binary classiﬁer) is easier to achieve great improvement. Besides, cross validation for model selection also can take advantage of such coarse-grained parallelism. I will introduce a uniﬁed interface for all of them.

3 Biography:
I am a graduating masters student in Multimedia Information Retrieval System from National University of Singapore. My research has involved the large-scale SVM classifier.

I have worked with Hadoop and Map Reduce since one year ago, and I have dedicated lots of my spare time to Sequential SVM (Pegasos) based on Mahout (http://issues.apache.org/jira/browse/MAHOUT-232). I have taken part in setting up and maintaining a Hadoop cluster with around 70 nodes in our group.

4 Timeline:
Weeks 1-4 (May 24 ~ June 18): Implement binary classifier 

Weeks 5-7 (June 21 ~ July 12): Implement parallel multi-class classification and Implement cross validation for model selection. 

Weeks 8 (July 12 ~ July 16): Summit of mid-term evaluation

Weeks 9 - 11 (July 16 ~ August 9):  Interface re-factory and performance turning

Weeks 11 - 12 (August 9 ~ August 16): Code cleaning, documents and testing. 


5 References
[1] Rong-En Fan, Kai-Wei Chang, Cho-Jui Hsieh, Xiang-Rui Wang, and Chih-Jen Lin. Liblinear: A library for large linear classiﬁcation. J. Mach. Learn. Res., 9:1871-1874, 2008.

[2] Shai Shalev-Shwartz, Yoram Singer, and Nathan Srebro. Pegasos: Primal estimated sub-gradient solver for svm. In ICML '07: Proceedings of the 24th international conference on Machine learning, pages 807-814, New York, NY, USA, 2007. ACM.

[3] Xindong Wu, Vipin Kumar, J. Ross Quinlan, Joydeep Ghosh, Qiang Yang, Hiroshi Motoda, Geoﬀrey J. McLachlan, Angus Ng, Bing Liu, Philip S. Yu, Zhi-Hua Zhou, Michael Steinbach, David J. Hand, and Dan Steinberg. Top 10 algorithms in data mining. Knowl. Inf. Syst., 14(1):1-37, 2007."	3	Task	gsoc, gsoc2010	3	Major	6	Closed
12458975	PIG	daijy	Generated Execution Code Prototyping	"Currently Pig has a set of Physical Operators that contain the logic to execute Pig programs. To execute a given program a pipeline of these physical operators is constructed, split into Map Reduce jobs, and shipped to Hadoop. We need to investigate changing the physical operators to instead understand how to generate Java code. Pig can then generate Java code, compile it, and pass that to Hadoop. Some sources we have read suggest that a significant performance improvement could be gained. Also this would allow Pig to use pre-compiled tuples specific to a given script, which should improve memory usage and performance. This would make the code more complex to develop and maintain. It would also make is more complex to install as it would require a Java compiler as part of the Pig deployment. 

We mark this issue to be a candidate project for ""Google summer of code 2010"" program. We are looking for students we would like to prototype this execution model."	1	Bug	gsoc, mentor	3	Major	1	Open
12458993	ZOOKEEPER	savu.andrei	GSoC 2010: Monitoring Recipes and Web-based Administrative Interface	"Monitoring Recipes And Web-based Administrative Interface
Mentor: Patrick Hunt (phunt@apache.org)

Requirements:
Modern web platform - e.g. Django. Some design or UI skills would help. Java for adding methods to ZooKeeper.

Description:
ZooKeeper is a complex distributed system. Understanding how well it is running is tremendously important. Patrick Hunt has created a Django-based dashboard (see http://github.com/phunt/zookeeper_dashboard) that allows some insight into how ZooKeeper is running. This is a great foundation on which to build; however there are improvements that could be made! This project would capture much more information from ZooKeeper, adding hooks to retrieve it where necessary and visualise it in a appealing and useful way. Integration with Ganglia would be a definite plus.

"	5	Wish	gsoc, mentor	3	Major	5	Resolved
12459057	LUCENE	mikemccand	IndexReader # doCommit - typo nit about v3.0 in trunk	"Trunk is already in 3.0.1+ . But the documentation says -  ""In 3.0, this will become ... "".  Since it is already in 3.0, it might as well be removed. 
"	4	Improvement	IndexReader	3	Major	6	Closed
12458483	PIG	analog.sony	COUNT on null bag causes failure	"grunt>  l = load '/tmp/e.bag' as (b : bag{t: (i : int)}, a : int);
# b is null for the only row
grunt> c = foreach l generate COUNT(b);                           
grunt> dump c       

It results in following exception-

org.apache.pig.backend.executionengine.ExecException: ERROR 2106: Error while computing count in COUNT
        at org.apache.pig.builtin.COUNT.exec(COUNT.java:59)
        at org.apache.pig.builtin.COUNT.exec(COUNT.java:39)
        at org.apache.pig.backend.hadoop.executionengine.physicalLayer.expressionOperators.POUserFunc.getNext(POUserFunc.java:212)
        at org.apache.pig.backend.hadoop.executionengine.physicalLayer.expressionOperators.POUserFunc.getNext(POUserFunc.java:293)
        at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POForEach.processPlan(POForEach.java:358)
        at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POForEach.getNext(POForEach.java:288)
        at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigMapBase.runPipeline(PigMapBase.java:232)
        at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigMapBase.map(PigMapBase.java:227)
        at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigMapBase.map(PigMapBase.java:52)
        at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)
        at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:583)
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:305)
        at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:176)
Caused by: java.lang.NullPointerException
        at org.apache.pig.builtin.COUNT.exec(COUNT.java:46)
        ... 12 more
"	1	Bug	newbie	3	Major	5	Resolved
12458484	PIVOT	gbrown	Change return type of PutQuery to Boolean	"The HTTP specification allows PUT to create a resource on the server; this value will indicate whether or not a resource was created.
"	4	Improvement	api-change	4	Minor	5	Resolved
12458506	HBASE	stack	[doc] Add to 'Getting Started' a note on how to rig hdfs to support hdfs-200 flush/sync		1	Bug	moved_from_0_20_5	3	Major	6	Closed
12458540	WW	lukaszlenart	StrutsSpringTestCase - Memory Leak	"I ran into an issue with the StrutsSpringTestCase class when doing my unit tests.
Basically the memory kept climbing until it crashed the machine.

This class is actually loading the applicationContext for every test case that extends
it. And because the applicationContext is static the instances of the spring beans loaded
are not cleaned up by the garbage collector. I could verify this by using JVisualVM and seeing the memory usage climb and by doing a heap dump and seeing the multiple instances of Spring beans.

What I ended up doing was overriding the method with the following in my base test class
for Struts 2. The only difference being the check to see if applicationContext is null.
This has the added benefit of speeding up the tests.

protected void setupBeforeInitDispatcher() throws Exception {
        // only load beans from spring once
        if (applicationContext == null) {
                GenericXmlContextLoader xmlContextLoader = new GenericXmlContextLoader();
            applicationContext = xmlContextLoader.loadContext(getContextLocations());
        }
       
servletContext.setAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE,
applicationContext);
    }

Maybe someone can update the repository with this."	1	Bug	junit	3	Major	6	Closed
12459150	ODE	vanto	ODE does not preserve XML namespace prefixes	"Hi,

I'm currently working on a topic where it is essential that the prefixes of the namespace are constant. Unfortunately ODE does not preserve the prefixes on service invocations. To solve this problem I created a simple patch which extends the OMUtils.java to preserve prefixes if present. I haven't fully tested it yet but in our setup it seems to work without a problem.

Greetings"	1	Bug	patch	3	Major	5	Resolved
12459153	CASSANDRA	tzz	access levels for Thrift authorization	Provide access levels at the API level, set by the login() method relayed through IAuthenticator.	2	New Feature	access, api, authentication, authorization, iauthenticator	10002	Normal	5	Resolved
12459234	AVRO	dcreager	CMake: Complete CMake build system and remove autotools build system	"Placeholder bug to serve as a parent for all of the various remaining tasks for the CMake build system.
"	4	Improvement	cmake	3	Major	6	Closed
12459240	AVRO	dcreager	CMake: Complete the pretty target	"I don't think I implemented support for moving the ~ files as the autotools target did.
"	7	Sub-task	cmake	3	Major	6	Closed
12459243	AVRO	dcreager	CMake: What to do about config.h?	"We need to decide what to do about config.h ... autotools is still generating one but we don't actually use it anywhere. I think we can safely just get rid of it entirely for now until we have a demonstrated need for it?
"	7	Sub-task	cmake	3	Major	6	Closed
12459276	XERCESJ	sandygao@ca.ibm.com	XML Schema 1.1: Check subsumption relationship of complex type particles 	"In XML Schema 1.1 [1], the sequences of sub-elements allowed by a complex type is determined by its content model, a particle [2]. When one complex type restricts a base type, its particle is required to accept less [3] than that of the base type. When <all> model groups [4] are used in the restriction type (while the base type may also have an <all> group or have a combination of <sequence>s and <choice>s), the ""accept less"" requirement becomes an interesting task. The student is expected to study this problem, research existing solutions to similar issues (e.g. those listed here [5]), and propose and implement a solution. This work also helps to address the Priority Feedback [6] in the specification regarding the usefulness and implementation difficulty of this feature.

Possible Mentors: Sandy Gao

[1] http://www.w3.org/TR/xmlschema11-1/
[2] http://www.w3.org/TR/xmlschema11-1/#cParticles
[3] http://www.w3.org/TR/xmlschema11-1/#cos-content-act-restrict
[4] http://www.w3.org/TR/xmlschema11-1/#Model_Groups
[5] http://www.w3.org/TR/xmlschema11-1/#subsumptionCheckP
[6] http://www.w3.org/TR/xmlschema11-1/#derivation-ok-restriction"	2	New Feature	gsoc	3	Major	5	Resolved
12459279	XERCESJ	asthiwanka	[GSoC]: Asynchronous LSParser and parseWithContext	"The goal of this project is to complete the implementation of the DOM Level 3 LSParser. Though Xerces has a functional LSParser, there are a couple parts of the spec which still need to be implemented. This includes an asynchronous [1] version which returns from the parse method immediately and builds the DOM tree on another thread as well as parseWithContext [2] which allows a document fragment to be parsed and attached to an existing DOM.

Possible Mentors: Michael Glavassevich

[1] http://www.w3.org/TR/2004/REC-DOM-Level-3-LS-20040407/load-save.html#LS-LSParser
[2] http://www.w3.org/TR/2004/REC-DOM-Level-3-LS-20040407/load-save.html#LS-LSParser-parseWithContext

"	2	New Feature	gsoc2011	3	Major	3	In Progress
12458704	CASSANDRA	tpatterson	Performance regression tests, take 2	"We have a  stress test in contrib/py_stress, and Paul has a tool using libcloud to automate running it against an ephemeral cluster of rackspace cloud servers, but to really qualify as ""performance regression tests"" we need to

 - test a wide variety of data types (skinny rows, wide rows, different comparator types, different value byte[] sizes, etc)
 - produce pretty graphs.  seriously.
 - archive historical data somewhere for comparison (rackspace can provide a VM to host a db for this, if the ASF doesn't have something in place for this kind of thing already)
"	4	Improvement	gsoc, gsoc2010	10002	Normal	5	Resolved
12458767	PIG	yanz	[zebra] Zebra need to support the virtual column 'source_table' for the unsorted table unions also 	"In Pig contrib project zebra,
 When user do the union of the sorted tables, the resulting table contains a virtual column called  'source_table'.
Which allows user to know the original table name from where the content of the row of the result table is coming from.

This feature is also very useful for the case when the input tables are not sorted.

Based on the discussion with the zebra dev team, it should be easy to implement.

I am filing this enhancemnet jira for zebra.

Alok


"	2	New Feature	hadoop_zebra	3	Major	6	Closed
12459315	HARMONY	odeakin	 [jdktools] Implement the serialver command line tool	"Implement the serialver tool, which is a tool to generate serialversionUID values to Serializable classes. This field is used to apply ""compatiblity"", with the class being (de/se)rialized."	3	Task	jdktools	4	Minor	6	Closed
12459345	ROL	roller_unassigned	GSOC 2010: Develop GWT web UI for Roller	"Roller is currently stuck with a Struts2 web UI and it would be nice to explore some other options that might allow us to provide a more interactive, attractive and easy to maintain web UI. Project should do these things:

1) Break the weblogger-web module down into these parts:
   - weblogger-web-core: Core/rendering portions code
   - weblogger-web-struts2: Struts2 specific code

2) Create a new weblogger-web-gwt module, home for the Roller GWT web UI
   - Should depend on weblogger-web-core

3) Design and develop an complete GWT web UI for Roller

"	2	New Feature	gsoc	3	Major	6	Closed
12459387	SLING	justinedelson	support for resource paths containing workspace name	via configuration, it'd be nice to be able to specify multiple workspaces.	4	Improvement	multiworkspace	3	Major	6	Closed
12458821	WW	lukaszlenart	NullPointer in JSF plug-in	"Am getting a NullPointerException in the JSF Plugin StrutsNavigationHandler, line 66.
>> ActionConfig config = ctx.getActionInvocation().getProxy().getConfig();

Debugging, it's ctx.getActionInvocation() that is returning null.

Looking at line 63 I think I see the bug:
if (ctx == null && ctx.getActionInvocation() == null) {

Surely that should be || instead of &&

Some context: I have an existing JSF action. I am trying to run it backed by struts, maintaining all the JSF beans and navigation without editing - which means that it'll be mostly backed by stub-type struts actions.
"	1	Bug	jsf, navigation, tomcat	3	Major	6	Closed
12458486	PIG	aloknsingh	pig UDF is lacking XMLLoader. Plan to add the XMLLoader	"Hi All,

 We are planning to add the XMLLoader UDF in the piggybank repository.

Here is the proposal with the user docs :-

 The load function to load the XML file
 This will implements the LoadFunc interface which is used to parse records
 from a dataset.
 This takes a xmlTag as the arg which it will use to split the inputdataset into
 multiple records.


 For example if the input xml (input.xml) is like this
 <configuration>
 <property>
 <name> foobar </name>
 <value> barfoo </value>
 </property>
 <ignoreProperty>
 <name> foo </name>
 </ignoreProperty>
 <property>
 <name> justname </name>
 </property>
 </configuration>

 And your pig script is like this

 --load the jar files
 register loader.jar;
 -- load the dataset using XMLLoader
 -- A is the bag containing the tuple which contains one atom i.e doc see output
 A = load '/user/aloks/pig/input.xml using loader.XMLLoader('property') as (doc:chararray);
 --dump the result
 dump A;


 Then you will get the output

(<property>
<name> foobar </name>
<value> barfoo </value>
</property>)
(<property>
<name> justname </name>
</property>)

Where each () indicate one record

 "	2	New Feature	pig_udf	3	Major	6	Closed
12458941	ETCH	grandyho	Windows 7 / .NET 3.5 SP1 runtime setsockopt error	"When starting a client or server in this environment an exception is thrown and the socket closes with the following stack - this stops everything:

System.Net.Sockets.SocketException: An unknown, invalid, or unsupported option or level was specified in a getsockopt or setsockopt call
      at System.Net.Sockets.Socket.SetSocketOption(SocketOptionLevel optionLevel, SocketOptionName optionName, Int32 optionValue, Boolean silent)
      at System.Net.Sockets.Socket.SetSocketOption(SocketOptionLevel optionLevel, SocketOptionName optionName, Int32 optionValue)
      at Etch.Util.TcpTransport.SetUpSocket() in c:\BambooAgent\xml-data\build-dir\ETCH-RELEASE\binding-csharp\runtime\src\main\csharp\Etch\Util\TcpTransport.cs:line 193
      at Etch.Util.Connection`1.Run0(Boolean first) in c:\BambooAgent\xml-data\build-dir\ETCH-RELEASE\binding-csharp\runtime\src\main\csharp\Etch\Util\Connection.cs:line 116

Fix:

In TcpTransport, a call is made to SetSocketOption with SocketOptionLevel.Tcp set.  The correct SocketOptionLevel is .Socket, and this will fix the issue.  By setting it to .Tcp, the socket sends a SO_BROADCAST which is invalid for TCP."	1	Bug	setsockopt	2	Critical	6	Closed
12458995	PIG	azaroth	Binary comparator for secondary sort	"When hadoop framework doing the sorting, it will try to use binary version of comparator if available. The benefit of binary comparator is we do not need to instantiate the object before we compare. We see a ~30% speedup after we switch to binary comparator. Currently, Pig use binary comparator in following case:

1. When semantics of order doesn't matter. For example, in distinct, we need to do a sort in order to filter out duplicate values; however, we do not care how comparator sort keys. Groupby also share this character. In this case, we rely on hadoop's default binary comparator
2. Semantics of order matter, but the key is of simple type. In this case, we have implementation for simple types, such as integer, long, float, chararray, databytearray, string

However, if the key is a tuple and the sort semantics matters, we do not have a binary comparator implementation. This especially matters when we switch to use secondary sort. In secondary sort, we convert the inner sort of nested foreach into the secondary key and rely on hadoop to sorting on both main key and secondary key. The sorting key will become a two items tuple. Since the secondary key the sorting key of the nested foreach, so the sorting semantics matters. It turns out we do not have binary comparator once we use secondary sort, and we see a significant slow down.

Binary comparator for tuple should be doable once we understand the binary structure of the serialized tuple. We can focus on most common use cases first, which is ""group by"" followed by a nested sort. In this case, we will use secondary sort. Semantics of the first key does not matter but semantics of secondary key matters. We need to identify the boundary of main key and secondary key in the binary tuple buffer without instantiate tuple itself. Then if the first key equals, we use a binary comparator to compare secondary key. Secondary key can also be a complex data type, but for the first step, we focus on simple secondary key, which is the most common use case.

We mark this issue to be a candidate project for ""Google summer of code 2010"" program. "	4	Improvement	gsoc, mentor	3	Major	6	Closed
12459011	HBASE	apurtell	[stargate] multiuser mode: support tracking of user request counts and data transfer metrics	"Optionally track per-user request counts and data transfer metrics via HTable atomic increments. Aggregate user statistics for short periods and then push (then release) them:

- Request counts, by category: query, edit. Track scanner results as one query per row.

- Bytes in/out

- CPU use in Stargate

A common ""users"" HTable can support the HTable authenticator and metering."	7	Sub-task	moved_from_0_20_5	3	Major	6	Closed
12459107	CASSANDRA	garo	Add LoadBytes JMX Attribute (similar to LoadString) to help tracking node load	"Cassandra JMX currently exposes org.apache.cassandra.service:type=StorageService attribute ""LoadString"" which contains node load as a string but this value is hard to use by monitoring processes. There's already public double getLoad() in StorageService class so it would just need to be exported to its MBean.

Exposing the raw numeric value will ease node load tracking in monitoring systems like Zabbix."	4	Improvement	jmx	10003	Low	5	Resolved
12459122	WSS	coheigea	Interoperability b/w Java consumer of .NET Web Service with WS-Security on WSE 2.0 	"There is an issue with using WSS4J for Java Consumer calling .NET 2.0 Web Service with WS-Security.
The default SecretKey size that is generated in WSS4J is 16 whereas .NET used 32

I changed the UsernameToken class to generate the secretkey using 32 as the length and then it worked.
This shoule be officially released in a version.
"	1	Bug	Interoperability, Java, NET, Security, WS, and, between	3	Major	6	Closed
12459696	APA	taylor	BIRT reporting portlet application	"A new set of portlet applications will be provided...

Up to now only two portlets are provided for this startup issue. 

 ChartViewer
 ReportViewer

Both of them are exactly equal right now because. I mean I copied and pasted the code from one to the other to be able to hack ChartViewer after to find a way to render only a chart from a report design and be able to set width and height on the fly when rendering. That's the only cause to create a different portlet for Charting. 

Right now it works well if resize should not be supported.

Current features are:

        Full Wicket App
        Two working modes [View, Edit]
        
        [View Mode]
        Report is generated on the fly.
        Different reports can be shown with only one portlet (Via Edit
        Mode).
        Report parameters are used on report generation.
        
        [Edit Mode]
        Reports can be deployed directly using one directory. Drag &
        Drop deploy... :-)
        Custom preference panels are created on the fly based on report
        parameters. 
        Report value for parameters are fetched from database
        dynamically or statically on edit time. Depending on how report
        is built.
"	2	New Feature	BIRT, charting, portlet, reporting	3	Major	1	Open
12459146	ODE	rrusin	Incorrect Process2Process communication	"Hi,

This problem is somehow related to ODE-758. I've a one BPEL process which implements two WSDL portTypes. The process is deployed separately at two tomcat servers. Inside the deployment descriptor (deploy.xml) I bound the partnerLinks to the remote and local process. When I invoke, inside the first process, an operation of the second WSDL portType at the remote process, ODE uses the internal Process2Process allthough the partnerlink points to an external location. Thus the message is actually never sent to the second tomcat. Fortunately I found a easy way to fix this problem and appended the corresponding patch.

Greetings "	1	Bug	patch	3	Major	1	Open
12459191	TUSCANY	nirmal	Develop a simple tool that can be used to generate composite diagrams from the xml files	"I'm looking a simple tool (web based or command) that can generate the composite diagrams from a list of composite files. One technology we can try is the Apache Batik project.

http://xmlgraphics.apache.org/batik/

This tool can serve multiple purposes:

1) Help document our tutorials and samples
2) Be integrated with the SCA domain manager to visualize the SCA domain (contributions, composites, nodes etc)"	5	Wish	gsoc, gsoc2010, gsoc2011, mentor	3	Major	5	Resolved
12459236	AVRO	dcreager	CMake: Support correct version numbers in the libraries	"We need to set both VERSION and SOVERSION correctly as the autotools build did.
"	7	Sub-task	cmake	3	Major	6	Closed
12459239	AVRO	dcreager	CMake: Support cscope target		7	Sub-task	cmake	3	Major	6	Closed
12459242	AVRO	dcreager	CMake: Add dist target	"We need a dist / distcheck target ...

Might be worth looking at this which does it:

http://bit.ly/d4emB8
"	7	Sub-task	cmake	3	Major	6	Closed
12459765	TS	georgep	Traffic server dying	"Having compiled TS, and started the server, I get the following errors both in the syslog and in traffic.out (some of the messages in traffic.out are very similar to those in the syslog) :

in the syslog :

Mar 20 19:36:47 tagmata traffic_cop[1795]: --- Cop Starting [Version: Apache Traffic Server - traffic_cop - 2.1.0 - (build # 2204 on Mar 20 2010 at 04:09:00)] --- 
Mar 20 19:36:47 tagmata traffic_cop[1795]: traffic_manager not running, making sure traffic_server is dead 
Mar 20 19:36:47 tagmata traffic_cop[1795]: spawning traffic_manager 
Mar 20 19:36:47 tagmata traffic_manager[1797]: NOTE: --- Manager Starting ---
Mar 20 19:36:47 tagmata traffic_manager[1797]: NOTE: Manager Version: Apache Traffic Server - traffic_manager - 2.1.0 - (build # 2204 on Mar 20 2010 at 04:11:51)
Mar 20 19:36:47 tagmata traffic_manager[1797]: NOTE: RLIMIT_NOFILE(7):cur(10000),max(10000)
Mar 20 19:36:47 tagmata traffic_manager[1797]: {3079632576} STATUS: opened var/log/trafficserver/manager.log
Mar 20 19:36:47 tagmata traffic_manager[1797]: {3079632576} NOTE: updated diags config
Mar 20 19:36:47 tagmata traffic_manager[1797]: {3079632576} NOTE: [ClusterCom::ClusterCom] Node running on OS: 'Linux' Release: '2.6.18-028stab067.4-PAE' 
Mar 20 19:36:47 tagmata traffic_manager[1797]: {3079632576} NOTE: [LocalManager::listenForProxy] Listening on port: 8080 
Mar 20 19:36:47 tagmata traffic_manager[1797]: {3079632576} NOTE: [TrafficManager] Setup complete 
Mar 20 19:36:48 tagmata traffic_manager[1797]: {3079632576} NOTE: [LocalManager::startProxy] Launching ts process 
Mar 20 19:36:48 tagmata traffic_manager[1797]: {3079632576} NOTE: [LocalManager::pollMgmtProcessServer] New process connecting fd '14' 
Mar 20 19:36:48 tagmata traffic_manager[1797]: {3079632576} NOTE: [Alarms::signalAlarm] Server Process born 
Mar 20 19:36:49 tagmata traffic_server[1808]: NOTE: --- Server Starting ---
Mar 20 19:36:49 tagmata traffic_server[1808]: NOTE: Server Version: Apache Traffic Server - traffic_server - 2.1.0 - (build # 2204 on Mar 20 2010 at 04:13:15)
Mar 20 19:36:49 tagmata traffic_server[1808]: {1080614544} STATUS: opened var/log/trafficserver/diags.log
Mar 20 19:36:49 tagmata traffic_server[1808]: {1080614544} NOTE: updated diags config
Mar 20 19:36:49 tagmata traffic_server[1808]: {1080614544} NOTE: cache clustering disabled
Mar 20 19:36:49 tagmata traffic_server[1808]: {1080614544} NOTE: clearing statistics
Mar 20 19:36:49 tagmata traffic_server[1808]: FATAL: ../../../../trafficserver/iocore/eventsystem/UnixEThread.cc:70: failed assert `(evfd = eventfd(0,0)) >= 0`
Mar 20 19:36:49 tagmata traffic_manager[1797]: {3079632576} ERROR: [LocalManager::pollMgmtProcessServer] Server Process terminated due to Sig 6: Aborted 
Mar 20 19:36:49 tagmata traffic_manager[1797]: {3079632576} ERROR:  (last system error 2: No such file or directory) 
Mar 20 19:36:49 tagmata traffic_manager[1797]: {3079632576} ERROR: [Alarms::signalAlarm] Server Process was reset 
Mar 20 19:36:49 tagmata traffic_manager[1797]: {3079632576} ERROR:  (last system error 2: No such file or directory) 
Mar 20 19:36:50 tagmata traffic_manager[1797]: {3079632576} NOTE: [LocalManager::startProxy] Launching ts process 
Mar 20 19:36:50 tagmata traffic_manager[1797]: {3079632576} NOTE: [LocalManager::pollMgmtProcessServer] New process connecting fd '14' 
Mar 20 19:36:50 tagmata traffic_manager[1797]: {3079632576} NOTE: [Alarms::signalAlarm] Server Process born 

in traffic.out :

[Mar 20 20:02:22.778] Manager {3080124096} ERROR: [LocalManager::pollMgmtProcessServer] Server Process terminated due to Sig 6: Aborted
[Mar 20 20:02:22.778] Manager {3080124096} ERROR:  (last system error 2: No such file or directory)
[Mar 20 20:02:22.778] Manager {3080124096} ERROR: [Alarms::signalAlarm] Server Process was reset
[Mar 20 20:02:22.778] Manager {3080124096} ERROR:  (last system error 2: No such file or directory)
[TrafficServer] using root directory '/simpl/apps/trafficserver/trunk'
[Mar 20 20:02:24.830] {1080614544} STATUS: opened var/log/trafficserver/diags.log
FATAL: ../../../../trafficserver/iocore/eventsystem/UnixEThread.cc:70: failed assert `(evfd = eventfd(0,0)) >= 0`
bin/traffic_server - STACK TRACE: 
bin/traffic_server(ink_fatal+0x1a)[0x834b6fa]
bin/traffic_server(_ink_assert+0x68)[0x834a898]
bin/traffic_server(_ZN7EThreadC1E10ThreadTypei+0x3f3)[0x8344b93]
bin/traffic_server(_ZN14EventProcessor5startEi+0x8d)[0x8345f9d]
bin/traffic_server(main+0xaf3)[0x8117533]
/lib/libc.so.6(__libc_start_main+0xe0)[0x40554450]
bin/traffic_server[0x80c3231]

The same messages are then repeated every two seconds or so.

I used the default apt-get install's for all the dependencies, and apart from Sqlite, which uses the latest source, these files were used in the build.

The kernel is quite an old one now, but unfortunately I cannot upgrade because my ISP doesn't offer a more recent kernel.

Although I can telnet into the server, it won't process any requests.
"	1	Bug	ec2, eventfd, fedora_8, process, signal_6, terminate, xen	1	Blocker	6	Closed
12459786	ZOOKEEPER	castagna	Use zookeeper-{version}-sources.jar instead of zookeeper-{version}-src.jar to publish sources in the Maven repository	"The artifact with the sources to be published in the Maven repository should be named ${artifactId}-${version}-sources.jar not ${artifactId}-${version}-src.jar.

See also: http://maven.apache.org/guides/mini/guide-central-repository-upload.html and ZOOKEEPER-224"	1	Bug	maven	5	Trivial	6	Closed
12459817	HBASE	tlipcon	HBASE-2283 removed bulk sync optimization for multi-row puts	"previously to HBASE-2283 we used to call flush/sync once per put(Put[]) call (ie: batch of commits).  Now we do for every row.  

This makes bulk uploads slower if you are using WAL.  Is there an acceptable solution to achieve both safety and performance by bulk-sync'ing puts?  Or would this not work in face of atomic guarantees?

discuss!"	1	Bug	moved_from_0_20_5	1	Blocker	6	Closed
12459823	HBASE	ryanobjc	HBASE-2066: may not be invalidating client cache properly when a region moves	we need a better test for this and a fix. i have seen, and have heard other people complain, about situations when regions move and the client does not seem to always relocate the region properly in a post HBASE-2066 hbase client.  I have seen cases where this DOES work so there is investigation to be done.	1	Bug	moved_from_0_20_5	3	Major	6	Closed
12458588	TS	dianes	"Add ""mini-ToC"" to all appropriate SDK HTML pages"	"Add ""mini-ToC"" to all pages of SDK that used to appear as first- and second-level drill-downs on ToC that was removed from left frame"	4	Improvement	documentation	3	Major	6	Closed
12458612	GERONIMO	ben.liang	Removing an entry from the Repository results in NullPointerException	"Removing an entry from the Repository results in a NullPointerException.  This is similar to GERONIMO-4157 but invoked differently.

HTTP ERROR 500

Problem accessing /console/portal/Services/Repository/__ac0x3console-base0x2RepositoryViewer!604305819%7C0/__pm0x3console-base0x2RepositoryViewer!604305819%7C0_view. Reason:

    Server Error
Caused by:

java.lang.NullPointerException
	at org.apache.geronimo.console.repository.RepositoryViewPortlet.processAction(RepositoryViewPortlet.java:116)
	at org.apache.pluto.core.PortletServlet.dispatch(PortletServlet.java:218)
	at org.apache.pluto.core.PortletServlet.doGet(PortletServlet.java:139)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:693)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:806)
"	1	Bug	jetty, windows	3	Major	6	Closed
12458658	WW	lukaszlenart	fielderror -tag does not escape the error message if param tag is used	"Noticed this when I wanted to have the field contents as part of the error message. In this case, the error message I'm using has ${trackingCode} as part of it and there's a input field in the form named trackingCode. Class error_text is simple class, that colors the text red.

When using fielderror as follows:
<s:fielderror theme=""simple"" cssClass=""error_text"" />
If the field trackingCode contains javascript, the script is just printed on the page as part of the error message. Also possible HTML -entities in resource bundle are printed out with the ampersand -> &auml; is just printed out as it was in the resource bundle.

When using fielderror like this:
<s:fielderror theme=""simple"" cssClass=""error_text"" >
     <s:param>trackingCode</s:param>
</s:fielderror>
If the field trackingCode contains javascript, the script is executed on page load. Also any HTML -entities in resource bundle are not escaped, hence &auml; becomes ä on the page.

I think this is an obvious bug, but was unable to find an issue of it."	1	Bug	cross, scripting, site, vulnerability, xss	2	Critical	6	Closed
12459275	XERCESJ	sandygao@ca.ibm.com	[GSoC]: Implement a parser and evaluator for Schema Component Designators (SCD)	"Design and implement a parser and evaluator for Schema Component Designators [1]. A Schema component designator identifies XML Schema Component(s) defined in the W3C XML Schema Definition language using a path expression (similar to an XPath expression). This project invovles writing a parser to parse the SCD expression (automatic code generation tools like JavaCC can be used to generate the parser), and an evaluator to evaluate the expression (return the selected components from an XSModel). 

Possible Mentors: Khaled Noaman, Sandy Gao, Michael Glavassevich

[1] http://www.w3.org/TR/xmlschema-ref/"	2	New Feature	gsoc	3	Major	5	Resolved
12459344	ROL	roller_unassigned	GSOC 2010: Simple Social Networking for Roller blog server	Enable Twitter-like Activities (aka status messages) with following, followers, optional 140-character text limit and other Twitter features as time allows. This could be done via new table Followers, which allows users to follow each other, a new Manager for querying this table, and which stores Activity as blog entries but using a different category scheme so that they can be omitted from standard blog feeds. Provide a theme and blog template macros for updating status and for displaying your Activities, Friends Activities, All Activities and combinations of those.	2	New Feature	gsoc	3	Major	6	Closed
12459865	WICKET	ivaynberg	Incorrect decode parameters in AbstractRequestTargetUrlCodingStrategy#decodeParameters	"In case of  utf-8 url (see example below) created ValueMap in AbstractRequestTargetUrlCodingStrategy#decodeParameters is incorrect. 
Each key-value pair contains not decoded key and decoded value.

Proposed fix - line no 171 in AbstractRequestTargetUrlCodingStrategy#decodeParameters
parameters.add(pairs[i], value);
shall be 
parameters.add(urlDecodePathComponent(pairs[i]), value);
 
Changes locally tested on 1.4.7 version - no failed test.  But I am not sure is AbstractRequestTargetUrlCodingStrategy covered by test cases.
And works correctly on tomcat.



URL in browser

http://jewelry.npa.com:8080/ws/shop/category/Браслеты/Колір_металу/Белый/Вставка/Бриллиант/Розмір/19.5/brand/Enigma/Проба/750/Матеріал/Золото/price/USD-31-60/Колір_вставки/Белый

URL in Tomcat
http://jewelry.npa.com:8080/ws/shop/category/%D0%91%D1%80%D0%B0%D1%81%D0%BB%D0%B5%D1%82%D1%8B/%D0%9A%D0%BE%D0%BB%D1%96%D1%80_%D0%BC%D0%B5%D1%82%D0%B0%D0%BB%D1%83/%D0%91%D0%B5%D0%BB%D1%8B%D0%B9/%D0%92%D1%81%D1%82%D0%B0%D0%B2%D0%BA%D0%B0/%D0%91%D1%80%D0%B8%D0%BB%D0%BB%D0%B8%D0%B0%D0%BD%D1%82/%D0%A0%D0%BE%D0%B7%D0%BC%D1%96%D1%80/19.5/brand/Enigma/%D0%9F%D1%80%D0%BE%D0%B1%D0%B0/750/%D0%9C%D0%B0%D1%82%D0%B5%D1%80%D1%96%D0%B0%D0%BB/%D0%97%D0%BE%D0%BB%D0%BE%D1%82%D0%BE/price/USD-31-60/%D0%9A%D0%BE%D0%BB%D1%96%D1%80_%D0%B2%D1%81%D1%82%D0%B0%D0%B2%D0%BA%D0%B8/%D0%91%D0%B5%D0%BB%D1%8B%D0%B9"	1	Bug	encoding	3	Major	5	Resolved
12459904	HIVE	jvs	Make CombineHiveInputFormat work with non-native tables	"As part of fixing HIVE-1257, I am making CombineHiveInputFormat punt when it sees a non-native table.  I need to come up with a real fix to allow CombineHiveInputFormat to deal with native and non-native tables at the same time.
"	1	Bug	HiveHBase	3	Major	1	Open
12459952	HDFS	jmhsieh	Improve error messages for failed completeFile	"In practice I often see users confused by the cryptic error message ""failed to complete PATH because dir.getFileBlocks() is null and pendingFile is null"" (I wonder why!) The most common cause of this seems to be that another user deleted the file (or its containing directory) while the writer was in progress.

We should at least improve the error message on the NN side. Even better would be to expose the error message through the IOException passed over the RPC boundary to the client.

Including a message like ""(another client may have removed the file or its containing directory)"" should do the trick."	4	Improvement	newbie	3	Major	5	Resolved
12458718	HIVE	jvs	support filter pushdown against non-native tables	"For example, HBase's scan object can take filters.
"	4	Improvement	HiveHBase	3	Major	6	Closed
12458721	LUCENE	mikemccand	Separately specify a field's type	"This came up from dicussions on IRC.  I'm summarizing here...

Today when you make a Field to add to a document you can set things
index or not, stored or not, analyzed or not, details like omitTfAP,
omitNorms, index term vectors (separately controlling
offsets/positions), etc.

I think we should factor these out into a new class (FieldType?).
Then you could re-use this FieldType instance across multiple fields.

The Field instance would still hold the actual value.

We could then do per-field analyzers by adding a setAnalyzer on the
FieldType, instead of the separate PerFieldAnalzyerWrapper (likewise
for per-field codecs (with flex), where we now have
PerFieldCodecWrapper).

This would NOT be a schema!  It's just refactoring what we already
specify today.  EG it's not serialized into the index.

This has been discussed before, and I know Michael Busch opened a more
ambitious (I think?) issue.  I think this is a good first baby step.  We could
consider a hierarchy of FIeldType (NumericFieldType, etc.) but maybe hold
off on that for starters...
"	4	Improvement	gsoc2011, lucene-gsoc-11, mentor	3	Major	6	Closed
12458730	PDFBOX	lehmi	PDFToImage does not work with certain fonts (for eg. PDF documents created by MS Office and OpenOffice)	"I created a PDF document using Open Office which contains following fonts:
1. Times New Roman
2. TlwgTypeWriter
3. Courier New
4. Comic MS 

None of these fonts get converted to Image file. 
I have posted a question on mailing list, and was advised to create this issue. I have uploaded the input PDF and output jpg file to this issue"	1	Bug	PDFToImage, font, microsoft, office, open	3	Major	6	Closed
12458733	OODT	chrismattmann	grid-product/pom.xml references tika ver. 0.2-SNAPSHOT, which no longer exists	"When you try to build grid-product using maven, one of the dependencies that it wants to download from the Apache repository is tika version 0.2-SNAPSHOT, which no longer exists.  Anyone who already has the dependency won't notice, but I think this will affect anyone who is a new developer (like me), who is trying to download the dependencies anew.

Unless there is a compelling reason to continue using 0.2-SNAPSHOT, I suggest we change the version of tika to plain 0.2.  Making this change allowed me to build grid-product successfully.
"	1	Bug	dependency, maven, pom, tika, version	5	Trivial	5	Resolved
12459386	DERBY	nirmal	Add tools for improved analysis and understanding of query plans and execution statistics	"I think it would be great to see some work in the area of tools for helping
with the analysis of complex query execution. Quite frequently, users of
Derby have trouble comprehending (a) how their query is being translated
into a query plan by the optimizer, and (b) what the execution-time resource
usage of the various parts of the query is.

There are low-level features in Derby which capture this information and
record it, such as logQueryPlan, and the XPLAIN tables, but there is a lot
of opportunity for designing higher-level tools which can process the query
plan and execution statistics information and present it in a more
comprehensible fashion. "	4	Improvement	gsoc, gsoc2010, mentor	3	Major	6	Closed
12459389	CONNECTORS	kwright@metacarta.com	Command documentation could benefit from usage information	"It's about the page : 
[Build & Deploy|http://cwiki.apache.org/confluence/display/CONNECTORS/How+to+Build+and+Deploy+Lucene+Connectors+Framework]
In the paragraph about Commands, each commands should be associate with an example of use, something like that :
||Core Command Class||Function||
|org.apache.lcf.core.DBCreate|Create LCF database instance
eg : java org.apache.lcf.core.DBCreate UserName Password|
|org.apache.lcf.core.DBDrop|Drop LCF database instance
eg : java org.apache.lcf.core.DBDrop|"	4	Improvement	commands, documentation	4	Minor	5	Resolved
12459392	TAP5	ccordenier	XSS vulnerability in calendar component	"The calendar component provided in tapestry 5.1.0.5 could be used to allow code injection by malicious web users into any page that uses datefield .

To reproduce the vulnerability, put js code like  <script>alert(""T5 is great""); </script> in any datefield  and click on the related calendar bitma

After quick search in the DateField.js, it seems like the field value is not escaping

escaping with a change like var value = escape($F(this.field));  the field value seems solve this vulnerability.    


"	1	Bug	XSS	3	Major	6	Closed
12459410	ZOOKEEPER	cthunes	large numbers of watches can cause session re-establishment to fail	"If a client sets a large number of watches the ""set watches"" operation during session re-establishment can fail.

for example:
 WARN  [NIOServerCxn.Factory:22801:NIOServerCnxn@417] - Exception causing close of session 0xe727001201a4ee7c due to java.io.IOException: Len error 4348380

in this case the client was a web monitoring app and had set both data and child watches on > 32k znodes.

there are two issues I see here we need to fix:

1) handle this case properly (split up the set watches into multiple calls I guess...)
2) the session should have expired after the ""timeout"". however we seem to consider any message from the client as re-setting the expiration on the server side. Probably we should only consider messages from the client that are sent during an established session, otherwise we can see this situation where the session is not established however the session is not expired either. Perhaps we should create another JIRA for this particular issue.


"	1	Bug	pull-request-available	2	Critical	6	Closed
12458844	MAPREDUCE	tomwhite	Generate Eclipse's .classpath file from Ivy config	MapReduce companion issue for HADOOP-6407.	4	Improvement	ant, eclipse, ivy	3	Major	6	Closed
12458847	SHIRO	lhazlewood	MemorySessionDao should be propably abstract	"Please consider different default configuration for caching of session. 

Today i have spent a plenty of time trying to find the reason why i'm loosing my sessions.
(i'm using native mode) 

Finally i have found that session were garbage-collected from that soft cache. which is default configuration for native mode.
So i have configured my security manager to use org.apache.shiro.cache.HashtableCacheManager which actually replaces the caching 
by simple memory persistence. 

I think this can be better default. 

Anyway,please consider moving out from such thing as default  wiring (made by/in constructors).

Personally speaking i think it is that is better to leave the decision on developer , what caching or other dependencies 
will he  use.  I also know that requires higher understanding of your product, but at least forces lean persons ( like me) to do that. 

The configuration can be made by spring, so all dependencies can be injected easily.

There can/should be made some reasonable scenarios for configuration depending on deployment like:
 -single node  
 - clustered node .
 - service
 -etc.

Sincerely,
 Peter.



"	4	Improvement	Cache, garbage, manager, session	3	Major	6	Closed
12459979	PIVOT	tvolkert	Remove the TablePane.Row.setVisible() method	TablePane.Row.setVisible() is a little misleading, in that it's just a convenience method for setting the visiblility of the components in the row (the row itself doesn't maintain an independent visibility property).  Also, the row will remain visible if a visible component exists in another row but spans into the row.  Thus, we should just remove it.	4	Improvement	api-change	5	Trivial	5	Resolved
12459989	PIVOT	gbrown	Split JSON path methods into dedicated JSON class; move to org.apache.pivot.json	Refactor static JSON path methods into JSON class that JSONSerializer temporarily now extends (this will change in a later release. JSON parse methods will stay in JSONSerializer since they rely on JSON serialization.	4	Improvement	api-change	4	Minor	5	Resolved
12460022	ZOOKEEPER	dferro	ephemeral parent znodes	"ephemeral znodes have the nice property of automatically cleaning up after themselves when the creator goes away, but since they can't have children it is hard to build subtrees that will cleanup after the clients that are using them are gone.

rather than changing the semantics of ephemeral nodes, i propose ephemeral parents: znodes that disappear when they have no more children. this cleanup would happen automatically when the last child is removed. an ephemeral parent is not tied to any particular session, so even if the creator goes away, the ephemeral parent will remain as long as there are children.

the when an ephemeral parent is created it will have an initial child, so that it doesn't get immediately removed. i think this child should be an ephemeral znode with a predefined name, ""firstChild""."	2	New Feature	container_znode_type	3	Major	5	Resolved
12460025	PIVOT	gbrown	"Move ""strictValidation"" style from TerraTextInputSkin to intrinsic property"		4	Improvement	api-change	4	Minor	5	Resolved
12460064	ODE	vanto	"column ""detailsext"" is of type bytea but expression is of type oid"	"13:48:03,400 ODEServerImpl-1 ERROR [SimpleScheduler] Database error.
org.apache.ode.scheduler.simple.DatabaseException: org.postgresql.util.PSQLException: ERROR: column ""detailsext"" is of type bytea but expression is of type oid
	at org.apache.ode.scheduler.simple.JdbcDelegate.insertJob(JdbcDelegate.java:218)
	at org.apache.ode.scheduler.simple.SimpleScheduler.schedulePersistedJob(SimpleScheduler.java:230)
	at org.apache.ode.scheduler.simple.SimpleScheduler.schedulePersistedJob(SimpleScheduler.java:187)
	at org.apache.ode.bpel.engine.ODEProcess.scheduleJob(ODEProcess.java:811)
	at org.apache.ode.bpel.engine.ODEWSProcess.scheduleInvokeCheck(ODEWSProcess.java:706)
	at org.apache.ode.bpel.engine.ODEWSProcess.invokePartner(ODEWSProcess.java:641)
	at org.apache.ode.bpel.engine.BpelRuntimeContextImpl.invoke(BpelRuntimeContextImpl.java:739)
	at org.apache.ode.bpel.rtrep.v2.RuntimeInstanceImpl.invoke(RuntimeInstanceImpl.java:654)
	at org.apache.ode.bpel.rtrep.v2.INVOKE.wsdlInvoke(INVOKE.java:108)
	at org.apache.ode.bpel.rtrep.v2.INVOKE.run(INVOKE.java:71)
	at sun.reflect.GeneratedMethodAccessor136.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.ode.jacob.vpu.JacobVPU$JacobThreadImpl.run(JacobVPU.java:450)
	at org.apache.ode.jacob.vpu.JacobVPU.execute(JacobVPU.java:139)
	at org.apache.ode.bpel.rtrep.v2.RuntimeInstanceImpl.execute(RuntimeInstanceImpl.java:716)
	at org.apache.ode.bpel.engine.BpelRuntimeContextImpl.execute(BpelRuntimeContextImpl.java:844)
	at org.apache.ode.bpel.engine.BpelRuntimeContextImpl.executeCreateInstance(BpelRuntimeContextImpl.java:832)
	at org.apache.ode.bpel.engine.ODEProcess.executeCreateInstance(ODEProcess.java:235)
	at org.apache.ode.bpel.engine.ODEWSProcess$1.call(ODEWSProcess.java:410)
	at org.apache.ode.bpel.engine.ODEWSProcess$1.call(ODEWSProcess.java:408)
	at org.apache.ode.bpel.engine.ODEProcess$ProcessCallable.call(ODEProcess.java:800)
	at org.apache.ode.bpel.engine.BpelInstanceWorker.doInstanceWork(BpelInstanceWorker.java:171)
	at org.apache.ode.bpel.engine.BpelInstanceWorker.execInCurrentThread(BpelInstanceWorker.java:106)
	at org.apache.ode.bpel.engine.ODEProcess.doInstanceWork(ODEProcess.java:355)
	at org.apache.ode.bpel.engine.ODEWSProcess.invokeProcess(ODEWSProcess.java:408)
	at org.apache.ode.bpel.engine.MyRoleMessageExchangeImpl.doInvoke(MyRoleMessageExchangeImpl.java:129)
	at org.apache.ode.bpel.engine.UnreliableMyRoleMessageExchangeImpl$1.call(UnreliableMyRoleMessageExchangeImpl.java:46)
	at org.apache.ode.bpel.engine.UnreliableMyRoleMessageExchangeImpl$1.call(UnreliableMyRoleMessageExchangeImpl.java:44)
	at org.apache.ode.bpel.engine.ODEProcess$ProcessCallable.call(ODEProcess.java:800)
	at org.apache.ode.bpel.engine.Contexts.execTransaction(Contexts.java:110)
	at org.apache.ode.bpel.engine.BpelServerImpl$TransactedCallable.call(BpelServerImpl.java:1031)
	at org.apache.ode.bpel.engine.BpelServerImpl$ServerCallable.call(BpelServerImpl.java:1011)
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
	at java.util.concurrent.FutureTask.run(FutureTask.java:138)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:619)
Caused by: org.postgresql.util.PSQLException: ERROR: column ""detailsext"" is of type bytea but expression is of type oid
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:1608)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1343)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:194)
	at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:451)
	at org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:350)
	at org.postgresql.jdbc2.AbstractJdbc2Statement.executeUpdate(AbstractJdbc2Statement.java:304)
	at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:102)
	at org.apache.ode.scheduler.simple.JdbcDelegate.insertJob(JdbcDelegate.java:216)
	... 37 more"	1	Bug	patch	3	Major	5	Resolved
12460082	TUSCANY	kgoodson	Improve testing and doc for tuscany trace using aspectj	The AspectJ tracing feature was brought into 2.x in r900323. This jira opened to cover enhancing the documentation and testing of this feature, and potential development of the invocation methods.	4	Improvement	AOP, aspectj, documentation, testing, trace	3	Major	6	Closed
12458887	CXF	sergey_beryozkin	Provide Method Invocation Interceptor	"It would be helpful if there was some kind of MethodInvocationInterceptor (or alternatively with In/Out variants) that could be applied against Invokers before they do the actual method call for jax-rs and jax-ws. I'm thinking the place that the interceptor would be called is in AbstractInvoker.performInvocation() around m.invoke().

What this provides for is the ability to perform some action or filtering based on information from the java.lang.Method, parameter and return  values before or after the invocation is actually made.

Two cases that I am looking at are to be able to check for annotations on a method and do some processing for security, transaction management, and/or validation. Currently, the only way to be able to perform logic on custom annotations is to create proxies around singleton beans or something like aspectj. By allowing for these kind of interceptors, this would no longer be necessary.

These interceptors make it simple to do things such as check for spring-security @Pre/PostAuthorize annotations and apply security constraints. Likewise, I'm also wanting to implement JSR-303 validation checking against method parameters like is done for spring @Controller classes. This would keep cxf's jaxrs implementation on par with spring's rest framework. Adding @Transactional logic would also be possible through this.

In jax-rs, not having this creates difficulty providing this logic since using singletons imposes the requirement that the resources be stateless. The java changes would be simple, though it would also need some work done in spring configuration code as well."	2	New Feature	abstractinvoker, cxf, invoker	3	Major	6	Closed
12459485	QPID	cctrieloff	[Patch] Messages set with a TTL expire immediately when sent on qpid queues with LVQ ordering	"Problem Description:

MRG LVQ becomes unstable when msg TTLs are used and a message expires. Sometimes when messages expire, it seems to upset the LVQ mechanism. Eg.  Once a message with key 'X' has expired, any subsequent messages sent  to the LVQ with key 'X' are expired immediately, and never made  available to client applications. Once an LVQ begins exhibiting this  behaviour, This behaviour continues until the broker is restarted. At this point, another side effect is that the msgDepth and byteDepth properties on an LVQ do not always agree, i.e, when msgDepth is zero, byteDepth is not zero.

How Reproducible:

Always:

Steps to Reproduce:

* Create a queue with queue ordering as lvq or lvq-no-browse
* Build and run attached producer for 1 minute
* Stop the producer for a minute to allow messages to expire
* Use qpid-tool to monitor the queue depth and wait for the message to be dequeued (usually takes about 10 minutes)
* Once message has expired, restart the producer
* Watch queue properties with qpid-tool

Actual Results:

The queue depth is always 0, but the byte depth is not. Occasionally, one will get the following error message from the producer:

Unexpected exception: Attempted size underflow on dequeue  

Expected Results:

The queue depth should not be 0 (at least till the time expired messages are purged). Also, when queue depth is 0, byte depth should be 0.

Additional Information:

The root cause seems to be that the lvq object in the Queue that holds mapping from key to messages (Queue::lvq) is not cleared when messages are expired (Queue::purgeExpired), which leads to incorrect accounting when the next message arrives in the queue with the same LVQ key as the message that expired."	1	Bug	broker, cpp, lvq, queue, ttl	3	Major	6	Closed
12459502	NUTCH	ab	Problems managing outlinks with large url length	"Nutch can get idle during the collection of outlinks if  the URL address of the outlink is too large.

The maximum sizes of an URL for the main web servers are:

    * Apache: 4,000 bytes
    * Microsoft Internet Information Server (IIS): 16, 384 bytes
    * Perl HTTP::Daemon: 8.000 bytes

URL adress sizes bigger than 4000 bytes are problematic, so the limit should be set in the nutch-default.xml configuration file.

I attached a patch"	1	Bug	nutch, outlink, parse, parseoutputformat	3	Major	6	Closed
12460085	TAP5	thiagohp	[GSoC] create nifty components (multiple students possible)	"Tapestry is lacking some nice-to-have components. We put together a list and students wanting to pursue this task should choose at least two of them for their assignment (the multi select and google maps component count as one). The following components are available:

- Google maps
- Chart (via JFreeChart, resembling JFreeCharts ChartPanel)
- JavaScript-only PDF viewer component
- multi select (TAP5-148)
- Components or mixins for Scriptaculous effects (show, hide, slide up, slide down etc).
- drag&drop Palette
- Components wrapping Scriptaculous's  Ajax.InPlaceEditor, Ajax.InPlaceCollectionEditor, Autocompleter.Local, and Slider.
- A SelectWithAutocomplete component that chooses an object, but uses autocompletion to find them (good for selects with lots of options).
- A ListReorder component using Scriptaculous drag and drop. "	3	Task	bulk-close-candidate	3	Major	6	Closed
12460088	TAP5	thiagohp	[GSoC] Create JasperReports integration		3	Task	gsoc, mentor	3	Major	5	Resolved
12460103	SOLR	hossman	JMX name collision when running multiple SOLR instances/webapps in the same ServletContainer	"http://www.mail-archive.com/solr-user@lucene.apache.org/msg33921.html

When i run multiple independent SOLR webapps both with JMX enabled there seems to be some sort of collision when registering Mbeans causing my application server to throw exceptions for each mbean it tries to register for all applications after the first.

This seems to be due to collision issue of sorts with both applications trying to register their mbeans under the name ""solr""

This patch fixes the issue by allowing the user to specify the name under which MBeans are registered in solrconfig.xml like so:
  <jmx rootName=""mySolr"" /> 

i went with rootName since in the code the variable is called jmxRootName.

Constantijn Visinescu"	1	Bug	jmx, resin	4	Minor	6	Closed
12460150	MAPREDUCE	jolly	Publish Javadoc for all contrib packages with user-facing APIs	Some packages don't appear in the Javadoc. E.g. MRUnit, Vertica.	4	Improvement	newbie	3	Major	6	Closed
12458994	ZOOKEEPER	abmargb	GSoC 2010: Failure Detector Model	"Failure Detector Module
Possible Mentor
Henry Robinson (henry at apache dot org)

Requirements
Java, some distributed systems knowledge, comfort implementing distributed systems protocols

Description
ZooKeeper servers detects the failure of other servers and clients by counting the number of 'ticks' for which it doesn't get a heartbeat from other machines. This is the 'timeout' method of failure detection and works very well; however it is possible that it is too aggressive and not easily tuned for some more unusual ZooKeeper installations (such as in a wide-area network, or even in a mobile ad-hoc network).

This project would abstract the notion of failure detection to a dedicated Java module, and implement several failure detectors to compare and contrast their appropriateness for ZooKeeper. For example, Apache Cassandra uses a phi-accrual failure detector (http://ddsg.jaist.ac.jp/pub/HDY+04.pdf) which is much more tunable and has some very interesting properties. This is a great project if you are interested in distributed algorithms, or want to help re-factor some of ZooKeeper's internal code."	5	Wish	gsoc, mentor	3	Major	1	Open
12458997	ZOOKEEPER	dorserg	GSoC 2010: Read-Only Mode	"Read-only mode
Possible Mentor
Henry Robinson (henry at apache dot org)

Requirements
Java and TCP/IP networking

Description
When a ZooKeeper server loses contact with over half of the other servers in an ensemble ('loses a quorum'), it stops responding to client requests because it cannot guarantee that writes will get processed correctly. For some applications, it would be beneficial if a server still responded to read requests when the quorum is lost, but caused an error condition when a write request was attempted.

This project would implement a 'read-only' mode for ZooKeeper servers (maybe only for Observers) that allowed read requests to be served as long as the client can contact a server.

This is a great project for getting really hands-on with the internals of ZooKeeper - you must be comfortable with Java and networking otherwise you'll have a hard time coming up to speed.
"	5	Wish	gsoc, mentor	3	Major	1	Open
12460173	QPID	shuston	WCF client samples can't resolve the DLLs when installed	"The WCF client samples refer to the assembly DLLs via relative path from within the build tree. This doesn't resolve correctly in a situation where the projects are installed. When installed, the assembly DLLs are located with the other Qpid DLLs in <root>\bin.

Solution is to add another HintPath ..\..\..\..\bin to the csproj files."	1	Bug	legacy-wcf-client	4	Minor	6	Closed
12460280	TAP5	ulrich.staerk	Page activation context lost when redirecting from HTTP to HTTPS due to the @Secure annotation	"When using @Secure on a page, if we get the page in http, we are redirected to the https page. But the context path is lost.

Example :

bouil@maggie:~/Documents/workspace/tapestry-secure-test$ curl -k -v http://localhost:8080/World
* About to connect() to localhost port 8080 (#0)
*   Trying ::1... connected
* Connected to localhost (::1) port 8080 (#0)
> GET /World HTTP/1.1
> User-Agent: curl/7.19.5 (i486-pc-linux-gnu) libcurl/7.19.5 OpenSSL/0.9.8g zlib/1.2.3.3 libidn/1.15
> Host: localhost:8080
> Accept: */*
> 
< HTTP/1.1 302 Found
< Location: https://localhost:8443/
< Content-Length: 0
< Server: Jetty(6.1.10)
< 
* Connection #0 to host localhost left intact
* Closing connection #0
bouil@maggie:~/Documents/workspace/tapestry-secure-test$ 

The Index.java page contains :

package org.bouil.tapestry.pages;

import org.apache.tapestry5.annotations.Property;
import org.apache.tapestry5.annotations.Secure;

@Secure
public class Index {

    @Property
    private String context;

    public void onActivate(String context) {
        this.context = context;
    }

    public String onPassivate() {
        return context;
    }
}"	1	Bug	ssl	3	Major	6	Closed
12459590	HIVE	jvs	joins between HBase tables and other tables (whether HBase or not) are broken	"Details in

http://mail-archives.apache.org/mod_mbox/hadoop-hive-user/201003.mbox/%3C9A53DDE1FE082F4D952FDF20AC87E21F021F3EBC@exchange2.t8design.com%3E
"	1	Bug	HiveHBase	3	Major	6	Closed
12459596	HBASE	nspiegelberg	Add Test in 0.20 to Check for proper HDFS-200 append/sync support	Add a quick test to TestHLog.java to verify that the user has the proper minimal patches for HDFS-200 append/sync support.	6	Test	moved_from_0_20_5	4	Minor	6	Closed
12459602	CASSANDRA	rodrigoap	Mixed use of Stage's name. Must use public static field.	"This line in StageManger is not using the public static field to reference the Stage's name:

        stages.put(RESPONSE_STAGE, multiThreadedStage(""RESPONSE-STAGE"", Runtime.getRuntime().availableProcessors()));

It should be:

        stages.put(RESPONSE_STAGE, multiThreadedStage(RESPONSE_STAGE, Runtime.getRuntime().availableProcessors()));
"	1	Bug	correctness	10003	Low	5	Resolved
12459614	MAHOUT	srowen	org.apache.mahout.cf.taste.hadoop.slopeone could have an off-line implementation	"slopeone arithmetic using hadoop is not complete .
can not use it do recommendation for dataset that has rating.

hope to complete it and gave  a full solution"	4	Improvement	hadoop, mahout, slopone	4	Minor	6	Closed
12459154	DERBY	knutanders	Timestamps inserted with GMT calendar are 1 hour later when subsequently read with GMT calendar (Server Mode Only).	"This issue only appears to happen in Network Server/Client mode.  Embedded mode does not have the issue.

My timezone is American/Chicago.  Saving timestamps with values for the 6 hours prior to DST start are being read back in as values 1 hour later than written.  (I believe the issue happens on the write because values written in Network Server/Client mode and read in Embedded mode are incorrect, while values written and read in Embedded mode are corect.)

Values between 3/13/2010 - 20:00 CST and 3/14/2010 - 02:00 CST will return timstamps 1 hour off.  The ""setTimestamp"" method is being passed a GMT calendar with the timestamp:

I have a complete test class I can attach, but here is a summary:

private final TimeZone gmtTZ = TimeZone.getTimeZone(""GMT"");
private final Calendar gmtCal = Calendar.getInstance(gmtTZ);
...
String sql = ""INSERT INTO app.dst_test (id, gmt_timestamp, milli_time) VALUES(?,?,?)"";
String sql2 = ""SELECT * from app.dst_test where id=?"";
...
ps.setTimestamp(2, ts, gmtCal);
...
Timestamp tsRead = rs.getTimestamp(""gmt_timestamp"", gmtCal);
...
"	1	Bug	derby_backport_reject_10_5, dst, gmt, settimestamp, timestamp	3	Major	6	Closed
12459719	APA	woon_san	Apa-RSS Include an option to disable html escape	"This issue is created to include support for full html support inside a RSS Feed. 

Now if a feed contains html markup it will be escaped and the html code will be shown instead of showing the correct markup."	4	Improvement	rss	3	Major	5	Resolved
12460289	TS	jasongiedymin	contrib update	Update to contrib script.	1	Bug	contrib, install, script	4	Minor	6	Closed
12460302	HARMONY	tellison	Implementation of getImageWriter, getImageReader	"I have implemented these methods
javax.imageio.ImageIO.getImageReader()
javax.imageio.ImageIO.getImageWriter()
javax.imageio.spi.ImageReaderSpi.getImageWriterSpiNames()

I only used the following Reader/Writer to test (Since they are the only available ones):
ImageIO.getImageWriter(new JPEGImageReader(new JPEGImageReaderSpi()));
ImageIO.getImageReader(new JPEGImageWriter(new JPEGImageWriterSpi()));
ImageIO.getImageWriter(new PNGImageReader(new PNGImageReaderSpi()));

Results:
org.apache.harmony.x.imageio.plugins.jpeg.JPEGImageWriter@4c4feb1
org.apache.harmony.x.imageio.plugins.jpeg.JPEGImageReader@4c50594
org.apache.harmony.x.imageio.plugins.png.PNGImageWriter@4c50e6e

These are the SUN's result:
com.sun.imageio.plugins.jpeg.JPEGImageWriter@b1c260
com.sun.imageio.plugins.jpeg.JPEGImageReader@100ab23
com.sun.imageio.plugins.png.PNGImageWriter@1bd0dd4"	7	Sub-task	imageio	3	Major	6	Closed
12460329	WW	lukaszlenart	Upgrade Velocity Engine to version 1.6.3	Upgrade Velocity Engine to latest available version 1.6.3	4	Improvement	upgrade, velocity	3	Major	6	Closed
12460359	MAHOUT	srowen	org.apache.mahout.math.IndexException: index(-521252222) is out of bounds of (0, 2147483647)	"when run job org.apache.mahout.cf.taste.hadoop.item.RecommenderJob
get following error:

10/03/26 09:11:05 INFO mapred.JobClient: Task Id : attempt_201003221228_0170_r_000000_0, Status : FAILED
org.apache.mahout.math.IndexException: index(-521252222) is out of bounds of (0, 2147483647)
        at org.apache.mahout.math.AbstractVector.set(AbstractVector.java:353)
        at org.apache.mahout.cf.taste.hadoop.item.ToUserVectorReducer.reduce(ToUserVectorReducer.java:75)
        at org.apache.mahout.cf.taste.hadoop.item.ToUserVectorReducer.reduce(ToUserVectorReducer.java:58)
        at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:463)
        at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:411)
        at org.apache.hadoop.mapred.Child.main(Child.java:170)
"	1	Bug	item, mahout	2	Critical	6	Closed
12459166	ODE	rrusin	Implement OSGi packaging for ODE	Implement OSGi packaging for ODE. Make sure ODE is consumable as a set of bundles.	2	New Feature	gsoc, mentor	3	Major	5	Resolved
12459199	HBASE	misty	Make important configurations more obvious to new users	"Over the last 2 weeks, I encountered many situations where people didn't set file descriptors and xcievers higher and that was causing a ton of problems that are hard to debug if you're not used to them. To improve that we should:

 - Refuse to start HBase if ulimit -n returns some small number smaller than 2048, or at least print out in big red blinking letters that the current configuration is bad and then link to a simple troubleshooting entry on the wiki.
 - Write a clearer Getting Started document where we don't give as much explanations but add more stuff like ""this is what your hbase-site.xml/hdfs-site/xml should look like now"" and give a complete file example. At this point we don't even give a number for xcievers and we expect new users to come up with one.

Any other low hanging fruit others can think of?"	4	Improvement	moved_from_0_20_5	3	Major	6	Closed
12459235	AVRO	dcreager	CMake: Document usage of the CMake build system	"We need to document how to use the CMake-based build system, including some typical things like debug vs release vs release-with-debug-info builds.
"	7	Sub-task	cmake	3	Major	6	Closed
12459238	AVRO	dcreager	CMake: Support building documentation	"We need to either support asciidoc with a build target or we need to switch to Doxygen and support it.
"	7	Sub-task	cmake	3	Major	6	Closed
12459241	AVRO	dcreager	CMake: Look at running the JSON / Jansson tests	"We could run the Jansson tests for the JSON code ...
"	7	Sub-task	cmake	3	Major	6	Closed
12459247	VYSPER	niklas	GSoC: Implement WebSockets/BOSH for XMPP AJAX clients 	"Apache Vysper is a modular, Java based XMPP/Jabber server. This project aims at developing a Vysper extension that enables AJAX clients to be a XMPP client, for example making it simple to expose IM/chat functionality in web apps. 

BOSH (XEP-124, XEP-206) defines a protocol where XMPP/Jabber can be used by AJAX clients. Also, with the development of WebSockets within the HTML5 work, WebSockets could be used as a way for browsers to communicate with Apache Vysper. This project could use either (or both) these protocols."	3	Task	gsoc, gsoc2010, mentor	3	Major	1	Open
12459785	TS	georgep	Cannot compile with Libev	"I tried to compiled TS with libev on both my 64-bit laptop and 32-bit Virtuozzo VPS machines, but it failed to build.  I get the following errors in both instances :

rpath -Wl,/simpl/apps/pcre/8.02/lib -Wl,-rpath -Wl,/simpl/apps/sqlite/3.6.23/lib -Wl,-rpath -Wl,/simpl/apps/libev/3.9/lib
../iocore/net/libinknet.a(UnixNet.o): In function `PollCont::pollEvent(int, Event*)':
/simpl/src/trafficserver-trunk-build/2/iocore/net/../../../../trafficserver-trunk/iocore/net/UnixNet.cc:116: undefined reference to `fd_reify'
../iocore/net/libinknet.a(UnixNet.o): In function `EventIO::modify(int)':
/simpl/src/trafficserver-trunk-build/2/iocore/net/../../../../trafficserver-trunk/iocore/net/P_UnixNet.h:545: undefined reference to `fd_change'
/simpl/src/trafficserver-trunk-build/2/iocore/net/../../../../trafficserver-trunk/iocore/net/P_UnixNet.h:545: undefined reference to `fd_change'
../iocore/net/libinknet.a(UnixNet.o): In function `NetHandler::mainNetEvent(int, Event*)':
/simpl/src/trafficserver-trunk-build/2/iocore/net/../../../../trafficserver-trunk/iocore/net/UnixNet.cc:336: undefined reference to `fd_reify'
../iocore/net/libinknet.a(UnixNet.o): In function `EventIO::modify(int)':
/simpl/src/trafficserver-trunk-build/2/iocore/net/../../../../trafficserver-trunk/iocore/net/P_UnixNet.h:545: undefined reference to `fd_change'
/simpl/src/trafficserver-trunk-build/2/iocore/net/../../../../trafficserver-trunk/iocore/net/P_UnixNet.h:545: undefined reference to `fd_change'
../iocore/net/libinknet.a(UnixNetVConnection.o): In function `EventIO::modify(int)':
/simpl/src/trafficserver-trunk-build/2/iocore/net/../../../../trafficserver-trunk/iocore/net/P_UnixNet.h:545: undefined reference to `fd_change'
/simpl/src/trafficserver-trunk-build/2/iocore/net/../../../../trafficserver-trunk/iocore/net/P_UnixNet.h:545: undefined reference to `fd_change'
/simpl/src/trafficserver-trunk-build/2/iocore/net/../../../../trafficserver-trunk/iocore/net/P_UnixNet.h:545: undefined reference to `fd_change'
../iocore/net/libinknet.a(UnixNetVConnection.o):/simpl/src/trafficserver-trunk-build/2/iocore/net/../../../../trafficserver-trunk/iocore/net/P_UnixNet.h:545: more undefined references to `fd_change' follow
collect2: ld returned 1 exit status
make[3]: *** [traffic_server] Error 1
make[3]: Leaving directory `/mnt/data/simpl/src/trafficserver-trunk-build/2/proxy'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/mnt/data/simpl/src/trafficserver-trunk-build/2/proxy'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/mnt/data/simpl/src/trafficserver-trunk-build/2'

Build with :

--enable-libev --with-pcre=/path/to/pcre -I/path/to/libev
"	1	Bug	cannot, compile, libev	1	Blocker	6	Closed
12459788	ZOOKEEPER	busbey	Minor cleanup related to the log4j version change from 1.2.15 -> 1.2.16	"The generated Maven pom.xml file contains:

{code}
<dependency>
  <groupId>log4j</groupId>
  <artifactId>log4j</artifactId>
  <version>1.2.15</version>
  <scope>compile</scope>
</dependency>
{code}

It would be better to have:

{code}
<dependency>
  <groupId>log4j</groupId>
  <artifactId>log4j</artifactId>
  <version>1.2.15</version>
  <scope>compile</scope>
  <exclusions>
    <exclusion>
      <groupId>javax.jms</groupId>
      <artifactId>jms</artifactId>
    </exclusion>
    <exclusion>
      <groupId>com.sun.jdmk</groupId>
      <artifactId>jmxtools</artifactId>
    </exclusion>
    <exclusion>
      <groupId>com.sun.jmx</groupId>
      <artifactId>jmxri</artifactId>
    </exclusion>
    <exclusion>
      <groupId>javax.mail</groupId>
      <artifactId>mail</artifactId>
    </exclusion>
  </exclusions> 
</dependency>
{code}

This would avoid to people depending on ZooKeeper artifacts the pain to exclude such ""broken"" dependencies by themselves.

A similar issue is discussed in HADOOP-6629, although I am not clear on how to solve fix it using Ivy."	4	Improvement	ivy, maven	4	Minor	5	Resolved
12459834	SOLR	koji	TermVectors  and Multicore configuration	"Hello.

My new to solr and I'm trying to setup solr with a multicore configuration.
All cores shares the same schema.xml and I'm using index sharding.

I need term vectors data to generate tag clouds but when I try to run a search across all cores to retrieve term vectors data the engine 
raises me the exception below.

Now I created two request handlers, one for the user search and one for the engine in charge to create the tag cloud. The problem of this 
solution is that I've to run n queries if n cores are cofigured and than merge results

thanks in advance
christian f.



Mar 19, 2010 4:34:15 PM org.apache.solr.core.SolrCore execute
INFO: [it] webapp=/solr path=/select params={tv.docIds=167&isShard=true&wt=javabin&version=1&tv=true} status=500 QTime=10 
Mar 19, 2010 4:34:15 PM org.apache.solr.common.SolrException log
SEVERE: java.lang.NullPointerException
        at java.io.StringReader.<init>(StringReader.java:33)
        at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:197)
        at org.apache.solr.search.LuceneQParser.parse(LuceneQParserPlugin.java:78)
        at org.apache.solr.search.QParser.getQuery(QParser.java:131)
        at org.apache.solr.handler.component.QueryComponent.prepare(QueryComponent.java:89)
        at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:174)
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:131)
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1316)
        at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:338)
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:241)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1089)
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:365)
        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:712)
        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
        at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:211)
        at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:139)
        at org.mortbay.jetty.Server.handle(Server.java:285)
        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:502)
        at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:835)
        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:641)
        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:208)
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:378)
        at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:226)
        at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:442)

Mar 19, 2010 4:34:15 PM org.apache.solr.common.SolrException log
SEVERE: java.lang.NullPointerException
        at java.io.StringReader.<init>(StringReader.java:33)
        at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:197)
        at org.apache.solr.search.LuceneQParser.parse(LuceneQParserPlugin.java:78)
        at org.apache.solr.search.QParser.getQuery(QParser.java:131)
        at org.apache.solr.handler.component.QueryComponent.prepare(QueryComponent.java:89)
        at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:174)
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:131)
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1316)
        at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:338)
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:241)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1089)
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:365)
        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:712)
        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
        at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:211)
        at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:139)
        at org.mortbay.jetty.Server.handle(Server.java:285)
        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:502)
        at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:835)
        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:641)
        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:208)
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:378)
        at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:226)
        at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:442)"	1	Bug	multicore, term, vectors	3	Major	5	Resolved
12460455	LANG	mbenson	ConstructorUtils.getAccessibleConstructor() Does Not Check the Accessibility of Enclosing Classes	ConstructorUtils.getAccessibleConstructor() checks if the declaring class is public but not whether it's a top-level class or an enclosed one.  Consequently, with enclosed declaring classes, the method does not check if the enclosing class is public, or it's enclosing class, or it's enclosing class, etc...	1	Bug	patch	4	Minor	6	Closed
12460466	EXTSCRIPT	werpu	CDI Integration	"Ext-Scripting is an extension framework for the Apache MyFaces project, its goal is to provide scripting language support and dynamic recompilation and reloading (hotplugging) within JSF.

The long term goal of Ext-Scripting is to have support for most major frameworks which have hooks into Ext-Scripting.
The near term goal is Spring and CDI.
While spring support is being worked for in the inofficial 1.1 branch, 
CDI is an open issue, which might be resolvable in the GSOC 2010.

The goal would be to support both implementations within our Ext-Scripting infrastructure.

Following goals have to be reached:

a) Determine which extension points in the implementations can be used to hook ext-scripting in, and provide a prototype for a simple reload
of a single class within those extensions (by using a throw away classloader, but without recompile)

b) Provide a neutral easy to use APIs for framework extensions (that would be a separate issue outside of what should be done within GSOC since it has to be done before summer) for 1.1

c) Implement one of those extensions for at least one implemtation, if time allows for both

"	4	Improvement	gsoc, mentor	3	Major	5	Resolved
12460491	CXF	sergey_beryozkin	Add lightweight Atom HTML-based browser for CXF logs	Simple and lightweight Atom HTML-based browser supporting feed links (next/previous/first/last) based on the existing CXF JAXRS WebClient API to be added to a rt/management-web component and which will be used for browsing the CXF logs. This browser will let users see the contents of the current page plus provided an option to follow the links to the next/prev/etc pages	2	New Feature	gsoc	3	Major	6	Closed
12460503	PDFBOX	lehmi	Cannot use PDFToImage to convert Chinese PDF pages into images.	When I use PDFToImage to convert a Chinese PDF into JPEG file, those Chinese in the PDF pages cannot show correctly.	1	Bug	Chinese, PDFBox, PDFToImage	3	Major	6	Closed
12459343	ROL	roller_unassigned	GSOC 2010: iPhone-like iUI interface for Roller	"Use the iUI user interface library to develop an iPhone-like mobile user interface for Roller.

Suggested requirements

1.0 Editor/Admin interface: Provide a user interface that supports these features
   1.1 Browse and search weblog entries within one blog
   1.2 Ability to create new and edit existing weblog entries
   1.3 Ability to browse, approve and delete comments

2.0 Enable mobile-friendly blog reading/viewing, small device users see small format theme with these features:
   2.1 Blog view shows recent entry summaries in reverse chrono order
   2.2 Browse and search of weblog entries
   2.3 Individual blog view incudes comments and ability to add a comment


 "	2	New Feature	gsoc	4	Minor	6	Closed
12459349	HBASE	psmith@apache.org	Slimming of Maven dependency tree - improves assembly build speed,	"From a discussion on IRC, the Maven assembly speed is pretty bad, this is likely due to http://jira.codehaus.org/browse/MASSEMBLY-424 (process fork per dependency, ouch).

Slimming the dependency tree will not only make the generated assembly more compact, it can speed up the build process.

Will attach patch to propose slimming the dependencies based on stacks comments on the mailing list:

{quote}
Here is a list of things I found in lib that we don't need to run:

-rwsrwsrwt   1 Stack  staff  1034049 Mar 16 16:45 ant-1.6.5.jar
-rwsrwsrwt   1 Stack  staff   279781 Mar 16 16:45 commons-httpclient-3.0.1.jar
-rwsrwsrwt   1 Stack  staff   706710 Mar 16 16:45 hsqldb-1.8.0.10.jar
-rwsrwsrwt   1 Stack  staff   377780 Mar 16 16:45 jets3t-0.7.1.jar
-rwsrwsrwt   1 Stack  staff    11981 Mar 16 16:45 kfs-0.3.jar
-rwsrwsrwt   1 Stack  staff   388864 Mar 16 16:45 mail-1.4.jar
-rwsrwsrwt   1 Stack  staff    65261 Mar 16 16:45 oro-2.0.8.jar
-rwsrwsrwt   1 Stack  staff    28415 Mar 16 16:45 paranamer-1.5.jar
-rwsrwsrwt   1 Stack  staff     3067 Mar 16 16:45 paranamer-ant-1.5.jar
-rwsrwsrwt   1 Stack  staff     6841 Mar 16 16:45 paranamer-generator-1.5.jar
-rwsrwsrwt   1 Stack  staff   167436 Mar 16 16:45 qdox-1.9.1.jar
-rwsrwsrwt   1 Stack  staff    23445 Mar 16 16:45 slf4j-api-1.5.8.jar
-rwsrwsrwt   1 Stack  staff     9679 Mar 16 16:45 slf4j-log4j12-1.5.8.jar
-rwsrwsrwt   1 Stack  staff     7585 Mar 16 16:45 slf4j-simple-1.5.8.jar

To add exclusions, I need to add the exclusion on the dependency that
adds in the above?  For most of the above, it looks like hadoop is the
includer.  I'd look at its pom and figure which hadoop component
included the above and then add an exclusion in our pom on that
dependency?
{quote}

"	4	Improvement	maven	3	Major	6	Closed
12459376	SYNAPSE	hiranya	[GSoC] Implement a Dead Letter Channel for Synapse	"Currently when Synapse attempts to send a message and if it fails, following actions can be configured to deal with the error:

* Execute a fault sequence and handle the failed request gracefully
* Fail-over to a different endpoint

In addition to these, Synapse ESB should support the ""dead letter channel"" enterprise integration pattern to deal with various errors that might occur during mediation or while sending. With the dead letter channel, the failed message will be put into a message store in the ESB. Later the ESB can retry to send the messages in the message store. 

We should be able to have multiple implementations of the actual message store and should be able to configure which store to use for a particular scenario. Users should be able to implement their own message stores and plug into the ESB easily. To start with we can have a simple in-memory message store and a persisting store based on JDBC or JMS. 

References:
http://www.eaipatterns.com/DeadLetterChannel.html
https://issues.apache.org/jira/browse/SYNAPSE-263

Possible Mentors:
Hiranya Jayathilaka
"	2	New Feature	gsoc	3	Major	5	Resolved
12459385	SLING	cziegeler	Scripts should be resolved against the current workspace	"currently, if a non-default workspace is specified in AuthenticationInfo, scripts are still resolved against the default workspace.

Scripts should be resolved first against the workspace used in the Request (i.e. from AuthenticationInfo) and then a default workspace as a backup."	4	Improvement	multiworkspace	3	Major	6	Closed
12459885	ODE	vanto	getting partnerlink details with in ExtensionContext 	There is no direct functions from ExtensionContext to retrieve Partnerlink details and process information. 	1	Bug	extension, patch	3	Major	1	Open
12459906	MAHOUT	srowen	integrate Mahout with Drupal/PHP	"Drupal is a very popular open source web content management system. It's been widely used in e-commerce sites, media sites, etc. This is a list of famous site using Drupal: http://socialcmsbuzz.com/45-drupal-sites-which-you-may-not-have-known-were-drupal-based-24092008/

Integrate Mahout with Drupal would greatly increase the impact of Mahout in web systems: any Drupal website can easily use Mahout to make content recommendations or cluster contents.

I'm a PhD student at University of Michigan, with a research focus on recommender systems. Last year I participated GSOC 2009 with Drupal.org, and developed a recommender system for Drupal. But that module was not as sophisticated as Mahout. And I think it would be nice just to integrate Mahout into Drupal rather than developing a separate Mahout-like module for Drupal.

Any comments? I can provide more information if people here are interested. Thanks."	3	Task	drupal, integration	3	Major	6	Closed
12459963	WICKET	ivaynberg	Wicket removes first dollar from $$ markups with TextTemplate's interpolate() while $$ are commonly used in JavaScript libraries	"Many JavaScript libraries such as jQuery and MooTools use $$ to find out arrays of elements. Having $$('blaa') is currently replaced by Wicket into $('blaa'). Wanted behavior is to replace all $${...} with ${...}, not $$ with $.

Possible fix (don't really have time to look at this atm):

org.apache.wicket.util.template.VariableInterpolator:

Row 111:

		while ((start = lowerPositive(string.indexOf(""$$"", pos), string.indexOf(""${"", pos))) != -1)
		{
			// Append text before possible variable
			buffer.append(string.substring(pos, start));

			if (string.charAt(start + 1) == '$')
			{
				buffer.append(""$"");
				pos = start + 2;
				continue;
			}
		...

Shoud be changed to:

		while ((start = lowerPositive(string.indexOf(""$${"", pos), string.indexOf(""${"", pos))) != -1)
		{
			// Append text before possible variable
			buffer.append(string.substring(pos, start));

			if (string.charAt(start + 1) == '$' && string.charAt(start + 2) == '{')
			{
				buffer.append(""${"");
				pos = start + 3;
				continue;
			}
		...

(no JIRA markup for rich formatting available? uh)"	1	Bug	javascript	3	Major	5	Resolved
12460512	HADOOP	xiaokang	BlockDecompressorStream get EOF exception when decompressing the file compressed from empty file	"An empty file can be compressed using BlockDecompressorStream, which is for block-based compressiong algorithm such as LZO. However, when decompressing the compressed file, BlockDecompressorStream get EOF exception.

Here is a typical exception stack:

java.io.EOFException
at org.apache.hadoop.io.compress.BlockDecompressorStream.rawReadInt(BlockDecompressorStream.java:125)
at org.apache.hadoop.io.compress.BlockDecompressorStream.getCompressedData(BlockDecompressorStream.java:96)
at org.apache.hadoop.io.compress.BlockDecompressorStream.decompress(BlockDecompressorStream.java:82)
at org.apache.hadoop.io.compress.DecompressorStream.read(DecompressorStream.java:74)
at java.io.InputStream.read(InputStream.java:85)
at org.apache.hadoop.util.LineReader.readLine(LineReader.java:134)
at org.apache.hadoop.mapred.LineRecordReader.next(LineRecordReader.java:134)
at org.apache.hadoop.mapred.LineRecordReader.next(LineRecordReader.java:39)
at org.apache.hadoop.mapred.MapTask$TrackedRecordReader.moveToNext(MapTask.java:186)
at org.apache.hadoop.mapred.MapTask$TrackedRecordReader.next(MapTask.java:170)
at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:48)
at org.apache.hadoop.streaming.PipeMapRunner.run(PipeMapRunner.java:18)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:334)
at org.apache.hadoop.mapred.Child.main(Child.java:196)
"	1	Bug	BlockDecompressorStream, compress, hadoop, io	3	Major	6	Closed
12460518	MYFACES	matzew	HTML 5 renderkit for MyFaces	"running into this document: http://diveintohtml5.org/forms.html

I started playing with some of the new widgets in my Chromium browser (I wasn't aware that spinbox/sliders are part of HTML5).

What about trying to find someone for a GSoC project, to add a (raw) HTML 5 renderkit? Bernd and I talked about a potential renderkit last time we saw each other, but now there is actually some (raw) support on it inside of some browsers...

Why not introducing an <hx:***> namespace that could contain stuff as the following: -<hx:inputRangeSlider> -<hx:inputColor> -<hx:whatEverNewWidgetIsPartOfHTML5 />

And/or some more functional stuff, like drag-and-drop: -<fx:dragAndDrop...> (could be done as a behavior)

etc. "	2	New Feature	gsoc, mentor	3	Major	6	Closed
12460529	TUSCANY	amindri	<*!*> Add JMX management capabilities to Apache Tuscany	"The goal of this project is to add JMX management and monitoring capabilities to the Apache Tuscany runtime. You'd start with adding some basic monitoring to view running Tuscany nodes from a JMX agent and then incrementally enhance the support to include management and monitoring of more and more of the runtime parts such as contributions, components and endpoints.

Feel free to email if you want more information: ant.elder@gmail.com"	2	New Feature	gsoc, gsoc2010, gsoc2011, mentor	3	Major	3	In Progress
12460555	HARMONY	hindessm	http://www.zlib.net/zlib123-dll.zip  is no longer available.	"""ant fetch-depends"" fails trying to download http://www.zlib.net/zlib123-dll.zip, which has been superceded by zlib-124.dll.zip and is not longer available.  There are other versions of zlib123-dll.zip, but none match the expected MDA checksum."	1	Bug	drlvm, zlib	3	Major	5	Resolved
12460558	DIRSTUDIO	seelmann	Object LDAP Persistence Tooling	"It would be nice to add Object to LDAP persistence tooling to Apache Directory Studio.
 
The tooling should support two scenarios:
1st) Based on an existing directory tree and schema the domain model and persistence code (DAOs) should be generated. The idea is to select an example entry in the LDAP Browser, right-click, and generate the code into an Eclipse Java project.
2nd) Based on an existing domain model (e.g. Java classes) an LDAP schema and persistence code (DAOs) should be generated. The idea is to select a package in the Eclipse Package Explorer, right-click, and generate the code.
 
A special challenge will be the support of object relationships, e.g. Departments-Users-Groups-Roles-Permissions. In LDAP such relationships are often implemented using hierarchies, DN references, or attribute references.
 
The main focus should be the generation of Java code. However it would be nice if the code generators would be pluggable to make it possible to create code for different languages (Scala, C#, etc.). It would also be nice to support different persistence engines, for example plain JNDI, the Apache LDAP API, or DataNucleus.
 "	2	New Feature	gsoc, mentor	3	Major	6	Closed
12459388	SLING	justinedelson	Sling-Initial-Content should be able to load content into non-default workspace		4	Improvement	multiworkspace	3	Major	6	Closed
12460042	RAMPART	robertlazarski	PolicyBasedResultsValidator Incorrectly Invalidates Supporting Token Signatures/Encryptions and Encrypted Supporting Tokens	When encrypting/signing a request using supporting tokens, PolicyBasedResultsValidator incorrectly invalidates and throws an exception.  This class also incorrectly invalidates encrypted supporting tokens.  I am attaching a patch which fixes problem.  Note that this patch also includes modifications related to issue RAMPART-278.	1	Bug	Patch	3	Major	1	Open
12460078	ODE	jeff.yu	bpelc command doesn't work	"I've tried with the ODE 1.3.3 war distro, and found the bpelc command doesn't work properly.

I've set the ODE_HOME variable in the environment, when I ran this command against a bpel process, I've got following exception:
[jeffyu@cyu bin]$ ./bpelc HelloWorld.bpel 
java org.apache.ode.tools.bpelc.cline.BpelC: null
java.lang.NullPointerException
	at org.apache.ode.bpel.compiler.BpelC.compile(BpelC.java:197)
	at org.apache.ode.bpel.compiler.BpelC.compile(BpelC.java:333)
	at org.apache.ode.tools.bpelc.BpelCompileCommand.execute(BpelCompileCommand.java:121)
	at org.apache.ode.tools.bpelc.cline.BpelC.main(BpelC.java:99)
"	1	Bug	bpel	3	Major	5	Resolved
12460087	TAP5	thiagohp	[GSoC] Create EJB3 integration	Enable injection of EJB3 beans into services, pages, components. Much like the existing Spring integration. 	3	Task	gsoc, mentor	3	Major	6	Closed
12460124	QPID	gemmellr	Ant 1.8.x javac task prints warning message during builds	When building Qpid with Ant version 1.8.0 the javac task prints a warning about the includeantruntime property not being set. This property should be set to false.	1	Bug	ant_build_system	4	Minor	6	Closed
12460136	TS	jsime	API: TSHttpTxnConnectTimeoutSet isn't documented	"Someone had a question about INKHttpTxnConnectTimeoutSet -- it's not documented in the SDK guide.  Can someone please provide:

- Where it should live (ie, Function Reference/HTTP Functions/  HTTP Transaction Functions)
- suggested text in a similar format to 
http://incubator.apache.org/trafficserver/docs/sdk/HTTPFunctions.html
(ie, what it does; prototype; description; returns, and possibly an example)

(Bryan also mentioned that a few timeout apis were added last year, but, I don't see any others with timeout in them (except for https://issues.apache.org/jira/browse/TS-256 -- INKHttpSchedule -- are we missing others?)"	1	Bug	Docs	4	Minor	1	Open
12460145	OPENJPA	techhusky	How to set role using OpenJPA	"I have weblogic system libraries having javax.persistence_1.0.0.0_1-0.jar and org.apache.openjpa_2.2.0.0_1-1-0.jar. 

EntityManager em =  eClepRoleFactory.createEntityManager();
		
 1.    Connection c = (Connection)OpenJPAPersistence.cast(em).getConnection();
         String s = ""SET ROLE ""+role+"" IDENTIFIED BY ""+pass;
         Statement stmt = c.createStatement();
          stmt.execute(s);
          stmt.close();

2.   em.getTransaction().begin();
      Query q = em.createNativeQuery(""SET ROLE eclep_hpn_role IDENTIFIED BY role55"");
      em.getTransaction().commit();

Note:   I am able to set the role using the steps in 1, but not with the steps in 2. 
Question:   What is missing in steps 2, because of which I am not able to set the role. Doesn't createNatvieQuery support this feature. Please help me urgently.
"	11	Question	openjpa	3	Major	6	Closed
12460180	PORTLETBRIDGE	mike_freedman	request will redirect out of portal with local url ( or relative url)	" first page including:
            <b><a href=""userLogin.faces"">Click here</a> to begin testing this
                example</b>

when I wrap it using portlet bridge into portal, the url could not generate portlet url in portal when viewed.

"	1	Bug	bridge, myfaces, portlet	3	Major	1	Open
12460195	WW	lukaszlenart	Merge fix version 2.1.0 to 2.2.0	"Move all issues assigned as a Fix Version 2.1.9 to be fixed as 2.2.0 - to release them all together 
"	4	Improvement	maven, svn	3	Major	6	Closed
12460198	IVY	maartenc	Transitive dependencies resolutions issue when eviction is triggered	"Originally described in ivy-user list : http://old.nabble.com/Transitive-resolving-issue---td27984462.html
Here just a part of the discussion that explain the problem and the temporary work around :
Consider the following use case :

moduleA has one of its dependencies like this : 
 <dependency org=""log4j"" name=""log4j"" rev=""1.2.14"" transitive=""false""/> 
moduleB has one of its dependencies like this : 
 <dependency org=""log4j"" name=""log4j"" rev=""1.2.15"" transitive=""false""/> 

While moduleC use moduleA and moduleB I have something like this : 
 <dependency org=""moduleA.org"" name=""moduleA"" rev=""moduleA.rev""/> 
 <dependency org=""moduleB.org"" name=""moduleB"" rev=""moduleB.rev""/> 

This seems to be very banal BUT, when running the ivy:resolve task the 
log4j-1.2.15 evicts the log4j-1.2.14 which seems to be a good thing! 
but thereafter the resolve task does not consider the transitivity has false 
and try to resolve all the dependencies of log4j-1.2.15 

If I remove moduleA.org and use only moduleB.org then the resolve task 
behave correctly (I mean there is no resolution of transitives 
dependencies). 
The reverse case is also true. 

A work-around is available by resolving conflict explicitly with something like :
 <conflict org=""moduleA.org"" module=""moduleA"" rev=""moduleA.rev""/>
"	1	Bug	dependency	3	Major	6	Closed
12459510	QPID	gemmellr	Use msg.getSize() rather than getContentHeaderBody in NotificationCheck to avoid an  access to persistence layer	"We have the following sequence in the broker (v.0.5): 
| | | +--NotificationCheck:isMessageSpecific  (org.apache.qpid.server.queue)
| | | +--NotificationCheck$2:notifyIfNecessary        (org.apache.qpid.server.queue)
| | | | +--SimpleAMQQueue:getMaximumMessageSize       (org.apache.qpid.server.queue)
| | | | +--AMQMessage:getContentHeaderBody    (org.apache.qpid.server.queue)
| | | | | +--AMQMessage:getStoreContext       (org.apache.qpid.server.queue)
| | | | | +--WeakReferenceMessageHandle:getContentHeaderBody  (org.apache.qpid.server.queue)
| | | | | | +--WeakReferenceMessageHandle:loadMessageMetaData (org.apache.qpid.server.queue)
| | | | | | | +--BDBMessageStore:getMessageMetaData   (org.apache.qpid.server.store.berkeleydb)

getContentHeaderBody could be replaced with msg.getSize() which would save going to BDB. "	1	Bug	broker, qpid	3	Major	6	Closed
12459552	OFBIZ	deepak.dixit	Creating a category with an ID (manually or automatically) that matches an existing productID will show the unrelated product when enter into the category on the 'Browse category'  of the Ecommerce application.	"Steps to reproduce it:

- Create a new category and set the ID manually that corresponds with an existing productID.
- Go to the Ecommerce app and enter in the category has been created.
- The product with the same ID will be show but it isn't really related to this category.

As Jacques noted on the ML, it could be related to an URL improvement (SEO)

"	1	Bug	SEO, categoryid, productid	3	Major	6	Closed
12459679	WW	lukaszlenart	XSS vulnerability in UrlHelper.java	"WebWise Security has discovered a XSS vulnerability in Struts 2.1.8.1. This particular vulnerability exists in UrlHelper.java and allows an attacker to execute arbitrary javascript that could be use to steal a user's session credentials or execute forced javascript redirects to phishing sites. This vulnerability manifests itself when the <s:url> tag is used with includeParams='all'.

Let's say there is an action (myAction.action) that serves a JSP Page with the following snippet:
<a href=""<s:url includeParams=""all""/>"">My Link</a>

Attack 1:
/myAction.action?param""><sCript>alert('XSS');</sCript>=1

This is very similiar to the vulnerability in Security Bulletin S2-002; however, the implemented fix for S2-002 only checks for ""<script>"", not ""<sCript>"".

Attack 2:
/myAction.action?param""onMouseOver%3D""javascript:alert('XSS');"">=1

Simply checking for <script> isn't sufficient because certain attributes can be injected to execute javascript. In attack 2, the user simply has to hover over the link with their mouse and arbitrary javascript will be executed.

I attached a possible fix as a patch. Essentially, both the key and value for a parameter must be escaped when creating the query string in UrlHelper.java.
"	1	Bug	struts, vulnerability, xss	3	Major	6	Closed
12460696	MAHOUT	srowen	not compression the final output of RecommenderJob	"in RecommenderJob Class:

line 113 :recommenderConf.setClass(""mapred.output.compression.codec"", GzipCodec.class, CompressionCodec.class);

because the output here  is the final output ,the end user may operates the output through HDFS API,
if compress here ,it not very convenient.

but it's convenient for operation through HDFS　shell to get to local.

can provider options or not compress ?

"	5	Wish	Compression, RecommenderJob	4	Minor	6	Closed
12459736	HBASE	apurtell	Stargate needs both JAR and WAR artifacts	"Since the move to Maven we have lost the ability to have Stargate bundled as both a JAR and a WAR file (currently just the latter).

I'm proposing to split the current stargate module further into 2 sub-modules 'stargate-war' and 'stargate-core' (totally up for discussion on naming).  

Basically moving existing sources down to 'stargate-core' and relocating the conf section into the war sub-module.

I'll be doing this via a github fork to make the review and merge process easier.  However I suspect I'll do the Maven side ok but totally hose the Git part, so strap yourselves in.. :)"	4	Improvement	maven	3	Major	6	Closed
12460240	WICKET	ivaynberg	misinterpretation of commented JS-Code in an AbstractTab (with AjaxTabbedPanel)	"Wicket isn't able to render the selected Tab in an AjaxTabbedPanel if there is a comment JS-code that is embedded in the  <wicket:head>. When I press the F5-key after clicking on the tab, the selected panel gets rendered.

The Ajax-Debug tells ""object required""

Here is the JS-code of my AbstractTab-Markup:

<wicket:head>
   <script language=""javascript"">
      var myVar = null;
      function myFunction(id1, id2){
            //do something
      }
      /* function myCommentedFunction(id1,id2){
             if(id1 && id2){
                   //do something
             }
      }*/
</script>
</wicket:head>

Would I use a normal TabbedPanel or delete the commented JS-code the tab is working fine =/

I don't hope that this is a Major-Bug of your <wicket:head>-interpretation!

thanks a lot,
danielt
"	1	Bug	AjaxTabbedPanel, head, javascript, object, required	4	Minor	5	Resolved
12460285	TS	jasongiedymin	README update	Readme Update	1	Bug	documentation, ec2, fedora, readme, ubuntu	4	Minor	6	Closed
12460846	OPENEJB	madshaddow	StatelessInstanceManager divide by null causes ArithmeticException	"org.apache.openejb.core.stateless.StatelessInstanceManager line 399

long offset = ((long) (maxAge / min * i * maxAgeOffset)) % maxAge;

Quite often gets 0 for maxAge (for example):

ArithmeticException - 0 / 2 * 0  * -1.0

So I'd like to suggest a fix:

long offset = (maxAge > 0 ? ((long) (maxAge / min * i * maxAgeOffset)) % maxAge : 0L);

"	1	Bug	container	3	Major	6	Closed
12460882	LIBCLOUD	jerry@apache.org	Link to mailing list on Developer Information page points to wrong email address	"1. http://incubator.apache.org/libcloud/devinfo.html
2. Hover over main mailing list link
3. View bottom of browser to see where link points to

Expected Result: 'libcloud-subscribe@incubator.apache.org' is what link points to

Actual Result: 'libcloud-subscirbe@incubator.apache.org' is what link points to, with ""subscribe"" spelled incorrectly"	1	Bug	error, spelling	4	Minor	5	Resolved
12460885	CXF	dkulp	org.apache.cxf.configuration.spring.JAXBBeanFactory cannot handle elements with namespace prefixes	"I first noticed this when attempting to define the http:conduit element in a Spring config file:

<beans:beans xmlns:http=""http://cxf.apache.org/transports/http/configuration""
	xmlns:beans=""http://www.springframework.org/schema/beans"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""
	xsi:schemaLocation="" 
          http://www.springframework.org/schema/beans           http://www.springframework.org/schema/beans/spring-beans.xsd
          http://cxf.apache.org/transports/http/configuration   http://cxf.apache.org/schemas/configuration/http-conf.xsd
          "">

	<http:conduit name=""*.http-conduit"">
		<http:client ConnectionTimeout=""30000"" ReceiveTimeout=""120000"" />
	</http:conduit>

</beans:beans>

It always fails with the following exception:

Caused by: javax.xml.bind.UnmarshalException
 - with linked exception:
[javax.xml.stream.XMLStreamException: ParseError at [row,col]:[1,198]
Message: http://www.w3.org/TR/1999/REC-xml-names-19990114#ElementPrefixUnbound?http&http:client]
	at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.handleStreamException(UnmarshallerImpl.java:426)
	at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:362)
	at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:339)
	at org.apache.cxf.configuration.spring.JAXBBeanFactory.createJAXBBean(JAXBBeanFactory.java:51)
	... 124 more
Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[1,198]
Message: http://www.w3.org/TR/1999/REC-xml-names-19990114#ElementPrefixUnbound?http&http:client
	at com.sun.org.apache.xerces.internal.impl.XMLStreamReaderImpl.next(XMLStreamReaderImpl.java:593)
	at com.sun.xml.bind.v2.runtime.unmarshaller.StAXStreamConnector.bridge(StAXStreamConnector.java:160)
	at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:360)
	... 126 more

Looking at the source code, it appears that CXF is sending the body contents of http:conduit verbatim to JAXBBeanFactory for parsing into a JAXB object. Apparently, Woodstox doesn't care if there is an unregistered namespace prefix, but the Sun StAX implementation does and throws the exception.

My current workaround is to define the http:conduit element in a separate XML file and use it as the default namespace like this:

<beans:beans xmlns=""http://cxf.apache.org/transports/http/configuration""
	xmlns:beans=""http://www.springframework.org/schema/beans"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""
	xsi:schemaLocation="" 
          http://www.springframework.org/schema/beans           http://www.springframework.org/schema/beans/spring-beans.xsd
          http://cxf.apache.org/transports/http/configuration   http://cxf.apache.org/schemas/configuration/http-conf.xsd
          "">

	<conduit name=""*.http-conduit"">
		<client ConnectionTimeout=""30000"" ReceiveTimeout=""120000"" />
	</conduit>

</beans:beans>
"	1	Bug	spring, xml	4	Minor	6	Closed
12460897	PDFBOX	lehmi	Lines not showing in PrintPDF print-out (Table borders and SVG figures)	"I am generating a single-page PDF file via XSLT/FOP, consisting of multiple
tables of varying complexity and consisting of several figures created via SVG
primitives (rect, path, text) in the used stylesheet.

After generating and exporting the document to the file system, I want to print
it programmatically via PDFBox's PrintPDF class. This succeeds apparently, but
the resulting print-out lacks _all_ of the lines in the document: all table
borders (of various sizes) are missing, and all figures are missing too (a large
diagram and several small symbols within the text). All texts are printed
correctly, except for the heading of the document, which is written in a bold
and bigger font.

This problem occurs on every printer at my disposal (two physical laser printers
and one virtual pdf printer). The problem does not occur when opening and/or
printing the originally exported document via Adobe Reader - the document shows
and prints perfectly. The problem is always reproducible. I am using the (as of now) latest PDFBox
version 1.1.0 on a JDK 1.5.0u18 on Windows XP Professional SP3.

When converting the pdf with PDFBox's PDFToImage class, the problem becomes
smaller, but persists nonetheless: the resulting JPG lacks a good third of the
table borders, but shows all of the SVG-based lines correctly.

I searched the bug tracker and the mailinglist archives but could not find a
recent matching discussion or tracker item. PDFBox seems to have had problems
with table borders already (I remember reading about line styles and weights not
being rendered correctly), but all of those seem to date back to version numbers
around version 0.8.

I posted this problem to the user list ( http://pdfbox.markmail.org/message/a75wdvtk52xbxvjk?page=1 ) after searching the archives and this tracker and was told to open an issue on this tracker. I'll follow up with the mentioned samples in a minute.

Any help would be appreciated!

Many thanks in advance and have a good day,

--Christoph Schmidt "	1	Bug	PDFToImage, PrintPDF, border, fop, line, svg, table	3	Major	6	Closed
12459821	HBASE	ryanobjc	HBASE-2066 followup: use old code for small row counts (eg: 1-20 or so)	we should use the old code which is more efficient and may have better error reporting for small number of commit rows. 	1	Bug	moved_from_0_20_5	3	Major	6	Closed
12460322	WICKET	ivaynberg	DateTextField and DatePicker do not work properly with four digit year patterns in 1.4.7	"Date patterns that contains four digit year does not work properly with DatePicker and DateTextField in 1.4.7. 

Steps to reproduce the error:
1. Create a form with a DateTextField, a DatePicker with a four digit year pattern like yyyy-MM-dd and a submit button.
2. Run the project. Click on the DatePicker and select a date. For example 2010-03-25. 
3. Submit the Form and check what's submitted to the server. Server receives the date as 0010-03-25.

A quickstart to reproduce the problem is attached.
"	1	Bug	DatePicker, DateTextField, pattern, yyyy-MM-dd	3	Major	5	Resolved
12460367	TS	mlibbey	wish to get a config.layout like the httpd	Apache httpd have a good config.layout file, which will make the configure command more easy and clear, and very good for more custom modify. I'd wish to have it on trafficserver. 	5	Wish	config, layout	3	Major	6	Closed
12459893	PIG	zjshen	Add DateTime Support to Pig	"Hadoop/Pig are primarily used to parse log data, and most logs have a timestamp component.  Therefore Pig should support dates as a primitive.

Can someone familiar with adding types to pig comment on how hard this is?  We're looking at doing this, rather than use UDFs.  Is this a patch that would be accepted?

This is a candidate project for Google summer of code 2012. More information about the program can be found at https://cwiki.apache.org/confluence/display/PIG/GSoc2012"	1	Bug	gsoc2012	3	Major	6	Closed
12459941	HBASE	psmith@apache.org	Ignore Deprecations during build	"I'd like to propose tweaking the Maven compiler plugin definition to ignore deprecations.  firstly, during a Maven build, the deprecation output is totally ignored by everyone I'm sure, and IDE's do a much better job of tracking these anyway, so the value to the output is just not there.

Secondly when one has this many deprecation warnings it's actually _hiding_ any compiler errors.  I was in a conversation with 'adragomir' on IRC last night (my time) and he was bitten by this, because the ERROR level stuff is done first, but quickly scrolls off the screen and becomes hidden."	4	Improvement	maven	5	Trivial	6	Closed
12460448	HARMONY	leshik	Test cases for HARMONY-6482	"create test cases for those methods:

javax.imageio.ImageIO.getImageReader() 
javax.imageio.ImageIO.getImageWriter() 
javax.imageio.ImageIO.getReaderMIMETypes() 
javax.imageio.ImageIO.getReaderFormatNames()
javax.imageio.ImageIO.getWriterMIMETypes() 
javax.imageio.ImageIO.getWriterFormatNames()"	7	Sub-task	imageio	3	Major	6	Closed
12460514	QPID	gemmellr	QpidCompositeRollingAppender log4j configuration is misleading	The QpidCompositeRollingAppender logging appender configuration is misleading. The configuration file states that the default rollover size is 1MB, wheras the actual default in the code is 10 MB. Additionally, the 'CompressBackupFiles' flag controls both the creation of backups in a separate directory on rollover, and the compression of these files. This property should either be renamed or backing up of files to a separate location should be enabled based on the presence of the 'backupFilesToPath' property instead.	1	Bug	log4j, qpid	3	Major	6	Closed
12460546	LOG4PHP	grobmeier	Add HTML line break to LoggerAppenderEcho output	"When using LoggerAppenderEcho the output will be printed in one line (in HTML).
So automatically add a line break or add a new property for user's control"	4	Improvement	LoggerAppenderEcho, break, html, line	4	Minor	6	Closed
12461003	WICKET	pete	Refactor / rework pageability	"I need to add a NavigatorLabel to a GridView, now NavigatorLabel has constructors accepting DataTable, DataView and PageableListView but not a GridView.
Instead of creating a new constructor accepting a GridView, I think it would be far better to merge IPageable and the private NavigatorLabel.PageableComponent into a single public interface and making all pageable components implement this interface.
I understand this approach breaks APIs and will need one major version, maybe two allowing for deprecations in between.
A less breaking alternative (but not as good in my opinion) is to change the constructor accepting a DataView to make it accept an AbstractPageableView, which is a common ancestor of both DataView and GridView and defines the methods needed to satisfy NavigatorLabel.PageableComponent.
"	4	Improvement	NavigatorLabel, Pageable	3	Major	5	Resolved
12461009	MAHOUT	srowen	the pref score  field of output of org.apache.mahout.cf.taste.hadoop.item.RecommenderJob has been truncated	"the pref score  field of output of org.apache.mahout.cf.taste.hadoop.item.RecommenderJob has been truncated if the pref score exceed six byte.

in RecommendedItemsWritable.class

  @Override
  public String toString() {
    StringBuilder result = new StringBuilder(200);
    result.append('[');
    boolean first = true;
    for (RecommendedItem item : recommended) {
      if (first) {
        first = false;
      } else {
        result.append(',');
      }
      result.append(item.getItemID());
      result.append(':');
      String valueString = String.valueOf(item.getValue());
      // Is this rounding too crude?
      if (valueString.indexOf('E') >= 0) {
        valueString = ""0.0"";
      } else if (valueString.length() > 6) {    
        valueString = valueString.substring(0, 6);   //here may cause problem,we can reserve all the bytes ,or just one byte decimal fraction
      }
      result.append(valueString);
    }
    result.append(']');
    return result.toString();
  }"	1	Bug	RecommendedItemsWritable, truncate	3	Major	6	Closed
12460026	PIVOT	gbrown	Rename org.apache.pivot.wtk.text.validation to org.apache.pivot.wtk.validation	"The org.apache.pivot.wtk.text package is deprecated and will be removed; this change will simply push the validation package up a level.
"	3	Task	api-change	3	Major	5	Resolved
12460548	XERCESJ	knoaman@ca.ibm.com	[GSoC]: Implementing XML Schema 1.1 overriding component definitions (<xs:override>)	"XML schema specification version 1.1 [1] specifies syntax and semantics of ""Overriding component definitions<override>""[2] or xs:override , under ""Schemas and Namespaces: Access and Composition"" . The new component definition is a powerful addition to the XML schema composition framework  ,which tries to mitigate some of the constraints present in similar constructs such as xs:redefine or <redefine> schema component. 

The <redefine> construct defined in ""Including modified component definitions (<redefine>) ""[3] on XMLSchema specification is useful in schema evolution and versioning. It can be used only when there exists some restriction or extension relation between the old component and the new redefined component. But there are occasions when the schema author simply wants to replace old components with new ones without any constraint. Also, existing XSD processors have implemented conflicting and non-interoperable interpretations of <redefine>. The implementation of  new construct <override> on Xerces XML Schema processor ,would avoid these bottlenecks and allow unconstrained replacement as and when needed by the schema author.

Possible Mentors: Khaled Noaman
  
[1] http://www.w3.org/TR/2006/REC-xml11-20060816/
[2] http://www.w3.org/TR/xmlschema11-1/#override-schema
[3] http://www.w3.org/TR/xmlschema11-1/#modify-schema"	2	New Feature	gsoc	3	Major	5	Resolved
12460557	MAHOUT	srowen	"add  one ""JobName"" and reduceNumber parameter to org.apache.mahout.cf.taste.hadoop.item.RecommenderJob"	"Can add one  ""JobName"" parameter to org.apache.mahout.cf.taste.hadoop.item.RecommenderJob?
if there's a lot of RecommenderJob,it's hard to distinguish  those jobs.

also RecommenderJob has four sub jobs (or phase ) ,can add sub-job name to those phase ?

Because RecommenderJob has not setNumReduceTasks ,it seems that the performance is not good in reduce phase.
"	4	Improvement	JobName, RecommenderJob	4	Minor	6	Closed
12460590	CASSANDRA	urandom	remove alternative RPC interface using Avro	"*UPDATE: This ticket is now for the removal of the Avro interface, (see http://thread.gmane.org/gmane.comp.db.cassandra.client.devel/36 for background).*

Avro is data serialization and RPC framework similar to Thrift. It provides:

* Rich data structures.
* A compact, fast, binary data format.
* A container file, to store persistent data.
* Remote procedure call (RPC).
* Simple integration with dynamic languages. Code generation is not required to read or write data files nor to use or implement RPC protocols. Code generation as an optional optimization, only worth implementing for statically typed languages. 

Cassandra's Avro interface is being structured in a way that closely mirrors the existing Thrift interface, both in terms of public facing API, and how it is implemented. GSOC students interested in this task should begin by familiarizing themselves with Cassandra's Thrift service (org.apache.cassandra.thrift).

Note: This is a very large and long-running task so treat this as a meta-issue and add sub-tasks and/or blocking issues as appropriate."	4	Improvement	gsoc, gsoc2010	10003	Low	5	Resolved
12461123	MAHOUT	magsol	Proposal for GSoC 2010 (EigenCuts clustering algorithm for Mahout)	"Proposal Title: EigenCuts spectral clustering implementation on map/reduce for Apache Mahout (addresses issue Mahout-328)

Student Name: Shannon Quinn

Student E-mail: magsol@gmail.com

Organization/Project:Assigned Mentor:

Proposal Abstract:
Clustering algorithms are advantageous when the number of classes are not known a priori. However, most techniques still require an explicit K to be chosen, and most spectral algorithms' use of piecewise constant approximation of eigenvectors breaks down when the clusters are tightly coupled. EigenCuts[1] solves both these problems by choosing an eigenvector to create a new cluster boundary and iterating until no more edges are cut.

Detailed Description

Clustering techniques are extremely useful unsupervised methods, particularly within my field of computational biology, for situations where the number (and often the characteristics as well) of classes expressed in the data are not known a priori. K-means is a classic technique which, given some K, attempts to label data points within a cluster as a function of their distance (e.g. Euclidean) from the cluster's mean, iterating to convergence.

Another approach is spectral clustering, which models the data as a weighted, undirected graph in some n-dimensional space, and creates a matrix M of transition probabilities between nodes. By computing the eigenvalues and eigenvectors of this matrix, most spectral clustering techniques take advantage of the fact that, for data with loosely coupled clusters, the K leading eigenvectors will identify the roughly piecewise constant regions in the data that correspond to clusters.

However, these techniques all suffer from drawbacks, the two most significant of which are having to choose an arbitrary K a priori, and in the situation of tightly coupled clusters where the piecewise constant approximation on the eigenvectors no longer holds.

The EigenCuts algorithm addresses both these issues. As a type of spectral clustering algorithm it works by constructing a Markov chain representation of the data and computing the eigenvectors and eigenvalues of the transition matrix. Eigenflows, or flow of probability by eigenvector, have an associated half life of flow decay called eigenflow. By perturbing the weights between nodes, it can be observed where bottlenecks exist in the eigenflow's halflife, allowing for the identification of boundaries between clusters. Thus, this algorithm iterates until no more cuts between clusters need to be made, eliminating the need for an a prior K, and conferring the ability to separate tightly coupled clusters.

The only disadvantage of EigenCuts is the need to recompute eigenvectors and eigenvalues at each iterative step, incurring a large computational overhead. This problem can be adequately addressed within the map/reduce framework and on a Hadoop cluster by parallelizing the computation of each eigenvector and its associated eigenvalue. Apache Hama in particular, with its specializations in graph and matrix data, will be crucial in parallelizing the computations of transition matrices and their corresponding eigenvalues and eigenvectors at each iteration.

Since Dr Chennubhotla is currently a member of the faculty at the University of Pittsburgh, I have been in contact with him for the past few weeks, and we both envision and eagerly anticipate continued collaboration over the course of the summer and this project's implementation. His guidance in highlighting the finer points of the underlying theory, coupled with my experience in and knowledge of software engineering, makes this is a project we are both extremely excited about implementing.

Timeline

At the end of each sprint, there should be a concrete, functional deliverable. It may not do much, but what it does will work and have full coverage accompanying unit tests.

Sprint 0 (April 26 - May 23): Work with mentor on any pre-coding tasks - familiarization with and dev deployments of Hadoop and Mahout; reading up on documentation, fine-tuning the project plan and requirements. This part will kick into high gear after May 6 (my last final exam and final academic obligation, prior to the actual graduation ceremony), but likely nothing before April 29 (the day of my thesis defense).

Sprint 1 (2 weeks; May 24 - June 6): Implement basic k-means clustering algorithm and parallelize on Mahout over Hadoop. Preliminary interface allows for dataset selection and visualization of resulting clusters.

Sprint 2 (3 weeks; June 7 - 27): Modify k-means algorithm to spectral clustering. Integrate map/reduce framework via Mahout and take advantage of existing core calculation of transition matrices and associated eigenvectors and eigenvalues.

Sprint 3 (3 weeks; June 28 - July 18): Augment spectral clustering to EigenCuts. Fully parallelize with Mahout. Also, mid-term evaluations.

Sprint 4 (3 weeks; July 19 - August 8): Fix any remaining issues with EigenCuts. Finalize interface for running the algorithm, selecting datasets and visualizing results.

Sprint 5 (1 week; August 9 - 15): Tidy up documentation, write final unit tests, fix outstanding bugs.

Other Information

I am finishing up my last semester as a master's student in computational biology at Carnegie Mellon, prior to beginning the PhD program in CompBio at Carnegie Mellon this coming fall. I have worked extensively with clustering techniques as a master's student, as a significant amount of my work has involved bioimage analysis within Dr Robert Murphy's lab. Previous work has involved using HMMs to detect patterns in tuberculosis genomes and use CLUSTALW to cluster those patterns according to geographic location. My master's thesis involves use of matrix completion to infer linear transformations of proteins and their associated subcellular locations across varying cell conditions (drugs, cell lines, etc). 

I unfortunately have limited experience with Apache Mahout and Hadoop, but with an undergraduate computer science degree from Georgia Tech, and after an internship with IBM ExtremeBlue, I feel I am extremely adept at picking up new frameworks quickly.

References

[1] Chakra Chennubhotla and Allan D. Jepson. Half-Lives of EigenFlows for Spectral Clustering. NIPS 2002."	3	Task	gsoc, gsoc2010	3	Major	6	Closed
12461159	PIVOT	gbrown	Rename TextInput and TextArea insertText() to insert()	"Also remove index argument. This will be more consistent with delete() and will helps to clarify the intent of the method (which is to replace the current selection with the inserted text).
"	4	Improvement	api-change	4	Minor	5	Resolved
12460128	QPID	gemmellr	Replace WeakReference use with SoftReference for enhanced message caching	Replace use of WeakReference with SoftReference in the message handles in the broker to improve message cache performance when using a persistent store. Also tuning the eviction policy for soft references and evaluation of other GC settings.	4	Improvement	cache, gc, qpid	3	Major	6	Closed
12461218	WW	lukaszlenart	XML validation error in IE for css_xhtml theme	"The XML validation throws Javascript error in Internet Explorer for css_xhtml theme. Even in the examples provided by apache, the error occurs.

The error is - ""An exception occurred: Error. Error message: Invalid argument. ""

I tried out to figured out the cause and found out the following 

Part of generated Javascript code for my module is 

field = form.elements['district.name'];  
var error = ""Enter only alphabets for district"";  
if (continueValidation && field.value != null && !field.value.match(""^[a-zA-Z ]*$"")) {  
      addError(field, error);  
      errors = true;  
}  

 tried to mock up by putting the same code in a function and calling it in onclick event 

the method ""addError()"" throws the exception and the reason is ""field"" variable. 

if field is changed to field[0] , it is working fine in my mock up code. 

The validation works fine in firefox, safari and chrome"	1	Bug	Error, Javascript, css_xhtml, validation, xml	3	Major	6	Closed
12461296	DERBY	myrna	Derby Test and Fix GSOC 2010 project	"Place holder JIRA for the GSOC 2010 project 'Derby Test and Bug Fix'.
Intended for Test conversions, in particular, derbynet tests, and leaving open ended to include any bug fixing that may be relevant."	3	Task	gsoc, gsoc2010, mentor	3	Major	6	Closed
12460251	TIKA	kkrugler	Missing spaces on html parsing	"On parsing such html code:

text<p>more<br>yet<select><option>city1<option>city2</select>

resulting text is:

textmore
yetcity1city2

But must be:

text
more
yet city1 city2

Code sample:

import java.io.*;
import org.apache.tika.metadata.*;
import org.apache.tika.parser.*;

public class test {

   public static void main(String[] args) throws Exception {
      Metadata metadata = new Metadata();
      metadata.set(Metadata.CONTENT_TYPE, ""text/html"");
      String content = ""text<p>more<br>yet<select><option>city1<option>city2</select>"";

      InputStream in = new ByteArrayInputStream(content.getBytes(""UTF-8""));
      AutoDetectParser parser = new AutoDetectParser();
      Reader reader = new ParsingReader(parser, in, metadata, new ParseContext());
      char[] buf = new char[10000];
      int len;
      StringBuffer text = new StringBuffer();
      while((len = reader.read(buf)) > 0) {
         text.append(buf, 0, len);
      }
      System.out.print(text);
   }
}
"	1	Bug	html, spaces, tag	3	Major	5	Resolved
12460260	JDO	matthewadams	Modify specification to address NoSQL datastores	"There is increasing interest in NoSQL datastores (Google BigTable, Apache HBase, VMWare Redis, etc), which not only do not support SQL, but also do not necessarily provide support for traditional consistency or queriability features or guarantees, instead offering features like eventual consistency, key-value storage mechanisms, etc.

This request is to modify the JDO specification (and TCK & RI) so that it relaxes certain portions of the specification, perhaps in the form of profiles similar to JavaEE 6 profiles, to allow datastores that may not support queries in general, do not support the ACID requirements, or that support key-value-based storage mechanisms to be JDO-compliant.  Additions to the specification may also be needed in order to directly address NoSQL-type datastores, in a manner similar to its treatment of relational persistence mechanisms.

Additionally, this request would serve to better support persistence on micro platforms where consistency, queriability, etc, may not be supported."	2	New Feature	jdo, nosql, profile, specification	3	Major	1	Open
12460290	TS	jasongiedymin	Create a Public AMI based on Fedora Core 8 based on trunk.	"Create a Public AMI based on Fedora Core 8 based on trunk.
Figure I would start adding this to Jira to keep track of the various machine instance serial numbers that will be created."	1	Bug	ami, aws, bundle, ec2, fedora	4	Minor	6	Closed
12460300	COUCHDB	kocolosk	Refactoring of attachment compression to allow for content-encodings other than gzip	"The following patch does:

1) Changes the internal implementation of the attachment compression feature to allow the support of content encodings other than gzip. After this adding support to other encodings (deflate and compress) is trivial.

2) Removes the property ""gzip_length"" from an attachment stub, introduced in ticket 639, and adds 2 new ones: ""encoding"" and ""encoded_length"".

3) Renames the doc query parameter ?att_gzip_length=true, also introduced in ticket 639, to ?att_encoding_info=true

All tests, Etap and JS, are passing. Also tested this code with an existing 0.11 DB file.

This patch is for trunk only."	4	Improvement	attachments, compression, encodings	3	Major	6	Closed
12460303	WICKET	ivaynberg	StringIndexOutOfBoundsException in PortletServletRequestWrapper for some resource requests	"A StringIndexOutOfBoundsException sometimes occurs when a ajax or a resource request is issued. 

The Portlet Container (Liferay 5.2.3) passes invalid input for the requestURI string when wokring on a virtual host.

The patch simply makes sure the String is long enough to get a substring."	1	Bug	liferay, portlet, wicket	3	Major	5	Resolved
12460767	TS	jasongiedymin	EC2 Documentation on AMIs which have been compiled and bundled.	"Attached is 'readme_ec2.txt'

A readme file which explains the AMIs which were built.

Feel free to rename the file, fix any spelling.  I'm unsure exactly where this will go, perhaps in /contrib?  Make it part of the master readme?"	1	Bug	ami, aws, bundle, ec2, fedora, readme, ubuntu	3	Major	6	Closed
12460797	MAHOUT	srowen	make the output of RecommenderJob more readable	"now the output of  RecommenderMapper as following:
output.collect(userID, new RecommendedItemsWritable(recommendations));

Can we change it more readable like following:

   private final Text user = new Text();
    private final Text recomScore = new Text();
    private static final String FIELD_SEPERATOR = "","";
    for (RecommendedItem recommendation : recommendations)
    {
    	user.set(String.valueOf(userId));
    	recomScore.set(recommendation.getItemID() + FIELD_SEPERATOR + recommendation.getValue());
        output.collect(user, recomScore);
    }

then user can read and verify the result more convenient and need not depend on the mahout  API
"	4	Improvement	RecommenderJob, output, readable	3	Major	6	Closed
12460309	WICKET	ivaynberg	ListMultipleChoice's Constructors Should Accept IModel<? extends Collection<T>>	"Currently, the constructors accept IModel<Collection<T>> for the ""model"" of the ListMultipleChoice.  Thus, you can't pass in an IModel<Set<T>>.  The constructors should be modified to take IModel<? extends Collection<T>> instead."	4	Improvement	generics	4	Minor	5	Resolved
12460324	WW	lukaszlenart	Upgrade FreeMarker to 2.3.16	Upgrade FreeMarker to latest available version 2.3.16	4	Improvement	freemarker, upgrade	3	Major	6	Closed
12460372	UIMA	schor	Fisheye for Repository	"Setup a Fisheye source code search and browser for the repository.

This would be useful to new people to the project for locating classes, example code and packages. It is free for open source projects and ActiveMQ has one setup already."	2	New Feature	browsing, repository, searching	3	Major	6	Closed
12460420	CXF	dkulp	NPE when using wsdl2js	"Hello!

Following the advice from here: http://old.nabble.com/NPE-using-wsdl2js-to28051339.html

I am getting a NPE when trying to use wsdl2js.

This is the stacktrace:

http://pastie.org/889547

This is the wsdl-file:

http://pastie.org/889550

Any help appreciated!

Thansk in advance,
Björn
"	1	Bug	npe, wsd2ljs	3	Major	6	Closed
12460890	HARMONY	hindessm	Harmony won't compile with libpng 1.4	"Harmony won't compile with libpng 1.4, released on january . Some bleeding edge distros have changed to libpng 1.4 [Gentoo and ArchLinux] and other will probably follow. Basically what affect the compilation is the use of png_infopp_NULL which is now depreceated and should use NULL instead. After changing this to NULL everything works fine.

Summary of changes from libpng 1.2 to 1.4: http://www.libpng.org/pub/png/src/libpng-1.2.x-to-1.4.x-summary.txt"	1	Bug	libpng	4	Minor	5	Resolved
12460441	MYFACESTEST	jakobkorherr	Module for automated webapp tests for MyFaces core + extensions	"As we currently only have normal JUnit tests for automated testing in MyFaces Core, it would be really great to have a way to test MyFaces Core automatically in a real webapp at build time with maven. Of course, we currently have the test-webapp, but we still have to check each page manually here, if we want to test everything, which is long-winded. In addition, it would be cool if we could use this also for testing of MyFaces extensions against MyFaces Core and Mojarra.

To accomplish something like that we could use test frameworks like e.g. Canoo WebTest or HttpUnit + Jetty or something similar. Basically anything that works with jetty in maven, but can also be used with other servers like tomcat or glassfish, would be ok here. I also want to mention JSFUnit here, although we won't be able to use it since it is LGPL licensed.

The two most important things about this module would be 1) that everything has to work totally automated within maven and without a browser (so I wouldn't consider selenium as an option) and 2) a fluent and easy API to write those tests (otherwise no one would use it). 

This would help us enormously in ensuring and improving the quality of MyFaces Core and its extensions by getting a far bigger test coverage and more possibilities to test."	2	New Feature	gsoc, mentor	3	Major	6	Closed
12460545	WW	lukaszlenart	"freemarker error in simple template select.ftl when parameter multiple=""true"" and parameter name is missing"	"File : template/simple/select.ftl

Select tag does not require ""name"" parameter.
But when ""multiple"" is set to ""true"" the template will try to read ""parameters.name""
Leading to the following FreeMarker template error :

Expression parameters.name is undefined on line 92, column 85 in template/simple/select.ftl.
The problematic instruction:
{noformat}
${parameters.name?html} [on line 92, column 83 in template/simple/select.ftl]
{noformat}
"	1	Bug	freemarker, multiple, name, select, tag, template	3	Major	6	Closed
12461389	MAHOUT	srowen	should package core ,math and collections to one Jar package for hadoop recommendations	"should package core ,math and collections to one Jar package for org.apache.mahout.cf.taste.hadoop.item.RecommenderJob.

because RecommenderJob used classes  (for example org.apache.mahout.math.VectorWritable )of the  math module of mahout project,
but math and core module is the separated jar package.
so when work on the hadoop env ,the class of math module can not load to classloader in the datanode.

it will cause class not found exception.

the work around is package all mahout classes to one package manually.


"	4	Improvement	classloader, hadoop, mahout	3	Major	6	Closed
12461399	MAHOUT	jake.mannix	Issues with DistributedLanczosSolver output	"DistributedLanczosSolver (line 99) claims to persist eigenVectors.numRows() vectors.
{code}
    log.info(""Persisting "" + eigenVectors.numRows() + "" eigenVectors and eigenValues to: "" + outputPath);
{code}

However, a few lines later (line 106) we have
{code}
    for(int i=0; i<eigenVectors.numRows() - 1; i++) {
        ...
    }
{code}

which only persists eigenVectors.numRows()-1 vectors.

Seems like the most significant eigenvector (i.e. the one with the largest eigenvalue) is omitted... off by one bug?


Also, I think it would be better if the eigenvectors are persisted in *reverse* order, meaning the most significant vector is marked ""0"", the 2nd most significant is marked ""1"", etc.

This, for two reasons:
1) When performing another PCA on the same corpus (say, with more principal componenets), corresponding eigenvalues can be easily matched and compared.  
2) Makes it easier to discard the least significant principal components, which for Lanczos decomposition are usually garbage."	1	Bug	DistributedLanczosSolver, decomposer	3	Major	6	Closed
12461439	HBASE	ekoontz	add support for ZooKeeper authentication	"Some users may run a ZooKeeper cluster in ""multi tenant mode"" meaning that more than one client service would
like to share a single ZooKeeper service instance (cluster). In this case the client services typically want to protect
their data (ZK znodes) from access by other services (tenants) on the cluster. Say you are running HBase and Solr 
and Neo4j, or multiple HBase instances, etc... having authentication/authorization on the znodes is important for both 
security and helping to ensure that services don't interact negatively (touch each other's data).

Today HBase does not have support for authentication or authorization. This should be added to the HBase clients
that are accessing the ZK cluster. In general it means calling addAuthInfo once after a session is established:

http://hadoop.apache.org/zookeeper/docs/current/api/org/apache/zookeeper/ZooKeeper.html#addAuthInfo(java.lang.String, byte[])

with a user specific credential, often times this is a shared secret or certificate. You may be able to statically configure this
in some cases (config string or file to read from), however in my case in particular you may need to access it programmatically,
which adds complexity as the end user may need to load code into HBase for accessing the credential.

Secondly you need to specify a non ""world"" ACL when interacting with znodes (create primarily):
http://hadoop.apache.org/zookeeper/docs/current/api/org/apache/zookeeper/data/ACL.html
http://hadoop.apache.org/zookeeper/docs/current/api/org/apache/zookeeper/ZooDefs.html

Feel free to ping the ZooKeeper team if you have questions. It might also be good to discuss with some 
potential end users - in particular regarding how the end user can specify the credential.
"	4	Improvement	security, zookeeper	2	Critical	6	Closed
12460959	HBASE	mingma	Forced splits only act on the first family in a table	"While working on a patch for HBASE-2375, I came across a few bugs in the existing code related to splits.

If a user triggers a manual split, it flips a forceSplit boolean to true and then triggers a compaction (this is very similar to my current implementation for HBASE-2375).  However, the forceSplit boolean is flipped back to false at the beginning of Store.compact().  So the force split only acts on the first family in the table.  If that Store is not splittable for some reason (it is empty or has only one row), then the entire region will not be split, regardless of what is in other families.

Even if there is data in the first family, the midKey is determined based solely on that family.  If it has two rows and the next family has 1M rows, we pick the split key based on the two rows."	1	Bug	moved_from_0_20_5	2	Critical	6	Closed
12461016	WICKET	ivaynberg	ChoiceGroup's Constructor Should Accept IModel<? extends Collection<T>>	This is very similar to ListMultipleChoice's constructor situation.  Changing the constructor signature won't break any existing code, but it will make it easier to use (for times when you have a set-based property).	4	Improvement	generics	4	Minor	5	Resolved
12460592	TUSCANY	eranda	[GSoC 2011] Develop a 'NoSQL' Datastore component for Apache Cassandra, CouchDB, Hadoop/Hbase	"NoSQL Datastore component
=========================

Write a portable data store component over a number of 'NoSQL' databases (Apache Cassandra, Couchdb, Hadoop/Hbase and AppEngine Datastore databases.)

This could be one component (written in Python or Java) or a set of components (one per database) all implementing the same REST data store interface, allowing applications to store data in different NoSQL databases without having to worry about the details and API differences between the databases.

The project could start with just one or two databases and add more databases as we go. This should be a really good opportunity for students to experiment with these new NoSQL databases. 

Resources:

Tuscany
http://tuscany.apache.org/

Cassandra
http://cassandra.apache.org/

CouchDB
http://couchdb.apache.org/

Hadoop/HBase
http://hadoop.apache.org/hbase/

Appengine Datastore
http://code.google.com/appengine/docs/python/datastore/
"	2	New Feature	gsoc, gsoc2011, mentor	3	Major	1	Open
12461458	CASSANDRA	tzz	the example storage-conf.xml should define a LongType super CF	A long type super CF (called tentatively Super3) would be nice to have for testing against a stock Cassandra install, similar to the other default CFs in Keyspace1.	4	Improvement	configuration	10003	Low	5	Resolved
12461471	TS	amc	Enable transparent forward proxying	"Currently ATS provides only explicit forward proxying. It should support this transparently as well.

Transparent means

* No configuration on clients.
* Origin server sees the client IP address as the source address of the cache fill request.

This should be an option set via configuration variables because transparent proxying is not always the correct mode of operation. In addition, it requires a Linux kernel with TPROXY support and so will not run in all environments."	4	Improvement	forward, proxy, tproxy, transparent	2	Critical	6	Closed
12460658	MYFACES	mmarinschek	MyFaces 2.0 performance improvements	"JSF 2.0 introduced a partial state saving option: state of the page will not completely, but only partially state-saved.

This partial state saving reduces the page-state memory to around 20% of the value under the JSF 1.2 full state saving option, as preliminary measurements show - this is a relevant reduction.

However, I believe we can reduce this number even more, if we carefully take a look on what really needs to be saved and how.

This project would need to provide:

1) a setup to measure the numbers and provide comparisons
2) measurements of the current state
3) several steps which lead to a reduction of the state

Further research topics could be:

- partial state-saving in tables - currently, this is not implemented at all
- if no c:if, c:forEach, or ui:include is present on the page, we could get rid of the second application of the template before rendering automatically.

best regards,

Martin"	2	New Feature	gsoc, mentor	3	Major	6	Closed
12460664	WICKET	ivaynberg	Add convenience method to reuse a component's ID as markup ID	"Currently, here is the follow pattern I follow to reuse a wicket component's ID as the element's markup ID.

Label abc = new Label(""efg"", ""xyz"");
abc.setOutputMarkupId(true).setMarkupId(abc.getId());

It takes two lines to do this. A helper method as James Carmen suggested 

protected <T extends ComponentT setMarkupId(T
component, String markupId)
{
  component.setMarkupId(markupId);
  return component;
}

It does the trick, but it does not seem to the optimal solution. I hope to see a convience method on Component such as the following:

Component setMarkupIdToWicketId()

This method should does two things in one method call: setOutputMarkupId(true).setMarkupId(abc.getId());

Thanks!

"	4	Improvement	features	4	Minor	5	Resolved
12460667	WICKET	ivaynberg	wicket fails on WebSphere 6.1 clustered	"I have problems with deploying wicket (wicket-1.4m3) application on WAS 6.0.1.27 server cluster (2 nodes).
Application use spring 2.5.5 for service layer and is configured:
web.xml:
 <distributable/>
 <context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>classpath:/applicationContext.xml</param-value>
 </context-param>
 
 <context-param>
        <param-name>configuration</param-name>
        <param-value>deployment</param-value>
</context-param>

 <listener>
  <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
 </listener>

 <servlet>
  <servlet-name>wicket</servlet-name>
  <servlet-class>org.apache.wicket.protocol.http.WicketServlet</servlet-class>
  <init-param>
   <param-name>applicationFactoryClassName</param-name>
   <param-value>org.apache.wicket.spring.SpringWebApplicationFactory</param-value>
  </init-param>
  <load-on-startup>1</load-on-startup>
 </servlet>

 <servlet-mapping>
  <servlet-name>wicket</servlet-name>
  <url-pattern>/app/*</url-pattern>
 </servlet-mapping>
 
 <session-config>
  <session-timeout>40</session-timeout>
 </session-config>
 <welcome-file-list>
  <welcome-file>index.jsp</welcome-file>
 </welcome-file-list>
If application deploys on nonclustered environment everything is ok. On cluster I got these errors:
--------------------------------------------------------------------
--------------------------------------------------------------------
SystemOut.log
[3/30/10 10:32:56:543 GMT+08:00] 000000f5 ServletWrappe E   SRVE0068E: Uncaught exception thrown in one of the service methods of th
e servlet: wicket. Exception thrown : java.lang.NoClassDefFoundError: org.apache.wicket.protocol.http.pagestore.SerializedPagesCache
$SerializedPageWithSession (initialization failure)
        at java.lang.J9VMInternals.initialize(J9VMInternals.java:134)
        at org.apache.wicket.protocol.http.pagestore.SerializedPagesCache.storePage(SerializedPagesCache.java:138)
        at org.apache.wicket.protocol.http.pagestore.DiskPageStore.storePage(DiskPageStore.java:816)
        at org.apache.wicket.protocol.http.SecondLevelCacheSessionStore$SecondLevelCachePageMap.put(SecondLevelCacheSessionStore.jav
a:327)
        at org.apache.wicket.Session.requestDetached(Session.java:1391)
        at org.apache.wicket.RequestCycle.detach(RequestCycle.java:1094)
        at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1365)
        at org.apache.wicket.RequestCycle.request(RequestCycle.java:497)
        at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:387)
        at org.apache.wicket.protocol.http.WicketServlet.doGet(WicketServlet.java:125)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:743)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)
        at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1146)
        at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:592)
        at com.ibm.ws.wswebcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:524)
        at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3548)
        at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:269)
        at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:818)
        at com.ibm.ws.wswebcontainer.WebContainer.handleRequest(WebContainer.java:1478)
        at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:125)
        at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:458)
        at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:387)
        at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:267)
        at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:2
14)
        at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
        at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
        at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
        at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
        at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:136)
        at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:196)
        at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:751)
        at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:881)
        at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1497)
Caused by: org.apache.wicket.WicketRuntimeException: There is no application attached to current thread WebContainer : 21
        at org.apache.wicket.Application.get(Application.java:177)
        at org.apache.wicket.Component.getApplication(Component.java:1277)
        at org.apache.wicket.Component.<init>(Component.java:893)
        at org.apache.wicket.Page.<init>(Page.java:238)
        at org.apache.wicket.protocol.http.pagestore.SerializedPagesCache$SerializedPageWithSession.<clinit>(SerializedPagesCache.ja
va:205)
        at java.lang.J9VMInternals.initializeImpl(Native Method)
        at java.lang.J9VMInternals.initialize(J9VMInternals.java:196)
        at java.lang.Class.forNameImpl(Native Method)
        at java.lang.Class.forName(Class.java:163)
        at com.ibm.ws.util.WsObjectInputStream.loadClass(WsObjectInputStream.java:218)
        at com.ibm.ws.util.WsObjectInputStream.access$000(WsObjectInputStream.java:48)
        at com.ibm.ws.util.WsObjectInputStream$2.run(WsObjectInputStream.java:186)
        at com.ibm.ws.security.util.AccessController.doPrivileged(AccessController.java:118)
        at com.ibm.ws.util.WsObjectInputStream.resolveClass(WsObjectInputStream.java:159)
        at com.ibm.ws.util.WsObjectInputStream.resolveClass(WsObjectInputStream.java:151)
        at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1580)
        at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1502)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1735)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1341)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:378)
        at org.apache.wicket.protocol.http.SecondLevelCacheSessionStore$SecondLevelCachePageMap.readObject(SecondLevelCacheSessionSt
ore.java:403)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:618)
        at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1036)
        at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1848)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1755)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1341)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:378)
        at com.ibm.ws.webcontainer.httpsession.HttpSessDRSBuffWrapper.convBytes2Obj(HttpSessDRSBuffWrapper.java:178)
        at com.ibm.ws.webcontainer.httpsession.HttpSessDRSDataXfer.convBytes2Obj(HttpSessDRSDataXfer.java:349)
        at com.ibm.ws.webcontainer.httpsession.DRSSessionData.getSwappableData(DRSSessionData.java:115)
        at com.ibm.ws.webcontainer.httpsession.DatabaseSessionData.checkActivationListeners(DatabaseSessionData.java:343)
        at com.ibm.ws.webcontainer.httpsession.SessionData.notifyActivateListeners(SessionData.java:1330)
        at com.ibm.ws.webcontainer.httpsession.SessionContext.getIHttpSession(SessionContext.java:1558)
        at com.ibm.ws.webcontainer.httpsession.SessionContext.getIHttpSession(SessionContext.java:2508)
        at com.ibm.ws.webcontainer.httpsession.SessionContext.sessionPreInvoke(SessionContext.java:2873)
        at com.ibm.ws.webcontainer.srt.SRTRequestContext.sessionPreInvoke(SRTRequestContext.java:56)
        at com.ibm.ws.webcontainer.webapp.WebAppDispatcherContext.sessionPreInvoke(WebAppDispatcherContext.java:254)
        at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:459)
        ... 19 more

[3/30/10 10:32:56:558 GMT+08:00] 000000f5 WebApp        E   [Servlet Error]-[wicket]: java.lang.NoClassDefFoundError: org.apache.wic
ket.protocol.http.pagestore.SerializedPagesCache$SerializedPageWithSession (initialization failure)
        at java.lang.J9VMInternals.initialize(J9VMInternals.java:134)
        at org.apache.wicket.protocol.http.pagestore.SerializedPagesCache.storePage(SerializedPagesCache.java:138)
        at org.apache.wicket.protocol.http.pagestore.DiskPageStore.storePage(DiskPageStore.java:816)
        at org.apache.wicket.protocol.http.SecondLevelCacheSessionStore$SecondLevelCachePageMap.put(SecondLevelCacheSessionStore.jav
a:327)
        at org.apache.wicket.Session.requestDetached(Session.java:1391)
        at org.apache.wicket.RequestCycle.detach(RequestCycle.java:1094)
        at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1365)
        at org.apache.wicket.RequestCycle.request(RequestCycle.java:497)
        at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:387)
        at org.apache.wicket.protocol.http.WicketServlet.doGet(WicketServlet.java:125)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:743)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)
        at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1146)
        at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:592)
        at com.ibm.ws.wswebcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:524)
        at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3548)
        at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:269)
        at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:818)
        at com.ibm.ws.wswebcontainer.WebContainer.handleRequest(WebContainer.java:1478)
        at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:125)
        at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:458)
        at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:387)
        at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:267)
        at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:2
14)
        at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
        at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
        at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
        at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
        at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:136)
        at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:196)
        at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:751)
        at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:881)
        at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1497)
Caused by: org.apache.wicket.WicketRuntimeException: There is no application attached to current thread WebContainer : 21
        at org.apache.wicket.Application.get(Application.java:177)
        at org.apache.wicket.Component.getApplication(Component.java:1277)
        at org.apache.wicket.Component.<init>(Component.java:893)
        at org.apache.wicket.Page.<init>(Page.java:238)
        at org.apache.wicket.protocol.http.pagestore.SerializedPagesCache$SerializedPageWithSession.<clinit>(SerializedPagesCache.ja
va:205)
        at java.lang.J9VMInternals.initializeImpl(Native Method)
        at java.lang.J9VMInternals.initialize(J9VMInternals.java:196)
        at java.lang.Class.forNameImpl(Native Method)
        at java.lang.Class.forName(Class.java:163)
        at com.ibm.ws.util.WsObjectInputStream.loadClass(WsObjectInputStream.java:218)
        at com.ibm.ws.util.WsObjectInputStream.access$000(WsObjectInputStream.java:48)
        at com.ibm.ws.util.WsObjectInputStream$2.run(WsObjectInputStream.java:186)
        at com.ibm.ws.security.util.AccessController.doPrivileged(AccessController.java:118)
        at com.ibm.ws.util.WsObjectInputStream.resolveClass(WsObjectInputStream.java:159)
        at com.ibm.ws.util.WsObjectInputStream.resolveClass(WsObjectInputStream.java:151)
        at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1580)
        at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1502)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1735)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1341)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:378)
        at org.apache.wicket.protocol.http.SecondLevelCacheSessionStore$SecondLevelCachePageMap.readObject(SecondLevelCacheSessionSt
ore.java:403)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:618)
        at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1036)
        at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1848)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1755)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1341)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:378)
        at com.ibm.ws.webcontainer.httpsession.HttpSessDRSBuffWrapper.convBytes2Obj(HttpSessDRSBuffWrapper.java:178)
        at com.ibm.ws.webcontainer.httpsession.HttpSessDRSDataXfer.convBytes2Obj(HttpSessDRSDataXfer.java:349)
        at com.ibm.ws.webcontainer.httpsession.DRSSessionData.getSwappableData(DRSSessionData.java:115)
        at com.ibm.ws.webcontainer.httpsession.DatabaseSessionData.checkActivationListeners(DatabaseSessionData.java:343)
        at com.ibm.ws.webcontainer.httpsession.SessionData.notifyActivateListeners(SessionData.java:1330)
        at com.ibm.ws.webcontainer.httpsession.SessionContext.getIHttpSession(SessionContext.java:1558)
        at com.ibm.ws.webcontainer.httpsession.SessionContext.getIHttpSession(SessionContext.java:2508)
        at com.ibm.ws.webcontainer.httpsession.SessionContext.sessionPreInvoke(SessionContext.java:2873)
        at com.ibm.ws.webcontainer.srt.SRTRequestContext.sessionPreInvoke(SRTRequestContext.java:56)
        at com.ibm.ws.webcontainer.webapp.WebAppDispatcherContext.sessionPreInvoke(WebAppDispatcherContext.java:254)
        at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:459)
        ... 19 more

--------------------------------------------------------------------
SystemErr.log
[3/30/10 10:32:56:173 GMT+08:00] 000000f5 SystemErr     R java.io.InvalidClassException: com.mytest.stp.service.stpservice.sysm.Aut
hService; could not resolve class [com.mytest.stp.service.stpservice.sysm.AuthService] when deserializing proxy
[3/30/10 10:32:56:173 GMT+08:00] 000000f5 SystemErr     R       at org.apache.wicket.proxy.LazyInitProxyFactory$ProxyReplacement.rea
dResolve(LazyInitProxyFactory.java:236)
[3/30/10 10:32:56:173 GMT+08:00] 000000f5 SystemErr     R       at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[3/30/10 10:32:56:173 GMT+08:00] 000000f5 SystemErr     R       at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorI
mpl.java:79)
[3/30/10 10:32:56:174 GMT+08:00] 000000f5 SystemErr     R       at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodA
ccessorImpl.java:43)
[3/30/10 10:32:56:174 GMT+08:00] 000000f5 SystemErr     R       at java.lang.reflect.Method.invoke(Method.java:618)
[3/30/10 10:32:56:174 GMT+08:00] 000000f5 SystemErr     R       at java.io.ObjectStreamClass.invokeReadResolve(ObjectStreamClass.jav
a:1123)
[3/30/10 10:32:56:174 GMT+08:00] 000000f5 SystemErr     R       at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.ja
va:1764)
[3/30/10 10:32:56:174 GMT+08:00] 000000f5 SystemErr     R       at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1341
)
[3/30/10 10:32:56:174 GMT+08:00] 000000f5 SystemErr     R       at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.jav
a:1947)
[3/30/10 10:32:56:174 GMT+08:00] 000000f5 SystemErr     R       at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1
871)
[3/30/10 10:32:56:174 GMT+08:00] 000000f5 SystemErr     R       at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.ja
va:1755)
[3/30/10 10:32:56:174 GMT+08:00] 000000f5 SystemErr     R       at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1341
)
[3/30/10 10:32:56:174 GMT+08:00] 000000f5 SystemErr     R       at java.io.ObjectInputStream.readObject(ObjectInputStream.java:378)
[3/30/10 10:32:56:174 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.httpsession.HttpSessDRSBuffWrapper.convBy
tes2Obj(HttpSessDRSBuffWrapper.java:178)
[3/30/10 10:32:56:174 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.httpsession.HttpSessDRSDataXfer.convBytes
2Obj(HttpSessDRSDataXfer.java:349)
[3/30/10 10:32:56:174 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.httpsession.DRSSessionData.getSwappableDa
ta(DRSSessionData.java:115)
[3/30/10 10:32:56:174 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.httpsession.DatabaseSessionData.checkActi
vationListeners(DatabaseSessionData.java:343)
[3/30/10 10:32:56:174 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.httpsession.SessionData.notifyActivateLis
teners(SessionData.java:1330)
[3/30/10 10:32:56:174 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.httpsession.SessionContext.getIHttpSessio
n(SessionContext.java:1558)
[3/30/10 10:32:56:174 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.httpsession.SessionContext.getIHttpSessio
n(SessionContext.java:2508)
[3/30/10 10:32:56:174 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.httpsession.SessionContext.sessionPreInvo
ke(SessionContext.java:2873)
[3/30/10 10:32:56:175 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.srt.SRTRequestContext.sessionPreInvoke(SR
TRequestContext.java:56)
[3/30/10 10:32:56:175 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.webapp.WebAppDispatcherContext.sessionPre
Invoke(WebAppDispatcherContext.java:254)
[3/30/10 10:32:56:175 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(Serv
letWrapper.java:459)
[3/30/10 10:32:56:175 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.wswebcontainer.servlet.ServletWrapper.handleRequest(Se
rvletWrapper.java:524)
[3/30/10 10:32:56:175 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3
548)
[3/30/10 10:32:56:175 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.ja
va:269)
[3/30/10 10:32:56:175 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.j
ava:818)
[3/30/10 10:32:56:175 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.wswebcontainer.WebContainer.handleRequest(WebContainer
.java:1478)
[3/30/10 10:32:56:175 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink
.java:125)
[3/30/10 10:32:56:175 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscri
mination(HttpInboundLink.java:458)
[3/30/10 10:32:56:175 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInf
ormation(HttpInboundLink.java:387)
[3/30/10 10:32:56:175 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpIn
boundLink.java:267)
[3/30/10 10:32:56:175 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.send
ToDiscriminators(NewConnectionInitialReadCallback.java:214)
[3/30/10 10:32:56:175 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.comp
lete(NewConnectionInitialReadCallback.java:113)
[3/30/10 10:32:56:175 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompl
eted(AioReadCompletionListener.java:165)
[3/30/10 10:32:56:175 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsync
Future.java:217)
[3/30/10 10:32:56:175 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncCh
annelFuture.java:161)
[3/30/10 10:32:56:175 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:136)
[3/30/10 10:32:56:175 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:196)
[3/30/10 10:32:56:176 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandl
er.java:751)
[3/30/10 10:32:56:176 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:881)
[3/30/10 10:32:56:176 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1497)
[3/30/10 10:32:56:191 GMT+08:00] 000000f5 SystemErr     R java.lang.ExceptionInInitializerError
[3/30/10 10:32:56:191 GMT+08:00] 000000f5 SystemErr     R       at java.lang.J9VMInternals.initialize(J9VMInternals.java:218)
[3/30/10 10:32:56:192 GMT+08:00] 000000f5 SystemErr     R       at java.lang.Class.forNameImpl(Native Method)
[3/30/10 10:32:56:192 GMT+08:00] 000000f5 SystemErr     R       at java.lang.Class.forName(Class.java:163)
[3/30/10 10:32:56:192 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.util.WsObjectInputStream.loadClass(WsObjectInputStream
.java:218)
[3/30/10 10:32:56:192 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.util.WsObjectInputStream.access$000(WsObjectInputStrea
m.java:48)
[3/30/10 10:32:56:192 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.util.WsObjectInputStream$2.run(WsObjectInputStream.jav
a:186)
[3/30/10 10:32:56:192 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.security.util.AccessController.doPrivileged(AccessCont
roller.java:118)
[3/30/10 10:32:56:192 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.util.WsObjectInputStream.resolveClass(WsObjectInputStr
eam.java:159)
[3/30/10 10:32:56:192 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.util.WsObjectInputStream.resolveClass(WsObjectInputStr
eam.java:151)
[3/30/10 10:32:56:192 GMT+08:00] 000000f5 SystemErr     R       at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java
:1580)
[3/30/10 10:32:56:192 GMT+08:00] 000000f5 SystemErr     R       at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:15
02)
[3/30/10 10:32:56:192 GMT+08:00] 000000f5 SystemErr     R       at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.ja
va:1735)
[3/30/10 10:32:56:192 GMT+08:00] 000000f5 SystemErr     R       at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1341
)
[3/30/10 10:32:56:192 GMT+08:00] 000000f5 SystemErr     R       at java.io.ObjectInputStream.readObject(ObjectInputStream.java:378)
[3/30/10 10:32:56:192 GMT+08:00] 000000f5 SystemErr     R       at org.apache.wicket.protocol.http.SecondLevelCacheSessionStore$Seco
ndLevelCachePageMap.readObject(SecondLevelCacheSessionStore.java:403)
[3/30/10 10:32:56:192 GMT+08:00] 000000f5 SystemErr     R       at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[3/30/10 10:32:56:192 GMT+08:00] 000000f5 SystemErr     R       at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorI
mpl.java:79)
[3/30/10 10:32:56:192 GMT+08:00] 000000f5 SystemErr     R       at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodA
ccessorImpl.java:43)
[3/30/10 10:32:56:192 GMT+08:00] 000000f5 SystemErr     R       at java.lang.reflect.Method.invoke(Method.java:618)
[3/30/10 10:32:56:192 GMT+08:00] 000000f5 SystemErr     R       at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java
:1036)
[3/30/10 10:32:56:192 GMT+08:00] 000000f5 SystemErr     R       at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1
848)
[3/30/10 10:32:56:193 GMT+08:00] 000000f5 SystemErr     R       at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.ja
va:1755)
[3/30/10 10:32:56:193 GMT+08:00] 000000f5 SystemErr     R       at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1341
)
[3/30/10 10:32:56:193 GMT+08:00] 000000f5 SystemErr     R       at java.io.ObjectInputStream.readObject(ObjectInputStream.java:378)
[3/30/10 10:32:56:193 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.httpsession.HttpSessDRSBuffWrapper.convBy
tes2Obj(HttpSessDRSBuffWrapper.java:178)
[3/30/10 10:32:56:193 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.httpsession.HttpSessDRSDataXfer.convBytes
2Obj(HttpSessDRSDataXfer.java:349)
[3/30/10 10:32:56:193 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.httpsession.DRSSessionData.getSwappableDa
ta(DRSSessionData.java:115)
[3/30/10 10:32:56:193 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.httpsession.DatabaseSessionData.checkActi
vationListeners(DatabaseSessionData.java:343)
[3/30/10 10:32:56:193 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.httpsession.SessionData.notifyActivateLis
teners(SessionData.java:1330)
[3/30/10 10:32:56:193 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.httpsession.SessionContext.getIHttpSessio
n(SessionContext.java:1558)
[3/30/10 10:32:56:193 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.httpsession.SessionContext.getIHttpSessio
n(SessionContext.java:2508)
[3/30/10 10:32:56:193 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.httpsession.SessionContext.sessionPreInvo
ke(SessionContext.java:2873)
[3/30/10 10:32:56:193 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.srt.SRTRequestContext.sessionPreInvoke(SR
TRequestContext.java:56)
[3/30/10 10:32:56:193 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.webapp.WebAppDispatcherContext.sessionPre
Invoke(WebAppDispatcherContext.java:254)
[3/30/10 10:32:56:193 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(Serv
letWrapper.java:459)
[3/30/10 10:32:56:193 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.wswebcontainer.servlet.ServletWrapper.handleRequest(Se
rvletWrapper.java:524)
[3/30/10 10:32:56:193 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3
548)
[3/30/10 10:32:56:193 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.ja
va:269)
[3/30/10 10:32:56:193 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.j
ava:818)
[3/30/10 10:32:56:194 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.wswebcontainer.WebContainer.handleRequest(WebContainer
.java:1478)
[3/30/10 10:32:56:194 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink
.java:125)
[3/30/10 10:32:56:194 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscri
mination(HttpInboundLink.java:458)
[3/30/10 10:32:56:194 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInf
ormation(HttpInboundLink.java:387)
[3/30/10 10:32:56:194 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpIn
boundLink.java:267)
[3/30/10 10:32:56:194 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.send
ToDiscriminators(NewConnectionInitialReadCallback.java:214)
[3/30/10 10:32:56:194 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.comp
lete(NewConnectionInitialReadCallback.java:113)
[3/30/10 10:32:56:194 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompl
eted(AioReadCompletionListener.java:165)
[3/30/10 10:32:56:194 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsync
Future.java:217)
[3/30/10 10:32:56:194 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncCh
annelFuture.java:161)
[3/30/10 10:32:56:194 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:136)
[3/30/10 10:32:56:194 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:196)
[3/30/10 10:32:56:194 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandl
er.java:751)
[3/30/10 10:32:56:194 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:881)
[3/30/10 10:32:56:194 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1497)
[3/30/10 10:32:56:194 GMT+08:00] 000000f5 SystemErr     R Caused by: org.apache.wicket.WicketRuntimeException: There is no applicati
on attached to current thread WebContainer : 21
        at org.apache.wicket.Application.get(Application.java:177)
        at org.apache.wicket.Component.getApplication(Component.java:1277)
        at org.apache.wicket.Component.<init>(Component.java:893)
        at org.apache.wicket.Page.<init>(Page.java:238)
        at org.apache.wicket.protocol.http.pagestore.SerializedPagesCache$SerializedPageWithSession.<clinit>(SerializedPagesCache.ja
va:205)
        at java.lang.J9VMInternals.initializeImpl(Native Method)
        at java.lang.J9VMInternals.initialize(J9VMInternals.java:196)
        at java.lang.Class.forNameImpl(Native Method)
        at java.lang.Class.forName(Class.java:163)
        at com.ibm.ws.util.WsObjectInputStream.loadClass(WsObjectInputStream.java:218)
        at com.ibm.ws.util.WsObjectInputStream.access$000(WsObjectInputStream.java:48)
        at com.ibm.ws.util.WsObjectInputStream$2.run(WsObjectInputStream.java:186)
        at com.ibm.ws.security.util.AccessController.doPrivileged(AccessController.java:118)
        at com.ibm.ws.util.WsObjectInputStream.resolveClass(WsObjectInputStream.java:159)
        at com.ibm.ws.util.WsObjectInputStream.resolveClass(WsObjectInputStream.java:151)
        at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1580)
        at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1502)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1735)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1341)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:378)
        at org.apache.wicket.protocol.http.SecondLevelCacheSessionStore$SecondLevelCachePageMap.readObject(SecondLevelCacheSessionSt
ore.java:403)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:618)
        at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1036)
        at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1848)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1755)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1341)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:378)
        at com.ibm.ws.webcontainer.httpsession.HttpSessDRSBuffWrapper.convBytes2Obj(HttpSessDRSBuffWrapper.java:178)
        at com.ibm.ws.webcontainer.httpsession.HttpSessDRSDataXfer.convBytes2Obj(HttpSessDRSDataXfer.java:349)
        at com.ibm.ws.webcontainer.httpsession.DRSSessionData.getSwappableData(DRSSessionData.java:115)
        at com.ibm.ws.webcontainer.httpsession.DatabaseSessionData.checkActivationListeners(DatabaseSessionData.java:343)
        at com.ibm.ws.webcontainer.httpsession.SessionData.notifyActivateListeners(SessionData.java:1330)
        at com.ibm.ws.webcontainer.httpsession.SessionContext.getIHttpSession(SessionContext.java:1558)
        at com.ibm.ws.webcontainer.httpsession.SessionContext.getIHttpSession(SessionContext.java:2508)
        at com.ibm.ws.webcontainer.httpsession.SessionContext.sessionPreInvoke(SessionContext.java:2873)
        at com.ibm.ws.webcontainer.srt.SRTRequestContext.sessionPreInvoke(SRTRequestContext.java:56)
        at com.ibm.ws.webcontainer.webapp.WebAppDispatcherContext.sessionPreInvoke(WebAppDispatcherContext.java:254)
        at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:459)
        at com.ibm.ws.wswebcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:524)
        at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3548)
        at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:269)
        at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:818)
        at com.ibm.ws.wswebcontainer.WebContainer.handleRequest(WebContainer.java:1478)
        at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:125)
        at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:458)
        at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:387)
        at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:267)
        at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:2
14)
        at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
[3/30/10 10:32:56:194 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:136)
[3/30/10 10:32:56:194 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:196)
[3/30/10 10:32:56:194 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandl
er.java:751)
[3/30/10 10:32:56:194 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:881)
[3/30/10 10:32:56:194 GMT+08:00] 000000f5 SystemErr     R       at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1497)
[3/30/10 10:32:56:194 GMT+08:00] 000000f5 SystemErr     R Caused by: org.apache.wicket.WicketRuntimeException: There is no applicati
on attached to current thread WebContainer : 21
        at org.apache.wicket.Application.get(Application.java:177)
        at org.apache.wicket.Component.getApplication(Component.java:1277)
        at org.apache.wicket.Component.<init>(Component.java:893)
        at org.apache.wicket.Page.<init>(Page.java:238)
        at org.apache.wicket.protocol.http.pagestore.SerializedPagesCache$SerializedPageWithSession.<clinit>(SerializedPagesCache.ja
va:205)
        at java.lang.J9VMInternals.initializeImpl(Native Method)
        at java.lang.J9VMInternals.initialize(J9VMInternals.java:196)
        at java.lang.Class.forNameImpl(Native Method)
        at java.lang.Class.forName(Class.java:163)
        at com.ibm.ws.util.WsObjectInputStream.loadClass(WsObjectInputStream.java:218)
        at com.ibm.ws.util.WsObjectInputStream.access$000(WsObjectInputStream.java:48)
        at com.ibm.ws.util.WsObjectInputStream$2.run(WsObjectInputStream.java:186)
        at com.ibm.ws.security.util.AccessController.doPrivileged(AccessController.java:118)
        at com.ibm.ws.util.WsObjectInputStream.resolveClass(WsObjectInputStream.java:159)
        at com.ibm.ws.util.WsObjectInputStream.resolveClass(WsObjectInputStream.java:151)
        at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1580)
        at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1502)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1735)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1341)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:378)
        at org.apache.wicket.protocol.http.SecondLevelCacheSessionStore$SecondLevelCachePageMap.readObject(SecondLevelCacheSessionSt
ore.java:403)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:618)
        at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1036)
        at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1848)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1755)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1341)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:378)
        at com.ibm.ws.webcontainer.httpsession.HttpSessDRSBuffWrapper.convBytes2Obj(HttpSessDRSBuffWrapper.java:178)
        at com.ibm.ws.webcontainer.httpsession.HttpSessDRSDataXfer.convBytes2Obj(HttpSessDRSDataXfer.java:349)
        at com.ibm.ws.webcontainer.httpsession.DRSSessionData.getSwappableData(DRSSessionData.java:115)
        at com.ibm.ws.webcontainer.httpsession.DatabaseSessionData.checkActivationListeners(DatabaseSessionData.java:343)
        at com.ibm.ws.webcontainer.httpsession.SessionData.notifyActivateListeners(SessionData.java:1330)
        at com.ibm.ws.webcontainer.httpsession.SessionContext.getIHttpSession(SessionContext.java:1558)
        at com.ibm.ws.webcontainer.httpsession.SessionContext.getIHttpSession(SessionContext.java:2508)
        at com.ibm.ws.webcontainer.httpsession.SessionContext.sessionPreInvoke(SessionContext.java:2873)
        at com.ibm.ws.webcontainer.srt.SRTRequestContext.sessionPreInvoke(SRTRequestContext.java:56)
        at com.ibm.ws.webcontainer.webapp.WebAppDispatcherContext.sessionPreInvoke(WebAppDispatcherContext.java:254)
        at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:459)
        at com.ibm.ws.wswebcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:524)
        at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3548)
        at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:269)
        at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:818)
        at com.ibm.ws.wswebcontainer.WebContainer.handleRequest(WebContainer.java:1478)
        at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:125)
        at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:458)
        at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:387)
        at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:267)
        at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:2
14)
        at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
        at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
        at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
        at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
        at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:136)
        at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:196)
        at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:751)
        at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:881)
        at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1497)

[3/30/10 10:32:56:195 GMT+08:00] 000000f5 SystemErr     R       at org.apache.wicket.Application.get(Application.java:177)
[3/30/10 10:32:56:195 GMT+08:00] 000000f5 SystemErr     R       at org.apache.wicket.Component.getApplication(Component.java:1277)
[3/30/10 10:32:56:195 GMT+08:00] 000000f5 SystemErr     R       at org.apache.wicket.Component.<init>(Component.java:893)
[3/30/10 10:32:56:195 GMT+08:00] 000000f5 SystemErr     R       at org.apache.wicket.Page.<init>(Page.java:238)
[3/30/10 10:32:56:195 GMT+08:00] 000000f5 SystemErr     R       at org.apache.wicket.protocol.http.pagestore.SerializedPagesCache$Se
rializedPageWithSession.<clinit>(SerializedPagesCache.java:205)
[3/30/10 10:32:56:195 GMT+08:00] 000000f5 SystemErr     R       at java.lang.J9VMInternals.initializeImpl(Native Method)
[3/30/10 10:32:56:195 GMT+08:00] 000000f5 SystemErr     R       at java.lang.J9VMInternals.initialize(J9VMInternals.java:196)
[3/30/10 10:32:56:195 GMT+08:00] 000000f5 SystemErr     R       ... 53 more
--------------------------------------------------------------------
--------------------------------------------------------------------
Any advice ?"	1	Bug	NoClassDefFoundError, SerializedPageWithSession, cluster, websphere	3	Major	5	Resolved
12460685	THRIFT	clavoie	compile error with GHC 6.12.1	The Haskell bindings do not compile with GHC 6.12.1, because rec seems to be a reserved word in that version.	1	Bug	compilation	3	Major	6	Closed
12461064	WICKET	ivaynberg	"More ""IModel<? extends Collection<"" Fixes"	"I searched the code for all occurrences of ""IModel<Collection<"" and replaced all that I thought could be replaced with ""IModel<? extends Collection<""."	4	Improvement	generics	4	Minor	5	Resolved
12461079	JSPWIKI	metskem	When a page was modified externally and is read by a plugin via WikiEngine.getPage(..) during intialization a NPE is thrown	"Our plugin extends  BasicPageFilter and implements  WikiPlugin and WikiEventListener. During the initialisation of the wikisystem we are getting the source of a specific page. (some settings are stored there). 
This works quite well most of the time. But when this page was externally modified (by editor...) the call to getPage(..) results in a null result. I've traced it down to the location of it happening: in the class WikiEngine, the methoed

private String textToHTML( WikiContext context, String pagedata, StringTransmutator localLinkHook,
                               StringTransmutator extLinkHook, StringTransmutator attLinkHook, boolean parseAccessRules,
                               boolean justParse )

calls 
pagedata = m_filterManager.doPreTranslateFiltering( context, pagedata ); 
in line 1615

at this point the m_filterManager isn't initialized yet, therefore resulting in an NPE.


"	1	Bug	NPE, initialisation	4	Minor	6	Closed
12461121	LUCENE	mikemccand	Finding Newest Segment In Empty Index	"While extending the index writer, I discovered that its newestSegment method does not check to see if there are any segments before accessing the segment infos vector. Specifically, if you call the IndexWriter#newestSegment method on a brand-new index which is essentially empty, then it throws an java.lang.ArrayIndexOutOfBoundsException exception.

The proposed fix is to return null if no segments exist, as shown below:

--- lucene/src/java/org/apache/lucene/index/IndexWriter.java	(revision 930788)
+++ lucene/src/java/org/apache/lucene/index/IndexWriter.java	(working copy)
@@ -4587,7 +4587,7 @@
 
   // utility routines for tests
   SegmentInfo newestSegment() {
-    return segmentInfos.info(segmentInfos.size()-1);
+    return segmentInfos.size() > 0 ? segmentInfos.info(segmentInfos.size()-1) : null;
   }
"	1	Bug	index, writer	4	Minor	6	Closed
12461183	HUPA	norman	Missing dependency in hupa-server pom.xml	"org.apache.hupa.server.utils.MessageUtils imports and references org.apache.commons.fileupload.FileItem directly.
In the maven command line build, the dependency to commons-fileupload-1.2.1 is resolved transitively through the dependency on gwtupload-0.5.7.

However, when using the m2eclipse plugin, commons-fileupload-1.2.1 is not added to the maven dependencies, and this shows up as a compile error in the eclipse IDE.

This problem is resolved by adding commons-fileupload-1.2.1 as a direct dependency of hupa-server."	4	Improvement	maven	4	Minor	5	Resolved
12461243	OFBIZ	erwan	Accounting French traduction on invoiceType	I add french traduction for missing invoice Type in entityLabel file.	4	Improvement	french, invoice, traduction	4	Minor	6	Closed
12460793	WICKET	ivaynberg	Textarea ignores first line in case of blank line	"When the content of a textarea starts with an empty line, this line disappears when it is placed in the html.
This is a known problem with the html textarea element.
<textarea>test</textarea> will result in the same as:
<textarea>
test</textarea>
Meaning that the first newline in the textarea is ignored. In case of opening a page with a textarea with a leading blank line, this line will be removed when the form is submitted again.

See for similar issues in the apache jira STR-1366 and BEEHIVE-1005

A possible solution is to change the following method in org.apache.wicket.markup.html.form.TextArea in something like:
  protected final void onComponentTagBody(final MarkupStream markupStream, final ComponentTag openTag) {
    checkComponentTag(openTag, ""textarea"");
    String value = getValue();
    if (value != null && value.startsWith(""\n"")) {
      value = ""\n"" + value;
    } else if (value != null && value.startsWith(""\r\n"")) {
      value = ""\r\n"" + value;
    } else if (value != null && value.startsWith(""\r"")) {
      value = ""\r"" + value;
    }
    replaceComponentTagBody(markupStream, openTag, value);
}"	1	Bug	blank_line, textarea	3	Major	5	Resolved
12460796	HBASE	lars_francke	Use top-level Apache pom for shared configuration	"Lars Francke suggested this one to me offline and I think it's an excellent idea, so just raising it here for posterity.

see https://repository.apache.org/content/repositories/releases/org/apache/apache/7/apache-7.pom

If we changed the HBase top-level pom to have a parent of the ASF one we can share some configuration love here, take advantage of 'known good' plugins, slim down the HBase pom definition even more (I love removing code, it's my favourite task) and abide by standard Apache release artifact signing and packaging processes.

this _should_ be simple.  Lars or I will work up a patch when one of us has some time.  

(nice thinking Lars!)"	4	Improvement	maven	4	Minor	6	Closed
12460841	IVY	maartenc	Packager resolver always extracts all files from archives even when the packaging instructions contains include tags	"According to the documentation the packager resolver should unzip/untar only specific files and folders (and not the complete archive) from downloaded resources in case the packager module description specfies include tags. Let's assume we have a module testng (example is taken from the examples in the Packager Resolver documentation) and we have a packager module descriptor (the packaging instructions) packager.xml specifying the following resource:

{code:xml}
<resource dest=""archive"" url=""http://testng.org/${zipname}.zip"" sha1=""2ea19275dc17453306f8bb780fe6ef6e9af7756b"">
        <include name=""${zipname}/*.jar""/>
</resource>
{code}

this instructs the package resolver to download the resources from http://testng.org/... and then extract the archive, but only all JAR files in the root of the archive.

in this case only the JAR's in the ZIP file should be extracted from the resource, but that's not the case. at first i didn't notice this, but i was creating the packaging instructions for a project which is in a huge ZIP file and so i only wanted to extract the files that i actually needed, but i noticed that the extraction took way to long.

i then configured the packager resolver to preserve the build directories (where the archive is extracted) for debugging purposes and i noticed that the complete archive was still extracted although the packager.xml file contained the necessary 'include' tags to only inluce 3 JAR's.

when using the preserveBuildDirectories switch on the packager resolver, it's also possible to view the ANT build file packager-output.xml (this one is generated by the packager resolver based on the packaging instructions). this build file is executed by the package resolver to do the extraction process. this is the relevant part of the packager-output.xml file for the above mentioded example for TestNG:

{code:xml}
<unzip src=""${resdir.N65541}${file.separator}${filename.N65541}"" dest=""archive"">
    <fileset dir=""."">
        <include name=""testng-2.5/*.jar""/>
     </fileset>
</unzip>
{code}

but this is incorrect and that's why the complete zip is still extracted. the 'fileset' tag should be used to indicate a set of ZIP files that need to be extracted, not to indicate which resources from the archive (specified in the 'src' attribute of the unzip tag) need to be included when extracting. 'patternset' is what we need here instead of 'fileset'

the actual problem is situated in the file src/java/org/apache/ivy/plugins/resolver/packager/packager.xsl on line 420 (in the ivy core project).

{code:xml}
<xsl:when test=""$type = 'zip' or $type = 'war' or $type = 'jar'"">
    <unzip src=""{$file}"" dest=""{$dir}"">
        <xsl:if test=""$includes"">
            <fileset dir=""."">
                <xsl:copy-of select=""$includes""/>
            </fileset>
        </xsl:if>
    </unzip>
</xsl:when>
{code}

should be:

{code:xml}
<xsl:when test=""$type = 'zip' or $type = 'war' or $type = 'jar'"">
    <unzip src=""{$file}"" dest=""{$dir}"">
        <xsl:if test=""$includes"">
            <patternset>
                <xsl:copy-of select=""$includes""/>
            </patternset>
        </xsl:if>
    </unzip>
</xsl:when>
{code}

the same needs to be done for the TAR part in the packages.xsl file.

i already tried this fix and it works.

if that's OK, i'll create a patch for this and provide the necessary unit tests to illustrate the problem and the fix.
"	1	Bug	packager_resolver	4	Minor	5	Resolved
12460844	OPENEJB	madshaddow	Undeploy apps and stop ResourceAdapters on shutdown	"SimpleServiceManager.stop() not processing ResourceAdapters on a standalone remote stop due an oversight.

Current implementation calls containerSystem.getJNDIContext().listBindings(""openejb/resourceAdapters""); and then hides the naming exception.

The following snippet resolves this issue, and also checks for instances of ResourceAdapter.

try {
            ContainerSystem containerSystem = SystemInstance.get().getComponent(ContainerSystem.class);
            NamingEnumeration<Binding> namingEnumeration = null;

            try {
                namingEnumeration = containerSystem.getJNDIContext().listBindings(""openejb/Resource"");
            } catch (NamingException ignored) {
                logger.debug(""No resource adapters were created"");
            }

            if (namingEnumeration != null) {

                while (namingEnumeration.hasMoreElements()) {

                    Binding binding = namingEnumeration.nextElement();
                    Object object = binding.getObject();

                    if (object instanceof ResourceAdapter) {

                        ResourceAdapter resourceAdapter = (ResourceAdapter) object;

                        logger.debug(""Stopping ResourceAdapter: "" + binding.getName());

                        try {
                            resourceAdapter.stop();
                        } catch (Exception e) {
                            logger.fatal(""ResourceAdapter Shutdown Failed: "" + binding.getName(), e);
                        }
                    }
                }

            } else {
                logger.warning(""No resources were found"");
            }
        } catch (Throwable e) {
            logger.fatal(""Unable to get ResourceAdapters from JNDI.  Stop must be called on them for proper vm shutdown."", e);
        } "	1	Bug	openejb	3	Major	6	Closed
12460895	WW	lukaszlenart	ServletRedirectResult and ServletActionRedirectResult should support #anchor URI syntax	"Expected URI syntax includes an ""#anchor"", as documented here:
    http://labs.apache.org/webarch/uri/rfc/rfc3986.html#fragment
    ""A fragment identifier component is indicated by the presence of a number sign (""#"") character and terminated by the end of the URI.""

ServletRedirectResult's current implementation allows anchor fragments to be used only if there are no query parameters present for the RedirectResult.  In this case, the location param can be specified for a ServletRedirectResult with a #anchor suffix.  However this does not work when using query parameters.  ServletActionRedirectResult does not support #anchor due to runtime discovery of the target URI based on the actionName, namespace, and method.

Anchor fragments should be generally supported in redirection.
"	4	Improvement	URI	3	Major	6	Closed
12461020	WSCOMMONS	bmargulies	SchemaBuilder does not parse all the 'key' and 'keyref' definitions when it uses namespace prefix	"SchemaBuilder is ruturning only the first key, keyref and unique element when handling multiple keys, keyrefs or unique definitions inside the same element and the shema elemets are using namespace prefix.

   <xs:element name=""Element1"" type=""Element1Type"">

       <xs:keyref name=""keyRef1"" refer=""Key1"">
           <xs:selector xpath=""xxxxx""/>
           <xs:field xpath=""@Name""/>
       </xs:keyref>

       <xs:keyref name=""keyRef2"" refer=""Key1"">
           <xs:selector xpath=""xxxx""/>
           <xs:field xpath=""@Name""/>
       </xs:keyref>

   </xs:element>

The SchemaBuilder will generate information only for the first keyref for this element.


XmlSchemaBuilder should use XDOMUtil.getNextSiblingElementNS() method instead XDOMUtil.getNextSiblingElement() like it does when it looks for the first element.

		if ((keyEl = XDOMUtil.getFirstChildElementNS(el, XmlSchema.SCHEMA_NS,
				""key"")) != null) {
			while (keyEl != null) {
				element.constraints.add(handleConstraint(keyEl, ""Key""));
				keyEl = XDOMUtil.getNextSiblingElementNS(keyEl, XmlSchema.SCHEMA_NS, ""key"");
			}
		}

		if ((keyrefEl = XDOMUtil.getFirstChildElementNS(el,
				XmlSchema.SCHEMA_NS, ""keyref"")) != null) {
			while (keyrefEl != null) {
				XmlSchemaKeyref keyRef = (XmlSchemaKeyref) handleConstraint(
						keyrefEl, ""Keyref"");
				if (keyrefEl.hasAttribute(""refer"")) {
					String name = keyrefEl.getAttribute(""refer"");
					keyRef.refer = getRefQName(name, el);
				}
				element.constraints.add(keyRef);
				keyrefEl = XDOMUtil.getNextSiblingElementNS(keyrefEl, XmlSchema.SCHEMA_NS, ""keyref"");
			}
		}

		if ((uniqueEl = XDOMUtil.getFirstChildElementNS(el,
				XmlSchema.SCHEMA_NS, ""unique"")) != null) {
			while (uniqueEl != null) {
				element.constraints.add(handleConstraint(uniqueEl, ""Unique""));
				uniqueEl = XDOMUtil.getNextSiblingElementNS(uniqueEl, XmlSchema.SCHEMA_NS, ""unique"");
			}
		}
"	1	Bug	schema, xml, xmlschema	3	Major	5	Resolved
12461047	SHIRO	kaosko	Create release configuration and a profile for deploying release docs to a separate directory		3	Task	maven	3	Major	6	Closed
12461053	HBASE	stack	Close, split, open of regions in RegionServer are run by a single thread only.	JGray and Karthik observed yesterday that a regoin open message arrived at the regionserver but that the regionserver worker thread did not get around to the actually opening until 45 seconds later (region offline for 45 seconds).  We only run a single Worker thread in a regoinserver processing open, close, and splits.  In this case, a long running close (or two) held up the worker thread.  We need to run more than a single worker.  A pool of workers?  Should opens be prioritized?	1	Bug	moved_from_0_20_5	2	Critical	6	Closed
12461065	CASSANDRA	gdusbabek	Cannot Start Cassandra Under Windows	"I get the following error when I try to launch the RC of Cassandra from the command line:

Starting Cassandra Server
Listening for transport dt_socket at address: 8888
Exception in thread ""main"" java.lang.NoClassDefFoundError: org/apache/cassandra/thrift/CassandraDaemon
Caused by: java.lang.ClassNotFoundException: org.apache.cassandra.thrift.CassandraDaemon
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: org.apache.cassandra.thrift.CassandraDaemon.  Program will exit."	1	Bug	windows, wont-start	10002	Normal	5	Resolved
12461220	OFBIZ	erwan	Create dataResource from content	"When you create a content, you need create a data resource and return to content for create association.

If a content don't have a dataResource, I change buton : GoToDataResource by Create a DataResource. When this lastest is created, she automaticly associate to the content and retour to EditContent screen
"	4	Improvement	content, dataResource	4	Minor	6	Closed
12461244	PDFBOX	lehmi	Adding XMP data to a PDF causes different kinds of mutilations of the original pdf.	"We are using PdfBox for a Material Workflow application for one of the major Newspaper publishers in the Netherland.
One of the things we use PdfBox for is adding MMP data to the XML file.
Doing this causes different kinds of mutilation of the original pdf.

The way in which this occurs varies. Sometimes a character is altered, sometimes an element or complete ad is mutilated, sometimes the color of/in an ad is changed.
These files also tend crash Adobe Acrobat (Professional 9, with Pitstop Professional) (not all files);
The files also may create a ""Failed to open PDF file"" when trying to place it InDesign (not all files). 


We use the following source in out application:

			InputStream pdfStream =  Core.getFileDocumentContent(pdfFileDocument.getMendixObject());
			PDDocument pdfDoc = PDDocument.load(pdfStream);
			PDDocumentInformation pdfInfo = pdfDoc.getDocumentInformation();
			
			IMendixObject materiaalMetaMendixObject = xmpDocument.getMendixObject();  
			Set<String> memberKeys = materiaalMetaMendixObject.getMembers().keySet();
			for (String memberKey : memberKeys) {
				Object member = materiaalMetaMendixObject.getMember(memberKey).getValue();
				if (member!= null) {
					String memberString = member.toString();
					if (memberKey.startsWith(""XMP""))
						pdfInfo.setCustomMetadataValue(memberKey, memberString);
				}
			}
			pdfDoc.setDocumentInformation(pdfInfo);

			pdfDoc.save(pdfOutputPath + File.separator + fileName);
			pdfDoc.close();
			pdfStream.close();

Please HELP"	1	Bug	pdfbox, save, xmp	1	Blocker	6	Closed
12461271	HAMA	hyunsik.choi	Current shell scripts for bsp daemon have several problems.	"Current shell script for the bsp daemon have several bugs and problems.
 1. stop-all.sh script doesn't work.
 2. the script 'hama' needs additional parameters like start and stop. Their semantic is different from ones of hadoop. It is better to unify semantics.
 3. they has some remnants of hadoop since they are borrowed from hadoop scripts."	1	Bug	bsp	3	Major	5	Resolved
12461280	HAMA	hyunsik.choi	Discuss / Refactor HamaMaster and GroomServer	"BSP package needs bsp master daemon and bsp slave daemon. We intended HamaMaster and GroomServer to be bsp master and bsp slave daemon respectively. But, they are now located in the wrong package. GroomServer is in org.apache.hama.graph ,and HamaMaster is in org.apache.hama.

Thus, I propose as follows:
 1) GroomServer should be moved to org.apache.hama.bsp.
 2) HamaMaster should be moved to org.apache.hama.bsp.
 3) HamaMaster should be renamed to BSPMaster.
"	7	Sub-task	bsp	3	Major	5	Resolved
12461384	QPID	ritchiem	Interoperability tests fail due to attempts to print out contents of JMS Message objects, and do not parse command line properies	"Interoperability tests fail due to attempts to print out contents of JMS Message objects, as the messages are not considered readable. This is exposed in the toString method, which is called during String concatenation. To fix this, the TestClient and ConversationFactory classes have been modified to print the JMSMessageId instead, which is always accessible. Additionally, the TestClient class does not correctly use parsed command line properties, and fails to set the broker URL and default virtual host name. The default virtual host should be set to ""test"" in the default properties, to match the Javadoc, and the TestClient should add the parsed command line properties to the default properties with the correct name."	1	Bug	qpid, testing	3	Major	6	Closed
12461497	MAHOUT	srowen	Proposal to implement Distributed SVD++ Recommender using Hadoop	"Proposal Title: [MAHOUT-371] Proposal to implement Distributed SVD++ Recommender using Hadoop

Student Name: Richard Simon Just

Student E-mail:info@richardsimonjust.co.uk

Organization/Project: Apache Mahout

Assigned Mentor:


Proposal Abstract: 
During the Netflix Prize Challenge one of the most popular forms of Recommender algorithm was that of Matrix Factorisation, in particular Singular Value Decomposition (SVD). As such this proposal looks to implement a distributed version of one of the most successful SVD-based recommender algorithms from the Netflix competition. Namely, the SVD++ algorithm. 
The SVD++ improves upon other basic SVD algorithms by incorporating implicit feedback[1]. That is to say that it is able to take into account not just explicit user preferences, but also feedback such as, in the case of a company like Netflix, whether a movie has been rented. Implicit feedback assumes that the fact of there being some correlation between the user and the item is more important that whether the correlation is positive or negative. Implicit feedback would account for an item has being rated, but not what the rating was.
The implementation will include testing, in-depth documentation and a demo/tutorial. If there is time, I will also look to developing the algorithm into the timeSVD++ algorithm[2,3]. The timeSVD++ further improves the results of the SVD algorithm by taking into account temporal dynamics. Temporal dynamics addresses the way user preferences in items and their behaviour in how they rate items can change over time. According to [2] the gains in accuracy implementing timeSVD++ are significantly bigger than the gains going from SVD to SVD++. 
The overall project will provide three deliverables:
1. The basic framework for distributed SVD-based recommender
2. A distributed SVD++ implementation and demo
3. A distributed timeSVD++ implementation



Detailed Description:

The SVD++ algorithm uses the principle of categorising users and items into factors, combined with regularisation and implicit feedback to predict how much a user is likely to match an item. Factors are abstract categorises that are created from comparing the data presented. Factor values are grades saying how much each user/item is related to that category. For example with the Netflix data a factor could loosely correspond to a movie genre, a director or story line. The more factors used the more detailed the categories are likely to become, and thus the more accurate the predictions are likely to become. 

Implicit feedback is based on the theory that a user having any sort of relationship to an item is more important that whether they rated it, or what rating they gave. The assumption is that even if a user does not like an item, or has not rated it, the very fact that they choose to have some interaction with it indicates something about their preferences. In the Netflix case this would be represented by whether a user has rated a movie or not,  it could also take into account the user's rental history. 

As well as the actual implementation of the code the project has two other deliverable focuses. The readability, documentation, testing of the code; and a full tutorial and demo of the code. It is felt that without these things the implementation is not really complete or fully usable. 

The recommender consists of 5 main parts. The job class that runs the code, an input conversion section, a training section, a re-trainer section and a prediction section. A brief overview of these sections follows.


The SVD++  Classes:

The Recommender Job class:
This class is the foundation of the recommender and allows it to run on Hadoop by implementing the Tool interface through AbstractJob. This class will parse any user arguments and setup the jobs that will run the algorithm on Map/Reduce, much in the same way Mahout's other distributed recommenders, do such as RecommenderJob.


Input Mapper/Reducer Classes:
The Mapper will take the input data and convert it to key value pairs in the form of a hadoop Writeable. The Reducer will take the Mapper Writeables and create Sparse vectors. This is in keeping with Mahout's ToItemPrefsMapper and ToUserVectorReducer.

Training Mapper/Reducer Classes:
This phase creates the factor matrices that will be used to create the predictions later. It does this by making a prediction of a known rating using the SVD, comparing it against the known rating, calculating the error and updating the factors accordingly. The Mapper will loop through the training of the factor matrices. The Reducer will collect the outputs of the Mapper to create the dense factor matrices.

Re-trainer Mapper/Reducer Classes:
This is a separate job that would be used to update the factor matrices taking into account any new user ratings. The Mapper/Reducer follow a similar pattern to the training section.

Prediction Mapper/Reducer Classes:
This job would take the factor matrices from the training set and use them in the SVD to create the required predictions. Most likely this would be done for all user/item preferences, to create dense matrix of all user/item combinations. However potentially it could also be done for individual users.
Just like training, the Mapper would handle the predictions the Reducer would collect them into a dense matrix.


Timeline:

The Warm Up/Bonding Period (<=May 23rd):
- familiarise myself further with Mahout and Hadoop's code base and documentation
- discuss with community the proposal, design and implementation as well as related code tests, optimisations and documentation they would like to see incorporated into the project
- build a more detailed design of algorithm implementation and tweak timeline based on feedback
- familiarise myself more with unit testing
- finish building 3-4 node Hadoop cluster and play with all the examples

Week 1 (May 24th-30th):
- start writing the back bone of the code in the form of comments and skeleton code
- implement SVDppRecommenderJob
- start to integrate DistributedLanzcosSolver

Week 2 (May 31st - June 6th):
- complete DistributedLanzcosSolver integration
- start implementing distributed training, prediction and regularisation

Week 3 - 5 (June 7th - 27th):
- complete implementation of distributed training, prediction and regularisation
- work on testing, cleaning up code, and tying up any loose documentation ends
- work on any documentation, tests and optimisation requested by community
- Deliverable : basic framework for distributed SVD-based recommender

Week 6 - 7 (June 28th-July 11th):
- start implementation of SVD++ (keeping documentation and tests up-to-date)
- prepare demo

Week 8 (July 12th - 18th): Mid-Term Report by the 16th
- complete SVD++ and iron out bugs
- implement and document demo
- write wiki articles and tutorial for what has been implemented including the demo

Week 9 (July 19th - 25th):
- work on any documentation, tests and optimisation requested by community during project
- work on testing, cleaning up code, and tying up any loose documentation ends
- Deliverable : Distributed SVD++ Recommender (including Demo)

Week 10 - 11 (July 26th - Aug 8th):
- incorporate temporal dynamics
- write temporal dynamics documentation, including wiki article

Week 12 (Aug 9th - 15th): Suggested Pencils Down
- last optimisation and tidy up of code, documentation, tests and demo
- discuss with community what comes next, consider what JIRA issues to contribute to 
- Deliverable: Distributed SVD++ Recommender with temporal dynamics

Final Evaluations Hand-in: Aug 16th-20th. 



Additional Information:

I am currently a final year undergraduate at the University of Reading, UK, studying BSc Applied Computer Science. As part of this degree I did a 9 month industrial placement programming in Java for an international non-profit organisation. While in this final year of study I have been fortunate enough to take modules in Distributed Computing, Evolutionary Computation and Concurrent Systems, which have proven to be the best of my University career. Each module required me to design and implement algorithms of either a distributed or machine learning nature [A], two in Java, one in C. For my final year project I have implemented a Gaming Persistence Platform in ActionScript, PHP and MySQL. It allows the user to play computer games integrated with the platform from different devices and/or different software platforms while retaining game progress across all instances. I am looking forward to the day when mobile computing goes distributed.

I am a passionate user of open source software and now I am looking to become involved as a developer. Having enjoyed my Distributed Computing and Evolutionary Computation modules so much, and after reading all the introductory pages about the ASF I realised Mahout would be a great place to start. After graduation (and GSoC) I hope to continue contributing to Mahout while working in a related field. 

Outside of uni, when I'm not coding, I like to push my limits through meditation, mountaineering and running. I also love to cook!

After my last exam on May 21st my only commitment over the summer will be GSoC. As such GSoC will be treated like a full-time job.

[1] - Y. Koren, ""Factorization Meets the Neighborhood: a Mulitfaceted Collaborative Filtering Model"", ACM Press, 2008, http://public.research.att.com/~volinsky/netflix/kdd08koren.pdf
[2] - Y. Koren, ""Collaborative Filtering with temporal Dynamics"", ACM Press, 2009, http://research.yahoo.com/files/kdd-fp074-koren.pdf
[3] - R.M.Bell, Y. Koren, and C. Volinsky, ""The Bellkor 2008 Solution to the Netflix Prize"", http://www.netflixprize.com/assets/ProgressPrize2008_BellKor.pdf

[A] - Example of code I've implemented as part of University degree, http://www.richardsimonjust.com/code/"	2	New Feature	gsoc, gsoc2010, proposal	3	Major	6	Closed
12461502	PDFBOX	jukkaz	Incorrect ordering of compound Arabic glyphs	"Some Arabic PDFs contain compound glyphs for stylistic reasons.
Such glyphs encode two letters: FI, SI, LI, LJ, LM, etc.

Before a line gets sent to the bidirectional algorithm, all characters have been sorted into a visual order, except for these pairs. This is because they are handled as one unit and maintain their original (logical) order. The bidi algorithm straightens out most characters, but reverses the glyph pairs.

To fix this, the output of font.encode() should be examined and reversed on the spot if it contains pairs of Arabic characters. Possibly you need to add a stub method to PDFStreamEngine (in method processEncodedText) that PDFTextStripper can override (in sort mode only)."	1	Bug	arabic, bidirectional, compound, glyph, reversed	4	Minor	6	Closed
12461528	PHOTARK	phillipe.ramalho	Search and Tagging Functionality		2	New Feature	gsoc, mentor	3	Major	6	Closed
12461532	QPID	andrew.kennedy	cannot move messages onto a durable subscription backing queue using the JMX Management Console	The backing queue created for durable subscriptions contains a colon in the name, <clientid>:<subscription name>, which cannot be used in unquoted form within a JMX ObjectName. The broker does not quote the queue name in the ObjectName and instead encodes the name by substituting a - for the colon. As a result, when attempt is made to move messages onto the backing queue of a durable subscription using the management console, it sends the ObjectName interpretation of the queue name to the broker and not the actual name, leading to a NullPointerException being genereated within the mesage store when trying to store the message on the new queue, because the queue does not actually exist as specified.	1	Bug	legacy-jmx-console	3	Major	6	Closed
12461534	QPID	kgiusti	Tearing down one dynamic route may delete other independent routes in the federation.	"Tearing down one dynamic federated route can cause other unrelated routes to be torn down if they involve the same queue.

Will attach a test script that exhibits the bug.

Originally found by Gordon Sim."	1	Bug	federation	3	Major	6	Closed
12461548	WW	lukaszlenart	<input> tag generated by <s:checkbox> produce HTML warning in validators	"<s:checkbox> tag with default xhtml theme produce an <input> tag, like that one:

<input type=""hidden"" id=""__checkbox_is_vacancy_open"" name=""__checkbox_vacancy.open"" value=""true"" />

produces HTML Tidy validator warning about an attribute name and ID starting with two ""_"" signs. So, here is a patch I suggest to resolve this issue:

I changed FreeMarker template and a checkbox interceptor code in such a way that prefix of that input no longer produce warning."	1	Bug	checkbox, hidden, html, input, warning	4	Minor	1	Open
12461555	WW	lukaszlenart	OVal plugin with javolution Destination array too small performing validation	"In method protected void performOValValidation(Object action, ValueStack valueStack, String methodName, String context) throws NoSuchMethodException; of org.apache.struts2.oval.interceptor.OValValidationInterceptor line 174 :

addValidationErrors(violations.toArray(new ConstraintViolation[0]), action, valueStack, null);

the array provided as an argument for addValidationErrors() has size 0 that causes a ""Destination array too small"" exception, it should be something like:

addValidationErrors(violations.toArray(new ConstraintViolation[violations.size]), action, valueStack, null);

ini order to guarantee the size of array.

thank you"	1	Bug	oval, struts	3	Major	6	Closed
12461556	WW	lukaszlenart	OVal plugin should add message variables	"In the method protected void addValidationErrors(ConstraintViolation[] violations, Object action, ValueStack valueStack, String parentFieldname) of org.apache.struts2.oval.interceptor.OValValidationInterceptor the violation.getMessageVariables() should be pushed into the valueStack in order to get access in the resource bundle to important validation context variables like min length, max lenght, substring, expression, etc.

thank you

"	4	Improvement	oval, s2, struts	3	Major	6	Closed
12461558	WW	lukaszlenart	JSONValidationInterceptor should generate valid JSON responses	"The method protected String buildResponse(ValidationAware validationAware) in org.apache.struts2.interceptor.validation.JSONValidationInterceptor should generate valid JSON responses, right now it generates json-commenting responses but this could be worst http://trac.dojotoolkit.org/ticket/6380

In other side it breaks compatibillity with other frameworks like JQuery 1.4 (version 1.3 allow to parse non strict JSON) http://www.neeraj.name/2010/01/15/handling-json-parsing-natively-in-jquery-1-4-and-what-changed-from-jquery-1-3.html.

thank you"	4	Improvement	json, s2, struts	3	Major	6	Closed
12461563	WW	lukaszlenart	JSONValidationInterceptor thows exception used with OValValidationInterceptor	"in the method protected String buildResponse(ValidationAware validationAware) of org.apache.struts2.interceptor.validation.JSONValidationInterceptor line 149 the work around described in WW-2721 tries to remove ""model."" from fieldError.key. But when using OValValidationInterceptor the fieldError.key doesn't contains the substring ""model."" so, the code should be sometring like:

sb.append(validationAware instanceof ModelDriven ? fieldError.getKey(). replaceFirst(""model\\."", """")
                            : fieldError.getKey());

thank you"	1	Bug	json, oval, s2, struts	3	Major	6	Closed
12461583	IVY	maartenc	Fix broken links on ivy links page	"Two changes for this page:  http://ant.apache.org/ivy/links.html

# The link to IvyRep should be removed, this repository no longer exists
# Replace it with a link to [Ivy RoundUp|http://ivyroundup.googlecode.com/] which does exist and is actually used by a bunch of people
"	1	Bug	links, repository, web	3	Major	5	Resolved
12461662	CXF	sergey_beryozkin	OAuth 1.0a support for CXF		2	New Feature	gsoc, gsoc2010	3	Major	6	Closed
12461682	PDFBOX	danielwilson	Refactoring rendering-related classes/methods for extensibility	"Some of the classes/methods in the rendering area assume they have access to a Graphics2D object.

This assumption breaks when using the .Net version of PDFBox.  Some judicious refactoring permits PageDrawer to be extended in .Net and key methods to be overriden.

I am continuing this refactoring for better rendering support in .Net.

Andreas recently asked that code committed to SVN also be tied to a Jira issue -- a good idea really -- so I'm putting this in as an issue."	4	Improvement	dot_net, refactoring	4	Minor	6	Closed
12461831	QPID	shuston	Transport security for the WCF channel	SSL and Sasl PLAIN capabilities have been recently ported to the C++ client on Windows.  The WCF client can now be enhanced to use these features and to provide the expected transport level security classes and binding parameters for specifying encryption and authentication on the transport channel.	2	New Feature	legacy-wcf-client	3	Major	6	Closed
12461837	QPID	shuston	WCF Binding Configuration parameters	The existing configuration capabilities of the WCF channel should be fleshed out to handle transport level security.	4	Improvement	legacy-wcf-client	3	Major	6	Closed
12461992	WICKET	ivaynberg	TreeTable not show Date in PropertyTreeColumn	"When I work with TreeTable Component I define a PropertyTreeColumn (in IColumn) and a propertyExpression, well, this propertyExpresion is ""userObject.titulo"". That expression represent a date. When server render the page didn't show treetable (neither the icons and text) but in the server machine or in other machine on the network with same configuration works fine."	1	Bug	property_treecolum, wicket_treenode, wicket_treetable	4	Minor	6	Closed
12462064	QPID	cliffjansen	WCF project needs to encode/decode all AMQP data types	"Currently the WCF Interop project encodes/decodes only string and int data types. The project needs to do all the AMQP data types.

* In directory wcf/src/apache/qpid/interop source files InputLink.cpp and OutputLink.cpp have convenient TODO: markers exposing where the encoder/decoder code might go.

* The dotnet project seems to have what might be needed in client/transport/codec/*. 

The effort would be to move the code from dotnet into wcf/interop.
"	4	Improvement	legacy-wcf-client	3	Major	6	Closed
12462095	HBASE	pranavkhaitan	For single row reads of specific columns, seek to the first column in HFiles rather than start of row	Currently we will always seek to the start of a row.  If we are getting specific columns, we should seek to the first column in that row.	4	Improvement	moved_from_0_20_5	3	Major	6	Closed
12462128	DERBY	rsjay1976	SysinfoTest prints permission errors when printing sysinfo	"When running sysinfo test got the following permission error when printing information from TestSysinfoLocale method

Java Version:    1.6.0_14
Java Vendor:     Sun Microsystems Inc.
Java home:       Security Exception: java.security.AccessControlException: access denied (java.util.PropertyPermission java.home read)
Java classpath:  .;C:/java/Derby/source/trunk/jars/sane/derby/derbyLocale_cs.jar;C:/java/Derby/source/trunk/tools/java/junit.jar;C:/java/Derby/source/trunk/jars/sane/derbyclient.jar;C:/java/Derby/source/trunk/jars/sane/derbynet.jar;C:/java/Derby/source/trunk/jars/sane/derbyrun.jar;C:/java/Derby/source/trunk/jars/sane/derbytesting.jar;C:/java/Derby/source/trunk/jars/sane/derbytools.jar;C:/java/Derby/source/trunk/jars/sane/derby.jar;
OS name:         Windows Vista
OS architecture: x86
OS version:      6.0
Java user name:  Security Exception: java.security.AccessControlException: access denied (java.util.PropertyPermission user.name read)
Java user home:  Security Exception: java.security.AccessControlException: access denied (java.util.PropertyPermission user.home read)
Java user dir:   C:\java\derby\source\trunk
java.specification.name: Java Platform API Specification
"	1	Bug	derby_triage10_8	4	Minor	1	Open
12462290	DERBY	kmarsden	Sysinfo.testSysinfoLocale failed with IB47 M 1.6 on Windows 7 64bit	"Sysinfo.testSysinfoLocale failed with IB47 M 1.6 on Windows 7 64bit. This is the exception from running the test:
1) testSysinfoLocale(org.apache.derbyTesting.functionTests.tests.derbynet.SysinfoTest)junit.framework.AssertionFailedError: expected:<14> but was:<1>
    at org.apache.derbyTesting.functionTests.tests.derbynet.SysinfoTest.assertMatchingStringExists(SysinfoTest.java:322)
    at org.apache.derbyTesting.functionTests.tests.derbynet.SysinfoTest.testSysinfoLocale(SysinfoTest.java:249)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:109)

When running with SysinfoTest along, you will see the following error:
...before sed
2010-04-16 22:14:49.289 GMT : Ung?ltige Antwort von Network Server: Keine ausrei
chenden Daten.

after sed
2010-04-16 22:14:49.289 GMT : Ung?ltige Antwort von Network Server: Keine ausrei
chenden Daten."	1	Bug	derby_triage10_5_2	4	Minor	6	Closed
12462302	HBASE	stack	Split doesn't handle IOExceptions when creating new region reference files	"I was testing an HDFS patch which had a bug in it, so it happened to throw an NPE during a split with the following trace:

2010-04-16 19:18:20,727 ERROR org.apache.hadoop.hbase.regionserver.CompactSplitThread: Compaction failed for region TestTable,-1945465867<1271449232310>,1271453785648
java.lang.NullPointerException
        at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.enqueueCurrentPacket(DFSClient.java:3124)
        at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.flushInternal(DFSClient.java:3220)
        at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.closeInternal(DFSClient.java:3306)
        at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.close(DFSClient.java:3255)
        at org.apache.hadoop.fs.FSDataOutputStream$PositionCache.close(FSDataOutputStream.java:61)
        at org.apache.hadoop.fs.FSDataOutputStream.close(FSDataOutputStream.java:86)
        at org.apache.hadoop.fs.FileSystem.createNewFile(FileSystem.java:560)
        at org.apache.hadoop.hbase.util.FSUtils.create(FSUtils.java:95)
        at org.apache.hadoop.hbase.io.Reference.write(Reference.java:129)
        at org.apache.hadoop.hbase.regionserver.StoreFile.split(StoreFile.java:498)
        at org.apache.hadoop.hbase.regionserver.HRegion.splitRegion(HRegion.java:682)
        at org.apache.hadoop.hbase.regionserver.CompactSplitThread.split(CompactSplitThread.java:162)
        at org.apache.hadoop.hbase.regionserver.CompactSplitThread.run(CompactSplitThread.java:95)

After that, my region was gone, any further writes to it would fail."	1	Bug	moved_from_0_20_5	1	Blocker	6	Closed
12462309	OFBIZ	jacques.le.roux	Error in polling JobSandbox, Exception: java.lang.OutOfMemoryError when using an EAR into the JBoss5.0	"Hi,

I am using the Ofbiz Release 9.04 stable version.

I am getting this error on simultaneously creating New Customers for the ecommerce site - for 20 users
==============================================================================================================
Error in polling JobSandbox: [org.ofbiz.entity.transaction.GenericTransactionException: Not Supported error, could not begin transaction (probably a nesting problem) (BaseTransaction.checkTransactionState - [com.arjuna.ats.internal.jta.transaction.arjunacore.alreadyassociated] [com.arjuna.ats.internal.jta.transaction.arjunacore.alreadyassociated] thread is already associated with a transaction!)]. Rolling back transaction.
Exception: org.ofbiz.entity.transaction.GenericTransactionException
Message: Not Supported error, could not begin transaction (probably a nesting problem) (BaseTransaction.checkTransactionState - [com.arjuna.ats.internal.jta.transaction.arjunacore.alreadyassociated] [com.arjuna.ats.internal.jta.transaction.arjunacore.alreadyassociated] thread is already associated with a transaction!)
---- cause ---------------------------------------------------------------------
Exception: javax.transaction.NotSupportedException
Message: BaseTransaction.checkTransactionState - [com.arjuna.ats.internal.jta.transaction.arjunacore.alreadyassociated] [com.arjuna.ats.internal.jta.transaction.arjunacore.alreadyassociated] thread is already associated with a transaction!
---- stack trace ---------------------------------------------------------------
javax.transaction.NotSupportedException: BaseTransaction.checkTransactionState - [com.arjuna.ats.internal.jta.transaction.arjunacore.alreadyassociated] [com.arjuna.ats.internal.jta.transaction.arjunacore.alreadyassociated] thread is already associated with a transaction!
com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.begin(BaseTransaction.java:80)
com.arjuna.ats.jbossatx.BaseTransactionManagerDelegate.begin(BaseTransactionManagerDelegate.java:65)
org.jboss.tm.usertx.client.ServerVMClientUserTransaction.begin(ServerVMClientUserTransaction.java:137)
org.ofbiz.entity.transaction.TransactionUtil.begin(TransactionUtil.java:125)
org.ofbiz.entity.transaction.TransactionUtil.begin(TransactionUtil.java:81)
org.ofbiz.service.job.JobManager.poll(JobManager.java:148)
org.ofbiz.service.job.JobPoller.run(JobPoller.java:90)
java.lang.Thread.run(Thread.java:619)
--------------------------------------------------------------------------------

16:27:18,249 ERROR [TransactionUtil] 
---- exception report ----------------------------------------------------------
WARNING: In setSetRollbackOnlyCause a stack placeholder was already in place, here is the original rollbackOnly cause: Error in polling JobSandbox: [org.ofbiz.entity.transaction.GenericTransactionException: Not Supported error, could not begin transaction (probably a nesting problem) (BaseTransaction.checkTransactionState - [com.arjuna.ats.internal.jta.transaction.arjunacore.alreadyassociated] [com.arjuna.ats.internal.jta.transaction.arjunacore.alreadyassociated] thread is already associated with a transaction!)]. Rolling back transaction.org.ofbiz.entity.transaction.GenericTransactionException: Not Supported error, could not begin transaction (probably a nesting problem) (BaseTransaction.checkTransactionState - [com.arjuna.ats.internal.jta.transaction.arjunacore.alreadyassociated] [com.arjuna.ats.internal.jta.transaction.arjunacore.alreadyassociated] thread is already associated with a transaction!)
Exception: org.ofbiz.entity.transaction.GenericTransactionException
Message: Not Supported error, could not begin transaction (probably a nesting problem) (BaseTransaction.checkTransactionState - [com.arjuna.ats.internal.jta.transaction.arjunacore.alreadyassociated] [com.arjuna.ats.internal.jta.transaction.arjunacore.alreadyassociated] thread is already associated with a transaction!)
---- cause ---------------------------------------------------------------------
Exception: javax.transaction.NotSupportedException
Message: BaseTransaction.checkTransactionState - [com.arjuna.ats.internal.jta.transaction.arjunacore.alreadyassociated] [com.arjuna.ats.internal.jta.transaction.arjunacore.alreadyassociated] thread is already associated with a transaction!
---- stack trace ---------------------------------------------------------------
javax.transaction.NotSupportedException: BaseTransaction.checkTransactionState - [com.arjuna.ats.internal.jta.transaction.arjunacore.alreadyassociated] [com.arjuna.ats.internal.jta.transaction.arjunacore.alreadyassociated] thread is already associated with a transaction!
com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.begin(BaseTransaction.java:80)
com.arjuna.ats.jbossatx.BaseTransactionManagerDelegate.begin(BaseTransactionManagerDelegate.java:65)
org.jboss.tm.usertx.client.ServerVMClientUserTransaction.begin(ServerVMClientUserTransaction.java:137)
org.ofbiz.entity.transaction.TransactionUtil.begin(TransactionUtil.java:125)
org.ofbiz.entity.transaction.TransactionUtil.begin(TransactionUtil.java:81)
org.ofbiz.service.job.JobManager.poll(JobManager.java:148)
org.ofbiz.service.job.JobPoller.run(JobPoller.java:90)
java.lang.Thread.run(Thread.java:619)
--------------------------------------------------------------------------------













Also I am getting this OutOfMemory error when deployed in JBOSS 5.0.1
=============================================================
15:47:08,530 ERROR [JobManager] 
---- exception report ----------------------------------------------------------
Error in polling JobSandbox: [org.ofbiz.entity.transaction.GenericTransactionException: The current transaction is marked for rollback, not beginning a new transaction and aborting current operation; the rollbackOnly was caused by: Error in polling JobSandbox: [java.lang.OutOfMemoryError: unable to create new native thread]. Rolling back transaction.java.lang.OutOfMemoryError: unable to create new native thread (unable to create new native thread)]. Rolling back transaction.
Exception: org.ofbiz.entity.transaction.GenericTransactionException
Message: The current transaction is marked for rollback, not beginning a new transaction and aborting current operation; the rollbackOnly was caused by: Error in polling JobSandbox: [java.lang.OutOfMemoryError: unable to create new native thread]. Rolling back transaction.java.lang.OutOfMemoryError: unable to create new native thread (unable to create new native thread)
---- cause ---------------------------------------------------------------------
Exception: java.lang.OutOfMemoryError
Message: unable to create new native thread
---- stack trace ---------------------------------------------------------------
java.lang.OutOfMemoryError: unable to create new native thread
java.lang.Thread.start0(Native Method)
java.lang.Thread.start(Thread.java:597)
org.ofbiz.entity.transaction.GenericXaResource.start(GenericXaResource.java:97)
com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.enlistResource(TransactionImple.java:789)
com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.enlistResource(TransactionImple.java:500)
org.ofbiz.entity.transaction.GenericXaResource.enlist(GenericXaResource.java:67)
org.ofbiz.entity.transaction.GenericXaResource.enlist(GenericXaResource.java:50)
org.ofbiz.entity.transaction.DebugXaResource.enlist(DebugXaResource.java:50)
org.ofbiz.entity.transaction.TransactionUtil.begin(TransactionUtil.java:141)
org.ofbiz.entity.transaction.TransactionUtil.begin(TransactionUtil.java:81)
org.ofbiz.service.job.JobManager.poll(JobManager.java:148)
org.ofbiz.service.job.JobPoller.run(JobPoller.java:90)
java.lang.Thread.run(Thread.java:619)
--------------------------------------------------------------------------------

"	1	Bug	EAR, JBoss5.0	3	Major	6	Closed
12462329	PIVOT	gbrown	"Eliminate Container ""contextKey"" property"	"There is not a strong use case for this feature, since JSON paths can be used to bind to nested values; it also doesn't map well to the new bind type values.
"	4	Improvement	api-change	4	Minor	5	Resolved
12462333	PIVOT	gbrown	Use Object in Component#load() and Component#store() instead of Dictionary	"All components that support data binding currently use JSON.get() and put() to access bound values. These methods take an Object as the root value - values are wrapped in an instance of BeanDictionary as needed. As a result, passing a Dictionary to load()/store() isn't strictly necessary.

"	4	Improvement	api-change	4	Minor	5	Resolved
12462380	QPID	shuston	New sample to show how to specify WCF bindings in config files		4	Improvement	legacy-wcf-client	3	Major	6	Closed
12462426	XERCESC	bsk	UnixHTTPURLInputStream core-dumps	"Using SAX2XMLReader or SAXParser to parse following XML (note the tripple slashes) makes the application to core dump and a SEGV occurs in UnixHTTPURLInputStream::UnixHTTPURLInputStream() where function gethostbyname() is called

...
   const char * const xml =
      ""<?xml version='1.0' encoding='ISO-8859-1' standalone='no'?>""
      ""<!DOCTYPE root SYSTEM 'http:///server.org/dtd.dtd'>""
      ""<root/>"";
...

What happens is that the first (and only) argument to gethostbyname() is 0 (zero/null) and some inner machanism of gethostbyname() cannot handle that

I'm not sure what class/mechanism in XercesC is to blame though ?

It could be XMLURL::XMLURL() that doesn't throw because of an invalid URL
It could be XMLURL::getHost() that returns 0 instead of an empty XMLCh-sequence
It could be XMLString::transcode() that doesn't complain when transcoding a null-XMLCh-sequence
It could be ArrayJanoitor::ArrayJanoitor() that doesn't complain about that an unnecessary assignment has ben given to it
It could be UnixHTTPURLInputStream::UnixHTTPURLInputStream() that tries to operate on a null-char-array
It could be Solaris::gethostbyname() that doesn't have proper error-handling of input parameters (cannot be solved in this project though)

I haven't tried it with any of the DOMParsers, but I would guess that the behaviour would be similar if the same underlaying mechanisms are (re)used

"	1	Bug	segmentation_fault	3	Major	6	Closed
12462471	TS	danobi	Enable log rotation for diags.log	"(from yahoo bug 913896)


Original description
by Leif Hedstrom 3 years ago at 2006-12-04 12:42

There might be reasons why this file might get filled up, e.g. libraries used by plugins producing output on STDOUT/STDERR. A few suggestions have been
made, to somehow rotate traffic.out. One possible solution (suggested by Ryan) is to use cronolog (http://cronolog.org/), which seems like a fine idea.

		

 
Comment 1
 by Joseph Rothrock  2 years ago at 2007-10-17 09:13:24

Maybe consider rolling diags.log as well. -Feature enhancement.

		


Comment 2
 by Kevin Dalley 13 months ago at 2009-03-04 15:32:18

When traffic.out gets filled up, error.log stops filing up, even though rotation is turned on. This is
counter-intuitive.  Rotation does not control traffic.out, but a large traffic.out will stop error.log from being
written.
		"	4	Improvement	newbie	3	Major	6	Closed
12462472	HBASE	tlipcon	Concurrent flushers in HLog sync using HDFS-895	"HDFS-895 changes hflush() to be able to run concurrently from multiple threads, where flushes can be concurrent with further writes to the same file.

We need to rip out/amend the group commit code a bit to take advantage of this."	4	Improvement	moved_from_0_20_5	1	Blocker	6	Closed
12462476	HBASE	mingjielai	Improvements to prewarm META cache on clients	"A couple different use cases cause storms of reads to META during startup. For example, a large MR job will cause each map task to hit meta since it starts with an empty cache.

A couple possible improvements have been proposed:
 - MR jobs could ship a copy of META for the table in the DistributedCache
 - Clients could prewarm cache by doing a large scan of all the meta for the table instead of random reads for each miss
 - Each miss could fetch ahead some number of rows in META
"	4	Improvement	moved_from_0_20_5	3	Major	6	Closed
12462487	CASSANDRA	urandom	cassandra-cli doesn't work with system allowed column family names	"Given the following definitions for columns:

<Keyspaces>

<Keyspace Name=""NGram"">

<KeysCachedFraction>0.01</KeysCachedFraction>

<ColumnFamily CompareWith=""UTF8Type"" Name=""1GramR""/>

<ColumnFamily CompareWith=""UTF8Type"" Name=""1GramL""/>

</Keyspaces>

The appropriate keyspaces are created an persisteted on startup. When executing a query or a set operation in the cassandra-cli, you end up with the following error:

******************************************************

cassandra> get NGram.1GramR['hte']

line 1:10 extraneous input '1' expecting Identifier

No such column family: GramR

******************************************************


Following the syntax of the grammer we can see the following:

setStmt
: K_SET columnFamilyExpr '=' value -> ^(NODE_THRIFT_SET columnFamilyExpr value)
;

...

columnFamilyExpr
: table DOT columnFamily '[' rowKey ']'
( '[' a+=columnOrSuperColumn ']'
('[' a+=columnOrSuperColumn ']')?
)?
-> ^(NODE_COLUMN_ACCESS table columnFamily rowKey ($a+)?)
;
...

// syntactic Elements
Identifier
: Letter ( Alnum | '_' )*
;

There is a mismatch on what is appropriate values for this in the system. So either the restriction needs to be lifted in the cli, or the system must have a way of honoring the names."	1	Bug	cassandra-cli	10003	Low	5	Resolved
12462488	TS	zwoop	DNS and resolvers improvements	"(was yahoo bug 1542263)


Original description
by Leif Hedstrom 2 years ago at 2007-10-16 17:00

There are two options to configure/manage how TS finds resolvers via records.config:

   CONFIG proxy.config.dns.round_robin_nameservers INT 0
   CONFIG proxy.config.dns.nameservers STRING NULL

Without these set, TS will simply ""parse"" /etc/resolv.conf, to find nameserver/resolver entries. This is
fine. However, there are a few things that are ""broken"" or could be improved with the two options above:

1) If you want to do ""round robin"" over your resolvers, you must also explicitly define the set of servers in
the dns.nameservers config. There is no way to have it round robin over the default resolvers from /etc/resolv.conf.

2) You can not set an explicit set of dns.nameservers, without also making them be used in a round robin fashion. This
is highly undesirable for instance if you want to use a local resolver first (listening on 127.0.0.1), but fall
back to a set of regular resolvers.

3) Once listing explicit dns.nameservers, there is no way to have it also add the implicit resolvers from
/etc/resolv.conf. It'd be very useful if you could ""include"" an external filename as part of the nameservers
list, e.g.

    ""127.0.0.1,/etc/resolv.conf""


I'd suggest we separate the intertwined relationship between the two options, which would solve issues #1 and #2. As a
bonus feature, we should be able to either implement the flexibility of #3, or at least make it possible (via a new
config option) to include /etc/resolv.conf resolvers even when dns.nameservers is set.

Marking this as an RFE, as it's not exactly a bug, but it's still somewhat critical for us to support this properly.

		

Comment 1
 by Yung-Zen Lai  21 months ago at 2008-07-09 18:56:24

Per issue #2, ""proxy.config.dns.nameservers"" config currently only works while setting ""CONFIG
proxy.config.dns.round_robin_nameservers INT 1"".  Even only one dns.nameservers is set.  It seems not that make
sense. ^^a

		"	4	Improvement	DNS, Round_Robin, nameservers	4	Minor	6	Closed
12462489	GERONIMO	drwoods	"Annoying ""access denied"" security exceptions for oenwebbeans while java2 security is enabled."	"Hello neighbors, I am from the openwebbean project. while I am fixing owb-312 (https://issues.apache.org/jira/browse/OWB-312), I found some of AccessControlExceptions are fired fom javax.enterprise.util.AnnotationLiteral in jcdi api. 

Fixing the issue in OWB will be nasty since it is referenced all over the owb code.
Could we add doPrivileged block around Class.setAccess() and getDeclaredMethods calls in this class? 

Thanks in advnace.
"	1	Bug	jcdi	4	Minor	4	Reopened
12462491	TS	bcall	Add switch to disable config file generation/runtime behavior changing	"(was yahoo bug 1863676)

Original description
by Michael S. Fischer  2 years ago at 2008-04-09 09:52

In production, in order to improve site stability, it is imperative that TS never accidentally overwrite its own
configuration files.  

For this reason, we'd like to request a switch be added to TS, preferably via the command line, that disables all
automatic configuration file generation or other  runtime behavioral changes initiated by any form of IPC other than
'traffic_line -x'  (including the web interface, etc.)

		

 
Comment 1
 by Bjornar Sandvik 2 years ago at 2008-04-09 09:57:17

A very crucial request, in my opinion. If TS needs to be able to read command-line config changes on the fly, these
changes should be stored in another config file (for example remap.config.local instead of remap.config). We have a
patch config package that overwrites 4 of the config files under /home/conf/ts/, and with all packages 
we'd like to think that the content of these files can't change outside our control.

		 
Comment 2
 by Bryan Call  2 years ago at 2008-04-09 11:02:46

traffic_line -x doesn't modify the configuration, it reloads the configuration files.  If we want to have an option for
this it would be good to have it as an option configuration file (CONFIG proxy.config.write_protect INT 1).

It would be an equivalent of write protecting floppies (ahh the memories)...

		

 
Comment 3
 by Michael S. Fischer  2 years ago at 2008-04-09 11:09:09

I don't think it would be a good idea to have this in the configuration file, as it would introduce a chicken/egg
problem.

		

 
Comment 4
 by Leif Hedstrom 19 months ago at 2008-08-27 12:43:17

So I'm not 100% positive that this isn't just a bad interaction. Now, it's only
triggered when trafficserver is running, but usually what ends up happening is that we get a records.config which
looks like it's the default config that comes with the trafficserver package.

It's possible it's all one and the same issue, or we might have two issues.

		"	4	Improvement	A, yahoo	4	Minor	6	Closed
12462512	CXF	dkulp	CLONE -OutOfMemoryError with many service endpoints	"I am deploying 5 WAR files in my Tomcat server. They together expose multiple endpoints (60+), each of which publish a simple WSDL.

When the server is started, performance with many concurrent service calls degrades and memory consumption increases steadily, ultimately leading to an OutOfMemoryException.

In a simple test it showed that simply displaying the service endpoints exposed WSDL in the browser is sufficient to trigger the OutOfMemoryError. Earlier, our application was using JAXWS and it used to work fine.

Screenshot using jVisualVM is attached. Following is the exception stacktrace:

{code}
WARNING: Application {http://schemas.xmlsoap.org/ws/2004/08/eventing}ws-eventing-service#{http://schemas.xmlsoap.org/ws/2004/08/eventing}SubscribeOp has thrown exception, unwinding now
org.apache.cxf.interceptor.Fault: Java heap space
	at org.apache.cxf.service.invoker.AbstractInvoker.createFault(AbstractInvoker.java:155)
	at org.apache.cxf.jaxws.AbstractJAXWSMethodInvoker.createFault(AbstractJAXWSMethodInvoker.java:85)
	at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:121)
	at org.apache.cxf.jaxws.JAXWSMethodInvoker.invoke(JAXWSMethodInvoker.java:60)
	at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:75)
	at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
	at java.util.concurrent.FutureTask.run(FutureTask.java:138)
	at org.apache.cxf.workqueue.SynchronousExecutor.execute(SynchronousExecutor.java:37)
	at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:106)
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:243)
	at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:109)
	at org.apache.cxf.transport.servlet.ServletDestination.invoke(ServletDestination.java:98)
	at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:406)
	at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:178)
	at org.apache.cxf.transport.servlet.AbstractCXFServlet.invoke(AbstractCXFServlet.java:142)
	at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:179)
	at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:103)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
	at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:159)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)
	at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.OutOfMemoryError: Java heap space
	at java.util.Arrays.copyOfRange(Arrays.java:3209)
	at java.lang.String.<init>(String.java:215)
	at java.lang.String.copyValueOf(String.java:2880)
	at sun.net.www.MessageHeader.mergeHeader(MessageHeader.java:435)
	at sun.net.www.MessageHeader.parseHeader(MessageHeader.java:367)
	at sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:699)
	at sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:632)
	at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1072)
	at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:373)
	at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponseInternal(HTTPConduit.java:2110)
	at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponse(HTTPConduit.java:2087)
	at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1985)
	at org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:66)
	at org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:640)
	at org.apache.cxf.transport.TransportURIResolver.resolve(TransportURIResolver.java:112)
	at org.apache.cxf.catalog.CatalogXmlSchemaURIResolver.resolveEntity(CatalogXmlSchemaURIResolver.java:78)
	at org.apache.ws.commons.schema.SchemaBuilder.resolveXmlSchema(SchemaBuilder.java:1872)
	at org.apache.ws.commons.schema.SchemaBuilder.handleInclude(SchemaBuilder.java:1653)
	at org.apache.ws.commons.schema.SchemaBuilder.handleXmlSchemaElement(SchemaBuilder.java:219)
	at org.apache.ws.commons.schema.SchemaBuilder.build(SchemaBuilder.java:121)
	at org.apache.ws.commons.schema.XmlSchemaCollection.read(XmlSchemaCollection.java:509)
	at org.apache.ws.commons.schema.XmlSchemaCollection.read(XmlSchemaCollection.java:382)
	at org.apache.ws.commons.schema.SchemaBuilder.resolveXmlSchema(SchemaBuilder.java:1901)
	at org.apache.ws.commons.schema.SchemaBuilder.handleImport(SchemaBuilder.java:1615)
	at org.apache.ws.commons.schema.SchemaBuilder.handleXmlSchemaElement(SchemaBuilder.java:224)
	at org.apache.ws.commons.schema.XmlSchemaCollection.read(XmlSchemaCollection.java:523)
	at org.apache.cxf.common.xmlschema.SchemaCollection.read(SchemaCollection.java:182)
	at org.apache.cxf.wsdl11.SchemaUtil.extractSchema(SchemaUtil.java:133)
	at org.apache.cxf.wsdl11.SchemaUtil.getSchemas(SchemaUtil.java:81)
	at org.apache.cxf.wsdl11.SchemaUtil.getSchemas(SchemaUtil.java:65)
	at org.apache.cxf.wsdl11.SchemaUtil.getSchemas(SchemaUtil.java:60)
	at org.apache.cxf.wsdl11.WSDLServiceBuilder.getSchemas(WSDLServiceBuilder.java:357)
{code}"	1	Bug	TomcatWS	3	Major	6	Closed
12462518	PDFBOX	lehmi	PDTrueTypeFont limits number of glyph widths to 256. This can easily be removed.	"Currently the support for fonts with exotic glyphs are limited at best. Making PDFBox render chinese characters has proved to be a bit of a pain ... :-)

One blocker we ran into was the limitation of glyph widths to 256 individual widths. In PDTrueTypeFont.java, we find this in loadDescriptorDictionary():

            int firstChar = 0;
            int maxWidths=256;
            HorizontalMetricsTable hMet = ttf.getHorizontalMetrics();
            int[] widthValues = hMet.getAdvanceWidth();
            List widths = new ArrayList(maxWidths);

The ""int maxWidths=256"" affects the remaining code so glyph widths for codepoints larger than 256 are ignored. We found that there is no need to impose such a limitation, and that having it makes it impossible to generate a proper /W dictionary when generating a cidfonttype2. Simply replacing the hard coded value 256 with the following seems to be a perfectly usable solution:

            int firstChar = 0;
            //int maxWidths=256;  <---- No hard coded value
            int maxWidths = glyphToCCode.length;            // <---- rather use the counted number of codepoints
            HorizontalMetricsTable hMet = ttf.getHorizontalMetrics();
            int[] widthValues = hMet.getAdvanceWidth();
            List widths = new ArrayList(maxWidths);
            Integer zero = new Integer( 250 );

Is it possible to have this change added to 1.2.0?

Also we would be more than happy to contribute some code that shows how you can use PDFBox to produce PDF's containing special characters (asian, chinese etc) by using codepoint-to-glyph mapping and copy-paste working (/tounicode). The code allows API users to simply use UTF-8 strings and not worry about any of the tricky font handling details.

"	4	Improvement	utf-8	3	Major	6	Closed
12462537	CXF	dkulp	urls in service list	"On the service list, the endpoint urls are the address urls
and not the publishEndPointUrls.

So, if the web application is behind an http proxy, the urls on the
service list are bad.

"	1	Bug	address, endpoint, list, service, url	3	Major	6	Closed
12462564	HBASE	jdcryans	Splitting logs, we'll make an output file though the region no longer exists	"The ""human unit tester"" (Kannan) last night wondered what happens splitting logs and we come across an edit whose region has since been removed.  Taking a look, it looks like we'll create the output file and write the edits for the no-longer-extant region anyways.  This will leave litter in the filesystem -- region split files that will never be used nor removed.  This issue is about verifying that indeed this is whats happening (We do SequenceFile.createWriter with the overwrite flag set to true which tracing seems to mean create all intermediary directories -- to be verified) and if it indeed is happening, fixing split so unless the region dir exists, don't write out edits.. just drop them."	1	Bug	moved_from_0_20_5	3	Major	6	Closed
12462565	HBASE	stack	Directory of hdfs patches	Yesterday it was suggested that we ship with a directory laden with the ordained patches needed for hdfs.  Assigning myself.	4	Improvement	moved_from_0_20_5	3	Major	6	Closed
12462567	PDFBOX	lehmi	Error: Expected an integer type, actual='' -	"Hello,

The following exception is being thrown when attempting to parse a pdf document password protected using Adobe Acrobat 9 Pro:

Apr 7, 2010 2:53:22 PM org.apache.pdfbox.filter.FlateFilter decode
SEVERE: Stop reading corrupt stream
07-Apr-2010 14:53:22.829: WARNING: java.io.IOException: Error: Expected an integer type, actual=''
at org.apache.pdfbox.pdfparser.BaseParser.readInt(BaseParser.java:1275)
at org.apache.pdfbox.pdfparser.PDFObjectStreamParser.parse(PDFObjectStreamParser.java:81)
at org.apache.pdfbox.cos.COSDocument.dereferenceObjectStreams(COSDocument.java:449)
at org.apache.pdfbox.pdmodel.PDDocument.openProtection(PDDocument.java:1100)
at org.apache.pdfbox.pdmodel.PDDocument.decrypt(PDDocument.java:579)

I have the following libraries:

fontbox-1.1.0.jar
pdfbox-1.1.0.jar

Sample password protected file is attached.

Would appreciate if someone can help. 
Thank you

iglop


"	1	Bug	pdfbox	3	Major	6	Closed
12462592	PIVOT	gbrown	"Move TerraListViewSkin ""listSize"" style to intrinsic ListButton property"		4	Improvement	api-change	4	Minor	5	Resolved
